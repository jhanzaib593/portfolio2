;/*FB_PKG_DELIM*/

__d("WAWebMediaEditControllerGetters",["WAWebGetters","WAWebGettersCaches"],(function(a,b,c,d,e,f,g){a=d("WAWebGetters").createGetterFactories({createCache:d("WAWebGettersCaches").createMediaEditControllerCache});b=a.field;c=a.computed;e=a.clearCacheFor;f=e;d=b("stage");a=b("cropOverlay");e=b("mediaContainer");b=c(function(a){var b=a[0],c=a[1];a=a[2];return!!b&&!!c&&!!a},[d,a,e]);g.clearMediaEditControllerGetterCacheFor=f;g.getStage=d;g.getCropOverlay=a;g.getmMediaContainer=e;g.getIsInitialized=b}),98);
__d("WAWebWamEnumChannelForwardContentType",[],(function(a,b,c,d,e,f){a=Object.freeze({UPDATE:0,UPDATE_CARD:1});f.CHANNEL_FORWARD_CONTENT_TYPE=a}),66);
__d("WAWebWamEnumCtwaLabelTarget",[],(function(a,b,c,d,e,f){a=Object.freeze({CHAT:0,MESSAGE:1});f.CTWA_LABEL_TARGET=a}),66);
__d("WAWebWamEnumCtwaLabelType",[],(function(a,b,c,d,e,f){a=Object.freeze({NEW_ORDER:0,PENDING_PAYMENT:1,PAID:2,ORDER_COMPLETE:3});f.CTWA_LABEL_TYPE=a}),66);
__d("WAWebWamEnumWebContactListStartNewChatType",[],(function(a,b,c,d,e,f){a=Object.freeze({CONTACT:1,GROUP:2,CONTACTLESS:3});f.WEB_CONTACT_LIST_START_NEW_CHAT_TYPE=a}),66);
__d("WAWebCtwaLabelSignalWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumCtwaLabelTarget","WAWebWamEnumCtwaLabelType"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({CtwaLabelSignal:[4662,{ctwaLabelSignalVersion:[1,a.TYPES.INTEGER],ctwaLabelTarget:[2,d("WAWebWamEnumCtwaLabelTarget").CTWA_LABEL_TARGET],ctwaLabelType:[3,d("WAWebWamEnumCtwaLabelType").CTWA_LABEL_TYPE],deepLinkConversionData:[4,a.TYPES.STRING],deepLinkConversionSource:[5,a.TYPES.STRING],eventSharingSettingEnabled:[6,a.TYPES.BOOLEAN],globalSharingSettingEnabled:[7,a.TYPES.BOOLEAN]},[1,1,1],"regular"]});g.CtwaLabelSignalWamEvent=b}),98);
__d("WAWebPsChannelPostForwardWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumChannelForwardContentType","WAWebWamEnumMediaType","WAWebWamEnumMessageChatType"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({PsChannelPostForward:[4746,{channelForwardContentType:[6,d("WAWebWamEnumChannelForwardContentType").CHANNEL_FORWARD_CONTENT_TYPE],channelForwardGroupType:[1,d("WAWebWamEnumMessageChatType").MESSAGE_CHAT_TYPE],cid:[2,d("WAWebWamCodegenUtils").TYPES.STRING],mediaType:[3,d("WAWebWamEnumMediaType").MEDIA_TYPE],postId:[4,d("WAWebWamCodegenUtils").TYPES.STRING]},[1,1,1],"private",0]});g.PsChannelPostForwardWamEvent=a}),98);
__d("WAWebWebContactListStartNewChatWamEvent",["WAWebWamCodegenUtils","WAWebWamEnumWebContactListStartNewChatType"],(function(a,b,c,d,e,f,g){a=d("WAWebWamCodegenUtils").defineEvents({WebContactListStartNewChat:[4560,{webContactListStartNewChatSearch:[1,d("WAWebWamCodegenUtils").TYPES.BOOLEAN],webContactListStartNewChatType:[2,d("WAWebWamEnumWebContactListStartNewChatType").WEB_CONTACT_LIST_START_NEW_CHAT_TYPE]},[1,1,1],"regular"]});g.WebContactListStartNewChatWamEvent=a}),98);
__d("WAWebWebcMediaEditorSendWamEvent",["WAWebWamCodegenUtils"],(function(a,b,c,d,e,f,g){b=(a=d("WAWebWamCodegenUtils")).defineEvents({WebcMediaEditorSend:[2890,{blurImageCount:[7,a.TYPES.INTEGER],editedImageCount:[2,a.TYPES.INTEGER],emojiLayerCount:[5,a.TYPES.INTEGER],imageCount:[1,a.TYPES.INTEGER],paintedImageCount:[3,a.TYPES.INTEGER],stickerLayerCount:[6,a.TYPES.INTEGER],textLayerCount:[4,a.TYPES.INTEGER]},[1,1,1],"regular"]});g.WebcMediaEditorSendWamEvent=b}),98);
__d("WAWebNewChatMetricUtils",["WATimeUtils","WAWebChatConstants","WAWebChatThreadLogging","WAWebWebContactListStartNewChatWamEvent"],(function(a,b,c,d,e,f,g){function a(a){var b=a.isSearchResult;a=a.chatType;new(d("WAWebWebContactListStartNewChatWamEvent").WebContactListStartNewChatWamEvent)({webContactListStartNewChatSearch:b,webContactListStartNewChatType:a}).commit()}function b(a){var b=!(a.msgs.some(function(a){return a.isRealMessage()})||a.endOfHistoryTransferType===d("WAWebChatConstants").ConversationEndOfHistoryTransferModelPropType.INCOMPLETE);b&&d("WAWebChatThreadLogging").handleActivitiesForChatThreadLogging([{activityType:"viaContactlessChats",ts:d("WATimeUtils").unixTime(),chatId:a.id,boolValue:!0}])}g.logContactListStartNewChatAction=a;g.logInitiatedContactlessChat=b}),98);
__d("WAWebSmbMarkAsXLabelAction",["WALogger","WASmaxInBizSettingsEnums","WAWebBizGatingUtils","WAWebCTWADataSharingModel","WAWebChatModel","WAWebCommonCTWADataSharing","WAWebCtwaLabelSignalWamEvent","WAWebFrontendMsgGetters","WAWebLabelCollection","WAWebMsgModel","WAWebWamEnumCtwaLabelTarget","WAWebWamEnumCtwaLabelType"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["[ctwa][labels] logLabelAddedToMessageAction: chat is missing for a provided message"]);h=function(){return a};return a}a={NEW_ORDER:2,PENDING_PAYMENT:3,PAID:4,ORDER_COMPLETE:5};var i=new Map([[a.NEW_ORDER,(b=d("WAWebWamEnumCtwaLabelType")).CTWA_LABEL_TYPE.NEW_ORDER],[a.PENDING_PAYMENT,b.CTWA_LABEL_TYPE.PENDING_PAYMENT],[a.PAID,b.CTWA_LABEL_TYPE.PAID],[a.ORDER_COMPLETE,b.CTWA_LABEL_TYPE.ORDER_COMPLETE]]),j={globalSharingSettingEnabled:!1},k=function(a){var b=d("WAWebCTWADataSharingModel").CTWADataSharingModel.getValue();switch(b){case d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE["true"]:return{globalSharingSettingEnabled:!0,eventSharingSettingEnabled:a};case d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE["false"]:return j;case d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE.notset:default:return null}},l=function(a,b,e){var f=c("WAWebCommonCTWADataSharing").getCTWAEligibilityFromChat(a);if(f==null||!d("WAWebBizGatingUtils").isSMBLabelsDataSharingEnabledForChats())return;b.forEach(function(a){a=babelHelpers["extends"]({ctwaLabelSignalVersion:1,ctwaLabelTarget:d("WAWebWamEnumCtwaLabelTarget").CTWA_LABEL_TARGET.CHAT,ctwaLabelType:a,deepLinkConversionSource:f.source},k(e));d("WAWebBizGatingUtils").is3pdConversionEnabled()===!1&&(a.deepLinkConversionData=f.data);new(d("WAWebCtwaLabelSignalWamEvent").CtwaLabelSignalWamEvent)(a).commit()})},m=function(a,b,e){a=d("WAWebFrontendMsgGetters").getChat(a);if(!a){d("WALogger").ERROR(h());return}var f=c("WAWebCommonCTWADataSharing").getCTWAEligibilityFromChat(a);if(f==null||!d("WAWebBizGatingUtils").isSMBLabelsDataSharingEnabledForMessages())return;b.forEach(function(a){new(d("WAWebCtwaLabelSignalWamEvent").CtwaLabelSignalWamEvent)(babelHelpers["extends"]({ctwaLabelSignalVersion:1,ctwaLabelTarget:d("WAWebWamEnumCtwaLabelTarget").CTWA_LABEL_TARGET.MESSAGE,ctwaLabelType:a,deepLinkConversionData:f.data,deepLinkConversionSource:f.source},k(e))).commit()})};e=function(a,b,c){var e=[];b.forEach(function(a){a=d("WAWebLabelCollection").LabelCollection.get(a);a=a==null?void 0:a.predefinedId;if(a==null)return;a=i.get(a);a!=null&&e.push(a)});if(e.length===0)return;if(a[0]instanceof d("WAWebMsgModel").Msg){m(a[0],e,c);return}a.forEach(function(a){a instanceof d("WAWebChatModel").Chat&&l(a,e,c)})};g.logLabelSignalForModels=e}),98);
__d("WAWebHDPhotoMediaEditorDropdown",["fbt","WAWebAttachMediaModel","WAWebDropdown.react","WAWebDropdownItem.react","WAWebL10nFilesize","WAWebText.react","WAWebUISpacing","react","stylex"],(function(a,b,c,d,e,f,g,h){var i,j,k;b=k||d("react");var l=i||(i=c("react"));e=b.forwardRef;var m=b.useCallback,n={dropdownInfo:{borderTop:"x1v7dy8y",$$css:!0}},o={dropdownItemStandardQuality:function(){return h._("__JHASH__d3U9JYGho0k__JHASH__")},dropdownItemHDQuality:function(){return h._("__JHASH__nOALVLQk0Z1__JHASH__")},dropdownInfo:function(){return h._("__JHASH__HdP4EJX7msA__JHASH__")}};function p(a){var b=a.height,c=a.size,e=a.title;a=a.width;return l.jsxs("div",{children:[l.jsx(d("WAWebText.react").TextDiv,{theme:"title",children:e}),c!=null&&a!=null&&b!=null&&l.jsx(d("WAWebText.react").TextDiv,{theme:"plain",color:"secondary",children:h._("__JHASH__4JL7FHugxLp__JHASH__",[h._param("filesize",d("WAWebL10nFilesize").getL10nFilesize(c)),h._param("width",a),h._param("height",b)])})]})}p.displayName=p.name+" [from "+f.id+"]";function a(a,b){var e=a.selectedQuality,f=a.onChangeQuality,g=m(function(){e!==d("WAWebAttachMediaModel").MediaQuality.Standard&&f(d("WAWebAttachMediaModel").MediaQuality.Standard)},[f,e]),h=m(function(){e!==d("WAWebAttachMediaModel").MediaQuality.HD&&f(d("WAWebAttachMediaModel").MediaQuality.HD)},[f,e]),i=a.metadataByQuality.get(d("WAWebAttachMediaModel").MediaQuality.HD);a=a.metadataByQuality.get(d("WAWebAttachMediaModel").MediaQuality.Standard);return l.jsxs(d("WAWebDropdown.react").Dropdown,{ref:b,flipOnRTL:!0,type:d("WAWebDropdown.react").MenuType.Dropdown,testid:void 0,children:[l.jsx(d("WAWebDropdownItem.react").DropdownItem,{addSpacing:!0,fixedHeight:!1,xstyle:[d("WAWebUISpacing").uiPadding.top16,d("WAWebUISpacing").uiPadding.bottom16],selected:e===d("WAWebAttachMediaModel").MediaQuality.Standard,testid:void 0,action:g,children:l.jsx(p,babelHelpers["extends"]({},a,{title:o.dropdownItemStandardQuality()}))}),l.jsx(d("WAWebDropdownItem.react").DropdownItem,{addSpacing:!0,fixedHeight:!1,xstyle:[d("WAWebUISpacing").uiPadding.top16,d("WAWebUISpacing").uiPadding.bottom16],selected:e===d("WAWebAttachMediaModel").MediaQuality.HD,testid:void 0,action:h,children:l.jsx(p,babelHelpers["extends"]({},i,{title:o.dropdownItemHDQuality()}))}),l.jsx(d("WAWebText.react").TextDiv,{theme:"muted",className:(j||(j=c("stylex")))(n.dropdownInfo,d("WAWebUISpacing").uiPadding.top16,d("WAWebUISpacing").uiPadding.start16,d("WAWebUISpacing").uiPadding.end16,d("WAWebUISpacing").uiPadding.bottom7),children:o.dropdownInfo()})]})}a.displayName=a.name+" [from "+f.id+"]";b=e(a);g["default"]=b}),98);
__d("WAWebLogNewsletterMessageForward",["WAWebGetMessageChatTypeFromWid","WAWebMsgGetters","WAWebPsChannelPostForwardWamEvent"],(function(a,b,c,d,e,f,g){function a(a,b){var c;c=d("WAWebMsgGetters").getIsNewsletterMsg(a)?a.id.remote:(c=a.forwardedNewsletterMessageInfo)==null?void 0:c.newsletterId;var e=a.getWamMediaType();a=d("WAWebMsgGetters").getIsNewsletterMsg(a)?a.serverId:(a=a.forwardedNewsletterMessageInfo)==null?void 0:a.serverMessageId;for(var f=0;f<b.length;f++){var g=b[f];g=d("WAWebGetMessageChatTypeFromWid").getMessageChatTypeFromWid(g.id);g=new(d("WAWebPsChannelPostForwardWamEvent").PsChannelPostForwardWamEvent)({cid:c==null?void 0:c.user,channelForwardGroupType:g,mediaType:e,postId:a==null?void 0:a.toString()});g.commit()}}g.logNewsletterMessagForward=a}),98);
__d("WAWeb-easeljs",[],(function(b,c,d,e,f,g){var h=h||{};h.extend=function(b,c){"use strict";function d(){this.constructor=b}return d.prototype=c.prototype,b.prototype=new d()},h=h||{},h.promote=function(b,c){"use strict";var d=b.prototype,e=Object.getPrototypeOf&&Object.getPrototypeOf(d)||d.__proto__;if(e){d[(c+="_")+"constructor"]=e.constructor;for(var f in e)Object.prototype.hasOwnProperty.call(d,f)&&"function"==typeof e[f]&&(d[c+f]=e[f])}return b},h=h||{},h.indexOf=function(b,c){"use strict";for(var d=0,e=b.length;e>d;d++)if(c===b[d])return d;return-1},h=h||{},(function(){"use strict";function b(b,c,d){this.type=b,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!c,this.cancelable=!!d,this.timeStamp=new Date().getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var c=b.prototype;c.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},c.stopPropagation=function(){this.propagationStopped=!0},c.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},c.remove=function(){this.removed=!0},c.clone=function(){return new b(this.type,this.bubbles,this.cancelable)},c.set=function(b){for(var c in b)this[c]=b[c];return this},c.toString=function(){return"[Event (type="+this.type+")]"},h.Event=b})(),h=h||{},(function(){"use strict";function b(){this._listeners=null,this._captureListeners=null}var c=b.prototype;b.initialize=function(b){b.addEventListener=c.addEventListener,b.on=c.on,b.removeEventListener=b.off=c.removeEventListener,b.removeAllEventListeners=c.removeAllEventListeners,b.hasEventListener=c.hasEventListener,b.dispatchEvent=c.dispatchEvent,b._dispatchEvent=c._dispatchEvent,b.willTrigger=c.willTrigger},c.addEventListener=function(b,c,d){var e;e=d?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var f=e[b];return f&&this.removeEventListener(b,c,d),f=e[b],f?f.push(c):e[b]=[c],c},c.on=function(b,c,d,e,f,g){return c.handleEvent&&(d=d||c,c=c.handleEvent),d=d||this,this.addEventListener(b,function(b){c.call(d,b,f),e&&b.remove()},g)},c.removeEventListener=function(b,c,d){d=d?this._captureListeners:this._listeners;if(d){var e=d[b];if(e)for(var f=0,g=e.length;g>f;f++)if(e[f]==c){1==g?delete d[b]:e.splice(f,1);break}}},c.off=c.removeEventListener,c.removeAllEventListeners=function(b){b?(this._listeners&&delete this._listeners[b],this._captureListeners&&delete this._captureListeners[b]):this._listeners=this._captureListeners=null},c.dispatchEvent=function(b,c,d){if("string"==typeof b){var e=this._listeners;if(!(c||e&&e[b]))return!0;b=new h.Event(b,c,d)}else b.target&&b.clone&&(b=b.clone());try{b.target=this}catch(b){}if(b.bubbles&&this.parent){for(e=this,c=[e];e.parent;)c.push(e=e.parent);d=c.length;for(e=d-1;e>=0&&!b.propagationStopped;e--)c[e]._dispatchEvent(b,1+(0==e));for(e=1;d>e&&!b.propagationStopped;e++)c[e]._dispatchEvent(b,3)}else this._dispatchEvent(b,2);return!b.defaultPrevented},c.hasEventListener=function(b){var c=this._listeners,d=this._captureListeners;return!!(c&&c[b]||d&&d[b])},c.willTrigger=function(b){for(var c=this;c;){if(c.hasEventListener(b))return!0;c=c.parent}return!1},c.toString=function(){return"[EventDispatcher]"},c._dispatchEvent=function(b,c){var d,e=1==c?this._captureListeners:this._listeners;if(b&&e){e=e[b.type];if(!e||!(d=e.length))return;try{b.currentTarget=this}catch(b){}try{b.eventPhase=c}catch(b){}b.removed=!1,e=e.slice();for(var f=0;d>f&&!b.immediatePropagationStopped;f++){var g=e[f];g.handleEvent?g.handleEvent(b):g(b),b.removed&&(this.off(b.type,g,1==c),b.removed=!1)}}},h.EventDispatcher=b})(),h=h||{},(function(){"use strict";function b(){throw"Ticker cannot be instantiated."}b.RAF_SYNCHED="synched",b.RAF="raf",b.TIMEOUT="timeout",b.useRAF=!1,b.timingMode=null,b.maxDelta=0,b.paused=!1,b.removeEventListener=null,b.removeAllEventListeners=null,b.dispatchEvent=null,b.hasEventListener=null,b._listeners=null,h.EventDispatcher.initialize(b),b._addEventListener=b.addEventListener,b.addEventListener=function(){return!b._inited&&b.init(),b._addEventListener.apply(b,arguments)},b._inited=!1,b._startTime=0,b._pausedTime=0,b._ticks=0,b._pausedTicks=0,b._interval=50,b._lastTime=0,b._times=null,b._tickTimes=null,b._timerId=null,b._raf=!0,b.setInterval=function(c){b._interval=c,b._inited&&b._setupTick()},b.getInterval=function(){return b._interval},b.setFPS=function(c){b.setInterval(1e3/c)},b.getFPS=function(){return 1e3/b._interval};try{Object.defineProperties(b,{interval:{get:b.getInterval,set:b.setInterval},framerate:{get:b.getFPS,set:b.setFPS}})}catch(b){}b.init=function(){b._inited||(b._inited=!0,b._times=[],b._tickTimes=[],b._startTime=b._getTime(),b._times.push(b._lastTime=0),b.interval=b._interval)},b.reset=function(){if(b._raf){var c=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;c&&c(b._timerId)}else clearTimeout(b._timerId);b.removeAllEventListeners("tick"),b._timerId=b._times=b._tickTimes=null,b._startTime=b._lastTime=b._ticks=0,b._inited=!1},b.getMeasuredTickTime=function(d){var c=0,e=b._tickTimes;if(!e||e.length<1)return-1;d=Math.min(e.length,d||0|b.getFPS());for(var f=0;d>f;f++)c+=e[f];return c/d},b.getMeasuredFPS=function(d){var c=b._times;return!c||c.length<2?-1:(d=Math.min(c.length-1,d||0|b.getFPS()),1e3/((c[0]-c[d])/d))},b.setPaused=function(c){b.paused=c},b.getPaused=function(){return b.paused},b.getTime=function(c){return b._startTime?b._getTime()-(c?b._pausedTime:0):-1},b.getEventTime=function(c){return b._startTime?(b._lastTime||b._startTime)-(c?b._pausedTime:0):-1},b.getTicks=function(c){return b._ticks-(c?b._pausedTicks:0)},b._handleSynch=function(){b._timerId=null,b._setupTick(),b._getTime()-b._lastTime>=.97*(b._interval-1)&&b._tick()},b._handleRAF=function(){b._timerId=null,b._setupTick(),b._tick()},b._handleTimeout=function(){b._timerId=null,b._setupTick(),b._tick()},b._setupTick=function(){if(null==b._timerId){var d=b.timingMode||b.useRAF&&b.RAF_SYNCHED;if(d==b.RAF_SYNCHED||d==b.RAF){var c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(c)return b._timerId=c(d==b.RAF?b._handleRAF:b._handleSynch),void (b._raf=!0)}b._raf=!1,b._timerId=setTimeout(b._handleTimeout,b._interval)}},b._tick=function(){var d=b.paused,c=b._getTime(),e=c-b._lastTime;if(b._lastTime=c,b._ticks++,d&&(b._pausedTicks++,b._pausedTime+=e),b.hasEventListener("tick")){var f=new h.Event("tick"),g=b.maxDelta;f.delta=g&&e>g?g:e,f.paused=d,f.time=c,f.runTime=c-b._pausedTime,b.dispatchEvent(f)}for(b._tickTimes.unshift(b._getTime()-c);b._tickTimes.length>100;)b._tickTimes.pop();for(b._times.unshift(c);b._times.length>100;)b._times.pop()};var c=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);b._getTime=function(){return(c&&c.call(performance)||new Date().getTime())-b._startTime},h.Ticker=b})(),h=h||{},(function(){"use strict";function b(){throw"UID cannot be instantiated"}b._nextID=0,b.get=function(){return b._nextID++},h.UID=b})(),h=h||{},(function(){"use strict";function b(b,c,d,e,f,g,h,i,j,k,l){this.Event_constructor(b,c,d),this.stageX=e,this.stageY=f,this.rawX=null==j?e:j,this.rawY=null==k?f:k,this.nativeEvent=g,this.pointerID=h,this.primary=!!i,this.relatedTarget=l}var c=h.extend(b,h.Event);c._get_localX=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).x},c._get_localY=function(){return this.currentTarget.globalToLocal(this.rawX,this.rawY).y},c._get_isTouch=function(){return-1!==this.pointerID};try{Object.defineProperties(c,{localX:{get:c._get_localX},localY:{get:c._get_localY},isTouch:{get:c._get_isTouch}})}catch(b){}c.clone=function(){return new b(this.type,this.bubbles,this.cancelable,this.stageX,this.stageY,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)},c.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"},h.MouseEvent=h.promote(b,"Event")})(),h=h||{},(function(){"use strict";function b(b,c,d,e,f,g){this.setValues(b,c,d,e,f,g)}var c=b.prototype;b.DEG_TO_RAD=Math.PI/180,b.identity=null,c.setValues=function(b,c,d,e,f,g){return this.a=null==b?1:b,this.b=c||0,this.c=d||0,this.d=null==e?1:e,this.tx=f||0,this.ty=g||0,this},c.append=function(b,c,d,e,f,g){var h=this.a,i=this.b,j=this.c,k=this.d;return(1!=b||0!=c||0!=d||1!=e)&&(this.a=h*b+j*c,this.b=i*b+k*c,this.c=h*d+j*e,this.d=i*d+k*e),this.tx=h*f+j*g+this.tx,this.ty=i*f+k*g+this.ty,this},c.prepend=function(b,c,d,e,f,g){var h=this.a,i=this.c,j=this.tx;return this.a=b*h+d*this.b,this.b=c*h+e*this.b,this.c=b*i+d*this.d,this.d=c*i+e*this.d,this.tx=b*j+d*this.ty+f,this.ty=c*j+e*this.ty+g,this},c.appendMatrix=function(b){return this.append(b.a,b.b,b.c,b.d,b.tx,b.ty)},c.prependMatrix=function(b){return this.prepend(b.a,b.b,b.c,b.d,b.tx,b.ty)},c.appendTransform=function(c,d,e,f,g,h,i,j,k){if(g%360)var g=g*b.DEG_TO_RAD,l=Math.cos(g),g=Math.sin(g);else l=1,g=0;return h||i?(h*=b.DEG_TO_RAD,i*=b.DEG_TO_RAD,this.append(Math.cos(i),Math.sin(i),-Math.sin(h),Math.cos(h),c,d),this.append(l*e,g*e,-g*f,l*f,0,0)):this.append(l*e,g*e,-g*f,l*f,c,d),(j||k)&&(this.tx-=j*this.a+k*this.c,this.ty-=j*this.b+k*this.d),this},c.prependTransform=function(c,d,e,f,g,h,i,j,k){if(g%360)var g=g*b.DEG_TO_RAD,l=Math.cos(g),g=Math.sin(g);else l=1,g=0;return(j||k)&&(this.tx-=j,this.ty-=k),h||i?(h*=b.DEG_TO_RAD,i*=b.DEG_TO_RAD,this.prepend(l*e,g*e,-g*f,l*f,0,0),this.prepend(Math.cos(i),Math.sin(i),-Math.sin(h),Math.cos(h),c,d)):this.prepend(l*e,g*e,-g*f,l*f,c,d),this},c.rotate=function(c){c*=b.DEG_TO_RAD;var d=Math.cos(c);c=Math.sin(c);var e=this.a,f=this.b;return this.a=e*d+this.c*c,this.b=f*d+this.d*c,this.c=-e*c+this.c*d,this.d=-f*c+this.d*d,this},c.skew=function(c,d){return c*=b.DEG_TO_RAD,d*=b.DEG_TO_RAD,this.append(Math.cos(d),Math.sin(d),-Math.sin(c),Math.cos(c),0,0),this},c.scale=function(b,c){return this.a*=b,this.b*=b,this.c*=c,this.d*=c,this},c.translate=function(b,c){return this.tx+=this.a*b+this.c*c,this.ty+=this.b*b+this.d*c,this},c.identity=function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},c.invert=function(){var b=this.a,c=this.b,d=this.c,e=this.d,f=this.tx,g=b*e-c*d;return this.a=e/g,this.b=-c/g,this.c=-d/g,this.d=b/g,this.tx=(d*this.ty-e*f)/g,this.ty=-(b*this.ty-c*f)/g,this},c.isIdentity=function(){return 0===this.tx&&0===this.ty&&1===this.a&&0===this.b&&0===this.c&&1===this.d},c.equals=function(b){return this.tx===b.tx&&this.ty===b.ty&&this.a===b.a&&this.b===b.b&&this.c===b.c&&this.d===b.d},c.transformPoint=function(b,c,d){return d=d||{},d.x=b*this.a+c*this.c+this.tx,d.y=b*this.b+c*this.d+this.ty,d},c.decompose=function(c){null==c&&(c={}),c.x=this.tx,c.y=this.ty,c.scaleX=Math.sqrt(this.a*this.a+this.b*this.b),c.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var d=Math.atan2(-this.c,this.d),e=Math.atan2(this.b,this.a),f=Math.abs(1-d/e);return 1e-5>f?(c.rotation=e/b.DEG_TO_RAD,this.a<0&&this.d>=0&&(c.rotation+=c.rotation<=0?180:-180),c.skewX=c.skewY=0):(c.skewX=d/b.DEG_TO_RAD,c.skewY=e/b.DEG_TO_RAD),c},c.copy=function(b){return this.setValues(b.a,b.b,b.c,b.d,b.tx,b.ty)},c.clone=function(){return new b(this.a,this.b,this.c,this.d,this.tx,this.ty)},c.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"},b.identity=new b(),h.Matrix2D=b})(),h=h||{},(function(){"use strict";function b(b,c,d,e,f){this.setValues(b,c,d,e,f)}var c=b.prototype;c.setValues=function(b,c,d,e,f){return this.visible=null==b?!0:!!b,this.alpha=null==c?1:c,this.shadow=d,this.compositeOperation=e,this.matrix=f||this.matrix&&this.matrix.identity()||new h.Matrix2D(),this},c.append=function(b,c,d,e,f){return this.alpha*=c,this.shadow=d||this.shadow,this.compositeOperation=e||this.compositeOperation,this.visible=this.visible&&b,f&&this.matrix.appendMatrix(f),this},c.prepend=function(b,c,d,e,f){return this.alpha*=c,this.shadow=this.shadow||d,this.compositeOperation=this.compositeOperation||e,this.visible=this.visible&&b,f&&this.matrix.prependMatrix(f),this},c.identity=function(){return this.visible=!0,this.alpha=1,this.shadow=this.compositeOperation=null,this.matrix.identity(),this},c.clone=function(){return new b(this.alpha,this.shadow,this.compositeOperation,this.visible,this.matrix.clone())},h.DisplayProps=b})(),h=h||{},(function(){"use strict";function b(b,c){this.setValues(b,c)}var c=b.prototype;c.setValues=function(b,c){return this.x=b||0,this.y=c||0,this},c.copy=function(b){return this.x=b.x,this.y=b.y,this},c.clone=function(){return new b(this.x,this.y)},c.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"},h.Point=b})(),h=h||{},(function(){"use strict";function b(b,c,d,e){this.setValues(b,c,d,e)}var c=b.prototype;c.setValues=function(b,c,d,e){return this.x=b||0,this.y=c||0,this.width=d||0,this.height=e||0,this},c.extend=function(b,c,d,e){return d=d||0,e=e||0,b+d>this.x+this.width&&(this.width=b+d-this.x),c+e>this.y+this.height&&(this.height=c+e-this.y),b<this.x&&(this.width+=this.x-b,this.x=b),c<this.y&&(this.height+=this.y-c,this.y=c),this},c.pad=function(b,c,d,e){return this.x-=c,this.y-=b,this.width+=c+e,this.height+=b+d,this},c.copy=function(b){return this.setValues(b.x,b.y,b.width,b.height)},c.contains=function(b,c,d,e){return d=d||0,e=e||0,b>=this.x&&b+d<=this.x+this.width&&c>=this.y&&c+e<=this.y+this.height},c.union=function(b){return this.clone().extend(b.x,b.y,b.width,b.height)},c.intersection=function(c){var d=c.x,e=c.y,f=d+c.width;c=e+c.height;return this.x>d&&(d=this.x),this.y>e&&(e=this.y),this.x+this.width<f&&(f=this.x+this.width),this.y+this.height<c&&(c=this.y+this.height),d>=f||e>=c?null:new b(d,e,f-d,c-e)},c.intersects=function(b){return b.x<=this.x+this.width&&this.x<=b.x+b.width&&b.y<=this.y+this.height&&this.y<=b.y+b.height},c.isEmpty=function(){return this.width<=0||this.height<=0},c.clone=function(){return new b(this.x,this.y,this.width,this.height)},c.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"},h.Rectangle=b})(),h=h||{},(function(){"use strict";function b(b,c,d,e,f,g,h){b.addEventListener&&(this.target=b,this.overLabel=null==d?"over":d,this.outLabel=null==c?"out":c,this.downLabel=null==e?"down":e,this.play=f,this._isPressed=!1,this._isOver=!1,this._enabled=!1,b.mouseChildren=!1,this.enabled=!0,this.handleEvent({}),g&&(h&&(g.actionsEnabled=!1,g.gotoAndStop&&g.gotoAndStop(h)),b.hitArea=g))}var c=b.prototype;c.setEnabled=function(b){if(b!=this._enabled){var c=this.target;this._enabled=b,b?(c.cursor="pointer",c.addEventListener("rollover",this),c.addEventListener("rollout",this),c.addEventListener("mousedown",this),c.addEventListener("pressup",this),c._reset&&(c.__reset=c._reset,c._reset=this._reset)):(c.cursor=null,c.removeEventListener("rollover",this),c.removeEventListener("rollout",this),c.removeEventListener("mousedown",this),c.removeEventListener("pressup",this),c.__reset&&(c._reset=c.__reset,delete c.__reset))}},c.getEnabled=function(){return this._enabled};try{Object.defineProperties(c,{enabled:{get:c.getEnabled,set:c.setEnabled}})}catch(b){}c.toString=function(){return"[ButtonHelper]"},c.handleEvent=function(b){var c,d=this.target;b=b.type;"mousedown"==b?(this._isPressed=!0,c=this.downLabel):"pressup"==b?(this._isPressed=!1,c=this._isOver?this.overLabel:this.outLabel):"rollover"==b?(this._isOver=!0,c=this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,c=this._isPressed?this.overLabel:this.outLabel),this.play?d.gotoAndPlay&&d.gotoAndPlay(c):d.gotoAndStop&&d.gotoAndStop(c)},c._reset=function(){var b=this.paused;this.__reset(),this.paused=b},h.ButtonHelper=b})(),h=h||{},(function(){"use strict";function b(b,c,d,e){this.color=b||"black",this.offsetX=c||0,this.offsetY=d||0,this.blur=e||0}var c=b.prototype;b.identity=new b("transparent",0,0,0),c.toString=function(){return"[Shadow]"},c.clone=function(){return new b(this.color,this.offsetX,this.offsetY,this.blur)},h.Shadow=b})(),h=h||{},(function(){"use strict";function b(b){this.EventDispatcher_constructor(),this.complete=!0,this.framerate=0,this._animations=null,this._frames=null,this._images=null,this._data=null,this._loadCount=0,this._frameHeight=0,this._frameWidth=0,this._numFrames=0,this._regX=0,this._regY=0,this._spacing=0,this._margin=0,this._parseData(b)}var c=h.extend(b,h.EventDispatcher);c.getAnimations=function(){return this._animations.slice()};try{Object.defineProperties(c,{animations:{get:c.getAnimations}})}catch(b){}c.getNumFrames=function(b){if(null==b)return this._frames?this._frames.length:this._numFrames||0;b=this._data[b];return null==b?0:b.frames.length},c.getAnimation=function(b){return this._data[b]},c.getFrame=function(b){var c;return this._frames&&(c=this._frames[b])?c:null},c.getFrameBounds=function(b,c){b=this.getFrame(b);return b?(c||new h.Rectangle()).setValues(-b.regX,-b.regY,b.rect.width,b.rect.height):null},c.toString=function(){return"[SpriteSheet]"},c.clone=function(){throw"SpriteSheet cannot be cloned."},c._parseData=function(b){var c,d,e;if(null!=b){if(this.framerate=b.framerate||0,b.images&&(d=b.images.length)>0)for(e=this._images=[],c=0;d>c;c++){var f=b.images[c];if("string"==typeof f){var g=f;f=document.createElement("img"),f.src=g}e.push(f),f.getContext||f.naturalWidth||(this._loadCount++,this.complete=!1,function(b,c){f.onload=function(){b._handleImageLoad(c)}}(this,g),function(b,c){f.onerror=function(){b._handleImageError(c)}}(this,g))}if(!(null==b.frames))if(Array.isArray(b.frames))for(this._frames=[],e=b.frames,c=0,d=e.length;d>c;c++){var i=e[c];this._frames.push({image:this._images[i[4]?i[4]:0],rect:new h.Rectangle(i[0],i[1],i[2],i[3]),regX:i[5]||0,regY:i[6]||0})}else i=b.frames,this._frameWidth=i.width,this._frameHeight=i.height,this._regX=i.regX||0,this._regY=i.regY||0,this._spacing=i.spacing||0,this._margin=i.margin||0,this._numFrames=i.count,0==this._loadCount&&this._calculateFrames();if(this._animations=[],null!=(i=b.animations)){this._data={};for(b in i){var j={name:b},k=i[b];if("number"==typeof k)e=j.frames=[k];else if(Array.isArray(k))if(1==k.length)j.frames=[k[0]];else for(j.speed=k[3],j.next=k[2],e=j.frames=[],c=k[0];c<=k[1];c++)e.push(c);else{j.speed=k.speed,j.next=k.next;k=k.frames;e=j.frames="number"==typeof k?[k]:k.slice(0)}(j.next===!0||void 0===j.next)&&(j.next=b),(j.next===!1||e.length<2&&j.next==b)&&(j.next=null),j.speed||(j.speed=1),this._animations.push(b),this._data[b]=j}}}},c._handleImageLoad=function(){0==--this._loadCount&&(this._calculateFrames(),this.complete=!0,this.dispatchEvent("complete"))},c._handleImageError=function(b){var c=new h.Event("error");c.src=b,this.dispatchEvent(c),0==--this._loadCount&&this.dispatchEvent("complete")},c._calculateFrames=function(){if(!this._frames&&0!=this._frameWidth){this._frames=[];var b=this._numFrames||1e5,c=0,d=this._frameWidth,e=this._frameHeight,f=this._spacing,g=this._margin;a:for(var i=0,j=this._images;i<j.length;i++)for(var k=j[i],l=k.width,m=k.height,n=g;m-g-e>=n;){for(var o=g;l-g-d>=o;){if(c>=b)break a;c++,this._frames.push({image:k,rect:new h.Rectangle(o,n,d,e),regX:this._regX,regY:this._regY}),o+=d+f}n+=e+f}this._numFrames=c}},h.SpriteSheet=h.promote(b,"EventDispatcher")})(),h=h||{},(function(){"use strict";function b(){this.command=null,this._stroke=null,this._strokeStyle=null,this._oldStrokeStyle=null,this._strokeDash=null,this._oldStrokeDash=null,this._strokeIgnoreScale=!1,this._fill=null,this._instructions=[],this._commitIndex=0,this._activeInstructions=[],this._dirty=!1,this._storeIndex=0,this.clear()}var c=b.prototype,d=b;b.getRGB=function(b,c,d,e){return null!=b&&null==d&&(e=c,d=255&b,c=b>>8&255,b=b>>16&255),null==e?"rgb("+b+","+c+","+d+")":"rgba("+b+","+c+","+d+","+e+")"},b.getHSL=function(b,c,d,e){return null==e?"hsl("+b%360+","+c+"%,"+d+"%)":"hsla("+b%360+","+c+"%,"+d+"%,"+e+")"},b.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,0:52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63},b.STROKE_CAPS_MAP=["butt","round","square"],b.STROKE_JOINTS_MAP=["miter","round","bevel"];var e=h.createCanvas?h.createCanvas():document.createElement("canvas");e.getContext&&(b._ctx=e.getContext("2d"),e.width=e.height=1),c.getInstructions=function(){return this._updateInstructions(),this._instructions};try{Object.defineProperties(c,{instructions:{get:c.getInstructions}})}catch(b){}c.isEmpty=function(){return!(this._instructions.length||this._activeInstructions.length)},c.draw=function(b,c){this._updateInstructions();for(var d=this._instructions,e=this._storeIndex,f=d.length;f>e;e++)d[e].exec(b,c)},c.drawAsPath=function(b){this._updateInstructions();for(var c,d=this._instructions,e=this._storeIndex,f=d.length;f>e;e++)(c=d[e]).path!==!1&&c.exec(b)},c.moveTo=function(b,c){return this.append(new d.MoveTo(b,c),!0)},c.lineTo=function(b,c){return this.append(new d.LineTo(b,c))},c.arcTo=function(b,c,e,f,g){return this.append(new d.ArcTo(b,c,e,f,g))},c.arc=function(b,c,e,f,g,h){return this.append(new d.Arc(b,c,e,f,g,h))},c.quadraticCurveTo=function(b,c,e,f){return this.append(new d.QuadraticCurveTo(b,c,e,f))},c.bezierCurveTo=function(b,c,e,f,g,h){return this.append(new d.BezierCurveTo(b,c,e,f,g,h))},c.rect=function(b,c,e,f){return this.append(new d.Rect(b,c,e,f))},c.closePath=function(){return this._activeInstructions.length?this.append(new d.ClosePath()):this},c.clear=function(){return this._instructions.length=this._activeInstructions.length=this._commitIndex=0,this._strokeStyle=this._oldStrokeStyle=this._stroke=this._fill=this._strokeDash=this._oldStrokeDash=null,this._dirty=this._strokeIgnoreScale=!1,this},c.beginFill=function(b){return this._setFill(b?new d.Fill(b):null)},c.beginLinearGradientFill=function(b,c,e,f,g,h){return this._setFill(new d.Fill().linearGradient(b,c,e,f,g,h))},c.beginRadialGradientFill=function(b,c,e,f,g,h,i,j){return this._setFill(new d.Fill().radialGradient(b,c,e,f,g,h,i,j))},c.beginBitmapFill=function(b,c,e){return this._setFill(new d.Fill(null,e).bitmap(b,c))},c.endFill=function(){return this.beginFill()},c.setStrokeStyle=function(b,c,e,f,g){return this._updateInstructions(!0),this._strokeStyle=this.command=new d.StrokeStyle(b,c,e,f,g),this._stroke&&(this._stroke.ignoreScale=g),this._strokeIgnoreScale=g,this},c.setStrokeDash=function(b,c){return this._updateInstructions(!0),this._strokeDash=this.command=new d.StrokeDash(b,c),this},c.beginStroke=function(b){return this._setStroke(b?new d.Stroke(b):null)},c.beginLinearGradientStroke=function(b,c,e,f,g,h){return this._setStroke(new d.Stroke().linearGradient(b,c,e,f,g,h))},c.beginRadialGradientStroke=function(b,c,e,f,g,h,i,j){return this._setStroke(new d.Stroke().radialGradient(b,c,e,f,g,h,i,j))},c.beginBitmapStroke=function(b,c){return this._setStroke(new d.Stroke().bitmap(b,c))},c.endStroke=function(){return this.beginStroke()},c.curveTo=c.quadraticCurveTo,c.drawRect=c.rect,c.drawRoundRect=function(b,c,d,e,f){return this.drawRoundRectComplex(b,c,d,e,f,f,f,f)},c.drawRoundRectComplex=function(b,c,e,f,g,h,i,j){return this.append(new d.RoundRect(b,c,e,f,g,h,i,j))},c.drawCircle=function(b,c,e){return this.append(new d.Circle(b,c,e))},c.drawEllipse=function(b,c,e,f){return this.append(new d.Ellipse(b,c,e,f))},c.drawPolyStar=function(b,c,e,f,g,h){return this.append(new d.PolyStar(b,c,e,f,g,h))},c.append=function(b,c){return this._activeInstructions.push(b),this.command=b,c||(this._dirty=!0),this},c.decodePath=function(c){for(var d=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],e=[2,2,4,6,0],f=0,g=c.length,h=[],i=0,j=0,k=b.BASE_64;g>f;){var l=c.charAt(f),m=k[l],n=m>>3,o=d[n];if(!o||3&m)throw"bad path data (@"+f+"): "+l;l=e[n];n||(i=j=0),h.length=0,f++;for(n=(m>>2&1)+2,m=0;l>m;m++){var a=k[c.charAt(f)],p=a>>5?-1:1;a=(31&a)<<6|k[c.charAt(f+1)],3==n&&(a=a<<6|k[c.charAt(f+2)]),a=p*a/10,m%2?i=a+=i:j=a+=j,h[m]=a,f+=n}o.apply(this,h)}return this},c.store=function(){return this._updateInstructions(!0),this._storeIndex=this._instructions.length,this},c.unstore=function(){return this._storeIndex=0,this},c.clone=function(){var c=new b();return c.command=this.command,c._stroke=this._stroke,c._strokeStyle=this._strokeStyle,c._strokeDash=this._strokeDash,c._strokeIgnoreScale=this._strokeIgnoreScale,c._fill=this._fill,c._instructions=this._instructions.slice(),c._commitIndex=this._commitIndex,c._activeInstructions=this._activeInstructions.slice(),c._dirty=this._dirty,c._storeIndex=this._storeIndex,c},c.toString=function(){return"[Graphics]"},c.mt=c.moveTo,c.lt=c.lineTo,c.at=c.arcTo,c.bt=c.bezierCurveTo,c.qt=c.quadraticCurveTo,c.a=c.arc,c.r=c.rect,c.cp=c.closePath,c.c=c.clear,c.f=c.beginFill,c.lf=c.beginLinearGradientFill,c.rf=c.beginRadialGradientFill,c.bf=c.beginBitmapFill,c.ef=c.endFill,c.ss=c.setStrokeStyle,c.sd=c.setStrokeDash,c.s=c.beginStroke,c.ls=c.beginLinearGradientStroke,c.rs=c.beginRadialGradientStroke,c.bs=c.beginBitmapStroke,c.es=c.endStroke,c.dr=c.drawRect,c.rr=c.drawRoundRect,c.rc=c.drawRoundRectComplex,c.dc=c.drawCircle,c.de=c.drawEllipse,c.dp=c.drawPolyStar,c.p=c.decodePath,c._updateInstructions=function(c){var d=this._instructions,e=this._activeInstructions,f=this._commitIndex;if(this._dirty&&e.length){d.length=f,d.push(b.beginCmd);f=e.length;var g=d.length;d.length=g+f;for(var h=0;f>h;h++)d[h+g]=e[h];this._fill&&d.push(this._fill),this._stroke&&(this._strokeDash!==this._oldStrokeDash&&(this._oldStrokeDash=this._strokeDash,d.push(this._strokeDash)),this._strokeStyle!==this._oldStrokeStyle&&(this._oldStrokeStyle=this._strokeStyle,d.push(this._strokeStyle)),d.push(this._stroke)),this._dirty=!1}c&&(e.length=0,this._commitIndex=d.length)},c._setFill=function(b){return this._updateInstructions(!0),this.command=this._fill=b,this},c._setStroke=function(b){return this._updateInstructions(!0),(this.command=this._stroke=b)&&(b.ignoreScale=this._strokeIgnoreScale),this},(d.LineTo=function(b,c){this.x=b,this.y=c}).prototype.exec=function(b){b.lineTo(this.x,this.y)},(d.MoveTo=function(b,c){this.x=b,this.y=c}).prototype.exec=function(b){b.moveTo(this.x,this.y)},(d.ArcTo=function(b,c,d,e,f){this.x1=b,this.y1=c,this.x2=d,this.y2=e,this.radius=f}).prototype.exec=function(b){b.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)},(d.Arc=function(b,c,d,e,f,g){this.x=b,this.y=c,this.radius=d,this.startAngle=e,this.endAngle=f,this.anticlockwise=!!g}).prototype.exec=function(b){b.arc(this.x,this.y,this.radius,this.startAngle,this.endAngle,this.anticlockwise)},(d.QuadraticCurveTo=function(b,c,d,e){this.cpx=b,this.cpy=c,this.x=d,this.y=e}).prototype.exec=function(b){b.quadraticCurveTo(this.cpx,this.cpy,this.x,this.y)},(d.BezierCurveTo=function(b,c,d,e,f,g){this.cp1x=b,this.cp1y=c,this.cp2x=d,this.cp2y=e,this.x=f,this.y=g}).prototype.exec=function(b){b.bezierCurveTo(this.cp1x,this.cp1y,this.cp2x,this.cp2y,this.x,this.y)},(d.Rect=function(b,c,d,e){this.x=b,this.y=c,this.w=d,this.h=e}).prototype.exec=function(b){b.rect(this.x,this.y,this.w,this.h)},(d.ClosePath=function(){}).prototype.exec=function(b){b.closePath()},(d.BeginPath=function(){}).prototype.exec=function(b){b.beginPath()},c=(d.Fill=function(b,c){this.style=b,this.matrix=c}).prototype,c.exec=function(b){if(this.style){b.fillStyle=this.style;var c=this.matrix;c&&(b.save(),b.transform(c.a,c.b,c.c,c.d,c.tx,c.ty)),b.fill(),c&&b.restore()}},c.linearGradient=function(c,d,e,f,g,h){for(var i=this.style=b._ctx.createLinearGradient(e,f,g,h),j=0,k=c.length;k>j;j++)i.addColorStop(d[j],c[j]);return i.props={colors:c,ratios:d,x0:e,y0:f,x1:g,y1:h,type:"linear"},this},c.radialGradient=function(c,d,e,f,g,h,i,j){for(var k=this.style=b._ctx.createRadialGradient(e,f,g,h,i,j),l=0,m=c.length;m>l;l++)k.addColorStop(d[l],c[l]);return k.props={colors:c,ratios:d,x0:e,y0:f,r0:g,x1:h,y1:i,r1:j,type:"radial"},this},c.bitmap=function(c,d){if(c.naturalWidth||c.getContext||c.readyState>=2){var e=this.style=b._ctx.createPattern(c,d||"");e.props={image:c,repetition:d,type:"bitmap"}}return this},c.path=!1,c=(d.Stroke=function(b,c){this.style=b,this.ignoreScale=c}).prototype,c.exec=function(b){this.style&&(b.strokeStyle=this.style,this.ignoreScale&&(b.save(),b.setTransform(1,0,0,1,0,0)),b.stroke(),this.ignoreScale&&b.restore())},c.linearGradient=d.Fill.prototype.linearGradient,c.radialGradient=d.Fill.prototype.radialGradient,c.bitmap=d.Fill.prototype.bitmap,c.path=!1,c=(d.StrokeStyle=function(b,c,d,e,f){this.width=b,this.caps=c,this.joints=d,this.miterLimit=e,this.ignoreScale=f}).prototype,c.exec=function(c){c.lineWidth=null==this.width?"1":this.width,c.lineCap=null==this.caps?"butt":isNaN(this.caps)?this.caps:b.STROKE_CAPS_MAP[this.caps],c.lineJoin=null==this.joints?"miter":isNaN(this.joints)?this.joints:b.STROKE_JOINTS_MAP[this.joints],c.miterLimit=null==this.miterLimit?"10":this.miterLimit,c.ignoreScale=null==this.ignoreScale?!1:this.ignoreScale},c.path=!1,(d.StrokeDash=function(b,c){this.segments=b,this.offset=c||0}).prototype.exec=function(b){b.setLineDash&&(b.setLineDash(this.segments||d.StrokeDash.EMPTY_SEGMENTS),b.lineDashOffset=this.offset||0)},d.StrokeDash.EMPTY_SEGMENTS=[],(d.RoundRect=function(b,c,d,e,f,g,h,i){this.x=b,this.y=c,this.w=d,this.h=e,this.radiusTL=f,this.radiusTR=g,this.radiusBR=h,this.radiusBL=i}).prototype.exec=function(b){var c=(k>j?j:k)/2,d=0,e=0,f=0,g=0,h=this.x,i=this.y,j=this.w,k=this.h,l=this.radiusTL,m=this.radiusTR,n=this.radiusBR,o=this.radiusBL;0>l&&(l*=d=-1),l>c&&(l=c),0>m&&(m*=e=-1),m>c&&(m=c),0>n&&(n*=f=-1),n>c&&(n=c),0>o&&(o*=g=-1),o>c&&(o=c),b.moveTo(h+j-m,i),b.arcTo(h+j+m*e,i-m*e,h+j,i+m,m),b.lineTo(h+j,i+k-n),b.arcTo(h+j+n*f,i+k+n*f,h+j-n,i+k,n),b.lineTo(h+o,i+k),b.arcTo(h-o*g,i+k+o*g,h,i+k-o,o),b.lineTo(h,i+l),b.arcTo(h-l*d,i-l*d,h+l,i,l),b.closePath()},(d.Circle=function(b,c,d){this.x=b,this.y=c,this.radius=d}).prototype.exec=function(b){b.arc(this.x,this.y,this.radius,0,2*Math.PI)},(d.Ellipse=function(b,c,d,e){this.x=b,this.y=c,this.w=d,this.h=e}).prototype.exec=function(b){var c=this.x,d=this.y,e=this.w,f=this.h,g=.5522848,h=e/2*g;g=f/2*g;var i=c+e,j=d+f;e=c+e/2;f=d+f/2;b.moveTo(c,f),b.bezierCurveTo(c,f-g,e-h,d,e,d),b.bezierCurveTo(e+h,d,i,f-g,i,f),b.bezierCurveTo(i,f+g,e+h,j,e,j),b.bezierCurveTo(e-h,j,c,f+g,c,f)},(d.PolyStar=function(b,c,d,e,f,g){this.x=b,this.y=c,this.radius=d,this.sides=e,this.pointSize=f,this.angle=g}).prototype.exec=function(b){var c=this.x,d=this.y,e=this.radius,f=(this.angle||0)/180*Math.PI,g=this.sides,h=1-(this.pointSize||0),i=Math.PI/g;b.moveTo(c+Math.cos(f)*e,d+Math.sin(f)*e);for(var j=0;g>j;j++)f+=i,1!=h&&b.lineTo(c+Math.cos(f)*e*h,d+Math.sin(f)*e*h),f+=i,b.lineTo(c+Math.cos(f)*e,d+Math.sin(f)*e);b.closePath()},b.beginCmd=new d.BeginPath(),h.Graphics=b})(),h=h||{},(function(){"use strict";function b(){this.EventDispatcher_constructor(),this.alpha=1,this.cacheCanvas=null,this.cacheID=0,this.id=h.UID.get(),this.mouseEnabled=!0,this.tickEnabled=!0,this.name=null,this.parent=null,this.regX=0,this.regY=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.skewX=0,this.skewY=0,this.shadow=null,this.visible=!0,this.x=0,this.y=0,this.transformMatrix=null,this.compositeOperation=null,this.snapToPixel=!0,this.filters=null,this.mask=null,this.hitArea=null,this.cursor=null,this._cacheOffsetX=0,this._cacheOffsetY=0,this._filterOffsetX=0,this._filterOffsetY=0,this._cacheScale=1,this._cacheDataURLID=0,this._cacheDataURL=null,this._props=new h.DisplayProps(),this._rectangle=new h.Rectangle(),this._bounds=null}var c=h.extend(b,h.EventDispatcher);b._MOUSE_EVENTS=["click","dblclick","mousedown","mouseout","mouseover","pressmove","pressup","rollout","rollover"],b.suppressCrossDomainErrors=!1,b._snapToPixelEnabled=!1;var d=h.createCanvas?h.createCanvas():document.createElement("canvas");d.getContext&&(b._hitTestCanvas=d,b._hitTestContext=d.getContext("2d"),d.width=d.height=1),b._nextCacheID=1,c.getStage=function(){for(var b=this,c=h.Stage;b.parent;)b=b.parent;return b instanceof c?b:null};try{Object.defineProperties(c,{stage:{get:c.getStage}})}catch(b){}c.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},c.draw=function(b,c){var d=this.cacheCanvas;if(c||!d)return!1;c=this._cacheScale;return b.drawImage(d,this._cacheOffsetX+this._filterOffsetX,this._cacheOffsetY+this._filterOffsetY,d.width/c,d.height/c),!0},c.updateContext=function(c){var d=this,e=d.mask,f=d._props.matrix;e&&e.graphics&&!e.graphics.isEmpty()&&(e.getMatrix(f),c.transform(f.a,f.b,f.c,f.d,f.tx,f.ty),e.graphics.drawAsPath(c),c.clip(),f.invert(),c.transform(f.a,f.b,f.c,f.d,f.tx,f.ty)),this.getMatrix(f);e=f.tx;var g=f.ty;b._snapToPixelEnabled&&d.snapToPixel&&(e=e+(0>e?-.5:.5)|0,g=g+(0>g?-.5:.5)|0),c.transform(f.a,f.b,f.c,f.d,e,g),c.globalAlpha*=d.alpha,d.compositeOperation&&(c.globalCompositeOperation=d.compositeOperation),d.shadow&&this._applyShadow(c,d.shadow)},c.cache=function(b,c,d,e,f){f=f||1,this.cacheCanvas||(this.cacheCanvas=h.createCanvas?h.createCanvas():document.createElement("canvas")),this._cacheWidth=d,this._cacheHeight=e,this._cacheOffsetX=b,this._cacheOffsetY=c,this._cacheScale=f,this.updateCache()},c.updateCache=function(c){var d=this.cacheCanvas;if(!d)throw"cache() must be called before updateCache()";var e=this._cacheScale,f=this._cacheOffsetX*e,g=this._cacheOffsetY*e,h=this._cacheWidth,i=this._cacheHeight,j=d.getContext("2d"),k=this._getFilterBounds();f+=this._filterOffsetX=k.x,g+=this._filterOffsetY=k.y,h=Math.ceil(h*e)+k.width,i=Math.ceil(i*e)+k.height,h!=d.width||i!=d.height?(d.width=h,d.height=i):c||j.clearRect(0,0,h+1,i+1),j.save(),j.globalCompositeOperation=c,j.setTransform(e,0,0,e,-f,-g),this.draw(j,!0),this._applyFilters(),j.restore(),this.cacheID=b._nextCacheID++},c.uncache=function(){this._cacheDataURL=this.cacheCanvas=null,this.cacheID=this._cacheOffsetX=this._cacheOffsetY=this._filterOffsetX=this._filterOffsetY=0,this._cacheScale=1},c.getCacheDataURL=function(){return this.cacheCanvas?(this.cacheID!=this._cacheDataURLID&&(this._cacheDataURL=this.cacheCanvas.toDataURL()),this._cacheDataURL):null},c.localToGlobal=function(b,c,d){return this.getConcatenatedMatrix(this._props.matrix).transformPoint(b,c,d||new h.Point())},c.globalToLocal=function(b,c,d){return this.getConcatenatedMatrix(this._props.matrix).invert().transformPoint(b,c,d||new h.Point())},c.localToLocal=function(b,c,d,e){return e=this.localToGlobal(b,c,e),d.globalToLocal(e.x,e.y,e)},c.setTransform=function(b,c,d,e,f,g,h,i,j){return this.x=b||0,this.y=c||0,this.scaleX=null==d?1:d,this.scaleY=null==e?1:e,this.rotation=f||0,this.skewX=g||0,this.skewY=h||0,this.regX=i||0,this.regY=j||0,this},c.getMatrix=function(b){var c=this;b=b&&b.identity()||new h.Matrix2D();return c.transformMatrix?b.copy(c.transformMatrix):b.appendTransform(c.x,c.y,c.scaleX,c.scaleY,c.rotation,c.skewX,c.skewY,c.regX,c.regY)},c.getConcatenatedMatrix=function(b){for(var c=this,b=this.getMatrix(b);c=c.parent;)b.prependMatrix(c.getMatrix(c._props.matrix));return b},c.getConcatenatedDisplayProps=function(b){b=b?b.identity():new h.DisplayProps();var c=this,d=c.getMatrix(b.matrix);do b.prepend(c.visible,c.alpha,c.shadow,c.compositeOperation),c!=this&&d.prependMatrix(c.getMatrix(c._props.matrix));while(c=c.parent);return b},c.hitTest=function(c,d){var e=b._hitTestContext;e.setTransform(1,0,0,1,-c,-d),this.draw(e);c=this._testHit(e);return e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,2,2),c},c.set=function(b){for(var c in b)this[c]=b[c];return this},c.getBounds=function(){if(this._bounds)return this._rectangle.copy(this._bounds);var b=this.cacheCanvas;if(b){var c=this._cacheScale;return this._rectangle.setValues(this._cacheOffsetX,this._cacheOffsetY,b.width/c,b.height/c)}return null},c.getTransformedBounds=function(){return this._getBounds()},c.setBounds=function(b,c,d,e){null==b&&(this._bounds=b),this._bounds=(this._bounds||new h.Rectangle()).setValues(b,c,d,e)},c.clone=function(){return this._cloneProps(new b())},c.toString=function(){return"[DisplayObject (name="+this.name+")]"},c._cloneProps=function(b){return b.alpha=this.alpha,b.mouseEnabled=this.mouseEnabled,b.tickEnabled=this.tickEnabled,b.name=this.name,b.regX=this.regX,b.regY=this.regY,b.rotation=this.rotation,b.scaleX=this.scaleX,b.scaleY=this.scaleY,b.shadow=this.shadow,b.skewX=this.skewX,b.skewY=this.skewY,b.visible=this.visible,b.x=this.x,b.y=this.y,b.compositeOperation=this.compositeOperation,b.snapToPixel=this.snapToPixel,b.filters=null==this.filters?null:this.filters.slice(0),b.mask=this.mask,b.hitArea=this.hitArea,b.cursor=this.cursor,b._bounds=this._bounds,b},c._applyShadow=function(b,c){c=c||Shadow.identity,b.shadowColor=c.color,b.shadowOffsetX=c.offsetX,b.shadowOffsetY=c.offsetY,b.shadowBlur=c.blur},c._tick=function(b){var c=this._listeners;c&&c.tick&&(b.target=null,b.propagationStopped=b.immediatePropagationStopped=!1,this.dispatchEvent(b))},c._testHit=function(c){try{var d=c.getImageData(0,0,1,1).data[3]>1}catch(c){if(!b.suppressCrossDomainErrors)throw"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return d},c._applyFilters=function(){if(this.filters&&0!=this.filters.length&&this.cacheCanvas)for(var b=this.filters.length,c=this.cacheCanvas.getContext("2d"),d=this.cacheCanvas.width,e=this.cacheCanvas.height,f=0;b>f;f++)this.filters[f].applyFilter(c,0,0,d,e)},c._getFilterBounds=function(){var b,c=this.filters,d=this._rectangle.setValues(0,0,0,0);if(!c||!(b=c.length))return d;for(c=0;b>c;c++){var e=this.filters[c];e.getBounds&&e.getBounds(d)}return d},c._getBounds=function(b,c){return this._transformBounds(this.getBounds(),b,c)},c._transformBounds=function(b,c,d){if(!b)return b;var e=b.x,f=b.y,g=b.width,h=b.height,i=this._props.matrix;i=d?i.identity():this.getMatrix(i),(e||f)&&i.appendTransform(0,0,1,1,0,0,0,-e,-f),c&&i.prependMatrix(c);d=g*i.a;c=g*i.b;g=h*i.c;h=h*i.d;var j=i.tx;i=i.ty;var k=j,l=j,m=i,n=i;return(e=d+j)<k?k=e:e>l&&(l=e),(e=d+g+j)<k?k=e:e>l&&(l=e),(e=g+j)<k?k=e:e>l&&(l=e),(f=c+i)<m?m=f:f>n&&(n=f),(f=c+h+i)<m?m=f:f>n&&(n=f),(f=h+i)<m?m=f:f>n&&(n=f),b.setValues(k,m,l-k,n-m)},c._hasMouseEventListener=function(){for(var c=b._MOUSE_EVENTS,d=0,e=c.length;e>d;d++)if(this.hasEventListener(c[d]))return!0;return!!this.cursor},h.DisplayObject=h.promote(b,"EventDispatcher")})(),h=h||{},(function(){"use strict";function b(){this.DisplayObject_constructor(),this.children=[],this.mouseChildren=!0,this.tickChildren=!0}var c=h.extend(b,h.DisplayObject);c.getNumChildren=function(){return this.children.length};try{Object.defineProperties(c,{numChildren:{get:c.getNumChildren}})}catch(b){}c.initialize=b,c.isVisible=function(){var b=this.cacheCanvas||this.children.length;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&b)},c.draw=function(b,c){if(this.DisplayObject_draw(b,c))return!0;for(var c=this.children.slice(),d=0,e=c.length;e>d;d++){var f=c[d];f.isVisible()&&(b.save(),f.updateContext(b),f.draw(b),b.restore())}return!0},c.addChild=function(b){if(null==b)return b;var c=arguments.length;if(c>1){for(var d=0;c>d;d++)this.addChild(arguments[d]);return arguments[c-1]}return b.parent&&b.parent.removeChild(b),b.parent=this,this.children.push(b),b.dispatchEvent("added"),b},c.addChildAt=function(b,c){var d=arguments.length,e=arguments[d-1];if(0>e||e>this.children.length)return arguments[d-2];if(d>2){for(var f=0;d-1>f;f++)this.addChildAt(arguments[f],e+f);return arguments[d-2]}return b.parent&&b.parent.removeChild(b),b.parent=this,this.children.splice(c,0,b),b.dispatchEvent("added"),b},c.removeChild=function(b){var c=arguments.length;if(c>1){for(var d=!0,e=0;c>e;e++)d=d&&this.removeChild(arguments[e]);return d}return this.removeChildAt(h.indexOf(this.children,b))},c.removeChildAt=function(b){var c=arguments.length;if(c>1){for(var d=[],e=0;c>e;e++)d[e]=arguments[e];d.sort(function(b,c){return c-b});for(var f=!0,e=0;c>e;e++)f=f&&this.removeChildAt(d[e]);return f}if(0>b||b>this.children.length-1)return!1;var g=this.children[b];return g&&(g.parent=null),this.children.splice(b,1),g.dispatchEvent("removed"),!0},c.removeAllChildren=function(){for(var b=this.children;b.length;)this.removeChildAt(0)},c.getChildAt=function(b){return this.children[b]},c.getChildByName=function(b){for(var c=this.children,d=0,e=c.length;e>d;d++)if(c[d].name==b)return c[d];return null},c.sortChildren=function(b){this.children.sort(b)},c.getChildIndex=function(b){return h.indexOf(this.children,b)},c.swapChildrenAt=function(b,c){var d=this.children,e=d[b],f=d[c];e&&f&&(d[b]=f,d[c]=e)},c.swapChildren=function(b,c){for(var d,e,f=this.children,g=0,h=f.length;h>g&&(f[g]==b&&(d=g),f[g]==c&&(e=g),null==d||null==e);g++);g!=h&&(f[d]=c,f[e]=b)},c.setChildIndex=function(b,c){var d=this.children,e=d.length;if(!(b.parent!=this||0>c||c>=e)){for(var f=0;e>f&&d[f]!=b;f++);f!=e&&f!=c&&(d.splice(f,1),d.splice(c,0,b))}},c.contains=function(b){for(;b;){if(b==this)return!0;b=b.parent}return!1},c.hitTest=function(b,c){return null!=this.getObjectUnderPoint(b,c)},c.getObjectsUnderPoint=function(b,c,d){var e=[];b=this.localToGlobal(b,c);return this._getObjectsUnderPoint(b.x,b.y,e,d>0,1==d),e},c.getObjectUnderPoint=function(b,c,d){b=this.localToGlobal(b,c);return this._getObjectsUnderPoint(b.x,b.y,null,d>0,1==d)},c.getBounds=function(){return this._getBounds(null,!0)},c.getTransformedBounds=function(){return this._getBounds()},c.clone=function(c){var d=this._cloneProps(new b());return c&&this._cloneChildren(d),d},c.toString=function(){return"[Container (name="+this.name+")]"},c._tick=function(b){if(this.tickChildren)for(var c=this.children.length-1;c>=0;c--){var d=this.children[c];d.tickEnabled&&d._tick&&d._tick(b)}this.DisplayObject__tick(b)},c._cloneChildren=function(b){b.children.length&&b.removeAllChildren();for(var c=b.children,d=0,e=this.children.length;e>d;d++){var f=this.children[d].clone(!0);f.parent=b,c.push(f)}},c._getObjectsUnderPoint=function(c,d,e,f,g,i){if(i=i||0,!i&&!this._testMask(this,c,d))return null;var j,k=h.DisplayObject._hitTestContext;g=g||f&&this._hasMouseEventListener();for(var l=this.children,m=l.length,m=m-1;m>=0;m--){var n=l[m],o=n.hitArea;if(n.visible&&(o||n.isVisible())&&(!f||n.mouseEnabled)&&(o||this._testMask(n,c,d)))if(!o&&n instanceof b){var a=n._getObjectsUnderPoint(c,d,e,f,g,i+1);if(!e&&a)return f&&!this.mouseChildren?this:a}else{if(f&&!g&&!n._hasMouseEventListener())continue;a=n.getConcatenatedDisplayProps(n._props);if(j=a.matrix,o&&(j.appendMatrix(o.getMatrix(o._props.matrix)),a.alpha=o.alpha),k.globalAlpha=a.alpha,k.setTransform(j.a,j.b,j.c,j.d,j.tx-c,j.ty-d),(o||n).draw(k),!this._testHit(k))continue;if(k.setTransform(1,0,0,1,0,0),k.clearRect(0,0,2,2),!e)return f&&!this.mouseChildren?this:n;e.push(n)}}return null},c._testMask=function(b,c,d){var e=b.mask;if(!e||!e.graphics||e.graphics.isEmpty())return!0;var f=this._props.matrix;b=b.parent;f=b?b.getConcatenatedMatrix(f):f.identity(),f=e.getMatrix(e._props.matrix).prependMatrix(f);b=h.DisplayObject._hitTestContext;return b.setTransform(f.a,f.b,f.c,f.d,f.tx-c,f.ty-d),e.graphics.drawAsPath(b),b.fillStyle="#000",b.fill(),this._testHit(b)?(b.setTransform(1,0,0,1,0,0),b.clearRect(0,0,2,2),!0):!1},c._getBounds=function(b,c){var d=this.DisplayObject_getBounds();if(d)return this._transformBounds(d,b,c);var e=this._props.matrix;e=c?e.identity():this.getMatrix(e),b&&e.prependMatrix(b);for(var c=this.children.length,b=null,f=0;c>f;f++){var g=this.children[f];g.visible&&(d=g._getBounds(e))&&(b?b.extend(d.x,d.y,d.width,d.height):b=d.clone())}return b},h.Container=h.promote(b,"DisplayObject")})(),h=h||{},(function(){"use strict";function b(b){this.Container_constructor(),this.autoClear=!0,this.canvas="string"==typeof b?document.getElementById(b):b,this.mouseX=0,this.mouseY=0,this.drawRect=null,this.snapToPixelEnabled=!1,this.mouseInBounds=!1,this.tickOnUpdate=!0,this.mouseMoveOutside=!1,this.preventSelection=!0,this._pointerData={},this._pointerCount=0,this._primaryPointerID=null,this._mouseOverIntervalID=null,this._nextStage=null,this._prevStage=null,this.enableDOMEvents(!0)}var c=h.extend(b,h.Container);c._get_nextStage=function(){return this._nextStage},c._set_nextStage=function(b){this._nextStage&&(this._nextStage._prevStage=null),b&&(b._prevStage=this),this._nextStage=b};try{Object.defineProperties(c,{nextStage:{get:c._get_nextStage,set:c._set_nextStage}})}catch(b){}c.update=function(b){if(this.canvas&&(this.tickOnUpdate&&this.tick(b),this.dispatchEvent("drawstart",!1,!0)!==!1)){h.DisplayObject._snapToPixelEnabled=this.snapToPixelEnabled;b=this.drawRect;var c=this.canvas.getContext("2d");c.setTransform(1,0,0,1,0,0),this.autoClear&&(b?c.clearRect(b.x,b.y,b.width,b.height):c.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)),c.save(),this.drawRect&&(c.beginPath(),c.rect(b.x,b.y,b.width,b.height),c.clip()),this.updateContext(c),this.draw(c,!1),c.restore(),this.dispatchEvent("drawend")}},c.tick=function(b){if(this.tickEnabled&&this.dispatchEvent("tickstart",!1,!0)!==!1){var c=new h.Event("tick");if(b)for(var d in b)Object.prototype.hasOwnProperty.call(b,d)&&(c[d]=b[d]);this._tick(c),this.dispatchEvent("tickend")}},c.handleEvent=function(b){"tick"==b.type&&this.update(b)},c.clear=function(){if(this.canvas){var b=this.canvas.getContext("2d");b.setTransform(1,0,0,1,0,0),b.clearRect(0,0,this.canvas.width+1,this.canvas.height+1)}},c.toDataURL=function(b,c){var d,e=this.canvas.getContext("2d"),f=this.canvas.width,g=this.canvas.height;if(b){d=e.getImageData(0,0,f,g);var h=e.globalCompositeOperation;e.globalCompositeOperation="destination-over",e.fillStyle=b,e.fillRect(0,0,f,g)}f=this.canvas.toDataURL(c||"image/png");return b&&(e.putImageData(d,0,0),e.globalCompositeOperation=h),f},c.enableMouseOver=function(b){if(this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=null,0==b&&this._testMouseOver(!0)),null==b)b=20;else if(0>=b)return;var c=this;this._mouseOverIntervalID=setInterval(function(){c._testMouseOver()},1e3/Math.min(50,b))},c.enableDOMEvents=function(b){null==b&&(b=!0);var c,d,e=this._eventListeners;if(!b&&e){for(c in e)d=e[c],d.t.removeEventListener(c,d.f,!1);this._eventListeners=null}else if(b&&!e&&this.canvas){b=window.addEventListener?window:document;var f=this;e=this._eventListeners={},e.mouseup={t:b,f:function(b){f._handleMouseUp(b)}},e.mousemove={t:b,f:function(b){f._handleMouseMove(b)}},e.dblclick={t:this.canvas,f:function(b){f._handleDoubleClick(b)}},e.mousedown={t:this.canvas,f:function(b){f._handleMouseDown(b)}};for(c in e)d=e[c],d.t.addEventListener(c,d.f,!1)}},c.clone=function(){throw"Stage cannot be cloned."},c.toString=function(){return"[Stage (name="+this.name+")]"},c._getElementRect=function(b){var c;try{c=b.getBoundingClientRect()}catch(d){c={top:b.offsetTop,left:b.offsetLeft,width:b.offsetWidth,height:b.offsetHeight}}var d=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),e=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0);b=window.getComputedStyle?getComputedStyle(b,null):b.currentStyle;var f=parseInt(b.paddingLeft)+parseInt(b.borderLeftWidth),g=parseInt(b.paddingTop)+parseInt(b.borderTopWidth),h=parseInt(b.paddingRight)+parseInt(b.borderRightWidth);b=parseInt(b.paddingBottom)+parseInt(b.borderBottomWidth);return{left:c.left+d+f,right:c.right+d-h,top:c.top+e+g,bottom:c.bottom+e-b}},c._getPointerData=function(b){var c=this._pointerData[b];return c||(c=this._pointerData[b]={x:0,y:0}),c},c._handleMouseMove=function(b){b||(b=window.event),this._handlePointerMove(-1,b,b.pageX,b.pageY)},c._handlePointerMove=function(b,c,d,e,f){if((!this._prevStage||void 0!==f)&&this.canvas){f=this._nextStage;var g=this._getPointerData(b),h=g.inBounds;this._updatePointerPosition(b,c,d,e),(h||g.inBounds||this.mouseMoveOutside)&&(-1===b&&g.inBounds==!h&&this._dispatchMouseEvent(this,h?"mouseleave":"mouseenter",!1,b,g,c),this._dispatchMouseEvent(this,"stagemousemove",!1,b,g,c),this._dispatchMouseEvent(g.target,"pressmove",!0,b,g,c)),f&&f._handlePointerMove(b,c,d,e,null)}},c._updatePointerPosition=function(b,c,d,e){var f=this._getElementRect(this.canvas);d-=f.left,e-=f.top;var g=this.canvas.width,h=this.canvas.height;d/=(f.right-f.left)/g,e/=(f.bottom-f.top)/h;f=this._getPointerData(b);(f.inBounds=d>=0&&e>=0&&g-1>=d&&h-1>=e)?(f.x=d,f.y=e):this.mouseMoveOutside&&(f.x=0>d?0:d>g-1?g-1:d,f.y=0>e?0:e>h-1?h-1:e),f.posEvtObj=c,f.rawX=d,f.rawY=e,(b===this._primaryPointerID||-1===b)&&(this.mouseX=f.x,this.mouseY=f.y,this.mouseInBounds=f.inBounds)},c._handleMouseUp=function(b){this._handlePointerUp(-1,b,!1)},c._handlePointerUp=function(b,c,d,e){var f=this._nextStage,g=this._getPointerData(b);if(!this._prevStage||void 0!==e){var h=null,i=g.target;e||!i&&!f||(h=this._getObjectsUnderPoint(g.x,g.y,null,!0)),g.down&&(this._dispatchMouseEvent(this,"stagemouseup",!1,b,g,c,h),g.down=!1),h==i&&this._dispatchMouseEvent(i,"click",!0,b,g,c),this._dispatchMouseEvent(i,"pressup",!0,b,g,c),d?(b==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[b]):g.target=null,f&&f._handlePointerUp(b,c,d,e||h&&this)}},c._handleMouseDown=function(b){this._handlePointerDown(-1,b,b.pageX,b.pageY)},c._handlePointerDown=function(b,c,d,e,f){this.preventSelection&&c.preventDefault(),(null==this._primaryPointerID||-1===b)&&(this._primaryPointerID=b),null!=e&&this._updatePointerPosition(b,c,d,e);var g=null,h=this._nextStage,i=this._getPointerData(b);f||(g=i.target=this._getObjectsUnderPoint(i.x,i.y,null,!0)),i.inBounds&&(this._dispatchMouseEvent(this,"stagemousedown",!1,b,i,c,g),i.down=!0),this._dispatchMouseEvent(g,"mousedown",!0,b,i,c),h&&h._handlePointerDown(b,c,d,e,f||g&&this)},c._testMouseOver=function(b,c,d){if(!this._prevStage||void 0!==c){var e=this._nextStage;if(!this._mouseOverIntervalID)return void (e&&e._testMouseOver(b,c,d));var f=this._getPointerData(-1);if(f&&(b||this.mouseX!=this._mouseOverX||this.mouseY!=this._mouseOverY||!this.mouseInBounds)){var g,h=f.posEvtObj,i=d||h&&h.target==this.canvas,j=null,k=-1,l="";!c&&(b||this.mouseInBounds&&i)&&(j=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,!0),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);var m=this._mouseOverTarget||[],n=m[m.length-1],o=this._mouseOverTarget=[];for(g=j;g;)o.unshift(g),l||(l=g.cursor),g=g.parent;for(this.canvas.style.cursor=l,!c&&d&&(d.canvas.style.cursor=l),g=0,l=o.length;l>g&&o[g]==m[g];g++)k=g;for(n!=j&&this._dispatchMouseEvent(n,"mouseout",!0,-1,f,h,j),g=m.length-1;g>k;g--)this._dispatchMouseEvent(m[g],"rollout",!1,-1,f,h,j);for(g=o.length-1;g>k;g--)this._dispatchMouseEvent(o[g],"rollover",!1,-1,f,h,n);n!=j&&this._dispatchMouseEvent(j,"mouseover",!0,-1,f,h,n),e&&e._testMouseOver(b,c||j&&this,d||i&&this)}}},c._handleDoubleClick=function(b,c){var d=null,e=this._nextStage,f=this._getPointerData(-1);c||(d=this._getObjectsUnderPoint(f.x,f.y,null,!0),this._dispatchMouseEvent(d,"dblclick",!0,-1,f,b)),e&&e._handleDoubleClick(b,c||d&&this)},c._dispatchMouseEvent=function(b,c,d,e,f,g,i){if(b&&(d||b.hasEventListener(c))){c=new h.MouseEvent(c,d,!1,f.x,f.y,g,e,e===this._primaryPointerID||-1===e,f.rawX,f.rawY,i);b.dispatchEvent(c)}},h.Stage=h.promote(b,"Container")})(),h=h||{},(function(){function b(b){this.DisplayObject_constructor(),"string"==typeof b?(this.image=document.createElement("img"),this.image.src=b):this.image=b,this.sourceRect=null}var c=h.extend(b,h.DisplayObject);c.initialize=b,c.isVisible=function(){var b=this.image;b=this.cacheCanvas||b&&(b.naturalWidth||b.getContext||b.readyState>=2);return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&b)},c.draw=function(b,c){if(this.DisplayObject_draw(b,c)||!this.image)return!0;c=this.image;var d=this.sourceRect;if(d){var e=d.x,f=d.y,g=e+d.width;d=f+d.height;var h=0,i=0,j=c.width,k=c.height;0>e&&(h-=e,e=0),g>j&&(g=j),0>f&&(i-=f,f=0),d>k&&(d=k),b.drawImage(c,e,f,g-e,d-f,h,i,g-e,d-f)}else b.drawImage(c,0,0);return!0},c.getBounds=function(){var b=this.DisplayObject_getBounds();if(b)return b;b=this.image;var c=this.sourceRect||b;b=b&&(b.naturalWidth||b.getContext||b.readyState>=2);return b?this._rectangle.setValues(0,0,c.width,c.height):null},c.clone=function(){var c=new b(this.image);return this.sourceRect&&(c.sourceRect=this.sourceRect.clone()),this._cloneProps(c),c},c.toString=function(){return"[Bitmap (name="+this.name+")]"},h.Bitmap=h.promote(b,"DisplayObject")})(),h=h||{},(function(){"use strict";function b(b,c){this.DisplayObject_constructor(),this.currentFrame=0,this.currentAnimation=null,this.paused=!0,this.spriteSheet=b,this.currentAnimationFrame=0,this.framerate=0,this._animation=null,this._currentFrame=null,this._skipAdvance=!1,null!=c&&this.gotoAndPlay(c)}var c=h.extend(b,h.DisplayObject);c.initialize=b,c.isVisible=function(){var b=this.cacheCanvas||this.spriteSheet.complete;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&b)},c.draw=function(b,c){if(this.DisplayObject_draw(b,c))return!0;this._normalizeFrame();c=this.spriteSheet.getFrame(0|this._currentFrame);if(!c)return!1;var d=c.rect;return d.width&&d.height&&b.drawImage(c.image,d.x,d.y,d.width,d.height,-c.regX,-c.regY,d.width,d.height),!0},c.play=function(){this.paused=!1},c.stop=function(){this.paused=!0},c.gotoAndPlay=function(b){this.paused=!1,this._skipAdvance=!0,this._goto(b)},c.gotoAndStop=function(b){this.paused=!0,this._goto(b)},c.advance=function(b){var c=this.framerate||this.spriteSheet.framerate;b=c&&null!=b?b/(1e3/c):1;this._normalizeFrame(b)},c.getBounds=function(){return this.DisplayObject_getBounds()||this.spriteSheet.getFrameBounds(this.currentFrame,this._rectangle)},c.clone=function(){return this._cloneProps(new b(this.spriteSheet))},c.toString=function(){return"[Sprite (name="+this.name+")]"},c._cloneProps=function(b){return this.DisplayObject__cloneProps(b),b.currentFrame=this.currentFrame,b.currentAnimation=this.currentAnimation,b.paused=this.paused,b.currentAnimationFrame=this.currentAnimationFrame,b.framerate=this.framerate,b._animation=this._animation,b._currentFrame=this._currentFrame,b._skipAdvance=this._skipAdvance,b},c._tick=function(b){this.paused||(this._skipAdvance||this.advance(b&&b.delta),this._skipAdvance=!1),this.DisplayObject__tick(b)},c._normalizeFrame=function(b){b=b||0;var c,d=this._animation,e=this.paused,f=this._currentFrame;if(d){var g=d.speed||1,h=this.currentAnimationFrame;if(c=d.frames.length,h+b*g>=c){var i=d.next;if(this._dispatchAnimationEnd(d,f,e,i,c-1))return;if(i)return this._goto(i,b-(c-h)/g);this.paused=!0,h=d.frames.length-1}else h+=b*g;this.currentAnimationFrame=h,this._currentFrame=d.frames[0|h]}else if(f=this._currentFrame+=b,c=this.spriteSheet.getNumFrames(),f>=c&&c>0&&!this._dispatchAnimationEnd(d,f,e,c-1)&&(this._currentFrame-=c)>=c)return this._normalizeFrame();f=0|this._currentFrame,this.currentFrame!=f&&(this.currentFrame=f,this.dispatchEvent("change"))},c._dispatchAnimationEnd=function(b,c,d,e,f){var g=b?b.name:null;if(this.hasEventListener("animationend")){var i=new h.Event("animationend");i.name=g,i.next=e,this.dispatchEvent(i)}g=this._animation!=b||this._currentFrame!=c;return g||d||!this.paused||(this.currentAnimationFrame=f,g=!0),g},c._goto=function(b,c){if(this.currentAnimationFrame=0,isNaN(b)){var d=this.spriteSheet.getAnimation(b);d&&(this._animation=d,this.currentAnimation=b,this._normalizeFrame(c))}else this.currentAnimation=this._animation=null,this._currentFrame=b,this._normalizeFrame()},h.Sprite=h.promote(b,"DisplayObject")})(),h=h||{},(function(){"use strict";function b(b){this.DisplayObject_constructor(),this.graphics=b?b:new h.Graphics()}var c=h.extend(b,h.DisplayObject);c.isVisible=function(){var b=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&b)},c.draw=function(b,c){return this.DisplayObject_draw(b,c)?!0:(this.graphics.draw(b,this),!0)},c.clone=function(c){c=c&&this.graphics?this.graphics.clone():this.graphics;return this._cloneProps(new b(c))},c.toString=function(){return"[Shape (name="+this.name+")]"},h.Shape=h.promote(b,"DisplayObject")})(),h=h||{},(function(){"use strict";function b(b,c,d){this.DisplayObject_constructor(),this.text=b,this.font=c,this.color=d,this.textAlign="left",this.textBaseline="top",this.maxWidth=null,this.outline=0,this.lineHeight=0,this.lineWidth=null}var c=h.extend(b,h.DisplayObject),d=h.createCanvas?h.createCanvas():document.createElement("canvas");d.getContext&&(b._workingContext=d.getContext("2d"),d.width=d.height=1),b.H_OFFSETS={start:0,left:0,center:-.5,end:-1,right:-1},b.V_OFFSETS={top:0,hanging:-.01,middle:-.4,alphabetic:-.8,ideographic:-.85,bottom:-1},c.isVisible=function(){var b=this.cacheCanvas||null!=this.text&&""!==this.text;return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY&&b)},c.draw=function(b,c){if(this.DisplayObject_draw(b,c))return!0;c=this.color||"#000";return this.outline?(b.strokeStyle=c,b.lineWidth=1*this.outline):b.fillStyle=c,this._drawText(this._prepContext(b)),!0},c.getMeasuredWidth=function(){return this._getMeasuredWidth(this.text)},c.getMeasuredLineHeight=function(){return 1.2*this._getMeasuredWidth("M")},c.getMeasuredHeight=function(){return this._drawText(null,{}).height},c.getBounds=function(){var c=this.DisplayObject_getBounds();if(c)return c;if(null==this.text||""===this.text)return null;c=this._drawText(null,{});var d=this.maxWidth&&this.maxWidth<c.width?this.maxWidth:c.width,e=d*b.H_OFFSETS[this.textAlign||"left"],f=this.lineHeight||this.getMeasuredLineHeight();f=f*b.V_OFFSETS[this.textBaseline||"top"];return this._rectangle.setValues(e,f,d,c.height)},c.getMetrics=function(){var c={lines:[]};return c.lineHeight=this.lineHeight||this.getMeasuredLineHeight(),c.vOffset=c.lineHeight*b.V_OFFSETS[this.textBaseline||"top"],this._drawText(null,c,c.lines)},c.clone=function(){return this._cloneProps(new b(this.text,this.font,this.color))},c.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"},c._cloneProps=function(b){return this.DisplayObject__cloneProps(b),b.textAlign=this.textAlign,b.textBaseline=this.textBaseline,b.maxWidth=this.maxWidth,b.outline=this.outline,b.lineHeight=this.lineHeight,b.lineWidth=this.lineWidth,b},c._prepContext=function(b){return b.font=this.font||"10px sans-serif",b.textAlign=this.textAlign||"left",b.textBaseline=this.textBaseline||"top",b},c._drawText=function(c,d,e){var f=!!c;f||(c=b._workingContext,c.save(),this._prepContext(c));for(var g=this.lineHeight||this.getMeasuredLineHeight(),h=0,i=0,j=String(this.text).split(/(?:\r\n|\r|\n)/),k=0,l=j.length;l>k;k++){var m=j[k],n=null;if(null!=this.lineWidth&&(n=c.measureText(m).width)>this.lineWidth){var o=m.split(/(\s)/);m=o[0],n=c.measureText(m).width;for(var a=1,p=o.length;p>a;a+=2){var q=c.measureText(o[a]+o[a+1]).width;n+q>this.lineWidth?(f&&this._drawTextLine(c,m,i*g),e&&e.push(m),n>h&&(h=n),m=o[a+1],n=c.measureText(m).width,i++):(m+=o[a]+o[a+1],n+=q)}}f&&this._drawTextLine(c,m,i*g),e&&e.push(m),d&&null==n&&(n=c.measureText(m).width),n>h&&(h=n),i++}return d&&(d.width=h,d.height=i*g),f||c.restore(),d},c._drawTextLine=function(b,c,d){this.outline?b.strokeText(c,0,d,this.maxWidth||65535):b.fillText(c,0,d,this.maxWidth||65535)},c._getMeasuredWidth=function(c){var d=b._workingContext;d.save();c=this._prepContext(d).measureText(c).width;return d.restore(),c},h.Text=h.promote(b,"DisplayObject")})(),h=h||{},(function(){"use strict";function b(b,c){this.Container_constructor(),this.text=b||"",this.spriteSheet=c,this.lineHeight=0,this.letterSpacing=0,this.spaceWidth=0,this._oldProps={text:0,spriteSheet:0,lineHeight:0,letterSpacing:0,spaceWidth:0}}var c=h.extend(b,h.Container);b.maxPoolSize=100,b._spritePool=[],c.draw=function(b,c){this.DisplayObject_draw(b,c)||(this._updateText(),this.Container_draw(b,c))},c.getBounds=function(){return this._updateText(),this.Container_getBounds()},c.isVisible=function(){var b=this.cacheCanvas||this.spriteSheet&&this.spriteSheet.complete&&this.text;return!!(this.visible&&this.alpha>0&&0!==this.scaleX&&0!==this.scaleY&&b)},c.clone=function(){return this._cloneProps(new b(this.text,this.spriteSheet))},c.addChild=c.addChildAt=c.removeChild=c.removeChildAt=c.removeAllChildren=function(){},c._cloneProps=function(b){return this.Container__cloneProps(b),b.lineHeight=this.lineHeight,b.letterSpacing=this.letterSpacing,b.spaceWidth=this.spaceWidth,b},c._getFrameIndex=function(b,c){var d,e=c.getAnimation(b);return e||(b!=(d=b.toUpperCase())||b!=(d=b.toLowerCase())||(d=null),d&&(e=c.getAnimation(d))),e&&e.frames[0]},c._getFrame=function(b,c){b=this._getFrameIndex(b,c);return null==b?b:c.getFrame(b)},c._getLineHeight=function(b){b=this._getFrame("1",b)||this._getFrame("T",b)||this._getFrame("L",b)||b.getFrame(0);return b?b.rect.height:1},c._getSpaceWidth=function(b){b=this._getFrame("1",b)||this._getFrame("l",b)||this._getFrame("e",b)||this._getFrame("a",b)||b.getFrame(0);return b?b.rect.width:1},c._updateText=function(){var c,d=0,e=0,f=this._oldProps,g=!1,i=this.spaceWidth,j=this.lineHeight,k=this.spriteSheet,l=b._spritePool,m=this.children,n=0,o=m.length;for(var a in f)f[a]!=this[a]&&(f[a]=this[a],g=!0);if(g){f=!!this._getFrame(" ",k);f||i||(i=this._getSpaceWidth(k)),j||(j=this._getLineHeight(k));for(a=0,g=this.text.length;g>a;a++){var p=this.text.charAt(a);if(" "!=p||f)if("\n"!=p&&"\r"!=p){var q=this._getFrameIndex(p,k);null!=q&&(o>n?c=m[n]:(m.push(c=l.length?l.pop():new h.Sprite()),c.parent=this,o++),c.spriteSheet=k,c.gotoAndStop(q),c.x=d,c.y=e,n++,d+=c.getBounds().width+this.letterSpacing)}else"\r"==p&&"\n"==this.text.charAt(a+1)&&a++,d=0,e+=j;else d+=i}for(;o>n;)l.push(c=m.pop()),c.parent=null,o--;l.length>b.maxPoolSize&&(l.length=b.maxPoolSize)}},h.BitmapText=h.promote(b,"Container")})(),h=h||{},(function(){"use strict";function b(c,d,e,f){this.Container_constructor(),!b.inited&&b.init(),this.mode=c||b.INDEPENDENT,this.startPosition=d||0,this.loop=e,this.currentFrame=0,this.timeline=new h.Timeline(null,f,{paused:!0,position:d,useTicks:!0}),this.paused=!1,this.actionsEnabled=!0,this.autoReset=!0,this.frameBounds=this.frameBounds||null,this.framerate=null,this._synchOffset=0,this._prevPos=-1,this._prevPosition=0,this._t=0,this._managed={}}function c(){throw"MovieClipPlugin cannot be instantiated."}var d=h.extend(b,h.Container);b.INDEPENDENT="independent",b.SINGLE_FRAME="single",b.SYNCHED="synched",b.inited=!1,b.init=function(){b.inited||(c.install(),b.inited=!0)},d.getLabels=function(){return this.timeline.getLabels()},d.getCurrentLabel=function(){return this._updateTimeline(),this.timeline.getCurrentLabel()},d.getDuration=function(){return this.timeline.duration};try{Object.defineProperties(d,{labels:{get:d.getLabels},currentLabel:{get:d.getCurrentLabel},totalFrames:{get:d.getDuration},duration:{get:d.getDuration}})}catch(b){}d.initialize=b,d.isVisible=function(){return!!(this.visible&&this.alpha>0&&0!=this.scaleX&&0!=this.scaleY)},d.draw=function(b,c){return this.DisplayObject_draw(b,c)?!0:(this._updateTimeline(),this.Container_draw(b,c),!0)},d.play=function(){this.paused=!1},d.stop=function(){this.paused=!0},d.gotoAndPlay=function(b){this.paused=!1,this._goto(b)},d.gotoAndStop=function(b){this.paused=!0,this._goto(b)},d.advance=function(c){var d=b.INDEPENDENT;if(this.mode==d){for(var e=this,f=e.framerate;(e=e.parent)&&null==f;)e.mode==d&&(f=e._framerate);this._framerate=f;d=null!=f&&-1!=f&&null!=c?c/(1e3/f)+this._t:1;e=0|d;for(this._t=d-e;!this.paused&&e--;)this._prevPosition=this._prevPos<0?0:this._prevPosition+1,this._updateTimeline()}},d.clone=function(){throw"MovieClip cannot be cloned."},d.toString=function(){return"[MovieClip (name="+this.name+")]"},d._tick=function(b){this.advance(b&&b.delta),this.Container__tick(b)},d._goto=function(b){b=this.timeline.resolve(b);null!=b&&(-1==this._prevPos&&(this._prevPos=0/0),this._prevPosition=b,this._t=0,this._updateTimeline())},d._reset=function(){this._prevPos=-1,this._t=this.currentFrame=0,this.paused=!1},d._updateTimeline=function(){var c=this.timeline,d=this.mode!=b.INDEPENDENT;c.loop=null==this.loop?!0:this.loop;var e=d?this.startPosition+(this.mode==b.SINGLE_FRAME?0:this._synchOffset):this._prevPos<0?0:this._prevPosition;d=d||!this.actionsEnabled?h.Tween.NONE:null;if(this.currentFrame=c._calcPosition(e),c.setPosition(e,d),this._prevPosition=c._prevPosition,this._prevPos!=c._prevPos){this.currentFrame=this._prevPos=c._prevPos;for(e in this._managed)this._managed[e]=1;for(d=c._tweens,e=0,c=d.length;c>e;e++){var f=d[e],g=f._target;if(g!=this&&!f.passive){f=f._stepPosition;g instanceof h.DisplayObject?this._addManagedChild(g,f):this._setState(g.state,f)}}g=this.children;for(e=g.length-1;e>=0;e--){f=g[e].id;1==this._managed[f]&&(this.removeChildAt(e),delete this._managed[f])}}},d._setState=function(b,c){if(b)for(var d=b.length-1;d>=0;d--){var e=b[d],f=e.t;e=e.p;for(var g in e)f[g]=e[g];this._addManagedChild(f,c)}},d._addManagedChild=function(c,d){c._off||(this.addChildAt(c,0),c instanceof b&&(c._synchOffset=d,c.mode==b.INDEPENDENT&&c.autoReset&&!this._managed[c.id]&&c._reset()),this._managed[c.id]=2)},d._getBounds=function(b,c){var d=this.DisplayObject_getBounds();return d||(this._updateTimeline(),this.frameBounds&&(d=this._rectangle.copy(this.frameBounds[this.currentFrame]))),d?this._transformBounds(d,b,c):this.Container__getBounds(b,c)},h.MovieClip=h.promote(b,"Container"),c.priority=100,c.install=function(){h.Tween.installPlugin(c,["startPosition"])},c.init=function(b,c,d){return d},c.step=function(){},c.tween=function(c,d,e,f,g,h){return c.target instanceof b?1==h?g[d]:f[d]:e}})(),h=h||{},(function(){"use strict";function b(){throw"SpriteSheetUtils cannot be instantiated"}var c=h.createCanvas?h.createCanvas():document.createElement("canvas");c.getContext&&(b._workingCanvas=c,b._workingContext=c.getContext("2d"),c.width=c.height=1),b.addFlippedFrames=function(c,d,e,f){if(d||e||f){var g=0;d&&b._flip(c,++g,!0,!1),e&&b._flip(c,++g,!1,!0),f&&b._flip(c,++g,!0,!0)}},b.extractFrame=function(c,d){isNaN(d)&&(d=c.getAnimation(d).frames[0]);c=c.getFrame(d);if(!c)return null;d=c.rect;var e=b._workingCanvas;e.width=d.width,e.height=d.height,b._workingContext.drawImage(c.image,d.x,d.y,d.width,d.height,0,0,d.width,d.height);c=document.createElement("img");return c.src=e.toDataURL("image/png"),c},b.mergeAlpha=function(b,c,d){d||(d=h.createCanvas?h.createCanvas():document.createElement("canvas")),d.width=Math.max(c.width,b.width),d.height=Math.max(c.height,b.height);var e=d.getContext("2d");return e.save(),e.drawImage(b,0,0),e.globalCompositeOperation="destination-in",e.drawImage(c,0,0),e.restore(),d},b._flip=function(c,d,e,f){for(var g=c._images,h=b._workingCanvas,i=b._workingContext,j=g.length/d,k=0;j>k;k++){var l=g[k];l.__tmp=k,i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,h.width+1,h.height+1),h.width=l.width,h.height=l.height,i.setTransform(e?-1:1,0,0,f?-1:1,e?l.width:0,f?l.height:0),i.drawImage(l,0,0);var m=document.createElement("img");m.src=h.toDataURL("image/png"),m.width=l.width,m.height=l.height,g.push(m)}h=c._frames;i=h.length/d;for(k=0;i>k;k++){l=h[k];var n=l.rect.clone();m=g[l.image.__tmp+j*d];var o={image:m,rect:n,regX:l.regX,regY:l.regY};e&&(n.x=m.width-n.x-n.width,o.regX=n.width-l.regX),f&&(n.y=m.height-n.y-n.height,o.regY=n.height-l.regY),h.push(o)}m="_"+(e?"h":"")+(f?"v":"");n=c._animations;o=c._data;g=n.length/d;for(k=0;g>k;k++){j=n[k];l=o[j];e={name:j+m,speed:l.speed,next:l.next,frames:[]};l.next&&(e.next+=m),h=l.frames;for(f=0,c=h.length;c>f;f++)e.frames.push(h[f]+i*d);o[e.name]=e,n.push(e.name)}},h.SpriteSheetUtils=b})(),h=h||{},(function(){"use strict";function b(b){this.EventDispatcher_constructor(),this.maxWidth=2048,this.maxHeight=2048,this.spriteSheet=null,this.scale=1,this.padding=1,this.timeSlice=.3,this.progress=-1,this.framerate=b||0,this._frames=[],this._animations={},this._data=null,this._nextFrameIndex=0,this._index=0,this._timerID=null,this._scale=1}var c=h.extend(b,h.EventDispatcher);b.ERR_DIMENSIONS="frame dimensions exceed max spritesheet dimensions",b.ERR_RUNNING="a build is already running",c.addFrame=function(c,d,e,f,g){if(this._data)throw b.ERR_RUNNING;d=d||c.bounds||c.nominalBounds;return!d&&c.getBounds&&(d=c.getBounds()),d?(e=e||1,this._frames.push({source:c,sourceRect:d,scale:e,funct:f,data:g,index:this._frames.length,height:d.height*e})-1):null},c.addAnimation=function(c,d,e,f){if(this._data)throw b.ERR_RUNNING;this._animations[c]={frames:d,next:e,speed:f}},c.addMovieClip=function(c,d,e,f,g,h){if(this._data)throw b.ERR_RUNNING;var i=c.frameBounds;d=d||c.bounds||c.nominalBounds;if(!d&&c.getBounds&&(d=c.getBounds()),d||i){var j,k=this._frames.length,l=c.timeline.duration;for(j=0;l>j;j++){var m=i&&i[j]?i[j]:d;this.addFrame(c,m,e,this._setupMovieClipFrame,{i:j,f:f,d:g})}m=c.timeline._labels;e=[];for(f in m)e.push({index:m[f],label:f});if(e.length)for(e.sort(function(b,c){return b.index-c.index}),j=0,g=e.length;g>j;j++){for(var i=e[j].label,d=k+e[j].index,m=k+(j==g-1?l:e[j+1].index),f=[],n=d;m>n;n++)f.push(n);(!h||(i=h(i,c,d,m)))&&this.addAnimation(i,f,!0)}}},c.build=function(){if(this._data)throw b.ERR_RUNNING;for(this._startBuild();this._drawNext(););return this._endBuild(),this.spriteSheet},c.buildAsync=function(c){if(this._data)throw b.ERR_RUNNING;this.timeSlice=c,this._startBuild();var d=this;this._timerID=setTimeout(function(){d._run()},50-50*Math.max(.01,Math.min(.99,this.timeSlice||.3)))},c.stopAsync=function(){clearTimeout(this._timerID),this._data=null},c.clone=function(){throw"SpriteSheetBuilder cannot be cloned."},c.toString=function(){return"[SpriteSheetBuilder]"},c._startBuild=function(){var c=this.padding||0;this.progress=0,this.spriteSheet=null,this._index=0,this._scale=this.scale;var d=[];this._data={images:[],frames:d,framerate:this.framerate,animations:this._animations};var e=this._frames.slice();if(e.sort(function(b,c){return b.height<=c.height?-1:1}),e[e.length-1].height+2*c>this.maxHeight)throw b.ERR_DIMENSIONS;for(var f=0,g=0,i=0;e.length;){var j=this._fillRow(e,f,i,d,c);if(j.w>g&&(g=j.w),f+=j.h,!j.h||!e.length){var k=h.createCanvas?h.createCanvas():document.createElement("canvas");k.width=this._getSize(g,this.maxWidth),k.height=this._getSize(f,this.maxHeight),this._data.images[i]=k,j.h||(g=f=0,i++)}}},c._setupMovieClipFrame=function(b,c){var d=b.actionsEnabled;b.actionsEnabled=!1,b.gotoAndStop(c.i),b.actionsEnabled=d,c.f&&c.f(b,c.d,c.i)},c._getSize=function(b,c){for(var d=4;Math.pow(2,++d)<b;);return Math.min(c,Math.pow(2,d))},c._fillRow=function(c,d,e,f,g){var i=this.maxWidth,j=this.maxHeight;d+=g;for(var j=j-d,k=g,l=0,m=c.length-1;m>=0;m--){var n=c[m],o=this._scale*n.scale,a=n.sourceRect,p=n.source,q=Math.floor(o*a.x-g),r=Math.floor(o*a.y-g),s=Math.ceil(o*a.height+2*g);a=Math.ceil(o*a.width+2*g);if(a>i)throw b.ERR_DIMENSIONS;s>j||k+a>i||(n.img=e,n.rect=new h.Rectangle(k,d,a,s),l=l||s,c.splice(m,1),f[n.index]=[k,d,a,s,e,Math.round(-q+o*p.regX-g),Math.round(-r+o*p.regY-g)],k+=a)}return{w:k,h:l}},c._endBuild=function(){this.spriteSheet=new h.SpriteSheet(this._data),this._data=null,this.progress=1,this.dispatchEvent("complete")},c._run=function(){for(var b=50*Math.max(.01,Math.min(.99,this.timeSlice||.3)),c=new Date().getTime()+b,d=!1;c>new Date().getTime();)if(!this._drawNext()){d=!0;break}if(d)this._endBuild();else{var e=this;this._timerID=setTimeout(function(){e._run()},50-b)}c=this.progress=this._index/this._frames.length;if(this.hasEventListener("progress")){d=new h.Event("progress");d.progress=c,this.dispatchEvent(d)}},c._drawNext=function(){var b=this._frames[this._index],c=b.scale*this._scale,d=b.rect,e=b.sourceRect,f=this._data.images[b.img];f=f.getContext("2d");return b.funct&&b.funct(b.source,b.data),f.save(),f.beginPath(),f.rect(d.x,d.y,d.width,d.height),f.clip(),f.translate(Math.ceil(d.x-e.x*c),Math.ceil(d.y-e.y*c)),f.scale(c,c),b.source.draw(f),f.restore(),++this._index<this._frames.length},h.SpriteSheetBuilder=h.promote(b,"EventDispatcher")})(),h=h||{},(function(){"use strict";function b(b){this.DisplayObject_constructor(),"string"==typeof b&&(b=document.getElementById(b)),this.mouseEnabled=!1;var c=b.style;c.position="absolute",c.transformOrigin=c.WebkitTransformOrigin=c.msTransformOrigin=c.MozTransformOrigin=c.OTransformOrigin="0% 0%",this.htmlElement=b,this._oldProps=null}var c=h.extend(b,h.DisplayObject);c.isVisible=function(){return null!=this.htmlElement},c.draw=function(){return!0},c.cache=function(){},c.uncache=function(){},c.updateCache=function(){},c.hitTest=function(){},c.localToGlobal=function(){},c.globalToLocal=function(){},c.localToLocal=function(){},c.clone=function(){throw"DOMElement cannot be cloned."},c.toString=function(){return"[DOMElement (name="+this.name+")]"},c._tick=function(b){var c=this.getStage();c&&c.on("drawend",this._handleDrawEnd,this,!0),this.DisplayObject__tick(b)},c._handleDrawEnd=function(){var b=this.htmlElement;if(b){b=b.style;var c=this.getConcatenatedDisplayProps(this._props),d=c.matrix,e=c.visible?"visible":"hidden";if(e!=b.visibility&&(b.visibility=e),c.visible){e=this._oldProps;var f=e&&e.matrix,g=1e4;if(!f||!f.equals(d)){f="matrix("+(d.a*g|0)/g+","+(d.b*g|0)/g+","+(d.c*g|0)/g+","+(d.d*g|0)/g+","+(d.tx+.5|0);b.transform=b.WebkitTransform=b.OTransform=b.msTransform=f+","+(d.ty+.5|0)+")",b.MozTransform=f+"px,"+(d.ty+.5|0)+"px)",e||(e=this._oldProps=new h.DisplayProps(!0,0/0)),e.matrix.copy(d)}e.alpha!=c.alpha&&(b.opacity=""+(c.alpha*g|0)/g,e.alpha=c.alpha)}}},h.DOMElement=h.promote(b,"DisplayObject")})(),h=h||{},(function(){"use strict";function b(){}var c=b.prototype;c.getBounds=function(b){return b},c.applyFilter=function(b,c,d,e,f,g,h,i){g=g||b,null==h&&(h=c),null==i&&(i=d);try{var j=b.getImageData(c,d,e,f)}catch(b){return!1}return this._applyFilter(j)?(g.putImageData(j,h,i),!0):!1},c.toString=function(){return"[Filter]"},c.clone=function(){return new b()},c._applyFilter=function(){return!0},h.Filter=b})(),h=h||{},(function(){"use strict";function b(b,c,d){(isNaN(b)||0>b)&&(b=0),(isNaN(c)||0>c)&&(c=0),(isNaN(d)||1>d)&&(d=1),this.blurX=0|b,this.blurY=0|c,this.quality=0|d}var c=h.extend(b,h.Filter);b.MUL_TABLE=[1,171,205,293,57,373,79,137,241,27,391,357,41,19,283,265,497,469,443,421,25,191,365,349,335,161,155,149,9,278,269,261,505,245,475,231,449,437,213,415,405,395,193,377,369,361,353,345,169,331,325,319,313,307,301,37,145,285,281,69,271,267,263,259,509,501,493,243,479,118,465,459,113,446,55,435,429,423,209,413,51,403,199,393,97,3,379,375,371,367,363,359,355,351,347,43,85,337,333,165,327,323,5,317,157,311,77,305,303,75,297,294,73,289,287,71,141,279,277,275,68,135,67,133,33,262,260,129,511,507,503,499,495,491,61,121,481,477,237,235,467,232,115,457,227,451,7,445,221,439,218,433,215,427,425,211,419,417,207,411,409,203,202,401,399,396,197,49,389,387,385,383,95,189,47,187,93,185,23,183,91,181,45,179,89,177,11,175,87,173,345,343,341,339,337,21,167,83,331,329,327,163,81,323,321,319,159,79,315,313,39,155,309,307,153,305,303,151,75,299,149,37,295,147,73,291,145,289,287,143,285,71,141,281,35,279,139,69,275,137,273,17,271,135,269,267,133,265,33,263,131,261,130,259,129,257,1],b.SHG_TABLE=[0,9,10,11,9,12,10,11,12,9,13,13,10,9,13,13,14,14,14,14,10,13,14,14,14,13,13,13,9,14,14,14,15,14,15,14,15,15,14,15,15,15,14,15,15,15,15,15,14,15,15,15,15,15,15,12,14,15,15,13,15,15,15,15,16,16,16,15,16,14,16,16,14,16,13,16,16,16,15,16,13,16,15,16,14,9,16,16,16,16,16,16,16,16,16,13,14,16,16,15,16,16,10,16,15,16,14,16,16,14,16,16,14,16,16,14,15,16,16,16,14,15,14,15,13,16,16,15,17,17,17,17,17,17,14,15,17,17,16,16,17,16,15,17,16,17,11,17,16,17,16,17,16,17,17,16,17,17,16,17,17,16,16,17,17,17,16,14,17,17,17,17,15,16,14,16,15,16,13,16,15,16,14,16,15,16,12,16,15,16,17,17,17,17,17,13,16,15,17,17,17,16,15,17,17,17,16,15,17,17,14,16,17,17,16,17,17,16,15,17,16,14,17,16,15,17,16,17,17,16,17,15,16,17,14,17,16,15,17,16,17,13,17,16,17,17,16,17,14,17,16,17,16,17,16,17,9],c.getBounds=function(b){var c=0|this.blurX,d=0|this.blurY;if(0>=c&&0>=d)return b;var e=Math.pow(this.quality,.2);return(b||new h.Rectangle()).pad(c*e+1,d*e+1,c*e+1,d*e+1)},c.clone=function(){return new b(this.blurX,this.blurY,this.quality)},c.toString=function(){return"[BlurFilter]"},c._applyFilter=function(c){var d=this.blurX>>1;if(isNaN(d)||0>d)return!1;var e=this.blurY>>1;if(isNaN(e)||0>e)return!1;if(0==d&&0==e)return!1;var f=this.quality;(isNaN(f)||1>f)&&(f=1),f|=0,f>3&&(f=3),1>f&&(f=1);var g=c.data,h,i,j,k,l,m,n,o,a,p,q,r,s,t=d+d+1|0,u=e+e+1|0,v=0|c.width;c=0|c.height;var w=v-1|0,x=c-1|0,y=d+1|0,z=e+1|0,A={r:0,b:0,g:0,a:0},B=A;for(i=1;t>i;i++)B=B.n={r:0,b:0,g:0,a:0};B.n=A;t={r:0,b:0,g:0,a:0};var C=t;for(i=1;u>i;i++)C=C.n={r:0,b:0,g:0,a:0};C.n=t;for(var u=null,D=0|b.MUL_TABLE[d],E=0|b.SHG_TABLE[d],F=0|b.MUL_TABLE[e],G=0|b.SHG_TABLE[e];f-->0;){l=k=0;var H=D,I=E;for(h=c;--h>-1;){for(m=y*(p=g[0|k]),n=y*(q=g[k+1|0]),o=y*(r=g[k+2|0]),a=y*(s=g[k+3|0]),B=A,i=y;--i>-1;)B.r=p,B.g=q,B.b=r,B.a=s,B=B.n;for(i=1;y>i;i++)j=k+((i>w?w:i)<<2)|0,m+=B.r=g[j],n+=B.g=g[j+1],o+=B.b=g[j+2],a+=B.a=g[j+3],B=B.n;for(u=A,B=0;v>B;B++)g[k++]=m*H>>>I,g[k++]=n*H>>>I,g[k++]=o*H>>>I,g[k++]=a*H>>>I,j=l+((j=B+d+1)<w?j:w)<<2,m-=u.r-(u.r=g[j]),n-=u.g-(u.g=g[j+1]),o-=u.b-(u.b=g[j+2]),a-=u.a-(u.a=g[j+3]),u=u.n;l+=v}for(H=F,I=G,B=0;v>B;B++){for(k=B<<2|0,m=z*(p=g[k])|0,n=z*(q=g[k+1|0])|0,o=z*(r=g[k+2|0])|0,a=z*(s=g[k+3|0])|0,C=t,i=0;z>i;i++)C.r=p,C.g=q,C.b=r,C.a=s,C=C.n;for(l=v,i=1;e>=i;i++)k=l+B<<2,m+=C.r=g[k],n+=C.g=g[k+1],o+=C.b=g[k+2],a+=C.a=g[k+3],C=C.n,x>i&&(l+=v);if(k=B,u=t,f>0)for(h=0;c>h;h++)j=k<<2,g[j+3]=s=a*H>>>I,s>0?(g[j]=m*H>>>I,g[j+1]=n*H>>>I,g[j+2]=o*H>>>I):g[j]=g[j+1]=g[j+2]=0,j=B+((j=h+z)<x?j:x)*v<<2,m-=u.r-(u.r=g[j]),n-=u.g-(u.g=g[j+1]),o-=u.b-(u.b=g[j+2]),a-=u.a-(u.a=g[j+3]),u=u.n,k+=v;else for(h=0;c>h;h++)j=k<<2,g[j+3]=s=a*H>>>I,s>0?(s=255/s,g[j]=(m*H>>>I)*s,g[j+1]=(n*H>>>I)*s,g[j+2]=(o*H>>>I)*s):g[j]=g[j+1]=g[j+2]=0,j=B+((j=h+z)<x?j:x)*v<<2,m-=u.r-(u.r=g[j]),n-=u.g-(u.g=g[j+1]),o-=u.b-(u.b=g[j+2]),a-=u.a-(u.a=g[j+3]),u=u.n,k+=v}}return!0},h.BlurFilter=h.promote(b,"Filter")})(),h=h||{},(function(){"use strict";function b(b){this.alphaMap=b,this._alphaMap=null,this._mapData=null}var c=h.extend(b,h.Filter);c.clone=function(){var c=new b(this.alphaMap);return c._alphaMap=this._alphaMap,c._mapData=this._mapData,c},c.toString=function(){return"[AlphaMapFilter]"},c._applyFilter=function(b){if(!this.alphaMap)return!0;if(!this._prepAlphaMap())return!1;for(var b=b.data,c=this._mapData,d=0,e=b.length;e>d;d+=4)b[d+3]=c[d]||0;return!0},c._prepAlphaMap=function(){if(!this.alphaMap)return!1;if(this.alphaMap==this._alphaMap&&this._mapData)return!0;this._mapData=null;var b,c=this._alphaMap=this.alphaMap,d=c;c instanceof HTMLCanvasElement?b=d.getContext("2d"):(d=h.createCanvas?h.createCanvas():document.createElement("canvas"),d.width=c.width,d.height=c.height,b=d.getContext("2d"),b.drawImage(c,0,0));try{var e=b.getImageData(0,0,c.width,c.height)}catch(b){return!1}return this._mapData=e.data,!0},h.AlphaMapFilter=h.promote(b,"Filter")})(),h=h||{},(function(){"use strict";function b(b){this.mask=b}var c=h.extend(b,h.Filter);c.applyFilter=function(b,c,d,e,f,g,h,i){return this.mask?(g=g||b,null==h&&(h=c),null==i&&(i=d),g.save(),b!=g?!1:(g.globalCompositeOperation="destination-in",g.drawImage(this.mask,h,i),g.restore(),!0)):!0},c.clone=function(){return new b(this.mask)},c.toString=function(){return"[AlphaMaskFilter]"},h.AlphaMaskFilter=h.promote(b,"Filter")})(),h=h||{},(function(){"use strict";function b(b,c,d,e,f,g,h,i){this.redMultiplier=null!=b?b:1,this.greenMultiplier=null!=c?c:1,this.blueMultiplier=null!=d?d:1,this.alphaMultiplier=null!=e?e:1,this.redOffset=f||0,this.greenOffset=g||0,this.blueOffset=h||0,this.alphaOffset=i||0}var c=h.extend(b,h.Filter);c.toString=function(){return"[ColorFilter]"},c.clone=function(){return new b(this.redMultiplier,this.greenMultiplier,this.blueMultiplier,this.alphaMultiplier,this.redOffset,this.greenOffset,this.blueOffset,this.alphaOffset)},c._applyFilter=function(b){for(var b=b.data,c=b.length,d=0;c>d;d+=4)b[d]=b[d]*this.redMultiplier+this.redOffset,b[d+1]=b[d+1]*this.greenMultiplier+this.greenOffset,b[d+2]=b[d+2]*this.blueMultiplier+this.blueOffset,b[d+3]=b[d+3]*this.alphaMultiplier+this.alphaOffset;return!0},h.ColorFilter=h.promote(b,"Filter")})(),h=h||{},(function(){"use strict";function b(b,c,d,e){this.setColor(b,c,d,e)}var c=b.prototype;b.DELTA_INDEX=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],b.IDENTITY_MATRIX=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],b.LENGTH=b.IDENTITY_MATRIX.length,c.setColor=function(b,c,d,e){return this.reset().adjustColor(b,c,d,e)},c.reset=function(){return this.copy(b.IDENTITY_MATRIX)},c.adjustColor=function(b,c,d,e){return this.adjustHue(e),this.adjustContrast(c),this.adjustBrightness(b),this.adjustSaturation(d)},c.adjustBrightness=function(b){return 0==b||isNaN(b)?this:(b=this._cleanValue(b,255),this._multiplyMatrix([1,0,0,0,b,0,1,0,0,b,0,0,1,0,b,0,0,0,1,0,0,0,0,0,1]),this)},c.adjustContrast=function(c){if(0==c||isNaN(c))return this;c=this._cleanValue(c,100);var d;return 0>c?d=127+c/100*127:(d=c%1,d=0==d?b.DELTA_INDEX[c]:b.DELTA_INDEX[c<<0]*(1-d)+b.DELTA_INDEX[(c<<0)+1]*d,d=127*d+127),this._multiplyMatrix([d/127,0,0,0,.5*(127-d),0,d/127,0,0,.5*(127-d),0,0,d/127,0,.5*(127-d),0,0,0,1,0,0,0,0,0,1]),this},c.adjustSaturation=function(b){if(0==b||isNaN(b))return this;b=this._cleanValue(b,100);b=1+(b>0?3*b/100:b/100);var c=.3086,d=.6094,e=.082;return this._multiplyMatrix([c*(1-b)+b,d*(1-b),e*(1-b),0,0,c*(1-b),d*(1-b)+b,e*(1-b),0,0,c*(1-b),d*(1-b),e*(1-b)+b,0,0,0,0,0,1,0,0,0,0,0,1]),this},c.adjustHue=function(b){if(0==b||isNaN(b))return this;b=this._cleanValue(b,180)/180*Math.PI;var c=Math.cos(b);b=Math.sin(b);var d=.213,e=.715,f=.072;return this._multiplyMatrix([d+c*(1-d)+b*-d,e+c*-e+b*-e,f+c*-f+b*(1-f),0,0,d+c*-d+.143*b,e+c*(1-e)+.14*b,f+c*-f+b*-.283,0,0,d+c*-d+b*-(1-d),e+c*-e+b*e,f+c*(1-f)+b*f,0,0,0,0,0,1,0,0,0,0,0,1]),this},c.concat=function(c){return c=this._fixMatrix(c),c.length!=b.LENGTH?this:(this._multiplyMatrix(c),this)},c.clone=function(){return new b().copy(this)},c.toArray=function(){for(var c=[],d=0,e=b.LENGTH;e>d;d++)c[d]=this[d];return c},c.copy=function(c){for(var d=b.LENGTH,e=0;d>e;e++)this[e]=c[e];return this},c.toString=function(){return"[ColorMatrix]"},c._multiplyMatrix=function(b){var c,d,e,f=[];for(c=0;5>c;c++){for(d=0;5>d;d++)f[d]=this[d+5*c];for(d=0;5>d;d++){var g=0;for(e=0;5>e;e++)g+=b[d+5*e]*f[e];this[d+5*c]=g}}},c._cleanValue=function(b,c){return Math.min(c,Math.max(-c,b))},c._fixMatrix=function(c){return c instanceof b&&(c=c.toArray()),c.length<b.LENGTH?c=c.slice(0,c.length).concat(b.IDENTITY_MATRIX.slice(c.length,b.LENGTH)):c.length>b.LENGTH&&(c=c.slice(0,b.LENGTH)),c},h.ColorMatrix=b})(),h=h||{},(function(){"use strict";function b(b){this.matrix=b}var c=h.extend(b,h.Filter);c.toString=function(){return"[ColorMatrixFilter]"},c.clone=function(){return new b(this.matrix)},c._applyFilter=function(b){for(var c,d,e,f,b=b.data,g=b.length,h=this.matrix,i=h[0],j=h[1],k=h[2],l=h[3],m=h[4],n=h[5],o=h[6],a=h[7],p=h[8],q=h[9],r=h[10],s=h[11],t=h[12],u=h[13],v=h[14],w=h[15],x=h[16],y=h[17],z=h[18],h=h[19],A=0;g>A;A+=4)c=b[A],d=b[A+1],e=b[A+2],f=b[A+3],b[A]=c*i+d*j+e*k+f*l+m,b[A+1]=c*n+d*o+e*a+f*p+q,b[A+2]=c*r+d*s+e*t+f*u+v,b[A+3]=c*w+d*x+e*y+f*z+h;return!0},h.ColorMatrixFilter=h.promote(b,"Filter")})(),h=h||{},(function(){"use strict";function b(){throw"Touch cannot be instantiated"}b.isSupported=function(){return!!("ontouchstart"in window||window.navigator.msPointerEnabled&&window.navigator.msMaxTouchPoints>0||window.navigator.pointerEnabled&&window.navigator.maxTouchPoints>0)},b.enable=function(c,d,e){return c&&c.canvas&&b.isSupported()?c.__touch?!0:(c.__touch={pointers:{},multitouch:!d,preventDefault:!e,count:0},"ontouchstart"in window?b._IOS_enable(c):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&b._IE_enable(c),!0):!1},b.disable=function(c){c&&("ontouchstart"in window?b._IOS_disable(c):(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&b._IE_disable(c),delete c.__touch)},b._IOS_enable=function(c){var d=c.canvas,e=c.__touch.f=function(d){b._IOS_handleEvent(c,d)};d.addEventListener("touchstart",e,!1),d.addEventListener("touchmove",e,!1),d.addEventListener("touchend",e,!1),d.addEventListener("touchcancel",e,!1)},b._IOS_disable=function(b){var c=b.canvas;if(c){b=b.__touch.f;c.removeEventListener("touchstart",b,!1),c.removeEventListener("touchmove",b,!1),c.removeEventListener("touchend",b,!1),c.removeEventListener("touchcancel",b,!1)}},b._IOS_handleEvent=function(b,c){if(b){b.__touch.preventDefault&&c.preventDefault&&c.preventDefault();for(var d=c.changedTouches,e=c.type,f=0,g=d.length;g>f;f++){var h=d[f],i=h.identifier;h.target==b.canvas&&("touchstart"==e?this._handleStart(b,i,c,h.pageX,h.pageY):"touchmove"==e?this._handleMove(b,i,c,h.pageX,h.pageY):("touchend"==e||"touchcancel"==e)&&this._handleEnd(b,i,c))}}},b._IE_enable=function(c){var d=c.canvas,e=c.__touch.f=function(d){b._IE_handleEvent(c,d)};void 0===window.navigator.pointerEnabled?(d.addEventListener("MSPointerDown",e,!1),window.addEventListener("MSPointerMove",e,!1),window.addEventListener("MSPointerUp",e,!1),window.addEventListener("MSPointerCancel",e,!1),c.__touch.preventDefault&&(d.style.msTouchAction="none")):(d.addEventListener("pointerdown",e,!1),window.addEventListener("pointermove",e,!1),window.addEventListener("pointerup",e,!1),window.addEventListener("pointercancel",e,!1),c.__touch.preventDefault&&(d.style.touchAction="none")),c.__touch.activeIDs={}},b._IE_disable=function(b){var c=b.__touch.f;void 0===window.navigator.pointerEnabled?(window.removeEventListener("MSPointerMove",c,!1),window.removeEventListener("MSPointerUp",c,!1),window.removeEventListener("MSPointerCancel",c,!1),b.canvas&&b.canvas.removeEventListener("MSPointerDown",c,!1)):(window.removeEventListener("pointermove",c,!1),window.removeEventListener("pointerup",c,!1),window.removeEventListener("pointercancel",c,!1),b.canvas&&b.canvas.removeEventListener("pointerdown",c,!1))},b._IE_handleEvent=function(b,c){if(b){b.__touch.preventDefault&&c.preventDefault&&c.preventDefault();var d=c.type,e=c.pointerId,f=b.__touch.activeIDs;if("MSPointerDown"==d||"pointerdown"==d){if(c.srcElement!=b.canvas)return;f[e]=!0,this._handleStart(b,e,c,c.pageX,c.pageY)}else f[e]&&("MSPointerMove"==d||"pointermove"==d?this._handleMove(b,e,c,c.pageX,c.pageY):("MSPointerUp"==d||"MSPointerCancel"==d||"pointerup"==d||"pointercancel"==d)&&(delete f[e],this._handleEnd(b,e,c)))}},b._handleStart=function(b,c,d,e,f){var g=b.__touch;if(g.multitouch||!g.count){var h=g.pointers;h[c]||(h[c]=!0,g.count++,b._handlePointerDown(c,d,e,f))}},b._handleMove=function(b,c,d,e,f){b.__touch.pointers[c]&&b._handlePointerMove(c,d,e,f)},b._handleEnd=function(b,c,d){var e=b.__touch,f=e.pointers;f[c]&&(e.count--,b._handlePointerUp(c,d,!0),delete f[c])},h.Touch=b})(),h=h||{},(function(){"use strict";var b=h.EaselJS=h.EaselJS||{};b.version="0.8.2",b.buildDate="Thu, 26 Nov 2015 20:44:34 GMT"})();g.Easel=h}),null);
__d("WAWebMediaEditorUtilsReactKonvaCore",["react-konva"],(function(a,b,c,d,e,f){"use strict";e.exports=b("react-konva")}),null);
__d("WAWebBizClearCartAction",["WAWebBizSyncCartAction"],(function(a,b,c,d,e,f,g){function a(a){a.cartItemCollection.reset(),a.set("message",void 0),a.trigger("change:cartItemCollection"),c("WAWebBizSyncCartAction")(a)}g["default"]=a}),98);
__d("WAWebBizMatchCartItemsToProductsAction",["fbt","WATypeUtils","WAWebBizClearCartAction","WAWebBizProductCatalogBridge","WAWebBizSyncCartAction","WAWebCatalogCollection","WAWebConfirmPopup.react","WAWebModalManager","WAWebProductModel","WAWebProductSelectors","WAWebWidFactory","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function k(a,b){return a.priceAmount1000===d("WAWebProductSelectors").getActivePrice(b)&&a.currency===b.currency&&a.name===b.name&&a.imageHash===b.imageHash&&a.maxAvailable===b.maxAvailable}function l(a,b){var c=d("WAWebProductSelectors").getActivePrice(q(b));return s(a.priceAmount1000,c)&&(!d("WATypeUtils").isString(a.currency)&&!d("WATypeUtils").isString(b.currency)||a.currency===b.currency)&&a.name===b.name&&a.imageHash===((c=b.media)==null?void 0:(a=c.image)==null?void 0:a.id)}function m(a,b){var c=k(a,b);c||a.set({priceAmount1000:d("WAWebProductSelectors").getActivePrice(b),currency:b.currency,name:b.name,imageHash:b.imageHash,maxAvailable:b.maxAvailable},{silent:!0});return c}function n(a,b){var c=b?l(a,b):!0;if(!c&&b){b=q(b);a.set({priceAmount1000:d("WAWebProductSelectors").getActivePrice(b),currency:b.currency,name:b.name,imageHash:b.imageHash,maxAvailable:b.maxAvailable},{silent:!0})}return c}function o(a,b){if(a&&a.status==="deleted"){b.productCollection.remove(a.id);return void 0}return a}function p(){d("WAWebModalManager").ModalManager.open(j.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{onOK:function(){d("WAWebModalManager").ModalManager.close()},children:h._("__JHASH__q_1muHhhF8F__JHASH__")}))}function q(a){var b;return{id:a.id,name:(b=a.name)!=null?b:"",imageCdnUrl:(b=a.media)==null?void 0:(b=b.image)==null?void 0:b.request_image_url,imageHash:(b=a.media)==null?void 0:(b=b.image)==null?void 0:b.id,currency:a.currency,priceAmount1000:r(a.price),salePriceAmount1000:r((b=a.sale_price)==null?void 0:b.price),salePriceStartDate:d("WAWebBizProductCatalogBridge").parseDateValue((b=a.sale_price)==null?void 0:b.start_date),salePriceEndDate:d("WAWebBizProductCatalogBridge").parseDateValue((b=a.sale_price)==null?void 0:b.end_date),maxAvailable:a.max_available}}function r(a){return typeof a==="string"?a.length>0?parseInt(a,10):null:a}function s(a,b){a=r(a);b=r(b);if(d("WATypeUtils").isNumber(a)&&d("WATypeUtils").isNumber(b))return a===b;else if(!d("WATypeUtils").isNumber(a)&&!d("WATypeUtils").isNumber(b))return!0;return!1}function t(a,b){return new(d("WAWebProductModel").Product)(babelHelpers["extends"]({},q(a),{catalogWid:d("WAWebWidFactory").createWid(b),productMsgMediaData:null,imageCount:1,fetchedFromServer:!0,t:Date.now()/1e3,old:!1}))}function a(a,b){var e=d("WAWebCatalogCollection").CatalogCollection.get(d("WAWebWidFactory").createWid(a.id)),f=[],g=[],h=!0;e&&a.cartItemCollection.forEach(function(c){var d=e.productCollection.get(c.id),i=b&&b.products.find(function(a){return a.id===c.id});i=o(i,e);if(!b&&d){var j=m(c,d);h=h&&j;f.push({product:d,cartItem:c})}else if(i){j=n(c,i);h=h&&j;f.push({product:t(i,a.id),cartItem:c})}else h=!1,g.push(c.id)});e||c("WAWebBizClearCartAction")(a);h||(g.length&&a.cartItemCollection.remove(g),a.trigger("change:cartItemCollection"),p());c("WAWebBizSyncCartAction")(a);return f}function b(a){return a.reduce(function(a,b){return a+b.cartItem.quantity*d("WAWebProductSelectors").getSavings(b.product)},0)}g.parsePrice=r;g.isPriceMatch=s;g.createProductFromRefreshCartItem=t;g.matchCartItemsToProducts=a;g.getSavingsFromCartItemsAndProducts=b}),98);
__d("WAWebBizPullCartUpdateAction",["Promise","WAWebBizCartBridge","WAWebCartCollection","WAWebWidFactory"],(function(a,b,c,d,e,f,g){var h;function a(a,c){if(a.cartItemCollection.length===0)return(h||(h=b("Promise"))).resolve({products:[],price:{}});var e=a.cartItemCollection.map(function(a){return a.id});return d("WAWebBizCartBridge").refreshCart(d("WAWebWidFactory").createWid(a.id),e,d("WAWebCartCollection").CartCollection.imageWidth,d("WAWebCartCollection").CartCollection.imageHeight,c)}g["default"]=a}),98);
__d("WAWebSendOrderChatAction",["WALogger","WATimeUtils","WAWebAck","WAWebBizGatingUtils","WAWebMsgKey","WAWebProtobufsE2E.pb","WAWebSendMsgChatAction","WAWebSendMsgResultAction","WAWebUserPrefsMeUser","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["Order message send to chat failure: ",""]);h=function(){return a};return a}function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Order message send to chat failure: ",""]);i=function(){return a};return a}function a(a,b,c,d,e){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g){b=(yield k(a,b,e,f,g));if(d("WAWebUserPrefsMeUser").isMeAccount(a.id))return d("WAWebSendMsgChatAction").addAndSendMsgToChat(a,b)[0].then(function(){})["catch"](function(a){d("WALogger").WARN(i(),a);throw a});try{e=(yield d("WAWebSendMsgChatAction").addAndSendMsgToChat(a,b)[1]);if(!e||e.messageSendResult!==d("WAWebSendMsgResultAction").SendMsgResult.OK)throw c("err")("Order message SendMsgResult failure status")}catch(a){d("WALogger").WARN(h(),a);throw a}});return j.apply(this,arguments)}function k(a,b,c,d,e){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g){var h=d("WAWebUserPrefsMeUser").getMaybeMeUser(),i=b.price.total;h={type:"order",ack:d("WAWebAck").ACK.CLOCK,from:h,id:new(c("WAWebMsgKey"))({from:h,to:a.id,id:yield c("WAWebMsgKey").newId(),participant:void 0,selfDir:"out"}),local:!0,isNewMsg:!0,self:"out",t:d("WATimeUtils").unixTime(),to:a.id,orderId:b.id,token:b.token,orderTitle:a.name||a.formattedTitle,sellerJid:a.id.toString({legacy:!0}),status:d("WAWebProtobufsE2E.pb").Message$OrderMessage$OrderStatus.INQUIRY,messageVersion:d("WAWebBizGatingUtils").isBuyerOrderRevampEnabled()?2:1,thumbnail:f,itemCount:e,message:g,totalAmount1000:i&&i.length>0?parseInt(i,10):void 0,totalCurrencyCode:b.price.currency&&b.price.currency.length>0?b.price.currency:void 0};return h});return l.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebBizSubmitOrderAction",["WAWebBizOrderAction","WAWebBizSyncCartAction","WAWebCatalogCollection","WAWebMediaOpaqueData","WAWebSendOrderChatAction","WAWebWidFactory","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(a){var b=a.cartItemCollection.at(0);if(b==null)return"";a=d("WAWebCatalogCollection").CatalogCollection.get(d("WAWebWidFactory").createWid(a.id));a=a==null?void 0:a.productCollection.get(b.id);a=a==null?void 0:(b=a.getProductImageCollectionHead())==null?void 0:b.mediaData;return a==null?"":a.preview instanceof c("WAWebMediaOpaqueData")?(b=a.preview.getBase64())!=null?b:"":""}function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e=(yield d("WAWebBizOrderAction").createOrder(b.id,a.cartItemCollection.toArray()));yield c("WAWebSendOrderChatAction")(b,e,a.itemCount,h(a),a.message);void c("WAWebBizSyncCartAction")(a);return e.id});return i.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebBizUpdateCartMessageAction",["WAWebBizSyncCartAction"],(function(a,b,c,d,e,f,g){function a(a,b){a.set("message",b),c("WAWebBizSyncCartAction")(a)}g["default"]=a}),98);
__d("WAWebFormatForwardErrorChatAction",["fbt","WAWebL10N","WAWebStringsWithMultiplePluralParts"],(function(a,b,c,d,e,f,g,h){function a(a){var b=a.chat,e=a.undelivered,f=a.canForward;a=a.cannotForward;f=f.length-e.length;var g=a.length+e.length;if(f>0)return e.length?a.length?d("WAWebStringsWithMultiplePluralParts").getCannotForwardFileMissingAndCapabilityContactString(g,b.formattedTitle):h._("__JHASH__pTVWBHT9jgl__JHASH__",[h._plural(g),h._param("count",c("WAWebL10N").n(g))]):d("WAWebStringsWithMultiplePluralParts").getCannotForwardCapabilityContactString(g,b.formattedTitle);if(e.length)return a.length?!b.isUser?h._("__JHASH__YRj2Wz2OYk6__JHASH__"):h._("__JHASH__vBqz_StOxXW__JHASH__",[h._param("contact",b.formattedTitle)]):h._("__JHASH__f5YCKIGz_sX__JHASH__");return!b.isUser?h._("__JHASH__cFIoioNvs0a__JHASH__",[h._param("contact",b.formattedTitle)]):h._("__JHASH__cFIoioNvs0a__JHASH__",[h._param("contact",b.formattedTitle)])}g["default"]=a}),98);
__d("WAWebForwardErrorChatAction",["WACustomError"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(b){var c;c=a.call(this)||this;c.reasons=b;return c}return b}(d("WACustomError").customError("ForwardError"));g["default"]=a}),98);
__d("WAWebCommunityGeneralChatFailedParticipantsModal.react",["fbt","WAWebConfirmPopup.react","WAWebContactCollection","WAWebFbtCommon","WAWebModalManager","WAWebWidFactory","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function k(a){var b;a=a.reduce(function(a,b){var c=d("WAWebContactCollection").ContactCollection.get(b);c!=null&&c.shortName?a.push(c.shortName):c!=null&&c.name?a.push(c.name):a.push(d("WAWebWidFactory").createWid(b).user);return a},[]);a.length===1?b=h._("__JHASH__RHrqbslj_d___JHASH__",[h._param("participant_name_0",a[0])]):a.length===2?b=h._("__JHASH__2yWSpjItYBr__JHASH__",[h._param("participant_name_0",a[0]),h._param("participant_name_1",a[1])]):a.length===3?b=h._("__JHASH__mTWdq-rcWPJ__JHASH__",[h._param("participant_name_0",a[0]),h._param("participant_name_1",a[1]),h._param("participant_name_2",a[2])]):b=h._("__JHASH__aXi3Y5yhx68__JHASH__",[h._param("participant_name_0",a[0]),h._param("participant_name_1",a[1]),h._param("participant_name_2",a[2]),h._param("leftover_participant_count",a.length-3)]);return b}function a(a){a=a.failedParticipantJids;a=k(a);return j.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{okText:c("WAWebFbtCommon")("OK"),onOK:function(){return d("WAWebModalManager").ModalManager.close()},children:a})}a.displayName=a.name+" [from "+f.id+"]";g.GeneralChatFailedParticipantsModal=a}),98);
__d("WAWebLinkSubgroupsAction",["fbt","WAFilteredCatch","WALogger","WAWebActionToast.react","WAWebBackendErrors","WAWebCommunityGeneralChatFailedParticipantsModal.react","WAWebGroupCommunityJob","WAWebModalManager","WAWebToastManager","asyncToGeneratorRuntime","react"],(function(a,b,c,d,e,f,g,h){var i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Subgroup linking failed"]);j=function(){return a};return a}var k=i||c("react");function a(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c){var e=d("WAWebGroupCommunityJob").sendLinkSubgroups({parentGroupId:a,subgroupIds:c});a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){try{var a=(yield e);if(a.failedGroups.length>0){var b=a.failedGroups.reduce(function(a,b){return a&&b.error===406},!0);return b?new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__zfaSPLdpGgi__JHASH__",[h._plural(a.failedGroups.length)])):new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__I0z3b_E4AoO__JHASH__",[h._plural(a.failedGroups.length)]))}a.failedParticipantJids.length>0&&d("WAWebModalManager").ModalManager.open(k.jsx(d("WAWebCommunityGeneralChatFailedParticipantsModal.react").GeneralChatFailedParticipantsModal,{failedParticipantJids:a.failedParticipantJids}));return new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__OcU6E4MZYpb__JHASH__",[h._plural(c.length)]))}catch(a){d("WALogger").WARN(j()).verbose().devConsole(a).sendLogs("subgroup-linking-failed");return new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__iAVC4vo0o5p__JHASH__"))}})();var f=new(d("WAWebActionToast.react").ActionType)(h._("__JHASH__eMPNkQwjq_G__JHASH__",[h._plural(c.length)]));d("WAWebToastManager").ToastManager.open(k.jsx(d("WAWebActionToast.react").ActionToast,{initialAction:f,pendingAction:a}));try{yield e}catch(a){d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").ServerStatusCodeError,function(){})(a)}});return l.apply(this,arguments)}g["default"]=a}),98);
__d("WAWebShowGenericErrorToastAction",["fbt","WAWebToast.react","WAWebToastManager","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(){d("WAWebToastManager").ToastManager.open(j.jsx(d("WAWebToast.react").Toast,{msg:h._("__JHASH__QLdqjTjQ0CL__JHASH__"),duration:6e3}))}g["default"]=a}),98);
__d("WAWebBizProductMessageSendQpl",["WAQplTypes","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule"],(function(a,b,c,d,e,f,g){function a(a,b,c){var e=d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PRODUCT_MESSAGE_SEND;d("WAWebQplQuickPerformanceLoggerModule").QPL.markerStart(e,{annotations:{string:{EntryPoint:a}}});b!==void 0&&d("WAWebQplQuickPerformanceLoggerModule").QPL.markerAnnotate(e,{"int":{ProductCount:b}});c!==void 0&&d("WAWebQplQuickPerformanceLoggerModule").QPL.markerAnnotate(e,{"int":{ContactCount:c}})}function b(a){var b=d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PRODUCT_MESSAGE_SEND;a.then(function(){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(b,d("WAQplTypes").QuickLogActionType.SUCCESS)})["catch"](function(){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(b,d("WAQplTypes").QuickLogActionType.FAIL)})}g.qplStartProductSendMessage=a;g.qplEndProductMessageSend=b}),98);
__d("WAWebCartDeleteIcon.react",["fbt","WAWebDeleteIcon","WAWebSvgButton.react","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react"),k={deleteIcon:{color:"xfect85",":hover_color":"x1fumy",$$css:!0}};function a(a){a=a.onClick;return j.jsx(c("WAWebSvgButton.react"),{"aria-label":h._("__JHASH__8fFKZkKIBXi__JHASH__"),Icon:d("WAWebDeleteIcon").DeleteIcon,title:h._("__JHASH__8fFKZkKIBXi__JHASH__"),xstyle:k.deleteIcon,onClick:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebCartDetailDrawerFooter.react",["fbt","WAWebABProps","WAWebBizGatingUtils","WAWebButton.react","WAWebCurrencyUtils","WAWebDirectConnectionGatingUtils","WAWebExternalLink.react","WAWebFaqUrl","WAWebFlex.react","WAWebText.react","WAWebUISpacing","WAWebVelocityTransitionGroup","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react"),k={footerPrice:{width:"xh8yej3",$$css:!0},footerBorder:{borderTop:"x1e0juf7",$$css:!0}},l=function(){return j.jsxs(j.Fragment,{children:[h._("__JHASH__G9tzjED6A63__JHASH__")," ",j.jsx(d("WAWebExternalLink.react").ExternalLink,{href:d("WAWebFaqUrl").getJioMartPostcodeChangeLearnMoreLink(),children:h._("__JHASH__gfhYbdjTG7D__JHASH__")})]})},m=function(){return h._("__JHASH__afktUMFi_Aa__JHASH__")};function n(a){a=a.isDirectConnection;a=a&&d("WAWebDirectConnectionGatingUtils").supportsDirectConnection()&&d("WAWebABProps").getABPropConfigValue("share_phone_number_on_cart_send_to_direct_connection_biz_enabled");return a?j.jsx(l,{}):j.jsx(m,{})}n.displayName=n.name+" [from "+f.id+"]";function o(a){var b=a.currency;a=a.savings;return j.jsxs(d("WAWebFlex.react").FlexRow,{align:"baseline",justify:"all",xstyle:[d("WAWebUISpacing").uiMargin.bottom8,k.footerPrice],children:[j.jsx(d("WAWebText.react").TextSpan,{theme:"title",color:"secondary",children:h._("__JHASH__2_wYWAVI65P__JHASH__")}),j.jsx(d("WAWebText.react").TextSpan,{theme:"title",color:"accent",children:h._("__JHASH__7wDn1wZLOf0__JHASH__",[h._param("cart-savings",d("WAWebCurrencyUtils").formatAmount1000(b,a))])})]})}o.displayName=o.name+" [from "+f.id+"]";function p(a){var b=a.currency,c=a.savings;a=a.total;return j.jsxs(j.Fragment,{children:[c>0?j.jsx(o,{currency:b,savings:c}):null,j.jsxs(d("WAWebFlex.react").FlexRow,{align:"baseline",justify:"all",xstyle:[d("WAWebUISpacing").uiMargin.bottom8,k.footerPrice],children:[j.jsx(d("WAWebText.react").TextSpan,{theme:"title",color:"dark",weight:"medium",children:h._("__JHASH__vZfVdHxwv6O__JHASH__")}),j.jsx(d("WAWebText.react").TextSpan,{theme:"title",color:"dark",children:h._("__JHASH__4_k8jPAfACN__JHASH__",[h._param("cart-total-price",d("WAWebCurrencyUtils").formatAmount1000(b,a))])})]})]})}p.displayName=p.name+" [from "+f.id+"]";var q=function(){return j.jsx(d("WAWebText.react").TextSpan,{theme:"title",color:"dark",weight:"medium",children:h._("__JHASH__iCtn8dLuK19__JHASH__")})};function r(a){var b=a.currency,c=a.savings;a=a.total;return a!=null&&b!=null?j.jsx(p,{currency:b,savings:c,total:a}):j.jsx(q,{})}r.displayName=r.name+" [from "+f.id+"]";function a(a){var b=a.onSend,e=a.isDirectConnection,f=a.cart;a=a.savings;return j.jsxs(d("WAWebFlex.react").FlexColumn,{xstyle:[k.footerBorder,d("WAWebUISpacing").uiPadding.all16],children:[j.jsx(r,{total:f.total,currency:f.currency,savings:a}),j.jsx(d("WAWebText.react").TextDiv,{theme:"plain",color:"secondary",xstyle:d("WAWebUISpacing").uiMargin.bottom15,children:j.jsx(n,{isDirectConnection:e})}),j.jsx(c("WAWebVelocityTransitionGroup"),{appear:!0,transitionName:"btn",children:j.jsx(c("WAWebButton.react"),{testid:void 0,type:"primary",onClick:b,children:d("WAWebBizGatingUtils").isBuyerOrderRequestVariantEnabled()?h._("__JHASH__UG9r9dK0_nM__JHASH__"):h._("__JHASH__SrTQXYXTKa1__JHASH__")})})]})}a.displayName=a.name+" [from "+f.id+"]";g.CartDrawerContentFooter=a}),98);
__d("WAWebCartProductQuantity.react",["WAWebBizCartConstants","WAWebStopEvent","WAWebUISpacing","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j=h||c("react"),k={select:{position:"x1n2onr6",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",flexBasis:"x18xmwgd",width:"x1pju0fl",$$css:!0},selectComponent:{fontFamily:"xjb2p0i",$$css:!0},arrow:{position:"x10l6tqk",top:"x1atx4j1",end:"x1923su1",left:null,right:null,zIndex:"x11uqc5h",display:"x1lliihq",height:"xmix8c7",fontSize:"x1c3i2sq",lineHeight:"xo5v014",color:"x40yjcy",pointerEvents:"x47corl",backgroundRepeat:"xiy17q3",$$css:!0}};function l(){var a=[];for(var b=1;b<=d("WAWebBizCartConstants").CART_ITEM_MAX_QUANTITY;b++)a.push(j.jsx("option",{value:b,children:b},b));return a}l.displayName=l.name+" [from "+f.id+"]";function a(a){var b=a.onChange,e=a.quantity;a=a.testid;function f(a){a=a.target;a instanceof HTMLSelectElement&&b(parseInt(a.value,10))}return j.jsxs("div",{className:"x1n2onr6 x1iyjqo2 xs83m0k x18xmwgd x1pju0fl","data-testid":void 0,children:[j.jsx("span",{className:"x10l6tqk x1atx4j1 x1923su1 x11uqc5h x1lliihq xmix8c7 x1c3i2sq xo5v014 x40yjcy x47corl xiy17q3",children:"\u25be"}),j.jsx("select",{className:(i||(i=c("stylex")))(k.selectComponent,d("WAWebUISpacing").uiPadding.horiz10),onClick:d("WAWebStopEvent").stopEvent,value:e,onChange:f,children:j.jsx(l,{})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebCartProductListItem.react",["WAWebBizDeleteProductFromCartAction","WAWebBizGatingUtils","WAWebBizUpdateProductQuantityCartAction","WAWebCartDeleteIcon.react","WAWebCartLogEvents","WAWebCartProductQuantity.react","WAWebCartQuantityControls.react","WAWebCellFrame.react","WAWebDrawerContext","WAWebEmojiText.react","WAWebProductCatalogContext","WAWebProductCatalogProductPriceInfoText.react","WAWebProductCatalogProductThumb.react","WAWebStopEvent","react","useWAWebHoverState"],(function(a,b,c,d,e,f,g){var h,i,j=i||c("react"),k=(h||(h=d("react"))).useContext;function l(a){var b=a.cartId,e=a.cartProduct,f=a.isHovered;a=a.quantity;var g=k(d("WAWebDrawerContext").DrawerContext),h=d("WAWebProductCatalogContext").getProductCatalogContext(g);function i(a,b){c("WAWebBizUpdateProductQuantityCartAction")(e,a),d("WAWebCartLogEvents").logEditProduct(e,b,a)}function l(a,f){var g=c("WAWebBizDeleteProductFromCartAction")(b,e.id.toString());c("WAWebBizDeleteProductFromCartAction")(b,e.id.toString());d("WAWebCartLogEvents").logDeleteProduct(e,f);g===0&&d("WAWebCartLogEvents").logCartAbandon(e.catalogWid.toString(),f);d("WAWebStopEvent").stopEvent(a)}f=f?"x123j3cw xnpuxes":"xlshs6z";a=j.jsxs(j.Fragment,{children:[j.jsx(c("WAWebCartProductQuantity.react"),{testid:void 0,quantity:a,onChange:function(a){return i(a,h)}}),j.jsx("div",{className:f,children:j.jsx(c("WAWebCartDeleteIcon.react"),{onClick:function(a){return l(a,h)}})})]});f=j.jsx(c("WAWebCartQuantityControls.react"),{product:e,context:g});return j.jsx("div",{className:"x78zum5 x1t4t16n",children:d("WAWebBizGatingUtils").isQuantityControlsFeatureEnabled()?f:a})}l.displayName=l.name+" [from "+f.id+"]";function a(a){var b,e=a.cartId,f=a.product,g=a.quantity;a=a.onClick;var h=j.jsx(d("WAWebEmojiText.react").EmojiText,{text:f.name,ellipsify:!0,titlify:!0});b=(b=f.getPreviewImage())==null?void 0:b.mediaData;b=b?j.jsx(d("WAWebProductCatalogProductThumb.react").ProductThumb,{theme:"cart-list",mediaData:b}):null;var i=c("useWAWebHoverState")(),k=i.isHovered,m=i.onMouseEnter;i=i.onMouseLeave;var n=j.jsx(c("WAWebProductCatalogProductPriceInfoText.react"),{className:"x6s0dn4 x78zum5",showTotalPrice:!0,product:f});k=j.jsx(l,{isHovered:k,cartId:e,cartProduct:f,quantity:g});return j.jsx(c("WAWebCellFrame.react"),{onMouseEnter:m,onMouseLeave:i,image:b,customImage:!0,primary:h,secondary:k,theme:"cart-product",onClick:a,detail:n},f.id.toString())}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebCartProductList.react",["WAWebCartProductListItem.react","WAWebFlatList.react","WAWebFlatListContainer.react","WAWebProductCatalogCatalogConstants","lodash","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react"),j=d("WAWebFlatList.react").FlatListFactory();function a(a){var b=a.cartProductItems,e=a.onProductDetail,f=a.sellerJid;return i.jsx(c("WAWebFlatListContainer.react"),{flatListControllers:[a.flatListController],children:i.jsx(j,{flatListController:a.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:b.map(function(a){return{itemKey:a.cartItem.id,contentKey:c("lodash").uniqueId("cartItem"),product:a.product,cartItem:a.cartItem}}),renderItem:function(a){return i.jsx(c("WAWebCartProductListItem.react"),{cartId:f,product:a.product,quantity:a.cartItem.quantity,onClick:function(){return e({productId:a.cartItem.id,businessOwnerJid:f})}})},defaultItemHeight:d("WAWebProductCatalogCatalogConstants").CART_PRODUCT_LIST_ITEM_HEIGHT})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebCartDetailDrawer.react",["fbt","$InternalEnum","Promise","WALogger","WAPromiseQueue","WAQplTypes","WATimeUtils","WAWebBizClearCartAction","WAWebBizGatingUtils","WAWebBizMatchCartItemsToProductsAction","WAWebBizPullCartUpdateAction","WAWebBizSubmitOrderAction","WAWebBizUpdateCartMessageAction","WAWebBusinessProfileCollection","WAWebBusinessProfileUtils","WAWebCartCollection","WAWebCartDetailDrawerFooter.react","WAWebCartLogEvents","WAWebCartProductList.react","WAWebChatThreadLogging","WAWebConfirmPopup.react","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerContext","WAWebDrawerHeader.react","WAWebDrawerManager","WAWebFbtCommon","WAWebFlatListController","WAWebFlatListLoadingSpinnerItem.react","WAWebFlex.react","WAWebModalManager","WAWebOrderLogEvents","WAWebProductCatalogContext","WAWebShoppingCartEmptyIcon","WAWebShowGenericErrorToastAction","WAWebText.react","WAWebThemeContext","WAWebUISpacing","WAWebUtilsLogQplEvents","WAWebWDSButton","asyncToGeneratorRuntime","react","stylex","useWAWebLazyRef","useWAWebListener"],(function(a,b,c,d,e,f,g,h){var i,j,k,l;function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to create catalog order"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Unable to open the cart"]);n=function(){return a};return a}a=l||d("react");var o=j||(j=c("react"));e=a.forwardRef;var p=a.useContext,q=a.useEffect,r=a.useMemo,s=a.useRef,t=a.useState,u={emptyCartContainer:{display:"x78zum5",flexDirection:"xdt5ytf",alignItems:"x6s0dn4",height:"x5yr21d",paddingTop:"x13crsa5",paddingEnd:"x13omvei",paddingBottom:"x1rxj1xn",paddingStart:"x1m6arcz",backgroundColor:"x150wa6m",$$css:!0},emptyCardHeader:{marginTop:"x11fxgd9",marginEnd:"x11i5rnm",marginBottom:"x1fqp7bg",marginStart:"x1mh8g0r",$$css:!0},emptyCardText:{marginBottom:"x4n8cb0",textAlign:"x2b8uid",$$css:!0},contentBackground:{backgroundColor:"x150wa6m",$$css:!0},footer:{position:"x1n2onr6",zIndex:"xhtitgo",boxSizing:"x9f619",backgroundColor:"x150wa6m",$$css:!0},footerDark:{backgroundColor:"x1m8r95a",$$css:!0}};function v(a){a=a.cart;a=a.itemCount;return a==null||a===0?null:o.jsx(d("WAWebText.react").TextDiv,{theme:"title",children:h._("__JHASH__WkdDeznIhww__JHASH__",[h._plural(a,"cart-number-of-items")])})}v.displayName=v.name+" [from "+f.id+"]";function w(a){var b=a.cart,e=a.onSend,f=a.cartFlatListControllerRef,g=a.onProductDetail,h=a.sellerJid,i=a.cartProductItems,j=a.isDarkTheme,l=a.isDirectConnection;a=a.onProductCatalog;var m=d("WAWebBizMatchCartItemsToProductsAction").getSavingsFromCartItemsAndProducts(i);return o.jsxs(o.Fragment,{children:[o.jsx(y,{cart:b,onProductCatalog:a}),o.jsx(c("WAWebCartProductList.react"),{flatListController:f.current,onProductDetail:g,cart:b,sellerJid:h,cartProductItems:i}),o.jsx("div",{className:(k||(k=c("stylex")))(u.footer,j&&u.footerDark),children:o.jsx(d("WAWebCartDetailDrawerFooter.react").CartDrawerContentFooter,{savings:m,cart:b,onSend:e,isDirectConnection:l})})]})}w.displayName=w.name+" [from "+f.id+"]";function x(a){a=a.onProductCatalog;return o.jsx(d("WAWebWDSButton").WDSButtonSecondary,{testid:void 0,onClick:a,children:h._("__JHASH__vn5A07mhsrS__JHASH__")})}x.displayName=x.name+" [from "+f.id+"]";function y(a){var b=a.cart;a=a.onProductCatalog;return o.jsxs(d("WAWebFlex.react").FlexRow,{justify:"all",align:"center",xstyle:[d("WAWebUISpacing").uiPadding.all16,u.contentBackground],children:[o.jsx(v,{cart:b}),o.jsx(x,{onProductCatalog:a})]})}y.displayName=y.name+" [from "+f.id+"]";function z(a){var b=a.businessProfile;a=a.onProductCatalog;return o.jsxs("div",{className:"x78zum5 xdt5ytf x6s0dn4 x5yr21d x13crsa5 x13omvei x1rxj1xn x1m6arcz x150wa6m",children:[o.jsx(d("WAWebShoppingCartEmptyIcon").ShoppingCartEmptyIcon,{}),o.jsx(d("WAWebText.react").TextDiv,{xstyle:u.emptyCardHeader,theme:"large",children:h._("__JHASH__Xd4-0R6qGw8__JHASH__")}),o.jsx(d("WAWebText.react").TextDiv,{xstyle:u.emptyCardText,theme:"plain",children:h._("__JHASH__sEouFfZOfyF__JHASH__")}),d("WAWebBusinessProfileUtils").hasCatalog(b)&&o.jsx(d("WAWebWDSButton").WDSButtonPrimary,{onClick:a,children:h._("__JHASH__BPknNIlBS71__JHASH__")})]})}z.displayName=z.name+" [from "+f.id+"]";var A=b("$InternalEnum")({LOADING:"loading",READY_EMPTY:"readyEmpty",READY_CONTENT:"readyContent"});function B(a){var b=a.children,d=a.drawerState;a=a.emptyContent;switch(d){case A.READY_EMPTY:return a;case A.READY_CONTENT:return b;case A.LOADING:return o.jsx(c("WAWebFlatListLoadingSpinnerItem.react"),{})}}B.displayName=B.name+" [from "+f.id+"]";a=e(function(a,e){var f=a.onBack,g=a.sellerJid,j=a.chat,k=a.closeDrawerRightOnSend,l=a.onProductCatalog,u=a.onProductDetail;a=a.isPushed;var v=a===void 0?!0:a,x=p(d("WAWebDrawerContext").DrawerContext);a=d("WAWebThemeContext").useIsDarkTheme();var y=r(function(){return d("WAWebCartCollection").CartCollection.findCart(g)},[g]),C=s(null),D=c("useWAWebLazyRef")(function(){return new(d("WAPromiseQueue").PromiseQueue)()}),E=c("useWAWebLazyRef")(function(){return new(c("WAWebFlatListController"))()}),F=t(!0),G=F[0],H=F[1];F=t(void 0);var I=F[0],J=F[1];F=t([]);var K=F[0],L=F[1];F=t(y.message);var M=F[0],N=F[1],O=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield (i||(i=b("Promise"))).all([a?c("WAWebBizPullCartUpdateAction")(y,v):(i||(i=b("Promise"))).resolve(),d("WAWebBusinessProfileCollection").BusinessProfileCollection.find(j.id)]));var e=a[0];a=a[1];e&&(C.current=e);e=d("WAWebBizMatchCartItemsToProductsAction").matchCartItemsToProducts(y,C.current);H(!1);J(a);L(e)});return function(b){return a.apply(this,arguments)}}();d("useWAWebListener").useListener(y,"change:cartItemCollection",function(){D.current.enqueue(function(){return O()})});q(function(){var a=!0;v&&d("WAWebUtilsLogQplEvents").qplAnnotateCartView(y.id.toString()!==g,y.itemCount);O(!0,v).then(function(b){a=!1,v&&d("WAWebUtilsLogQplEvents").qplEndCartView(d("WAQplTypes").QuickLogActionType.SUCCESS),d("WAWebCartLogEvents").logCartListImpression(y.id.toString(),d("WAWebProductCatalogContext").getProductCatalogContext(x))})["catch"](function(a){d("WALogger").ERROR(n()).verbose().devConsole(a).sendLogs("openCart: failed to open the cart"),c("WAWebShowGenericErrorToastAction")(),c("WAWebBizClearCartAction")(y)})["finally"](function(){a&&v&&d("WAWebUtilsLogQplEvents").qplEndCartView(d("WAQplTypes").QuickLogActionType.FAIL),H(!1)})},[]);var P=function(){d("WAWebDrawerManager").DrawerManager.existsDrawerRight(function(a){a&&d("WAWebDrawerManager").DrawerManager.closeDrawerRight()})};F=function(){H(!0),d("WAWebUtilsLogQplEvents").qplStartOrderCreate(K.length),c("WAWebBizSubmitOrderAction")(y,j).then(function(a){var b=Boolean(y.message);d("WAWebOrderLogEvents").logSendOrderMessage({orderId:a,catalogOwnerJid:y.id,catalogContext:d("WAWebProductCatalogContext").getProductCatalogContext(x),isOrderMsgAttached:b,quantity:y.itemCount});d("WAWebBizGatingUtils").commerceThreadsLoggingEnabled()&&d("WAWebChatThreadLogging").handleActivitiesForChatThreadLogging([{activityType:"ordersSent",ts:d("WATimeUtils").unixTime(),chatId:j.id}]);f();c("WAWebBizClearCartAction")(y);y.message=void 0;k&&P();d("WAWebUtilsLogQplEvents").qplEndOrderCreate(d("WAQplTypes").QuickLogActionType.SUCCESS)})["catch"](function(a){d("WALogger").ERROR(m()).verbose().devConsole(a).sendLogs("submitOrder: order creation or order message send error"),c("WAWebShowGenericErrorToastAction")(),O(!0),d("WAWebUtilsLogQplEvents").qplEndOrderCreate(d("WAQplTypes").QuickLogActionType.FAIL)})["finally"](function(){H(!1)})};var Q=function(a){N(a),c("WAWebBizUpdateCartMessageAction")(y,a)},R=function(){d("WAWebModalManager").ModalManager.open(o.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{title:h._("__JHASH__9ljv_q7CKbP__JHASH__"),onOK:function(){d("WAWebModalManager").ModalManager.close()},okText:c("WAWebFbtCommon")("OK"),children:h._("__JHASH__rPBUmkqwFy5__JHASH__")}))},S=r(function(){if(G)return A.LOADING;return!y.itemCount?A.READY_EMPTY:A.READY_CONTENT},[G,y.itemCount]),T=o.jsx(z,{onProductCatalog:l,businessProfile:I}),U=d("WAWebBizGatingUtils").isBuyerOrderRequestVariantEnabled()?h._("__JHASH__Ujj5mDA5sGT__JHASH__"):h._("__JHASH__SpYF24yGb8G__JHASH__");return o.jsxs(c("WAWebDrawer.react"),{ref:e,onDrop:f,theme:"striped",children:[o.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:U,type:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.SMALL,onBack:f}),o.jsx(c("WAWebDrawerBody.react"),{flatListControllers:[E.current],children:o.jsx(B,{drawerState:S,emptyContent:T,children:o.jsx(w,{cart:y,chat:j,onSend:F,onChange:Q,onMaxPasteExceeded:R,cartMessage:M,cartFlatListControllerRef:E,onProductDetail:u,onProductCatalog:l,sellerJid:g,cartProductItems:K,isDarkTheme:a,isDirectConnection:Boolean(I==null?void 0:I.isBusinessDirectConnection())})})})]})});g.CartDetailDrawer=a}),98);
__d("WAWebBizCartFlow",["WAWebCartDetailDrawer.react","WAWebDrawerContext","WAWebDrawerManager","WAWebFlowComponent.react","WAWebProductCatalogContext","WAWebProductDetailsFlowLoadable","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule","WAWebUim","WAWebUtilsLogQplEvents","WAWebWamEnumCatalogEntryPoint","react"],(function(a,b,c,d,e,f,g){var h,i;a=i||d("react");var j=h||(h=c("react"));b=a.forwardRef;var k=a.useContext;e=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.$CartFlow2=function(){var a=c.props,b=a.sellerJid;a=a.chat;d("WAWebQplQuickPerformanceLoggerModule").QPL.markerStart(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_CATALOG_COLLECTIONS_VIEW,{annotations:{string:{EntryPoint:"Cart"}}});c.push(j.jsx(d("WAWebProductDetailsFlowLoadable").ProductDetailsFlowLoadable,{chat:a,catalogOwnerJid:b}))},c.$CartFlow1=function(a){var b=c.props.chat;d("WAWebUtilsLogQplEvents").qplStartProductView("Cart");c.push(j.jsx(d("WAWebProductDetailsFlowLoadable").ProductDetailsFlowLoadable,{refreshCarousel:!0,chat:b,productInfo:a,onEnd:c.$CartFlow4}))},c.$CartFlow3=function(){c.end(d("WAWebUim").DismissReason.LIFECYCLE)},c.$CartFlow4=function(){c.pop()},b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.componentDidMount=function(){var a=this.props,b=a.sellerJid;a=a.chat;var c=this.state.isPushed;this.push(j.jsx(l,{chat:a,sellerJid:b,onProductDetail:this.$CartFlow1,onProductCatalog:this.$CartFlow2,onBack:this.$CartFlow3,isPushed:c}));d("WAWebDrawerManager").DrawerManager.existsDrawerLeft(function(a){a&&d("WAWebDrawerManager").DrawerManager.closeDrawerLeft()});d("WAWebDrawerManager").DrawerManager.existsDrawerMid(function(a){a&&d("WAWebDrawerManager").DrawerManager.closeDrawerMid()})};return b}(c("WAWebFlowComponent.react"));var l=b(function(a,b){var c=k(d("WAWebDrawerContext").DrawerContext);c=d("WAWebProductCatalogContext").getProductCatalogContext(c);c=c.entryPoint;return j.jsx(d("WAWebCartDetailDrawer.react").CartDetailDrawer,babelHelpers["extends"]({ref:b,closeDrawerRightOnSend:c===d("WAWebWamEnumCatalogEntryPoint").CATALOG_ENTRY_POINT.CATALOG_ENTRY_POINT_PRODUCT_LIST_MESSAGE},a))});g["default"]=e}),98);
__d("WAWebLabelsUtil",["WAWebBizGatingUtils","WAWebChatThreadLogging","WAWebMsgModel","WAWebWamEnumLabelOperations","WAWebWamEnumLabelTargets","WAWebWamLabelEventReporter","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){function h(a,b){d("WAWebWamLabelEventReporter").logLabelOperationEvent(d("WAWebWamEnumLabelOperations").LABEL_OPERATIONS.CLICK_POSITIVE,a,d("WAWebWamEnumLabelTargets").LABEL_TARGETS.LABEL_COMBINED_DIALOG,b==null?void 0:b)}function a(a){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.length;d("WAWebBizGatingUtils").isSMBEnhancedLoggingEnabled()?a.forEach(function(a){a=a instanceof d("WAWebMsgModel").Msg?a.id.toString():a.id.toJid();a=d("WAWebChatThreadLogging").getChatThreadIDHMAC(a);var c=function(a){return h(b,a)};void a.then(c)}):h(b)});return i.apply(this,arguments)}g.logLabelOperationEventsForModels=a}),98);
__d("WAWebBizManageLabelModal.react",["fbt","WAWebBizGatingUtils","WAWebButton.react","WAWebCommonCTWADataSharing","WAWebDataSharingUpsellModel","WAWebDrawerHeader.react","WAWebLabelCollection","WAWebLabelsMultiSelectLabelList.react","WAWebLabelsUtil","WAWebModal.react","WAWebMultiSelection","WAWebOrderDataSharingOptOutOrUpsell","WAWebSmbMarkAsXLabelAction","WAWebStateUtils","WAWebWDSButton","lodash","react","useWAWebForceUpdate","useWAWebLazyRef"],(function(a,b,c,d,e,f,g,h){var i,j;b=j||d("react");var k=i||(i=c("react"));e=b.forwardRef;var l=b.useEffect,m=b.useMemo,n=b.useRef,o=b.useState,p={NONE_SELECTED:0,ALL_SELECTED:1,PARTIALLY_SELECTED:2};function a(a,b){var e=o(!0),f=e[0],g=e[1];l(function(){return function(){c("WAWebDataSharingUpsellModel").enableUpsell()}},[]);var i=a.modelsToUpdate,j=a.onLabelUpdateComplete;e=c("useWAWebLazyRef")(function(){return new(c("WAWebMultiSelection"))([],function(a){return a.id})});var q=n(new Set()),r=e.current,s=q.current,t=c("useWAWebForceUpdate")(),u=m(function(){var a=function(){var a={};i.forEach(function(b){b=d("WAWebStateUtils").unproxy(b);b.labels&&b.labels.forEach(function(b){a[b]=a[b]?++a[b]:1})});return a};a=a();return c("lodash").mapValues(a,function(a){if(a===i.length)return p.ALL_SELECTED;return a>0?p.PARTIALLY_SELECTED:p.NONE_SELECTED})},[]);e=function(a){if(a==null)return;u[a]===p.PARTIALLY_SELECTED?s.add("{labelId}_changed"):s.has(a)?s["delete"](a):(u[a]==null&&d("WAWebBizGatingUtils").labelsEditingEnabled()&&(u[a]=p.ALL_SELECTED),s.add(a));t()};q=function(){void d("WAWebLabelsUtil").logLabelOperationEventsForModels(i);var a=r.list,b=r.selected,c=[],e=[];a.forEach(function(a,d){b[d]&&c.push(a.id),e.push({id:a.id,type:b[d]?"add":"remove"})});d("WAWebLabelCollection").LabelCollection.addOrRemoveLabels(e,i);c.length>0&&d("WAWebSmbMarkAsXLabelAction").logLabelSignalForModels(i,c,f);j()};q=k.jsx(c("WAWebButton.react"),{testid:void 0,type:"primary",disabled:s.size===0,onClick:q,children:h._("__JHASH__K-FdwULPt2J__JHASH__")},1);var v=k.jsx(c("WAWebButton.react"),{testid:void 0,type:"secondary",onClick:a.onCancel,children:h._("__JHASH__JomY4EcHzcJ__JHASH__")},0);v=k.jsxs(d("WAWebWDSButton").ButtonGroup,{direction:"horizontal",children:[v,q]});q=k.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:h._("__JHASH__CqaGYmJHqZB__JHASH__"),type:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.POPUP,onCancel:a.onCancel});var w=c("WAWebCommonCTWADataSharing").shouldDisplayDataSharingLabelOptOutOrUpsell(i)?k.jsx(c("WAWebOrderDataSharingOptOutOrUpsell"),{checkboxValue:f,onCheckboxToggle:function(){return g(!f)},theme:"labels-opt-out"}):null;return k.jsxs(d("WAWebModal.react").Modal,{ref:b,type:d("WAWebModal.react").ModalTheme.LabelList,actions:v,title:q,children:[k.jsx(c("WAWebLabelsMultiSelectLabelList.react"),{onNewLabelAdded:a.onNewLabelAdded,shouldScrollIntoViewAndSelect:a.shouldScrollIntoViewAndSelect,initialLabelState:u,selectedLabels:r,renderContext:"label-selection",onMultiSelect:e}),w]})}a.displayName=a.name+" [from "+f.id+"]";b=e(a);g["default"]=b}),98);
__d("WAWebBizManageLabelFlow.react",["WAWebBizManageLabelModal.react","WAWebChatModel","WAWebWamEnumLabelOperations","WAWebWamEnumLabelTargets","WAWebWamLabelEventReporter","react","useWAWebLazyRef"],(function(a,b,c,d,e,f,g){var h,i;b=i||d("react");var j=h||(h=c("react")),k=b.useEffect,l=b.useRef;function a(a){var b=c("useWAWebLazyRef")(function(){return new Set()}),e=l();k(function(){var b=a.modelsToUpdate.length;e.current=b===1?a.modelsToUpdate[0]instanceof d("WAWebChatModel").Chat?d("WAWebWamEnumLabelTargets").LABEL_TARGETS.LABEL_CHAT_DIALOG:d("WAWebWamEnumLabelTargets").LABEL_TARGETS.LABEL_MESSAGE_DIALOG:d("WAWebWamEnumLabelTargets").LABEL_TARGETS.LABEL_COMBINED_DIALOG;d("WAWebWamLabelEventReporter").logLabelOperationEvent(d("WAWebWamEnumLabelOperations").LABEL_OPERATIONS.VIEW,b,e.current)},[]);var f=function(a){if(b.current.has(a)){b.current["delete"](a);return{shouldScrollIntoView:!0,shouldSelect:!0}}return{shouldScrollIntoView:!1,shouldSelect:!1}},g=function(a){b.current.add(a)},h=function(){a.onLabelUpdateComplete==null?void 0:a.onLabelUpdateComplete(),a.onClose==null?void 0:a.onClose()},i=function(){e.current&&d("WAWebWamLabelEventReporter").logLabelOperationEvent(d("WAWebWamEnumLabelOperations").LABEL_OPERATIONS.CLICK_NEGATIVE,a.modelsToUpdate.length,e.current),a.onClose==null?void 0:a.onClose()};return j.jsx(c("WAWebBizManageLabelModal.react"),{shouldScrollIntoViewAndSelect:f,onLabelUpdateComplete:h,onCancel:i,onNewLabelAdded:g,modelsToUpdate:a.modelsToUpdate})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebOrderDetailTextComposer",["WAWebConstantsDeprecated","WAWebRichTextField.react","WAWebRound.react","WAWebSendIcon","WAWebVelocityTransitionGroup","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){var b=a.buttonTitle;a.chat;var e=a.disabled,f=a.onChange,g=a.onSubmit,h=a.placeholder,j=a.testid;j=a.textFieldTestId;j=a.value;return i.jsxs(i.Fragment,{children:[i.jsx(c("WAWebVelocityTransitionGroup"),{transitionName:"media-caption",className:"x78zum5 xdt5ytf xh8yej3 x11uqc5h x1n2onr6 x1o9sqkb",children:i.jsx("div",{children:i.jsx(d("WAWebRichTextField.react").RichTextField,{maxLength:c("WAWebConstantsDeprecated").MAX_CART_MESSAGE_LENGTH,placeholder:h,value:j,testid:void 0,multiline:!0,showRemaining:!0,spellCheck:!0,supportsEmoji:!0,textFormatEnabled:!0,onEnter:function(){e!==!0&&g()},onChange:function(a){return f(a.text)}})})}),i.jsx(c("WAWebVelocityTransitionGroup"),{appear:!0,transitionName:"btn",children:i.jsx("button",{disabled:e,"data-testid":void 0,className:"xfect85 xdj266r x11i5rnm xat24cr x1mh8g0r xg01cxk xexx8yu x4uap5 x18d9i69 xkhd6sd x10l6tqk xk6ci0l x1oddz9l x2b8uid",tabIndex:"-1",onClick:function(){return g()},title:b,children:i.jsx(d("WAWebRound.react").Round,{disabled:e,children:i.jsx(d("WAWebSendIcon").SendIcon,{width:18,directional:!0})})})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebOrderProductListItem.react",["fbt","WAWebCellFrame.react","WAWebCurrencyUtils","WAWebEmojiText.react","WAWebOrderItemGetters","WAWebProductCatalogProductThumb.react","WAWebText.react","WAWebUISpacing","isNonZeroNumber","react","stylex"],(function(a,b,c,d,e,f,g,h){var i,j,k=i||c("react");function a(a){var b=a.product;a=a.onClick;var e=k.jsx(d("WAWebEmojiText.react").EmojiText,{text:b.name,ellipsify:!0,titlify:!0}),f=k.jsx(d("WAWebProductCatalogProductThumb.react").ProductThumb,{mediaData:d("WAWebOrderItemGetters").getMediaData(b),theme:"list"}),g=h._("__JHASH__8FjFxx9N23p__JHASH__",[h._param("item-quantity",b.quantity)]),i=null;b.quantity&&(i=k.jsx(d("WAWebText.react").TextSpan,{className:(j||(j=c("stylex")))(d("WAWebUISpacing").uiMargin.vert0,d("WAWebUISpacing").uiMargin.start0,d("WAWebUISpacing").uiMargin.end6),children:g}));g=null;d("isNonZeroNumber").isNonZeroNumber(b.price)&&(g=k.jsx(d("WAWebText.react").TextSpan,{className:(j||(j=c("stylex")))(d("WAWebUISpacing").uiMargin.vert0,d("WAWebUISpacing").uiMargin.start0,d("WAWebUISpacing").uiMargin.end6),children:d("WAWebCurrencyUtils").formatAmount1000(b.currency,b.price)}));var l=null;g!=null&&(l=k.jsx("span",{className:(j||(j=c("stylex")))(d("WAWebUISpacing").uiMargin.vert0,d("WAWebUISpacing").uiMargin.start0,d("WAWebUISpacing").uiMargin.end6),children:"\u2022"}));g=k.jsxs("div",{children:[g,l,i]});return k.jsx(c("WAWebCellFrame.react"),{image:f,customImage:!0,primary:e,secondary:g,theme:"order-product",onClick:a},b.id.toString())}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebOrderProductList.react",["WAWebDrawerContext","WAWebFlatList.react","WAWebFlatListContainer.react","WAWebOrderLogEvents","WAWebOrderProductListItem.react","WAWebProductCatalogCatalogConstants","WAWebProductCatalogContext","WAWebUtilsLogQplEvents","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react"),j=d("WAWebFlatList.react").FlatListFactory();function a(a){var b=a.order,e=a.onProductDetail,f=a.sellerJid,g=function(a){var c=b.orderItemCollection.toArray();d("WAWebOrderLogEvents").logOrderListImpression({catalogContext:a,orderId:b.id,productCount:c.length,catalogOwnerJid:f});return c.map(function(a){return{itemKey:a.id.toString(),product:a}})},h=function(b,c){b={productId:b.product.id,businessOwnerJid:f};d("WAWebUtilsLogQplEvents").qplStartProductView("Order");d("WAWebOrderLogEvents").logOrderListItemClick({catalogContext:c,orderId:a.order.id,catalogOwnerJid:f});e(b)};return i.jsx(d("WAWebDrawerContext").DrawerContext.Consumer,{children:function(b){var e=d("WAWebProductCatalogContext").getProductCatalogContext(b);return i.jsx(c("WAWebFlatListContainer.react"),{flatListControllers:[a.flatListController],children:i.jsx(j,{testid:void 0,flatListController:a.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:g(e),renderItem:function(a){return i.jsx(c("WAWebOrderProductListItem.react"),{product:a.product,onClick:function(){return h(a,e)}})},defaultItemHeight:d("WAWebProductCatalogCatalogConstants").PRODUCT_LIST_ITEM_HEIGHT})})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebCartOrderDetailDrawer.react",["fbt","WAFilteredCatch","WALogger","WANullthrows","WAQplTypes","WAWebBackendErrors","WAWebBizEntryPoint","WAWebBizGatingUtils","WAWebBusinessProfileCollection","WAWebBusinessProfileUtils","WAWebClock","WAWebCmd","WAWebConfirmPopup.react","WAWebCurrencyUtils","WAWebDBUpdateMessageTable","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerButton.react","WAWebDrawerHeader.react","WAWebDrawerManager","WAWebDrawerSection.react","WAWebFbtCommon","WAWebFlatListController","WAWebModalManager","WAWebMsgCollection","WAWebMsgModel","WAWebOrderCollection","WAWebOrderDetailTextComposer","WAWebOrderDetailsActionCategory","WAWebOrderDetailsActionsSmbWamEvent","WAWebOrderGetters","WAWebOrderProductList.react","WAWebProductCatalogFetchStateTopBar.react","WAWebProtobufsE2E.pb","WAWebSendTextMsgChatAction","WAWebText.react","WAWebUISpacing","WAWebUserPrefsMeUser","WAWebUtilsLogQplEvents","WAWebWamEnumOrderDetailsCreationAction","WAWebWidFactory","react","stylex","useWAWebLazyRef"],(function(a,b,c,d,e,f,g,h){var i,j,k;function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Catalog Order Display failed"]);l=function(){return a};return a}b=k||d("react");var m=i||(i=c("react"));e=b.forwardRef;var n=b.useEffect,o=b.useState,p={defaultBg:{backgroundColor:"x150wa6m",$$css:!0}};function q(a){var b=a.chat,e=a.onChange,f=a.onSubmit;a=a.value;return m.jsx("div",{className:(j||(j=c("stylex")))(d("WAWebUISpacing").uiPadding.vert0,d("WAWebUISpacing").uiPadding.horiz18),children:m.jsx(c("WAWebOrderDetailTextComposer"),{chat:b,onChange:e,onSubmit:f,value:a,placeholder:h._("__JHASH__cxSl1I-V-4I__JHASH__")})})}q.displayName=q.name+" [from "+f.id+"]";function r(a){var b=a.onCreateOrderClick,e=a.onDeclineOrderClick;a.order;a=a.sellerJid;a=d("WAWebWidFactory").createUserWid(a).equals(d("WAWebUserPrefsMeUser").getMaybeMeUser());return!a?null:m.jsxs(m.Fragment,{children:[m.jsx(c("WAWebDrawerSection.react"),{children:m.jsx(d("WAWebDrawerButton.react").DrawerButtonSimple,{testid:void 0,color:"dark",onClick:b,children:h._("__JHASH__ZLzjXjxkYp-__JHASH__")})}),m.jsx(c("WAWebDrawerSection.react"),{children:m.jsx(d("WAWebDrawerButton.react").DrawerButtonSimple,{testid:void 0,color:"dark",onClick:e,children:h._("__JHASH__quFz4fwBsa8__JHASH__")})})]})}r.displayName=r.name+" [from "+f.id+"]";function s(a){var b=a.cancellationMessage,e=a.chat,f=a.fetchState,g=a.flatListController,i=a.isLoading,k=a.onOrderCancel,l=a.onOrderCreate,n=a.onProductDetail,o=a.order,s=a.ownerHasReviewed,t=a.sellerJid,u=a.sendCancelMessage;a=a.setCancellationMessage;if(i||o==null)return m.jsx(c("WAWebProductCatalogFetchStateTopBar.react"),{fetchState:f});i="";o.products.length>0?i=h._("__JHASH__RkoUYcwRLqG__JHASH__",[h._plural(d("WAWebOrderGetters").getTotalItemCount(o)||0,"count")]):i=h._("__JHASH__TGnls34lIJ9__JHASH__");i=m.jsx(d("WAWebText.react").TextDiv,{theme:"title",children:i});var v=null,w=o.products.reduce(function(a,b){return b.price==null?a:(a||0)+b.price*b.quantity},null),x=o.products.reduce(function(a,b){return b.currency==null?a:b.currency},null);w!=null&&x!=null?v=h._("__JHASH__zF06U2K9U_P__JHASH__",[h._param("subtotal",d("WAWebCurrencyUtils").formatAmount1000(x,w))]):v=h._("__JHASH__ZazVSvtj7rB__JHASH__");x=m.jsx(d("WAWebText.react").WDSTextSmall,{as:"div",children:v});w=null;if(o.createdAt!=null){v=d("WAWebClock").Clock.timeStr(o.createdAt);w=m.jsx(d("WAWebText.react").WDSTextSmall,{children:""+v})}return m.jsxs(m.Fragment,{children:[m.jsxs(c("WAWebDrawerSection.react"),{children:[m.jsx(c("WAWebProductCatalogFetchStateTopBar.react"),{fetchState:f}),m.jsxs("div",{className:(j||(j=c("stylex")))(p.defaultBg,d("WAWebUISpacing").uiPadding.all18),children:[i,x]}),m.jsx(c("WAWebOrderProductList.react"),{flatListController:g,onProductDetail:n,order:o,sellerJid:t}),m.jsx("div",{className:j(p.defaultBg,d("WAWebUISpacing").uiPadding.all18),children:w}),s?m.jsx(q,{chat:e,value:b,onSubmit:u,onChange:a}):null]}),d("WAWebBizGatingUtils").orderDetailsFromCartEnabled()&&!s?m.jsx(r,{sellerJid:t,order:o,onCreateOrderClick:function(){return l(c("WANullthrows")(o))},onDeclineOrderClick:k}):null]})}s.displayName=s.name+" [from "+f.id+"]";function a(a,b){var e=a.userIsCartOwner,f=a.orderId,g=a.token,i=a.sellerJid,j=a.onProductDetail,k=a.onOrderCreate,p=a.ownerHasReviewed,q=a.chat,r=a.orderMessage,t=a.onOrderCancel;a=a.isPushed;var u=a===void 0?!0:a;a=o(!0);var v=a[0],w=a[1];a=o("PENDING");var x=a[0],y=a[1];a=o(null);var z=a[0],A=a[1];a=o("");var B=a[0];a=a[1];var C=c("useWAWebLazyRef")(function(){return new(c("WAWebFlatListController"))()}),D=function(){d("WAWebModalManager").ModalManager.open(m.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{onOK:function(){d("WAWebModalManager").ModalManager.close()},okText:c("WAWebFbtCommon")("OK"),children:h._("__JHASH__usdBBFCwTOn__JHASH__")}))};n(function(){d("WAWebOrderCollection").OrderCollection.findOrder(f,i,g).then(function(a){w(!1),y("SUCCESS"),A(a),u&&(d("WAWebUtilsLogQplEvents").qplAnnotateOrderView((a==null?void 0:a.products.length)||0),d("WAWebUtilsLogQplEvents").qplEndOrderView(d("WAQplTypes").QuickLogActionType.SUCCESS))})["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").E404,function(){D(),w(!1),y("ERROR"),d("WAWebUtilsLogQplEvents").qplDropOrderView()}))["catch"](function(a){w(!1),y("ERROR"),d("WALogger").ERROR(l()).verbose().devConsole(a).sendLogs("OrderDetails: failed to display"),u&&d("WAWebUtilsLogQplEvents").qplEndOrderView(d("WAQplTypes").QuickLogActionType.FAIL)})},[]);var E=function(){d("WAWebDrawerManager").DrawerManager.closeDrawerRight()},F=function(){E();if(r!=null){var a=d("WAWebUserPrefsMeUser").getMaybeMeUser();a=a?d("WAWebBusinessProfileCollection").BusinessProfileCollection.get(a):null;a=d("WAWebBusinessProfileUtils").hasCatalog(a);new(d("WAWebOrderDetailsActionsSmbWamEvent").OrderDetailsActionsSmbWamEvent)({orderDetailsCreationAction:d("WAWebWamEnumOrderDetailsCreationAction").ORDER_DETAILS_CREATION_ACTION.SEND_DECLINE_CART,actionCategory:String(c("WAWebOrderDetailsActionCategory").RECEIVED_CART),orderDetailEntryPoint:String(c("WAWebBizEntryPoint").FROM_CART),hasNote:Boolean(B),hasCatalog:a}).commit();a=h._("__JHASH__1F-JtckVywX__JHASH__").toString()+"\n"+B;d("WAWebSendTextMsgChatAction").sendTextMsgToChat(q,a,{quotedMsg:new(d("WAWebMsgModel").Msg)(r)});if(!d("WAWebBizGatingUtils").isSellerOrderRevampEnabled())return;if(r!=null){a={status:d("WAWebProtobufsE2E.pb").Message$OrderMessage$OrderStatus.DECLINED};void d("WAWebDBUpdateMessageTable").updateMessageTable(r.id,a);var b=d("WAWebMsgCollection").MsgCollection.get(r.id);b&&b.set(a)}}d("WAWebCmd").Cmd.openChatFromUnread(q)},G=d("WAWebBizGatingUtils").isBuyerOrderRequestVariantEnabled()?h._("__JHASH__Y-D6JGvjzwX__JHASH__"):h._("__JHASH__BCcZcagIY8y__JHASH__"),H=d("WAWebBizGatingUtils").isSellerOrderRevampEnabled()?h._("__JHASH___i5qDWnNzym__JHASH__"):h._("__JHASH__yHYldlM0F3c__JHASH__");return m.jsxs(c("WAWebDrawer.react"),{ref:b,theme:"striped",onDrop:E,children:[m.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:e?G:H,type:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.SMALL,onBack:E}),m.jsx(c("WAWebDrawerBody.react"),{children:m.jsx(s,{cancellationMessage:B,chat:q,fetchState:x,flatListController:C.current,isLoading:v,onOrderCancel:t,onOrderCreate:k,onProductDetail:j,ownerHasReviewed:p,order:z,sellerJid:i,sendCancelMessage:F,setCancellationMessage:a})})]})}a.displayName=a.name+" [from "+f.id+"]";b=e(a);g["default"]=b}),98);
__d("WAWebOrderIcons",["WAWebAddItemIcon","WAWebListMsgIconIcon","WAWebProductCatalogProductThumb.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react"),j={iconContainer:{display:"x78zum5",alignItems:"x6s0dn4",width:"x1useyqa",height:"xsdox4t",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",backgroundColor:"x16kknjp",boxShadow:"xuh0odg",$$css:!0},customItemSVG:{marginTop:"xr1yuqi",marginEnd:"xkrivgy",marginBottom:"x4ii5y1",marginStart:"x1gryazu",color:"xx2jlie",$$css:!0},addItemSVG:{marginTop:"xr1yuqi",marginEnd:"xkrivgy",marginBottom:"x4ii5y1",marginStart:"x1gryazu",color:"xx2jlie",$$css:!0}};function k(){return i.jsx("div",{className:"x78zum5 x6s0dn4 x1useyqa xsdox4t x1lq5wgf xgqcy7u x30kzoy x9jhf4c x16kknjp xuh0odg",children:i.jsx(d("WAWebListMsgIconIcon").ListMsgIconIcon,{xstyle:j.customItemSVG})})}k.displayName=k.name+" [from "+f.id+"]";function a(){return i.jsx("div",{className:"x78zum5 x6s0dn4 x1useyqa xsdox4t x1lq5wgf xgqcy7u x30kzoy x9jhf4c x16kknjp xuh0odg",children:i.jsx(d("WAWebAddItemIcon").AddItemIcon,{xstyle:j.addItemSVG})})}a.displayName=a.name+" [from "+f.id+"]";function b(a){var b=a.mediaData;a=a.useCustomIcon;return a||b==null?i.jsx(k,{}):i.jsx(d("WAWebProductCatalogProductThumb.react").ProductThumb,{mediaData:b,theme:"orderSquareThumb"})}b.displayName=b.name+" [from "+f.id+"]";g.AddItemIcon=a;g.OrderItemIcon=b}),98);
__d("WAWebOrderAddItem",["WAWebCellFrame.react","WAWebOrderIcons","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){var b=a.onClick;a=a.title;return i.jsx(c("WAWebCellFrame.react"),{testid:void 0,image:i.jsx(d("WAWebOrderIcons").AddItemIcon,{}),primary:a,theme:"add-order-item",onClick:b})}a.displayName=a.name+" [from "+f.id+"]";g.AddOrderItem=a}),98);
__d("WAWebOrderDetailErrorUtils",["fbt","WATypeUtils","WAWebCurrencyUtils","WAWebOrderDetailMath","WAWebToast.react","WAWebToastManager","react"],(function(a,b,c,d,e,f,g,h){var i,j,k=j||c("react"),l=(i||(i=d("react"))).useEffect;function a(a){l(function(){for(var b in a){var c=a[b];c!=null&&d("WAWebToastManager").ToastManager.open(k.jsx(d("WAWebToast.react").Toast,{duration:1e4,id:b+c.toString(),msg:c,action:{actionText:h._("__JHASH__YVmzmGZwIv6__JHASH__"),dismiss:!0,theme:"success"}}))}},[a])}function m(){return h._("__JHASH__tqDDvTVPFPw__JHASH__")}m.displayName=m.name+" [from "+f.id+"]";function n(){return h._("__JHASH__66sCzqcyhX4__JHASH__")}n.displayName=n.name+" [from "+f.id+"]";var o=function(a){return h._("__JHASH__AaN_pZwLUWu__JHASH__",[h._param("input_label",a)])},p=function(a){return h._("__JHASH__ZpoQZjdbWJ3__JHASH__",[h._param("input_label",a)])};function b(a){var b=a.label,c=a.currency,e=a.fieldType,f=a.maxFlatValue,g=a.enablePercentValueCheck;a=a.value;if(!d("WAWebCurrencyUtils").validatePriceString(c,a))return m();c=d("WAWebCurrencyUtils").valueFromString(c,a)/d("WAWebOrderDetailMath").DEFAULT_OFFSET;if(c<0)return n();if(e===d("WAWebOrderDetailMath").PERCENTAGE_SYMBOL){if(Boolean(g)&&c>100){return o((a=b)!=null?a:"")}}else if(d("WATypeUtils").isNumber(f)&&c>f){return p((e=b)!=null?e:"")}return""}g.useShowToastErrors=a;g.getOrderDetailInvalidNumberErrorMessage=m;g.getOrderDetailNegativeNumberErrorMessage=n;g.errorMessageBigPercentageValue=o;g.errorMessageBigFlatValue=p;g.additionalChargeErrorHandler=b}),98);
__d("WAWebOrderDetailAmountInput",["fbt","WAWebCurrencyUtils","WAWebOrderDetailErrorUtils","WAWebOrderDetailMath","WAWebRichTextField.react","react"],(function(a,b,c,d,e,f,g,h){var i,j,k=j||c("react"),l=(i||(i=d("react"))).useState;function m(a,b){if(a==null||!a.length||!d("WAWebCurrencyUtils").validatePriceString(b,a))return h._("__JHASH__ZweQ2CBBcMh__JHASH__");b=d("WAWebCurrencyUtils").valueFromString(b,a)/d("WAWebOrderDetailMath").DEFAULT_OFFSET;if(b<0)return h._("__JHASH__u43SMPYf3Hq__JHASH__")}function a(a){var b=a.currency,c=a.onCancel,e=a.onSave;a=a.value;var f=l(null),g=f[0],i=f[1];f=l(a);var j=f[0],n=f[1];d("WAWebOrderDetailErrorUtils").useShowToastErrors({productPriceError:g});return k.jsx("div",{className:"x1yc453h x1dmp6jm x6ikm8r x10wlt62 xs9mwh0 xg83lxy",children:k.jsx(d("WAWebRichTextField.react").RichTextField,{managed:!0,constrainedWidth:!0,hideFloatingLabel:!0,focusOnMount:!0,editable:!0,lockable:!0,startActive:!0,placeholder:h._("__JHASH__-SoDyY-vVy6__JHASH__"),value:j,theme:"default",maxLength:12,customStyleThemes:["disabledLabel","noErrorInfo"],testid:void 0,validate:function(a){a=m(a,b);i(a);return!a},onChange:function(a){a=a.text;n(a);i(m(a,b))},onSave:function(){e(j)},onCancel:c,error:g})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebOrderDetailSharedStyles",[],(function(a,b,c,d,e,f,g){a={clickableText:{color:"x1a06ls3",cursor:"x1ypdohk",fontWeight:"xo1l8bm",lineHeight:"x15bjb6t",letterSpacing:"x12oo3zp",":hover_textDecoration":"xt0b8zv",$$css:!0}};g["default"]=a}),98);
__d("WAWebOrderCatalogProductPrice",["fbt","$InternalEnum","WAWebCurrencyUtils","WAWebFlex.react","WAWebOrderDetailAmountInput","WAWebOrderDetailSharedStyles","WAWebUISpacing","react","stylex"],(function(a,b,c,d,e,f,g,h){var i,j,k=i||c("react"),l=b("$InternalEnum").Mirrored(["Readonly","EditableBlank","EditableFilled","Editing"]);function a(a){var b=a.currency;a.onEnter;var e=a.onPriceChange,f=a.onPriceStageChange,g=a.orderItem,i=a.price;a=a.priceStage;switch(a){case l.Editing:return k.jsx("div",{role:"textbox",onClick:function(a){return a.stopPropagation()},"data-testid":void 0,children:k.jsxs(d("WAWebFlex.react").FlexRow,{align:"center",children:[k.jsx("span",{className:(j||(j=c("stylex")))(d("WAWebUISpacing").uiPadding.end3),children:d("WAWebCurrencyUtils").formatAmount1000ToParts(b,0).symbol}),k.jsx(c("WAWebOrderDetailAmountInput"),{currency:b,value:i!=null?String(i/1e3):"",onSave:function(a){f(l.EditableFilled),e(d("WAWebCurrencyUtils").valueFromString(b,a))},onCancel:function(){f(i==null?l.EditableBlank:l.EditableFilled)}})]})});case l.EditableFilled:return k.jsx("div",{role:"button",className:(j||(j=c("stylex")))(c("WAWebOrderDetailSharedStyles").clickableText),onClick:function(a){f(l.Editing),a.stopPropagation()},"data-testid":void 0,children:d("WAWebCurrencyUtils").formatAmount1000(b,Number(i))});case l.EditableBlank:return k.jsx("span",{role:"button",className:(j||(j=c("stylex")))(c("WAWebOrderDetailSharedStyles").clickableText),onClick:function(a){f(l.Editing),a.stopPropagation()},"data-testid":void 0,children:h._("__JHASH__HSD4ClGLE8C__JHASH__")});default:return k.jsx("div",{"data-testid":void 0,children:d("WAWebCurrencyUtils").formatAmount1000(b,g.price)})}}a.displayName=a.name+" [from "+f.id+"]";g.PriceStage=l;g.CatalogProductPrice=a}),98);
__d("WAWebOrderDetailItems",["fbt","WAWebBizGatingUtils","WAWebCartDeleteIcon.react","WAWebCellFrame.react","WAWebCommonQuantityControls.react","WAWebConfirmPopup.react","WAWebFlex.react","WAWebModalManager","WAWebOrderAddItem","WAWebOrderCatalogProductPrice","WAWebOrderIcons","WAWebOrderItemGetters","WAWebUISpacing","react","stylex"],(function(a,b,c,d,e,f,g,h){var i,j,k;b=k||d("react");var l=i||(i=c("react")),m=b.useCallback,n=b.useState,o={orderItemsContainer:{marginTop:"x7wgvq7",marginEnd:"x11i5rnm",marginBottom:"xh3wvx0",marginStart:"x1mh8g0r",$$css:!0},orderItemName:{color:"xzwifym",whiteSpace:"xuxw1ft",overflowX:"x6ikm8r",overflowY:"x10wlt62",textOverflow:"xlyipyv",$$css:!0},productDeleteWrapper:{display:"x78zum5",alignItems:"x6s0dn4",$$css:!0}};function p(a,b){d("WAWebModalManager").ModalManager.open(l.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{title:h._("__JHASH__Lt6RXPmqBXb__JHASH__",[h._param("order_item_name",b)]),okText:h._("__JHASH__Ui8DRBy34xc__JHASH__"),onOK:function(){a==null?void 0:a(),d("WAWebModalManager").ModalManager.close()},cancelText:h._("__JHASH__J0wgiJDfDW-__JHASH__"),onCancel:function(){d("WAWebModalManager").ModalManager.close()}}))}function a(a){var b=a.currency,e=a.details,f=a.items,g=a.onAddItem,i=a.onDeleteItem,k=a.onItemQuantityChange,q=a.onPriceChange,r=a.priceMap;a=n(null);var s=a[0],t=a[1];a=n({});var u=a[0],v=a[1],w=m(function(a){if(a.price!=null)return d("WAWebOrderCatalogProductPrice").PriceStage.Readonly;else if((r==null?void 0:r[a.id])!=null)return d("WAWebOrderCatalogProductPrice").PriceStage.EditableFilled;return d("WAWebOrderCatalogProductPrice").PriceStage.EditableBlank},[r]),x=m(function(a,b){v(function(c){return babelHelpers["extends"]({},c,(c={},c[b.id]=a,c))})},[]),y=Boolean(e),z=function(a,e){var f;return l.jsxs("div",{className:"x78zum5 x6s0dn4",children:[l.jsx(d("WAWebOrderCatalogProductPrice").CatalogProductPrice,{price:(f=r==null?void 0:r[a.id])!=null?f:null,priceStage:(f=u[a.id])!=null?f:w(a),currency:b,orderItem:a,onPriceChange:function(b){return q==null?void 0:q(b,a.id)},onPriceStageChange:function(b){x(b,a)},onEnter:function(){t(null)}}),e===s&&l.jsx("div",{className:(j||(j=c("stylex")))(d("WAWebUISpacing").uiMargin.start5),children:l.jsx(c("WAWebCartDeleteIcon.react"),{onClick:function(b){b.stopPropagation(),p(function(){return i==null?void 0:i(e)},a.name)}})})]})};return l.jsxs(d("WAWebFlex.react").FlexColumn,{align:"stretch",xstyle:o.orderItemsContainer,children:[!y&&(d("WAWebBizGatingUtils").orderDetailsFromCatalogEnabled()||d("WAWebBizGatingUtils").orderDetailsCustomItemEnabled())&&l.jsx(d("WAWebOrderAddItem").AddOrderItem,{title:h._("__JHASH__SSsOJuYz6YE__JHASH__"),onClick:function(){return g==null?void 0:g()}}),f.map(function(a,b){var e=h._("__JHASH__OTl03tJfRde__JHASH__",[h._param("item-quantity",a.quantity)]);return l.jsx(c("WAWebCellFrame.react"),babelHelpers["extends"]({testid:void 0,className:(j||(j=c("stylex")))(b>0&&d("WAWebUISpacing").uiPadding.top10),disabled:!0,image:l.jsx(d("WAWebOrderIcons").OrderItemIcon,{mediaData:a.thumbnailUrl?d("WAWebOrderItemGetters").getMediaData(a):null,useCustomIcon:a.isCustomItem}),primary:l.jsx("span",{className:"xzwifym xuxw1ft x6ikm8r x10wlt62 xlyipyv",title:a.name,children:a.name}),secondary:y?e:l.jsx(c("WAWebCommonQuantityControls.react"),{quantity:a.quantity,onAddOneClick:function(){return k==null?void 0:k(b,a.quantity+1)},onRemoveOneClick:function(){return k==null?void 0:k(b,a.quantity-1)}}),theme:"add-order-item",detail:z(a,b)},y?void 0:{onMouseEnter:function(){return t(b)},onMouseLeave:function(){return t(null)}}),b)})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebOrderDetailSectionContainer.react",["WAWebFlex.react","react"],(function(a,b,c,d,e,f,g){var h,i,j=i||c("react"),k=(h||(h=d("react"))).Children,l={container:{rowGap:"xgpatz3",columnGap:"x40hh3e",$$css:!0},separator:{height:"xqtp20y",borderTop:"xqb5tul",$$css:!0}};function a(a){a=a.children;return j.jsx(d("WAWebFlex.react").FlexColumn,{xstyle:l.container,align:"stretch",children:k.map(a,function(a,b){return j.jsxs(j.Fragment,{children:[b!==0?j.jsx("div",{className:"xqtp20y xqb5tul"}):null,a]})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebOrderDetailSellerProfile.react",["fbt","WAWebBizGatingUtils","WAWebContactCollection","WAWebDetailImage.react","WAWebFlex.react","WAWebName.react","WAWebText.react","WAWebUISpacing","react","stylex"],(function(a,b,c,d,e,f,g,h){var i,j,k=i||c("react"),l={container:{rowGap:"x1b8z93w",columnGap:"x1amjocr",$$css:!0},uppercase:{textTransform:"xtvhhri",$$css:!0},sellerName:{fontSize:"x1603h9y",lineHeight:"x1u7k74",fontWeight:"xk50ysn",color:"x1wm35g",$$css:!0}};function a(a){var b=a.orderId,e=a.orderStatus,f=a.sellerWid;a=a.testid;a=d("WAWebContactCollection").ContactCollection.get(f);f=a?k.jsxs(k.Fragment,{children:[k.jsx(d("WAWebFlex.react").FlexRow,{children:k.jsx(d("WAWebDetailImage.react").DetailImage,{id:f,size:48})}),k.jsxs(d("WAWebFlex.react").FlexColumn,{align:"center",children:[k.jsx(d("WAWebName.react").Name,{className:"x1603h9y x1u7k74 xk50ysn x1wm35g",useDisplayName:!0,contact:a}),b!=null?k.jsx(d("WAWebText.react").TextDiv,{color:"secondary",weight:"medium",className:(j||(j=c("stylex")))(l.uppercase,d("WAWebUISpacing").uiMargin.top4),children:d("WAWebBizGatingUtils").isOrderContentOptimizationEnabled()?h._("__JHASH__5Y7gpQOhqp8__JHASH__",[h._param("order-id",b)]):h._("__JHASH__ke1rTLyoyvQ__JHASH__",[h._param("order-id",b)])}):null]})]}):null;return k.jsxs(d("WAWebFlex.react").FlexColumn,{align:"center",xstyle:[l.container,d("WAWebUISpacing").uiPadding.horiz16],testid:void 0,children:[f,e]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebOrderDetailStatusPill.react",["fbt","WAWebActionCheckCircleIcon","WAWebAlertErrorIcon","WAWebLocalShippingIcon","WAWebOrderStatus","WAWebStatusClockIcon","WAWebText.react","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react"),k={container:{backgroundColor:"xairv4b",display:"x3nfvp2",alignItems:"x6s0dn4",fontSize:"x1pg5gke",paddingTop:"xexx8yu",paddingEnd:"x1sxyh0",paddingBottom:"x18d9i69",paddingStart:"xcu9agk",borderTopStartRadius:"x107yiy2",borderTopEndRadius:"xv8uw2v",borderBottomEndRadius:"x1tfwpuw",borderBottomStartRadius:"x2g32xy",$$css:!0},icon:{marginEnd:"xw3qccf",marginLeft:null,marginRight:null,$$css:!0},iconCipherText:{marginTop:"xdhfreh",$$css:!0}};function l(a){switch(a){case d("WAWebOrderStatus").OrderStatus.Pending:return h._("__JHASH__UZM-KRGodOD__JHASH__");case d("WAWebOrderStatus").OrderStatus.Processing:return h._("__JHASH__jE40eWWgJ-x__JHASH__");case d("WAWebOrderStatus").OrderStatus.PartiallyShipped:return h._("__JHASH__z9D-NptOFH8__JHASH__");case d("WAWebOrderStatus").OrderStatus.Shipped:return h._("__JHASH__BqEnJ40U0-4__JHASH__");case d("WAWebOrderStatus").OrderStatus.Canceled:return h._("__JHASH__CC2HElcw8Fl__JHASH__");case d("WAWebOrderStatus").OrderStatus.Complete:return h._("__JHASH__XisoM1MapeK__JHASH__");case d("WAWebOrderStatus").OrderStatus.PreparingToShip:return h._("__JHASH__L4HR3JudIk5__JHASH__");case d("WAWebOrderStatus").OrderStatus.PaymentRequested:return h._("__JHASH__WKJdwDStCJN__JHASH__");case d("WAWebOrderStatus").OrderStatus.Delivered:return h._("__JHASH__yU5lbcnSwid__JHASH__")}}function m(a){switch(a){case d("WAWebOrderStatus").OrderStatus.Pending:case d("WAWebOrderStatus").OrderStatus.Processing:case d("WAWebOrderStatus").OrderStatus.PartiallyShipped:case d("WAWebOrderStatus").OrderStatus.Shipped:case d("WAWebOrderStatus").OrderStatus.PreparingToShip:case d("WAWebOrderStatus").OrderStatus.PaymentRequested:return;case d("WAWebOrderStatus").OrderStatus.Canceled:return"danger";case d("WAWebOrderStatus").OrderStatus.Complete:case d("WAWebOrderStatus").OrderStatus.Delivered:return"success"}}function n(a){switch(a){case d("WAWebOrderStatus").OrderStatus.Pending:case d("WAWebOrderStatus").OrderStatus.Processing:case d("WAWebOrderStatus").OrderStatus.PreparingToShip:case d("WAWebOrderStatus").OrderStatus.PaymentRequested:return j.jsx(d("WAWebStatusClockIcon").StatusClockIcon,{width:12,displayInline:!0,xstyle:[k.icon,k.iconCipherText]});case d("WAWebOrderStatus").OrderStatus.PartiallyShipped:case d("WAWebOrderStatus").OrderStatus.Shipped:return j.jsx(d("WAWebLocalShippingIcon").LocalShippingIcon,{width:12,displayInline:!0,xstyle:k.icon});case d("WAWebOrderStatus").OrderStatus.Canceled:return j.jsx(d("WAWebAlertErrorIcon").AlertErrorIcon,{width:12,displayInline:!0,xstyle:k.icon});case d("WAWebOrderStatus").OrderStatus.Complete:case d("WAWebOrderStatus").OrderStatus.Delivered:return j.jsx(d("WAWebActionCheckCircleIcon").ActionCheckCircleIcon,{width:12,displayInline:!0,xstyle:k.icon})}}function a(a){a=a.orderStatus;a=a===void 0?d("WAWebOrderStatus").getDefaultOrderStatus():a;return j.jsxs(d("WAWebText.react").TextDiv,{color:m(a),theme:"small",xstyle:k.container,children:[n(a),l(a)]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebOrderEphemeralExemptionPopup.react",["fbt","WAWebBizGatingUtils","WAWebCheckBox.react","WAWebConfirmPopup.react","WAWebFrontendContactGetters","WAWebModalManager","WAWebText.react","WAWebUserPrefsKeys","WAWebUserPrefsStore","react"],(function(a,b,c,d,e,f,g,h){var i,j,k=j||c("react"),l=(i||(i=d("react"))).useState;function a(a){var b=a.chat,e=a.onSubmit;a=d("WAWebFrontendContactGetters").getFormattedUser(b.contact);b=l(!1);var f=b[0],g=b[1];b=function(){g(!f)};var i=function(){f&&c("WAWebUserPrefsStore").set(d("WAWebUserPrefsKeys").KEYS.DISAPPEARING_MSG_DISCLAIMER_DIMISSED,!0),d("WAWebModalManager").ModalManager.close(),e()},j=function(){d("WAWebModalManager").ModalManager.close()};return k.jsxs(d("WAWebConfirmPopup.react").ConfirmPopup,{testid:void 0,title:h._("__JHASH__MIsnms4txfd__JHASH__"),onOK:i,onCancel:j,children:[k.jsx(d("WAWebText.react").WDSTextSectionTitle,{children:d("WAWebBizGatingUtils").isOrderContentOptimizationEnabled()?h._("__JHASH__RAgaSFHxAu2__JHASH__",[h._param("contact-name",a)]):h._("__JHASH__r0ZIh2f-hHW__JHASH__",[h._param("contact-name",a)])}),k.jsx("div",{children:k.jsxs("div",{className:"x1yrsyyn x4uap5 x10b6aqq xkhd6sd",children:[k.jsx(d("WAWebCheckBox.react").CheckBox,{testid:void 0,id:"order-ephemeral-exemption-popup-skip-checkbox-id",checked:f,onChange:b}),k.jsx("label",{htmlFor:"order-ephemeral-exemption-popup-skip-checkbox-id",className:"x1i64zmx",children:h._("__JHASH__M21Bt0gDpmG__JHASH__")})]})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebOrderTotalPrice",["fbt","WAWebBizEntryPoint","WAWebButton.react","WAWebOrdersExpansionUtils","WAWebText.react","WAWebUISpacing","react","stylex"],(function(a,b,c,d,e,f,g,h){var i,j,k=i||c("react"),l={buttonWrapper:{display:"x78zum5",flexDirection:"xdt5ytf",alignItems:"x6s0dn4",$$css:!0},priceContainer:{display:"x78zum5",flexDirection:"x1q0g3np",justifyContent:"x1qughib",fontWeight:"x117nqv4",$$css:!0},errorLabel:{textAlign:"x2b8uid",$$css:!0}};function m(a){var b=a.disabled,e=a.onClick,f=a.testid;f=a.title;return k.jsx("div",{className:(j||(j=c("stylex")))(l.buttonWrapper,d("WAWebUISpacing").uiMargin.top16),children:k.jsx(c("WAWebButton.react"),{type:"primary",disabled:b,onClick:e,testid:void 0,children:f})})}m.displayName=m.name+" [from "+f.id+"]";function n(a){var b=a.entryPoint;b=b===void 0?null:b;a=a.onClick;a=a===void 0?null:a;return b===c("WAWebBizEntryPoint").FROM_CART&&a!=null&&d("WAWebOrdersExpansionUtils").isOrderExpansionEnabled()?k.jsx("div",{className:(j||(j=c("stylex")))(l.buttonWrapper,d("WAWebUISpacing").uiMargin.top16),children:k.jsx(c("WAWebButton.react"),{type:"secondary",onClick:a,testid:void 0,children:h._("__JHASH__C07QMq_wDuh__JHASH__")})}):null}n.displayName=n.name+" [from "+f.id+"]";function a(a){var b=a.confirmTitle,c=a.disabled,e=a.entryPoint;e=e===void 0?null:e;var f=a.error;f=f===void 0?null:f;var g=a.onConfirm,h=a.onDeclineOrder;h=h===void 0?null:h;var i=a.testid;i=a.title;var j=a.totalPrice,o=a.visible;a=a.xstyle;return o?k.jsxs(d("WAWebText.react").TextDiv,{xstyle:a,children:[f==null?k.jsxs("div",{className:"x78zum5 x1q0g3np x1qughib x117nqv4","data-testid":void 0,children:[i,k.jsx("p",{children:j})]}):k.jsx(d("WAWebText.react").TextDiv,{color:"danger",size:"16",xstyle:l.errorLabel,children:f}),k.jsx(m,{title:b,onClick:g,disabled:c||Boolean(f),testid:void 0}),k.jsx(n,{entryPoint:e,onClick:h})]}):null}a.displayName=a.name+" [from "+f.id+"]";g.OrderApplyChangesButton=m;g.OrderDeclineButton=n;g.OrderTotalPrice=a}),98);
__d("WAWebOrderSummaryDrawer",["fbt","WASmaxInBizSettingsEnums","WAWebBizGatingUtils","WAWebCTWADataSharingModel","WAWebChatEphemerality","WAWebClickableLink.react","WAWebCommonCTWADataSharing","WAWebCurrencyUtils","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerHeader.react","WAWebDrawerSection.react","WAWebFlex.react","WAWebModalManager","WAWebOrderDataSharingOptOutOrUpsell","WAWebOrderDetailItems","WAWebOrderDetailMath","WAWebOrderDetailSectionContainer.react","WAWebOrderDetailSellerProfile.react","WAWebOrderDetailSharedStyles","WAWebOrderDetailStatusPill.react","WAWebOrderEphemeralExemptionPopup.react","WAWebOrderExpansionNotSupportedPopup.react","WAWebOrderTotalPrice","WAWebOrdersExpansionUtils","WAWebSmb3pdConversionSignal","WAWebSmbMarkAsXOrderAction","WAWebText.react","WAWebUISpacing","WAWebUserPrefsKeys","WAWebUserPrefsMeUser","WAWebUserPrefsStore","react","stylex"],(function(a,b,c,d,e,f,g,h){var i,j,k;b=k||d("react");var l=i||(i=c("react")),m=b.useEffect,n=b.useState,o={orderFieldsContainer:{rowGap:"x1kb72lq",columnGap:"x18hwk67",$$css:!0},orderItemsContainer:{flexShrink:"xs83m0k",overflowY:"x1odjw0f",$$css:!0}},p=function(a,b,c,e){if(!a)return h._("__JHASH__nxIWxJIusFw__JHASH__").toString();a=d("WAWebBizGatingUtils").orderDetailsTotalOrderMinimumValue()*1e3;e=d("WAWebBizGatingUtils").orderDetailsTotalMaxValue(e)*1e3;if(b<a)return h._("__JHASH__-z9LCa2bdyI__JHASH__",[h._param("order_min_allowed_amount",d("WAWebCurrencyUtils").formatAmount1000(c,a))]).toString();return b>e?h._("__JHASH__jF_gxLc7sdO__JHASH__",[h._param("order_max_allowed_amount",d("WAWebCurrencyUtils").formatAmount1000(c,e))]).toString():null};function q(a){var b=a.additionalCharges,e=a.canChangeAdditionalCharges,f=a.canDisplayAdditionalCharges,g=a.currency,i=a.discount,k=a.onAdditionalCharges,m=a.shipping,n=a.subtotal;a=a.tax;var p=(b==null?void 0:b.discountText)&&b.discountType===d("WAWebOrderDetailMath").PERCENTAGE_SYMBOL?h._("__JHASH__thmmpKYyeIv__JHASH__",[h._param("discount_percent",b.discountText)]):null;b=(b==null?void 0:b.taxText)&&b.taxType===d("WAWebOrderDetailMath").PERCENTAGE_SYMBOL?h._("__JHASH__JXbDug8zZkS__JHASH__",[h._param("tax_percent",b.taxText)]):null;return l.jsxs(d("WAWebFlex.react").FlexColumn,{align:"stretch",xstyle:[o.orderFieldsContainer,d("WAWebUISpacing").uiPadding.horiz16,d("WAWebUISpacing").uiPadding.bottom20],children:[l.jsxs(d("WAWebFlex.react").FlexRow,{justify:"all",testid:void 0,children:[l.jsx(d("WAWebText.react").TextSpan,{color:"secondary",size:"16",children:h._("__JHASH__NMvrVWkEOKi__JHASH__")}),l.jsx(d("WAWebText.react").TextSpan,{color:"secondary",size:"16",children:d("WAWebCurrencyUtils").formatAmount1000(g,n)})]}),Boolean(f)&&l.jsxs(l.Fragment,{children:[i!=null&&l.jsxs(d("WAWebFlex.react").FlexRow,{justify:"all",testid:void 0,children:[l.jsxs(d("WAWebText.react").TextSpan,{color:"secondary",size:"16",children:[h._("__JHASH__JMELG2VgMhA__JHASH__")," ",p]}),l.jsx(d("WAWebText.react").TextSpan,{color:"secondary",size:"16",children:d("WAWebCurrencyUtils").formatAmount1000(g,-i)})]}),m!=null&&l.jsxs(d("WAWebFlex.react").FlexRow,{justify:"all",testid:void 0,children:[l.jsx(d("WAWebText.react").TextSpan,{color:"secondary",size:"16",children:h._("__JHASH__qtF7i6rL0XZ__JHASH__")}),l.jsx(d("WAWebText.react").TextSpan,{color:"secondary",size:"16",children:d("WAWebCurrencyUtils").formatAmount1000(g,m)})]}),a!=null&&l.jsxs(d("WAWebFlex.react").FlexRow,{justify:"all",testid:void 0,children:[l.jsxs(d("WAWebText.react").TextSpan,{color:"secondary",size:"16",children:[h._("__JHASH__GBYYSzc5gjv__JHASH__")," ",b]}),l.jsx(d("WAWebText.react").TextSpan,{color:"secondary",size:"16",children:d("WAWebCurrencyUtils").formatAmount1000(g,a)})]}),Boolean(e)&&l.jsx(d("WAWebFlex.react").FlexRow,{justify:"all",align:"center",children:l.jsx(c("WAWebClickableLink.react"),{onClick:function(){return k==null?void 0:k()},testid:void 0,className:(j||(j=c("stylex")))(c("WAWebOrderDetailSharedStyles").clickableText,d("WAWebUISpacing").uiMargin.bottom0),children:l.jsx("span",{children:h._("__JHASH__-kJ0FYV3_WB__JHASH__")})})})]})]})}q.displayName=q.name+" [from "+f.id+"]";var r=function(a,b,d,e){if(c("WAWebCommonCTWADataSharing").shouldDisplayDataSharingOrderOptOutOrUpsell(a,"order-create",b))return l.jsx(c("WAWebOrderDataSharingOptOutOrUpsell"),{checkboxValue:d,onCheckboxToggle:e,theme:"order-create"})},s=function(){return d("WAWebCTWADataSharingModel").CTWADataSharingModel.getValue()===d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE["true"]},t=function(a,b,e){var f=!d("WAWebOrdersExpansionUtils").isOrderExpansionEnabled()&&d("WAWebOrdersExpansionUtils").isSellerCountrySameAsBuyer(a)||d("WAWebOrdersExpansionUtils").isContactCountrySupported(a);if(!f){d("WAWebModalManager").ModalManager.open(l.jsx(c("WAWebOrderExpansionNotSupportedPopup.react"),{chat:a}));return}f=function(){d("WAWebSmbMarkAsXOrderAction").markOrderAsCreatedAction(a,b),b&&d("WAWebSmb3pdConversionSignal").log3pdConversionSignal(a,"order_created"),e()};c("WAWebUserPrefsStore").get(d("WAWebUserPrefsKeys").KEYS.DISAPPEARING_MSG_DISCLAIMER_DIMISSED)!==!0&&d("WAWebBizGatingUtils").inOrderMessagesEphemeralExceptionEnabled()&&d("WAWebChatEphemerality").isEphemeralSettingOn(a)?d("WAWebModalManager").ModalManager.open(l.jsx(c("WAWebOrderEphemeralExemptionPopup.react"),{chat:a,onSubmit:f})):f()};function a(a){var b=a.additionalCharges,e=a.chat,f=a.currency,g=a.entryPoint;g=g===void 0?null:g;var i=a.flatAmounts,j=a.onAddItem,k=a.onAdditionalCharges,u=a.onBack,v=a.onDeclineOrder;v=v===void 0?null:v;var w=a.onDeleteItem,x=a.onItemQuantityChange,y=a.onPriceChange,z=a.onSubmit,A=a.orderItems,B=a.orderSubtotal,C=a.priceMap;a=n(s);var D=a[0],E=a[1];m(function(){var a=function(){var a=d("WAWebCTWADataSharingModel").CTWADataSharingModel.getValue()===d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE["true"];E(a)};d("WAWebCTWADataSharingModel").CTWADataSharingModel.subscribeForUpdates(a);return function(){d("WAWebCTWADataSharingModel").CTWADataSharingModel.unsubscribeFromUpdates(a)}},[]);a=A.every(function(a){var b;return Number.isInteger((b=a.price)!=null?b:C[a.id])});var F=A.length!==0;return l.jsxs(c("WAWebDrawer.react"),{children:[l.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:d("WAWebBizGatingUtils").isOrderContentOptimizationEnabled()?h._("__JHASH__Evhgg2EE5iQ__JHASH__"):h._("__JHASH__hsTTiXw3ZsE__JHASH__"),onBack:u,type:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.SMALL}),l.jsxs(c("WAWebDrawerBody.react"),{children:[l.jsxs(c("WAWebDrawerSection.react"),{xstyle:[o.orderItemsContainer,d("WAWebUISpacing").uiPadding.top20,d("WAWebUISpacing").uiMargin.bottom0],theme:"refresh-padding-title",children:[l.jsxs(c("WAWebOrderDetailSectionContainer.react"),{children:[l.jsx(c("WAWebOrderDetailSellerProfile.react"),{sellerWid:d("WAWebUserPrefsMeUser").getMeUser(),orderStatus:l.jsx(c("WAWebOrderDetailStatusPill.react"),{})}),l.jsx(c("WAWebOrderDetailItems"),{currency:f,priceMap:C,items:A,onDeleteItem:w,onPriceChange:y,onAddItem:j,onItemQuantityChange:x}),l.jsx(q,{tax:i.tax,discount:i.discount,shipping:i.shipping,currency:f,subtotal:B,additionalCharges:b,canDisplayAdditionalCharges:F,canChangeAdditionalCharges:F,onAdditionalCharges:k})]}),r(e,A.length,D,function(){return E(!D)})]}),l.jsx(c("WAWebDrawerSection.react"),{children:l.jsx(d("WAWebOrderTotalPrice").OrderTotalPrice,{xstyle:d("WAWebUISpacing").uiPadding.all16,visible:F,disabled:!a,testid:void 0,totalPrice:d("WAWebCurrencyUtils").formatAmount1000(f,i.total),title:h._("__JHASH__3MvYlG5X9Mo__JHASH__"),onConfirm:function(){return t(e,D,z)},confirmTitle:d("WAWebBizGatingUtils").isOrderContentOptimizationEnabled()?h._("__JHASH__QtXAS1y5C_U__JHASH__"):h._("__JHASH__UXGBDYWps3R__JHASH__"),error:p(a,i.total,f,e),entryPoint:g,onDeclineOrder:v})})]})]})}a.displayName=a.name+" [from "+f.id+"]";g.getErrorLabel=p;g.OrderValues=q;g.getDataSharing=r;g.maybeShowDialogOnSubmit=t;g.OrderSummaryDrawer=a}),98);
__d("WAWebHooksUseCatalog",["WAWebCatalogCollection","asyncToGeneratorRuntime","react","useWAWebUnmountSignal"],(function(a,b,c,d,e,f,g){var h;e=h||d("react");var i=e.useEffect,j=e.useState;function a(a){var e=j(function(){return d("WAWebCatalogCollection").CatalogCollection.get(a)}),f=e[0],g=e[1],h=c("useWAWebUnmountSignal")();i(function(){var c=d("WAWebCatalogCollection").CatalogCollection.get(a);c!==f&&(c!=null?g(c):b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield d("WAWebCatalogCollection").CatalogCollection.find(a));if(h.aborted)return;g(b)})())},[a,f,h]);return f}g["default"]=a}),98);
__d("WAWebUseOrderDetailItems",["Promise","WAWebCatalogCollection","WAWebHooksUseCatalog","WAWebOrderDetailMath","WAWebOrderItemModel","asyncToGeneratorRuntime","react","useWAWebUnmountSignal"],(function(a,b,c,d,e,f,g){var h,i;e=i||d("react");var j=e.useCallback,k=e.useEffect,l=e.useState;function a(a,e){var f=c("WAWebHooksUseCatalog")(e);e=l([]);var g=e[0],i=e[1];e=l(!0);var m=e[0],n=e[1],o=c("useWAWebUnmountSignal")(),p=j(function(){return f==null?new Map():f.productCollection.getProductModels().reduce(function(a,b){return a.set(b.id.toString(),(a=b.getPreviewImage())==null?void 0:a.mediaUrl)},new Map())},[f]),q=j(function(c){if(f==null)return(h||(h=b("Promise"))).resolve([]);var e=a.items.reduce(function(a,b){if(b.isCustomItem||c.get(b.id)!=null)return a;b=d("WAWebCatalogCollection").CatalogCollection.findProduct({catalogWid:f.id,productId:b.id});return a.concat(b)},[]);return(h||(h=b("Promise"))).all(e)},[f,a.items]),r=j(function(b,e){var f;return new(c("WAWebOrderItemModel"))(babelHelpers["extends"]({},b,{price:((f=b.amount)!=null?f:0)*d("WAWebOrderDetailMath").DEFAULT_OFFSET,currency:a.currency,thumbnailUrl:e.get(b.id)}))},[a.currency]),s=j(function(b){return a.items.map(function(a){return r(a,b)})},[a.items,r]);k(function(){b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=p();n(!0);yield q(a);if(o.aborted)return;n(!1);a=p();i(s(a))})()},[f,o,q,p,s]);return{orderItems:g,isLoading:m}}g["default"]=a}),98);
__d("WAWebOrderDetailDrawer.react",["fbt","WAWebBizGatingUtils","WAWebBizSendOrderAction","WAWebBusinessProfileCollection","WAWebBusinessProfileUtils","WAWebButton.react","WAWebCurrencyUtils","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerButton.react","WAWebDrawerHeader.react","WAWebDrawerManager","WAWebDrawerSection.react","WAWebFlex.react","WAWebFlexItem.react","WAWebOrderDetailItems","WAWebOrderDetailMath","WAWebOrderDetailSectionContainer.react","WAWebOrderDetailSellerProfile.react","WAWebOrderDetailStatusPill.react","WAWebOrderDetailsActionCategory","WAWebOrderDetailsActionsSmbWamEvent","WAWebOrderPaymentStatus","WAWebOrderStatus","WAWebOrderSummaryDrawer","WAWebOrdersExpansionUtils","WAWebSpinner.react","WAWebStatusClockIcon","WAWebText.react","WAWebUISpacing","WAWebUseOrderDetailItems","WAWebUserPrefsMeUser","WAWebWamEnumOrderDetailsCreationAction","react","stylex"],(function(a,b,c,d,e,f,g,h){var i,j,k;b=k||d("react");var l=i||(i=c("react"));e=b.forwardRef;var m=b.useEffect,n=b.useMemo,o={buttonWrapper:{display:"x78zum5",flexDirection:"xdt5ytf",alignItems:"x6s0dn4",$$css:!0}};function a(a,b){var e=d("WAWebUserPrefsMeUser").getMeUser(),f=a.chat,g=a.orderInfo,i=a.sellerWid,k=g.referenceId,q=g.discount,r=g.tax,s=g.shipping,t=g.subtotal,u=g.totalAmount,v=c("WAWebUseOrderDetailItems")(g,i),w=v.orderItems;v=v.isLoading;var x=n(function(){return d("WAWebOrderStatus").findOrderStatus(f,k)},[f,k]);m(function(){new(d("WAWebOrderDetailsActionsSmbWamEvent").OrderDetailsActionsSmbWamEvent)({orderDetailsCreationAction:d("WAWebWamEnumOrderDetailsCreationAction").ORDER_DETAILS_CREATION_ACTION.VIEW_ORDER_DETAILS,actionCategory:String(c("WAWebOrderDetailsActionCategory").ORDER_DETAILS_MANAGEMENT),orderDetailEntryPoint:String(a.entryPoint),hasCatalog:d("WAWebBusinessProfileUtils").hasCatalog(d("WAWebBusinessProfileCollection").BusinessProfileCollection.get(d("WAWebUserPrefsMeUser").getMaybeMeUser()))}).commit()},[a.entryPoint]);if(t==null)return null;var y=function(){},z=function(){d("WAWebBizSendOrderAction").sendOrderPaymentMethodUpdate({chat:f,sellerJid:i.toJid(),orderInfo:g,orderStatus:x,offset:d("WAWebOrderDetailMath").DEFAULT_OFFSET,orderNote:null,paymentStatus:null,paymentMethod:d("WAWebOrderPaymentStatus").OrderPaymentMethod.Confirm})["finally"](function(){d("WAWebDrawerManager").DrawerManager.closeDrawerRight(),y()})};return l.jsxs(c("WAWebDrawer.react"),{onDrop:a.onBack,ref:b,children:[l.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:d("WAWebBizGatingUtils").isOrderContentOptimizationEnabled()?h._("__JHASH__Ssr7_bmMotN__JHASH__"):h._("__JHASH__AorvvqmREO0__JHASH__"),onBack:a.onBack,type:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.SMALL}),l.jsx(c("WAWebDrawerBody.react"),{theme:v?"center-content":void 0,children:v?l.jsx(p,{}):l.jsxs(l.Fragment,{children:[l.jsx(c("WAWebDrawerSection.react"),{xstyle:[d("WAWebUISpacing").uiPadding.top20,d("WAWebUISpacing").uiPadding.bottom15],children:l.jsxs(c("WAWebOrderDetailSectionContainer.react"),{children:[l.jsx(c("WAWebOrderDetailSellerProfile.react"),{testid:void 0,orderId:g.referenceId,sellerWid:i,orderStatus:l.jsx(c("WAWebOrderDetailStatusPill.react"),{orderStatus:x})}),l.jsx(c("WAWebOrderDetailItems"),{details:!0,currency:g.currency,items:w}),l.jsx(d("WAWebOrderSummaryDrawer").OrderValues,{tax:r!=null?r*d("WAWebOrderDetailMath").DEFAULT_OFFSET:null,discount:q!=null?q*d("WAWebOrderDetailMath").DEFAULT_OFFSET:null,shipping:s!=null?s*d("WAWebOrderDetailMath").DEFAULT_OFFSET:null,subtotal:t*d("WAWebOrderDetailMath").DEFAULT_OFFSET,currency:g.currency,canDisplayAdditionalCharges:!0}),l.jsxs(d("WAWebFlex.react").FlexRow,{justify:"all",xstyle:d("WAWebUISpacing").uiPadding.horiz16,testid:void 0,children:[l.jsx(d("WAWebText.react").TextSpan,{theme:"title",children:h._("__JHASH__gRCYHPsriUH__JHASH__")}),l.jsx(d("WAWebText.react").TextSpan,{theme:"title",children:d("WAWebCurrencyUtils").formatAmount(g.currency,u)})]})]})}),e.user===i.user&&((v=(b=d("WAWebOrdersExpansionUtils").getOrdersExpansionAllowedCountries())==null?void 0:b.length)!=null?v:0)>0&&l.jsx(c("WAWebDrawerSection.react"),{children:l.jsxs(d("WAWebDrawerButton.react").DrawerButtonSimple,{icon:l.jsx(d("WAWebStatusClockIcon").StatusClockIcon,{width:20}),testid:void 0,color:"dark",disabled:!0,onClick:function(){},children:[l.jsx(d("WAWebText.react").TextDiv,{size:"16",children:h._("__JHASH__-eY5_MXS2G8__JHASH__")}),l.jsx(d("WAWebText.react").TextDiv,{size:"12",children:h._("__JHASH__Gzde0yr2UTx__JHASH__")})]})}),[d("WAWebOrderStatus").OrderStatus.Canceled,d("WAWebOrderStatus").OrderStatus.Complete].every(function(a){return x!==a})&&e.user===i.user&&l.jsx(c("WAWebDrawerSection.react"),{children:l.jsx("div",{className:(j||(j=c("stylex")))(o.buttonWrapper,d("WAWebUISpacing").uiMargin.vert16),children:l.jsx(c("WAWebButton.react"),{testid:void 0,type:"primary",onClick:function(){a.onOrderStatusUpdateClick==null?void 0:a.onOrderStatusUpdateClick()},children:h._("__JHASH__IGnCv51HBsf__JHASH__")})})}),e.user!==i.user&&x===d("WAWebOrderStatus").OrderStatus.Pending&&((r=(w=d("WAWebOrdersExpansionUtils").getConsumerOrdersExpansionAllowedCountries())==null?void 0:w.length)!=null?r:0)>0&&l.jsx(c("WAWebDrawerSection.react"),{children:l.jsx("div",{className:(j||(j=c("stylex")))(o.buttonWrapper,d("WAWebUISpacing").uiMargin.vert16),children:l.jsx(c("WAWebButton.react"),{testid:void 0,type:"primary",onClick:z,children:d("WAWebBizGatingUtils").isOrderContentOptimizationEnabled()?h._("__JHASH__KnszcWfmbB3__JHASH__"):h._("__JHASH__QjmdMEvo-j-__JHASH__")})})})]})})]})}a.displayName=a.name+" [from "+f.id+"]";function p(){return l.jsx(d("WAWebFlex.react").FlexRow,{align:"center",justify:"center",testid:void 0,children:l.jsx(c("WAWebFlexItem.react"),{children:l.jsx(d("WAWebSpinner.react").Spinner,{})})})}p.displayName=p.name+" [from "+f.id+"]";b=e(a);g["default"]=b}),98);
__d("WAWebOrderDetailProductListItem",["fbt","WAWebCellFrame.react","WAWebCurrencyUtils","WAWebEmojiText.react","WAWebOrderIcons","WAWebText.react","isNonZeroNumber","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(a){var b;a=a.product;var e=j.jsx(d("WAWebEmojiText.react").EmojiText,{text:a.name,ellipsify:!0,titlify:!0});b=j.jsx(d("WAWebOrderIcons").OrderItemIcon,{useCustomIcon:Boolean(a.mediaData)===!1,mediaData:(b=a.mediaData)!=null?b:null});var f=null;if(a.quantity){var g=h._("__JHASH__jU6_AFJakKx__JHASH__",[h._param("quantity",a.quantity.toString())]);f=j.jsx(d("WAWebText.react").TextSpan,{children:g})}g=null;d("isNonZeroNumber").isNonZeroNumber(a.price)?g=d("WAWebCurrencyUtils").formatAmount1000(a.currency,a.price):g=h._("__JHASH__JYK4SYmCAap__JHASH__");a=j.jsx(d("WAWebText.react").TextSpan,{children:g});return j.jsx(c("WAWebCellFrame.react"),{image:b,customImage:!0,primary:e,secondary:f,detail:a,theme:"media"})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebOrderDetailProductList",["WAWebFlatList.react","WAWebFlatListContainer.react","WAWebOrderDetailProductListItem","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react"),j=60,k=d("WAWebFlatList.react").FlatListFactory();function a(a){var b=a.productItems;b=b.map(function(a){return{itemKey:a.id.toString(),product:a}});return i.jsx(c("WAWebFlatListContainer.react"),{flatListControllers:[a.flatListController],children:i.jsx(k,{testid:void 0,flatListController:a.flatListController,direction:"vertical",forceConsistentRenderCount:!1,data:b,renderItem:function(a){a=a.product;return i.jsx(c("WAWebOrderDetailProductListItem"),{product:a})},defaultItemHeight:j})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebOrderDetailProductListDrawer.react",["fbt","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerHeader.react","WAWebDrawerSection.react","WAWebFlatListController","WAWebOrderDetailProductList","react","useWAWebLazyRef"],(function(a,b,c,d,e,f,g,h){var i,j,k=j||c("react");b=(i||(i=d("react"))).forwardRef;var l={container:{paddingTop:"x889kno",paddingEnd:"x10ogl3i",paddingBottom:"x1a8lsjc",paddingStart:"x1swvt13",$$css:!0}};function a(a,b){var e=a.productItems,f=c("useWAWebLazyRef")(function(){return new(c("WAWebFlatListController"))()});return k.jsxs(c("WAWebDrawer.react"),{onDrop:a.onBack,ref:b,children:[k.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:h._("__JHASH__m-M12jx01-O__JHASH__"),onBack:a.onBack,type:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.SMALL}),k.jsx(c("WAWebDrawerBody.react"),{flatListControllers:[f.current],children:k.jsx(c("WAWebDrawerSection.react"),{xstyle:l.container,theme:"refresh-padding-title",children:k.jsx(c("WAWebOrderDetailProductList"),{flatListController:f.current,productItems:e})})})]})}a.displayName=a.name+" [from "+f.id+"]";e=b(a);g["default"]=e}),98);
__d("WAWebOrderDetailRadioButton.react",["WAWebCheckBoxRound.react","WAWebFlex.react","WAWebUnstyledButton.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react"),j={canceledStyle:{color:"x1sr8853",$$css:!0},checkboxContainer:{paddingStart:"x1ye3gou",paddingLeft:null,paddingRight:null,paddingEnd:"xxbr6pl",$$css:!0}};function a(a){var b,e=a.checked,f=a.isCanceled,g=a.label,h=a.onClick;a=a.testid;return i.jsx(c("WAWebUnstyledButton.react"),{onClick:h,testid:void 0,children:i.jsxs(d("WAWebFlex.react").FlexRow,{children:[i.jsx(d("WAWebFlex.react").FlexColumn,{xstyle:j.checkboxContainer,children:i.jsx(c("WAWebCheckBoxRound.react"),{checked:e,radio:!0,hover:!1,systemUncheckedColor:!0,onChange:function(){return void h()}})}),i.jsx("div",{className:f?"x1sr8853":null,children:g})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebOrderStatusUpdateDrawer.react",["fbt","WASmaxInBizSettingsEnums","WAWebBizGatingUtils","WAWebBizOrderStatusLabels","WAWebBizSendOrderAction","WAWebBusinessProfileCollection","WAWebBusinessProfileUtils","WAWebButton.react","WAWebCTWADataSharingModel","WAWebCmd","WAWebCommonCTWADataSharing","WAWebConfirmPopup.react","WAWebConstantsDeprecated","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerHeader.react","WAWebDrawerManager","WAWebDrawerSection.react","WAWebFbtCommon","WAWebFlex.react","WAWebModalManager","WAWebOrderDataSharingOptOutOrUpsell","WAWebOrderDetailMath","WAWebOrderDetailRadioButton.react","WAWebOrderDetailsActionCategory","WAWebOrderDetailsActionsSmbWamEvent","WAWebOrderPaymentStatus","WAWebOrderStatus","WAWebOrdersExpansionUtils","WAWebRichTextField.react","WAWebSmb3pdConversionSignal","WAWebSmbMarkAsXOrderAction","WAWebSwitch.react","WAWebUISpacing","WAWebUserPrefsMeUser","WAWebWamEnumOrderDetailsCreationAction","react","stylex"],(function(a,b,c,d,e,f,g,h){var i,j,k;b=k||d("react");var l=i||(i=c("react"));e=b.forwardRef;var m=b.useEffect,n=b.useMemo,o=b.useState,p=d("WAWebBizGatingUtils").isOrderStatusM1Enabled()?[d("WAWebOrderStatus").OrderStatus.PaymentRequested,d("WAWebOrderStatus").OrderStatus.PreparingToShip,d("WAWebOrderStatus").OrderStatus.Shipped,d("WAWebOrderStatus").OrderStatus.Delivered,d("WAWebOrderStatus").OrderStatus.Canceled]:[d("WAWebOrderStatus").OrderStatus.Processing,d("WAWebOrderStatus").OrderStatus.Shipped,d("WAWebOrderStatus").OrderStatus.Complete,d("WAWebOrderStatus").OrderStatus.Canceled],q={checkboxContainer:{rowGap:"x1na6gtj",columnGap:"x1qgv0r9",$$css:!0},spacer:{height:"xqtp20y",borderTop:"x1e0juf7",$$css:!0}};function r(a){a=a.xstyle;return l.jsx("div",{className:(j||(j=c("stylex")))(q.spacer,d("WAWebUISpacing").uiMargin.top16,a)})}r.displayName=r.name+" [from "+f.id+"]";var s=function(a,b,d,e){if(c("WAWebCommonCTWADataSharing").shouldDisplayDataSharingOrderOptOutOrUpsell(a,"order-update",b))return l.jsx(c("WAWebOrderDataSharingOptOutOrUpsell"),{theme:"order-update",onCheckboxToggle:function(){return e(!d)},checkboxValue:d})},t=function(){return d("WAWebCTWADataSharingModel").CTWADataSharingModel.getValue()===d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE["true"]};function a(a,b){var e=o(t),f=e[0],g=e[1];e=o("");var i=e[0],k=e[1],u=n(function(){return d("WAWebOrderStatus").findOrderStatus(a.chat,a.orderInfo.referenceId)},[a.chat,a.orderInfo.referenceId]),v=n(function(){return d("WAWebOrderPaymentStatus").findLastOrderPaymentStatusInfo(a.chat,a.orderInfo.referenceId)},[a.chat,a.orderInfo.referenceId]);e=o(u);var w=e[0],x=e[1];e=o((v==null?void 0:v.paymentStatus)===d("WAWebOrderPaymentStatus").OrderPaymentStatus.Captured);var y=e[0],z=e[1];m(function(){var a=function(a){return g(a===d("WASmaxInBizSettingsEnums").ENUM_FALSE_NOTSET_TRUE["true"])};d("WAWebCTWADataSharingModel").CTWADataSharingModel.subscribeForUpdates(a);return function(){d("WAWebCTWADataSharingModel").CTWADataSharingModel.unsubscribeFromUpdates(a)}},[]);var A=a.chat,B=a.sellerJid,C=a.orderInfo,D="no_method_confirmed",E=function(){var b;b=(b=(b=C.externalPaymentConfigurations)==null?void 0:(b=b.at(0))==null?void 0:b.type)!=null?b:D;new(d("WAWebOrderDetailsActionsSmbWamEvent").OrderDetailsActionsSmbWamEvent)({orderDetailsCreationAction:d("WAWebWamEnumOrderDetailsCreationAction").ORDER_DETAILS_CREATION_ACTION.SEND_MARK_AS_PAID,actionCategory:String(c("WAWebOrderDetailsActionCategory").ORDER_DETAILS_MANAGEMENT),orderDetailEntryPoint:String(a.entryPoint),hasNote:Boolean(i),paymentStatus:!0,paymentType:b}).commit()};function F(a,b,c,e){d("WAWebDrawerManager").DrawerManager.closeDrawerRight(),a&&H(!b,c,e),b&&G(c,e)}function G(b,e){var g=d("WAWebUserPrefsMeUser").getMaybeMeUser();g=g?d("WAWebBusinessProfileUtils").hasCatalog(d("WAWebBusinessProfileCollection").BusinessProfileCollection.get(g)):!1;new(d("WAWebOrderDetailsActionsSmbWamEvent").OrderDetailsActionsSmbWamEvent)({orderDetailsCreationAction:d("WAWebWamEnumOrderDetailsCreationAction").ORDER_DETAILS_CREATION_ACTION.SEND_ORDER_STATUS,actionCategory:String(c("WAWebOrderDetailsActionCategory").ORDER_DETAILS_MANAGEMENT),orderDetailEntryPoint:String(a.entryPoint),hasCatalog:g,hasNote:Boolean(i)}).commit();d("WAWebBizSendOrderAction").sendOrderStatusMessageAsMerchant({chat:A,sellerJid:B,orderInfo:C,orderNote:i,orderStatus:b,offset:d("WAWebOrderDetailMath").DEFAULT_OFFSET,paymentStatus:e?d("WAWebOrderPaymentStatus").OrderPaymentStatus.Captured:d("WAWebOrderPaymentStatus").OrderPaymentStatus.Pending,paymentMethod:null});d("WAWebSmbMarkAsXOrderAction").markOrderAsUpdatedStatusAction(A,f,w,y);f&&d("WAWebSmb3pdConversionSignal").log3pdConversionSignal(A,"order_updated",w,y);d("WAWebCmd").Cmd.openChatFromUnread(A)}function H(a,b,c){d("WAWebBizSendOrderAction").sendOrderPaymentStatusMessageAsMerchant({chat:A,sellerJid:B,orderInfo:C,orderNote:a?i:null,orderStatus:b,offset:d("WAWebOrderDetailMath").DEFAULT_OFFSET,paymentStatus:c?d("WAWebOrderPaymentStatus").OrderPaymentStatus.Captured:d("WAWebOrderPaymentStatus").OrderPaymentStatus.Pending,paymentMethod:null})["finally"](function(){E()})}function I(a){return p.findIndex(function(b){return b===a})}function J(){var a=I(w),b=I(u),e=(v==null?void 0:v.paymentStatus)===d("WAWebOrderPaymentStatus").OrderPaymentStatus.Captured,f=a!==b,g=e!==y;e=!f&&!g;a=a<b;var i=w,j=y;d("WAWebBizGatingUtils").isOrderStatusM1Enabled()&&(g&&(y?w===d("WAWebOrderStatus").OrderStatus.PaymentRequested&&(i=d("WAWebOrderStatus").OrderStatus.PreparingToShip):!y&&w===d("WAWebOrderStatus").OrderStatus.PreparingToShip&&(i=d("WAWebOrderStatus").OrderStatus.PaymentRequested)),f&&(y&&w===d("WAWebOrderStatus").OrderStatus.PaymentRequested&&(j=!1)));e?d("WAWebModalManager").ModalManager.open(l.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{title:h._("__JHASH__sq5vCQ5USss__JHASH__"),okText:c("WAWebFbtCommon")("OK"),onOK:function(){d("WAWebModalManager").ModalManager.close()},children:d("WAWebBizGatingUtils").isOrderContentOptimizationEnabled()?h._("__JHASH__MokQoGmWX6F__JHASH__",[h._param("originalOrderStatus",d("WAWebBizOrderStatusLabels").getWAWebBizOrderStatusLabel(u))]):h._("__JHASH__1vB_eHa7weV__JHASH__",[h._param("originalOrderStatus",d("WAWebBizOrderStatusLabels").getWAWebBizOrderStatusLabel(u))])})):a?d("WAWebModalManager").ModalManager.open(l.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{title:h._("__JHASH__8N28pK0sbYA__JHASH__"),okText:h._("__JHASH__IBFlvfnDAy4__JHASH__"),onOK:function(){F(g,f,i,j),d("WAWebModalManager").ModalManager.close()},cancelText:h._("__JHASH__Zxn4YYs9oaP__JHASH__"),onCancel:function(){d("WAWebModalManager").ModalManager.close()},children:d("WAWebBizGatingUtils").isOrderContentOptimizationEnabled()?h._("__JHASH__bZ2ScGcUD7R__JHASH__",[h._param("originalOrderStatus",d("WAWebBizOrderStatusLabels").getWAWebBizOrderStatusLabel(u)),h._param("orderStatus",d("WAWebBizOrderStatusLabels").getWAWebBizOrderStatusLabel(w))]):h._("__JHASH__UARVCowcoXl__JHASH__",[h._param("originalOrderStatus",d("WAWebBizOrderStatusLabels").getWAWebBizOrderStatusLabel(u)),h._param("orderStatus",d("WAWebBizOrderStatusLabels").getWAWebBizOrderStatusLabel(w))])})):F(g,f,i,j)}e=h._("__JHASH__W9JHo2yaW9d__JHASH__");var K=function(){z(!y)};return l.jsxs(c("WAWebDrawer.react"),{onDrop:a.onBack,ref:b,children:[l.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:h._("__JHASH__IaAnh-WqNbE__JHASH__"),onBack:a.onBack,type:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.SMALL}),l.jsx(c("WAWebDrawerBody.react"),{children:l.jsxs(c("WAWebDrawerSection.react"),{children:[d("WAWebOrdersExpansionUtils").isOrderExpansionEnabled()&&l.jsxs(l.Fragment,{children:[l.jsxs(d("WAWebFlex.react").FlexRow,{align:"center",xstyle:[d("WAWebUISpacing").uiPadding.top16,d("WAWebUISpacing").uiPadding.horiz16],children:[l.jsx(d("WAWebFlex.react").FlexColumn,{xstyle:d("WAWebUISpacing").uiPadding.end24,children:l.jsx(d("WAWebSwitch.react").Switch,{checked:y,onChange:K,testid:void 0})}),l.jsx("div",{children:h._("__JHASH__g87pBZZ6PR8__JHASH__")})]}),l.jsx(r,{xstyle:d("WAWebUISpacing").uiMargin.bottom16})]}),l.jsx("div",{className:(j||(j=c("stylex")))(d("WAWebUISpacing").uiPadding.vert4,d("WAWebUISpacing").uiPadding.horiz16),children:l.jsx(d("WAWebFlex.react").FlexColumn,{xstyle:q.checkboxContainer,children:p.map(function(a){return l.jsx(c("WAWebOrderDetailRadioButton.react"),{testid:void 0,label:d("WAWebBizOrderStatusLabels").getWAWebBizOrderStatusLabel(a),isCanceled:a===d("WAWebOrderStatus").OrderStatus.Canceled,checked:w===a,onClick:function(){x(a)}},a)})})}),l.jsx(r,{}),l.jsx("div",{className:j(d("WAWebUISpacing").uiPadding.horiz28),children:l.jsx(d("WAWebRichTextField.react").RichTextField,{maxLength:c("WAWebConstantsDeprecated").MAX_CART_MESSAGE_LENGTH,placeholder:e,value:i,testid:void 0,multiline:!0,showRemaining:!0,spellCheck:!0,supportsEmoji:!0,textFormatEnabled:!0,onEnter:J,onChange:function(a){return k(a.text)}})}),s(a.chat,C.items.length,f,g),l.jsx(d("WAWebFlex.react").FlexColumn,{align:"center",xstyle:[d("WAWebUISpacing").uiPadding.horiz16,d("WAWebUISpacing").uiMargin.top8,d("WAWebUISpacing").uiMargin.bottom24],children:l.jsx(c("WAWebButton.react"),{testid:void 0,type:"primary",onClick:J,children:h._("__JHASH__ozB-3Zgb8C4__JHASH__")})})]})})]})}a.displayName=a.name+" [from "+f.id+"]";b=e(a);g["default"]=b}),98);
__d("WAWebProductCatalogProductDetailsWithDeepLink.react",["fbt","WAFilteredCatch","WANullthrows","WAWebBackendErrors","WAWebCatalogCollection","WAWebConfirmPopup.react","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerHeader.react","WAWebFbtCommon","WAWebModalManager","WAWebProductCatalogFetchState","WAWebProductCatalogFetchStateTopBar.react","WAWebProductCatalogGetLatestProduct","WAWebProductCatalogProductDetailsDrawer.react","WAWebWidFactory","react"],(function(a,b,c,d,e,f,g,h){var i,j;a=j||d("react");var k=i||(i=c("react"));b=a.forwardRef;var l=a.useEffect,m=a.useState;e=b(function(a,b){var e=a.isPushed;e=e===void 0?!0:e;var f=a.productInfo,g=f.productId,i=f.businessOwnerJid,j=a.onBack;f=m(function(){return c("WAWebProductCatalogGetLatestProduct")({productId:g,businessOwnerJid:i})});var n=f[0],o=f[1];f=m(function(){return n?"NONE":"PENDING"});var p=f[0],q=f[1],r=function(){j(),d("WAWebModalManager").ModalManager.open(k.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{onOK:function(){d("WAWebModalManager").ModalManager.close()},okText:c("WAWebFbtCommon")("OK"),children:h._("__JHASH__M459z--6h5t__JHASH__")}))},s=function(){var a=d("WAWebWidFactory").createWid(i);d("WAWebCatalogCollection").CatalogCollection.findProduct({catalogWid:a,productId:g}).then(function(){var b=d("WAWebCatalogCollection").CatalogCollection.get(a);o(c("WANullthrows")(b).productCollection.get(g));q("SUCCESS")})["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").E404,function(){r(),q("ERROR")}))["catch"](function(a){d("WAWebProductCatalogFetchState").parseErrorState(a,function(a){q(a)})})};l(function(){n||s()},[]);return n?k.jsx(c("WAWebProductCatalogProductDetailsDrawer.react"),{ref:b,chat:a.chat,isPushed:e,product:n,onEnd:a.onEnd,onBack:a.onBack,onProductDetail:a.onProductDetail,onProductCatalog:a.onProductCatalog,refreshCarousel:!0,onProductLinkClick:a.onProductLinkClick,onProductMoreInformation:a.onProductMoreInformation,onCartClick:a.onCartClick}):k.jsxs(c("WAWebDrawer.react"),{ref:b,onDrop:a.onBack,children:[k.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{testid:void 0,title:h._("__JHASH__hg9BRt8_aW-__JHASH__"),onBack:a.onBack,type:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.SMALL}),k.jsx(c("WAWebDrawerBody.react"),{children:k.jsx(c("WAWebProductCatalogFetchStateTopBar.react"),{fetchState:p})})]},"product-details-drawer")});g.ProductDetailsWithDeepLink=e}),98);
__d("WAWebProductCatalogProductMessageListNoProductModal",["fbt","WAWebConfirmPopup.react","WAWebEmojiText.react","WAWebFbtCommon","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(a){a=a.onConfirm;return j.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{onOK:a,okText:c("WAWebFbtCommon")("OK"),children:j.jsx(d("WAWebEmojiText.react").EmojiText,{text:h._("__JHASH__ZHS9rX0-Jh0__JHASH__")})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebProductCatalogProductMessageList.react",["WAWebDrawerContext","WAWebDrawerManager","WAWebFlatList.react","WAWebFlatListContainer.react","WAWebModalManager","WAWebProductCatalogCatalogConstants","WAWebProductCatalogContext","WAWebProductCatalogListItem.react","WAWebProductCatalogLogEvents","WAWebProductCatalogProductMessageListNoProductModal","WAWebSectionHeader.react","WAWebStateUtils","WAWebUISpacing","WAWebUtilsLogQplEvents","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j;b=j||d("react");var k=h||(h=c("react")),l=b.useCallback,m=b.useEffect,n={list:{overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}},o=d("WAWebFlatList.react").FlatListFactory();function p(a){var b=a.item,e=a.onProductDetail,f=l(function(a,b){d("WAWebProductCatalogLogEvents").logCatalogListDetailClick({product:d("WAWebStateUtils").unproxy(a),catalogContext:b});d("WAWebUtilsLogQplEvents").qplStartProductView("PLM");return e(a)},[e]);a=null;switch(b.type){case"section":var g=b.label;a=k.jsx(c("WAWebSectionHeader.react"),{header:g});break;case"product":var h=b.product;a=k.jsx(d("WAWebDrawerContext").DrawerContext.Consumer,{children:function(a){return k.jsx(c("WAWebProductCatalogListItem.react"),{product:h,onClick:function(){return f(h,d("WAWebProductCatalogContext").getProductCatalogContext(a))},canManageCatalog:!1})}});break}return a}p.displayName=p.name+" [from "+f.id+"]";function a(a){var b=a.flatListController,e=a.onProductDetail;a=a.productMessageList;var f=a.productCollection.getProductModels(),g=a.getSections(),h=a.getSectionsCount()>0,j=a.getTotalProductsFetchedOrFailed();a=a.getProductSize();var l=a===j&&f.length===0,q=[];g.forEach(function(a,b){var c=a.title;a=a.products;var e=[];a.forEach(function(a){var c=a.productId;a=f.find(function(a){return a.id===c});a!=null&&e.push({itemKey:"section-"+b+"-"+a.id.toString(),product:a,type:"product",height:d("WAWebProductCatalogCatalogConstants").PRODUCT_LIST_ITEM_HEIGHT})});e.length>0&&(c!=null&&c!==""&&q.push({itemKey:"header-"+b+"-"+c,label:c,type:"section",height:72}),q.push.apply(q,e))});m(function(){l&&d("WAWebModalManager").ModalManager.open(k.jsx(c("WAWebProductCatalogProductMessageListNoProductModal"),{onConfirm:function(){d("WAWebDrawerManager").DrawerManager.closeDrawerRight(),d("WAWebModalManager").ModalManager.close()}}))},[l]);return k.jsx("div",{className:(i||(i=c("stylex")))(n.list,d("WAWebUISpacing").uiPadding.bottom8,!h&&d("WAWebUISpacing").uiMargin.top8),children:k.jsx(c("WAWebFlatListContainer.react"),{flatListControllers:[b],children:k.jsx(o,{flatListController:b,direction:"vertical",forceConsistentRenderCount:!1,data:q,renderItem:function(a){return k.jsx(p,{item:a,onProductDetail:e})},itemEnterAnimationsEnabled:!0})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebProductCatalogProductMessageListDrawer.react",["WAQplTypes","WATypeUtils","WAWebCartCollection","WAWebCommonCartIconMenuBarItem.react","WAWebContactGetters","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerContext","WAWebDrawerHeader.react","WAWebEmojiText.react","WAWebFlatListController","WAWebFlatListLoadingSpinnerItem.react","WAWebFrontendConstants","WAWebProductCatalogCatalogConstants","WAWebProductCatalogCheckCartEnabled","WAWebProductCatalogContext","WAWebProductCatalogFetchState","WAWebProductCatalogFetchStateTopBar.react","WAWebProductCatalogLogEvents","WAWebProductCatalogProductMessageList.react","WAWebProductMessageListCollection","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule","WAWebUtilsLogQplEvents","asyncToGeneratorRuntime","react","useWAWebContactValues","useWAWebLazyRef","useWAWebListener","useWAWebUnmountSignal"],(function(a,b,c,d,e,f,g){var h,i;a=i||d("react");var j=h||(h=c("react"));e=a.forwardRef;var k=a.useContext,l=a.useEffect,m=a.useState;function n(a){var b=a.loadingMore,d=a.onProductDetail,e=a.productListFlatListControllerRef,f=a.productMessageList;a=a.productMessageListFetchState;return!f?j.jsx(c("WAWebProductCatalogFetchStateTopBar.react"),{fetchState:a}):j.jsxs("div",{children:[j.jsx(c("WAWebProductCatalogProductMessageList.react"),{productMessageList:f,flatListController:e.current,onProductDetail:d}),b&&j.jsx(c("WAWebFlatListLoadingSpinnerItem.react"),{})]})}n.displayName=n.name+" [from "+f.id+"]";a=e(function(a,e){var f=a.productListId,g=a.setScrollOffset,h=a.onCartClick,i=a.onProductDetail,o=a.catalogWid,p=c("useWAWebUnmountSignal")(),q=k(d("WAWebDrawerContext").DrawerContext),r=c("useWAWebLazyRef")(function(){return new(c("WAWebFlatListController"))()}),s=d("useWAWebContactValues").useContactValues(a.contact.id,[d("WAWebContactGetters").getId]),t=s[0];s=m(!1);var u=s[0],v=s[1];s=m(0);var w=s[0],x=s[1];s=m(!1);var y=s[0],z=s[1];s=m(function(){return d("WAWebProductMessageListCollection").ProductMessageListCollection.get(f)});var A=s[0],B=s[1];s=m(function(){return d("WAWebCartCollection").CartCollection.findCart(t.toString())});var C=s[0];s=m(C.itemCount);var D=s[0],E=s[1];s=m(!1);var F=s[0],G=s[1];s=m(A?"SUCCESS":"NONE");var H=s[0],I=s[1],J=function b(c){var e=a.isPushed;e=e===void 0?!0:e;var g=e&&c===!0;e=d("WAWebProductMessageListCollection").ProductMessageListCollection.assertGet(f);var h=e.getTotalProductsFetchedOrFailed();c=e.getProductSize();if(y||h===c){g&&(d("WAWebQplQuickPerformanceLoggerModule").QPL.markerAnnotate(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW,{"int":{ProductsCount:h}}),d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW,d("WAQplTypes").QuickLogActionType.SUCCESS));z(!0);return}v(!0);x(h);e=g?d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW:void 0;d("WAWebProductMessageListCollection").ProductMessageListCollection.update(f,{markerId:e}).then(function(a){if(p.aborted){g&&d("WAWebQplQuickPerformanceLoggerModule").QPL.markerDrop(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW);return}v(!1);a=Array.isArray(a)?a[0]:a;a=a.getTotalProductsFetchedOrFailed();a===w&&z(!0);g&&(d("WAWebQplQuickPerformanceLoggerModule").QPL.markerAnnotate(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW,{"int":{ProductsCount:a}}),d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW,d("WAQplTypes").QuickLogActionType.SUCCESS));h*d("WAWebProductCatalogCatalogConstants").PRODUCT_LIST_ITEM_HEIGHT<window.innerHeight&&b()})["catch"](function(){v(!1),z(!0),g&&d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW,d("WAQplTypes").QuickLogActionType.FAIL)})},K=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=a.isPushed;b=b===void 0?!0:b;try{var c=(yield d("WAWebProductMessageListCollection").ProductMessageListCollection.find(f));if(p.aborted){b&&d("WAWebQplQuickPerformanceLoggerModule").QPL.markerDrop(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW);return}B(c);I("SUCCESS");J(!0)}catch(a){d("WAWebProductCatalogFetchState").parseErrorState(a,function(a){return I(a)}),b&&d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_PLM_DETAILS_VIEW,d("WAQplTypes").QuickLogActionType.FAIL)}});return function(){return c.apply(this,arguments)}}();l(function(){A?J():K(),c("WAWebProductCatalogCheckCartEnabled")(t).then(function(a){if(p.aborted)return;G(a);d("WAWebProductCatalogLogEvents").logCatalogListView({catalogOwnerWid:o,catalogContext:d("WAWebProductCatalogContext").getProductCatalogContext(q),cartToggle:a})})},[]);d("useWAWebListener").useListener(C,"all",function(){E(C.itemCount)});var L=function(a){if(u)return;a.scrollTop+d("WAWebFrontendConstants").SCROLL_FUDGE>a.scrollHeight-a.clientHeight&&J()};s=function(a){L(a.currentTarget),g==null?void 0:g(a.currentTarget.scrollTop)};var M=function(){d("WAWebUtilsLogQplEvents").qplStartCartView("PLM"),h==null?void 0:h(t.toString())};F=h!=null&&F?j.jsx(d("WAWebCommonCartIconMenuBarItem.react").CartIconMenuBarItem,{cartCountText:d("WATypeUtils").isNumber(D)&&D>0?D.toString():void 0,onClick:M,catalogOwnerJid:t.toString()}):null;return j.jsxs(c("WAWebDrawer.react"),{ref:e,theme:"products",onDrop:a.onBack,children:[j.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:j.jsx("div",{className:"x78zum5",children:j.jsx(d("WAWebEmojiText.react").EmojiText,{text:A==null?void 0:A.title,ellipsify:!0})}),titleStr:A==null?void 0:A.title,type:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.SMALL,onBack:a.onBack,menu:F}),j.jsx(c("WAWebDrawerBody.react"),{onScroll:s,flatListControllers:[r.current],scrollOffset:a.scrollOffset,children:j.jsx(n,{productMessageList:A,loadingMore:u,productMessageListFetchState:H,onProductDetail:i,productListFlatListControllerRef:r})})]})});a.displayName="ProductMessageListDrawer";g.ProductMessageListDrawer=a}),98);
__d("WAWebBizProductDetailsFlow.react",["fbt","WANullthrows","WATimeUtils","WAWebBizEntryPoint","WAWebBizGatingUtils","WAWebBizShowCartAction","WAWebBusinessProfileCollection","WAWebBusinessProfileUtils","WAWebCartOrderDetailDrawer.react","WAWebChatThreadLogging","WAWebConfirmPopup.react","WAWebContactCollection","WAWebDBUpdateMessageTable","WAWebDrawerContext","WAWebFbtCommon","WAWebFlowComponent.react","WAWebModalManager","WAWebMsgCollection","WAWebOrderCollection","WAWebOrderCreationFlowLoadable","WAWebOrderDetailDrawer.react","WAWebOrderDetailProductListDrawer.react","WAWebOrderDetailsActionCategory","WAWebOrderDetailsActionsSmbWamEvent","WAWebOrderStatusUpdateDrawer.react","WAWebOrdersExpansionUtils","WAWebProductCatalogCatalogLinkDrawer.react","WAWebProductCatalogContext","WAWebProductCatalogLogEvents","WAWebProductCatalogProductDetailsDrawer.react","WAWebProductCatalogProductDetailsWithDeepLink.react","WAWebProductCatalogProductLinkDrawer.react","WAWebProductCatalogProductListDrawer.react","WAWebProductCatalogProductMessageListDrawer.react","WAWebProductCatalogProductMoreInformationDrawer.react","WAWebProductCollectionCatalogViewDrawer.react","WAWebProductCollectionCollectionContentDrawer.react","WAWebProtobufsE2E.pb","WAWebSmbDataSharingOptInModalDialog","WAWebToast.react","WAWebToastManager","WAWebUim","WAWebUserPrefsMeUser","WAWebWamEnumOrderDetailsCreationAction","WAWebWamEnumSmbDataSharingConsentScreenEntryPoint","WAWebWidFactory","asyncToGeneratorRuntime","err","react"],(function(a,b,c,d,e,f,g,h){var i,j;a=j||d("react");var k=i||(i=c("react"));e=a.forwardRef;var l=a.useContext,m=function(a){if(!d("WAWebBizGatingUtils").isSellerOrderRevampEnabled())return;if(a!=null){var b={status:d("WAWebProtobufsE2E.pb").Message$OrderMessage$OrderStatus.ACCEPTED};void d("WAWebDBUpdateMessageTable").updateMessageTable(a.id,b);a=d("WAWebMsgCollection").MsgCollection.get(a.id);a&&a.set(b)}},n=function(e){babelHelpers.inheritsLoose(a,e);function a(){var a,f;for(var g=arguments.length,i=new Array(g),j=0;j<g;j++)i[j]=arguments[j];return(a=f=e.call.apply(e,[this].concat(i))||this,f.scrollOffset=0,f.setScrollOffset=function(a){f.scrollOffset=a},f.$ProductDetailsFlowWithContext9=function(a){var b=!a,c=f.props,d=c.catalogOwnerJid,e=c.chat,g=c.product,h=c.productInfo;c=c.sellerJid;d=(g=(d=(d=d)!=null?d:g==null?void 0:g.catalogWid.toString())!=null?d:h==null?void 0:h.businessOwnerJid)!=null?g:c;f.push(k.jsx(o,{chat:e,catalogOwnerJid:d,collection:a,isAllItems:b}))},f.$ProductDetailsFlowWithContext2=function(a,b){var d=f.props,e=d.chat;d=d.refreshCarousel;e=k.jsx(c("WAWebProductCatalogProductDetailsDrawer.react"),{chat:e,product:a,onEnd:f.$ProductDetailsFlowWithContext10,onBack:f.$ProductDetailsFlowWithContext11,onProductDetail:f.$ProductDetailsFlowWithContext12,onProductCatalog:f.$ProductDetailsFlowWithContext13,onProductLinkClick:f.$ProductDetailsFlowWithContext14,onProductMoreInformation:f.$ProductDetailsFlowWithContext15,refreshCarousel:d,onCartClick:f.$ProductDetailsFlowWithContext16,collectionId:b});f.push(e)},f.$ProductDetailsFlowWithContext17=function(a){a=k.jsx(c("WAWebProductCatalogProductMoreInformationDrawer.react"),{product:a,onBack:f.$ProductDetailsFlowWithContext11});f.push(a)},f.$ProductDetailsFlowWithContext3=function(a){a=k.jsx(d("WAWebProductCatalogProductDetailsWithDeepLink.react").ProductDetailsWithDeepLink,{chat:f.props.chat,productInfo:a,onEnd:f.$ProductDetailsFlowWithContext10,onBack:f.$ProductDetailsFlowWithContext18,onProductDetail:f.$ProductDetailsFlowWithContext12,onProductCatalog:f.$ProductDetailsFlowWithContext13,onProductLinkClick:f.$ProductDetailsFlowWithContext14,onProductMoreInformation:f.$ProductDetailsFlowWithContext15,onCartClick:f.$ProductDetailsFlowWithContext16});f.push(a)},f.pushProductCatalog=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("WAWebContactCollection").ContactCollection.gadd(a),e=(yield d("WAWebBusinessProfileCollection").BusinessProfileCollection.find(a));b=d("WAWebBusinessProfileUtils").hasCatalog(e)?k.jsx(c("WAWebProductCollectionCatalogViewDrawer.react"),{contact:b,onProductDetail:f.$ProductDetailsFlowWithContext12,catalogId:a,onBack:f.$ProductDetailsFlowWithContext18,businessProfile:e,scrollOffset:f.scrollOffset,setScrollOffset:f.setScrollOffset,onCatalogLinkClick:f.$ProductDetailsFlowWithContext19,onCartClick:f.$ProductDetailsFlowWithContext16,onCollectionSeeAll:f.$ProductDetailsFlowWithContext9}):k.jsx(d("WAWebProductCatalogProductListDrawer.react").ProductListDrawer,{contact:b,onProductDetail:f.$ProductDetailsFlowWithContext12,catalogId:a,onBack:f.$ProductDetailsFlowWithContext18,businessProfile:e,setScrollOffset:f.setScrollOffset,onCatalogLinkClick:f.$ProductDetailsFlowWithContext19,onCartClick:f.$ProductDetailsFlowWithContext16});f.push(b)});return function(b){return a.apply(this,arguments)}}(),f.$ProductDetailsFlowWithContext7=function(a,b,d,e,g,h,i){a=k.jsx(c("WAWebCartOrderDetailDrawer.react"),{orderId:a,token:b,sellerJid:d,userIsCartOwner:e,onProductDetail:f.$ProductDetailsFlowWithContext20,onOrderCreate:f.$ProductDetailsFlowWithContext4,onOrderCancel:f.$ProductDetailsFlowWithContext5,ownerHasReviewed:g,orderMessage:h,chat:i});f.push(a)},f.$ProductDetailsFlowWithContext1=function(a,b){var c=d("WAWebContactCollection").ContactCollection.gadd(b);c=k.jsx(d("WAWebProductCatalogProductMessageListDrawer.react").ProductMessageListDrawer,{contact:c,productListId:a,onProductDetail:f.$ProductDetailsFlowWithContext12,onCartClick:f.$ProductDetailsFlowWithContext16,onBack:f.$ProductDetailsFlowWithContext18,onEnd:f.$ProductDetailsFlowWithContext10,setScrollOffset:f.setScrollOffset,catalogWid:b});f.push(c)},f.$ProductDetailsFlowWithContext23=function(a){f.$ProductDetailsFlowWithContext22(a)},f.$ProductDetailsFlowWithContext24=function(){new(d("WAWebOrderDetailsActionsSmbWamEvent").OrderDetailsActionsSmbWamEvent)({orderDetailsCreationAction:d("WAWebWamEnumOrderDetailsCreationAction").ORDER_DETAILS_CREATION_ACTION.CLICK_UPDATE_ORDER_STATUS,actionCategory:String(c("WAWebOrderDetailsActionCategory").ORDER_DETAILS_MANAGEMENT),orderDetailEntryPoint:String(f.props.entryPoint),hasCatalog:d("WAWebBusinessProfileUtils").hasCatalog(d("WAWebBusinessProfileCollection").BusinessProfileCollection.get(d("WAWebUserPrefsMeUser").getMaybeMeUser()))}).commit(),f.$ProductDetailsFlowWithContext25()},f.$ProductDetailsFlowWithContext4=function(a,b){var e;b===void 0&&(b=null);new(d("WAWebOrderDetailsActionsSmbWamEvent").OrderDetailsActionsSmbWamEvent)({orderDetailsCreationAction:d("WAWebWamEnumOrderDetailsCreationAction").ORDER_DETAILS_CREATION_ACTION.CLICK_CREATE_ORDER_DETAILS_FROM_CART,actionCategory:String(c("WAWebOrderDetailsActionCategory").RECEIVED_CART),orderDetailEntryPoint:String((e=f.props.entryPoint)!=null?e:c("WAWebBizEntryPoint").FROM_CART),hasCatalog:d("WAWebBusinessProfileUtils").hasCatalog(d("WAWebBusinessProfileCollection").BusinessProfileCollection.get(d("WAWebUserPrefsMeUser").getMaybeMeUser()))}).commit();e=function(){f.$ProductDetailsFlowWithContext21(a,b)};c("WAWebSmbDataSharingOptInModalDialog").maybeShowOrderDataSharingDialog(f.props.chat,e,d("WAWebWamEnumSmbDataSharingConsentScreenEntryPoint").SMB_DATA_SHARING_CONSENT_SCREEN_ENTRY_POINT.CART)},f.cancelOrder=function(){var a=f.props,b=a.orderId,c=a.token,e=a.sellerJid,g=a.userIsCartOwner,h=a.orderMessage;a=a.chat;b!=null&&c!=null&&e!=null&&g!=null&&f.$ProductDetailsFlowWithContext7(b,c,e,g,!0,h,a);d("WAWebModalManager").ModalManager.close()},f.$ProductDetailsFlowWithContext5=function(){d("WAWebModalManager").ModalManager.open(k.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{onCancel:function(){d("WAWebModalManager").ModalManager.close()},cancelText:h._("__JHASH__BQuudHjVcNe__JHASH__"),onOK:f.cancelOrder,okText:h._("__JHASH__puy9NeJAODx__JHASH__"),title:h._("__JHASH__gwVNWAbk8xZ__JHASH__"),children:h._("__JHASH__R3FYssaqFQB__JHASH__")}))},f.$ProductDetailsFlowWithContext12=function(a,b){f.$ProductDetailsFlowWithContext2(a,b)},f.$ProductDetailsFlowWithContext15=function(a){f.$ProductDetailsFlowWithContext17(a)},f.$ProductDetailsFlowWithContext20=function(a){f.$ProductDetailsFlowWithContext3(a)},f.$ProductDetailsFlowWithContext13=function(a,b){d("WAWebProductCatalogLogEvents").logCarouselViewMoreClick({catalogOwnerWid:a,catalogContext:b}),f.pushProductCatalog(a)},f.$ProductDetailsFlowWithContext14=function(a){f.push(k.jsx(c("WAWebProductCatalogProductLinkDrawer.react"),{product:a,onBack:f.$ProductDetailsFlowWithContext18}))},f.$ProductDetailsFlowWithContext19=function(a,b){f.push(k.jsx(c("WAWebProductCatalogCatalogLinkDrawer.react"),{catalog:a,contact:b,onBack:f.$ProductDetailsFlowWithContext18}))},f.$ProductDetailsFlowWithContext16=function(a){var b=d("WAWebProductCatalogContext").getProductCatalogContext(f.props.context);a=c("WAWebBizShowCartAction")(a,f.props.chat,b);a&&f.push(a)},f.$ProductDetailsFlowWithContext18=function(){f.pop()},f.$ProductDetailsFlowWithContext10=function(){f.end(d("WAWebUim").DismissReason.LIFECYCLE)},f.$ProductDetailsFlowWithContext11=function(){f.popAndUpdate({scrollOffset:f.scrollOffset})},f.$ProductDetailsFlowWithContext6=function(){var a=c("WAWebFbtCommon")("OK");d("WAWebToastManager").ToastManager.open(k.jsx(d("WAWebToast.react").Toast,{action:{dismiss:!0,actionText:a},msg:h._("__JHASH__ettcSfVSOyY__JHASH__"),id:d("WAWebToast.react").genId()}))},a)||babelHelpers.assertThisInitialized(f)}var f=a.prototype;f.componentDidMount=function(){var a=this,b=this.props,e=b.catalogOwnerJid,f=b.orderId,g=b.product,h=b.productInfo,i=b.productListId,j=b.collection,k=b.collectionId,l=b.isAllItems,m=b.token,n=b.sellerJid,o=b.userIsCartOwner,p=b.orderMessage,q=b.chat;b=b.orderInfo;d("WAWebBizGatingUtils").commerceThreadsLoggingEnabled()&&d("WAWebChatThreadLogging").handleActivitiesForChatThreadLogging([{activityType:"isCommerceViewed",ts:d("WATimeUtils").unixTime(),chatId:q.id}]);if(e!=null)j!=null||l===!0?this.pushCollectionContent(d("WAWebWidFactory").createWid(e)):i!=null?this.$ProductDetailsFlowWithContext1(i,d("WAWebWidFactory").createWid(e)):void this.pushProductCatalog(d("WAWebWidFactory").createWid(e));else if(g)this.$ProductDetailsFlowWithContext2(g,k);else if(h)this.$ProductDetailsFlowWithContext3(h);else if(f!=null)m!=null&&n!=null&&o!=null&&(d("WAWebOrdersExpansionUtils").isOrderExpansionEnabled()?d("WAWebOrderCollection").OrderCollection.findOrder(f,n,m).then(function(b){a.$ProductDetailsFlowWithContext4(c("WANullthrows")(b),a.$ProductDetailsFlowWithContext5)})["catch"](function(){a.$ProductDetailsFlowWithContext6()}):this.$ProductDetailsFlowWithContext7(f,m,n,o,!1,p,q));else if(b!=null&&n!=null)this.$ProductDetailsFlowWithContext8(q,b,d("WAWebWidFactory").createWid(n));else throw c("err")("ProductDetailsFlow:no-product")};f.pushCollectionContent=function(a){var b=d("WAWebContactCollection").ContactCollection.gadd(a);this.push(k.jsx(d("WAWebProductCollectionCollectionContentDrawer.react").CollectionContentDrawer,{contact:b,onProductDetail:this.$ProductDetailsFlowWithContext12,catalogId:a,onBack:this.$ProductDetailsFlowWithContext18,onCatalogLinkClick:this.$ProductDetailsFlowWithContext19,onCartClick:this.$ProductDetailsFlowWithContext16,scrollOffset:this.scrollOffset,setScrollOffset:this.setScrollOffset,collection:this.props.collection}))};f.$ProductDetailsFlowWithContext21=function(a,b){var d,e=this;b===void 0&&(b=null);this.push(k.jsx(c("WAWebOrderCreationFlowLoadable"),{entryPoint:(d=this.props.entryPoint)!=null?d:c("WAWebBizEntryPoint").FROM_CART,onBack:this.$ProductDetailsFlowWithContext18,order:a,chat:this.props.chat,onDeclineOrder:b,onSend:function(){return m(e.props.orderMessage)}}))};f.$ProductDetailsFlowWithContext22=function(a){this.push(k.jsx(c("WAWebOrderDetailProductListDrawer.react"),{onBack:this.$ProductDetailsFlowWithContext18,productItems:a}))};f.$ProductDetailsFlowWithContext8=function(a,b,d){this.push(k.jsx(c("WAWebOrderDetailDrawer.react"),{entryPoint:this.props.entryPoint,onBack:this.$ProductDetailsFlowWithContext18,orderInfo:b,sellerWid:d,chat:a,onProductSummaryClick:this.$ProductDetailsFlowWithContext23,onOrderStatusUpdateClick:this.$ProductDetailsFlowWithContext24}))};f.$ProductDetailsFlowWithContext25=function(){var a=this.props,b=a.orderInfo;a=a.sellerJid;b!=null&&a!=null&&this.push(k.jsx(c("WAWebOrderStatusUpdateDrawer.react"),{entryPoint:this.props.entryPoint,chat:this.props.chat,onBack:this.$ProductDetailsFlowWithContext18,orderInfo:b,sellerJid:a}))};return a}(c("WAWebFlowComponent.react")),o=e(function(a,b){var c=l(d("WAWebDrawerContext").DrawerContext);return k.jsx(n,babelHelpers["extends"]({ref:b,context:c},a))});f=o;g["default"]=f}),98);
__d("WAWebBizSendProductModal.react",["fbt","Promise","WAWebBizProductMessageSendQpl","WAWebBlockContactAction","WAWebCmd","WAWebDrawerManager","WAWebFrontendConstants","WAWebModalManager","WAWebSelectModal.react","WAWebServerPropConstants","asyncToGeneratorRuntime","react"],(function(a,b,c,d,e,f,g,h){var i,j,k,l=k||c("react"),m=(j||(j=d("react"))).useEffect;function a(a){m(function(){d("WAWebCmd").Cmd.closeContextMenu(),d("WAWebCmd").Cmd.closeTooltip()},[]);var c=function(c){var e=a.product;return new(i||(i=b("Promise")))(function(a,b){d("WAWebCmd").Cmd.once("ui_idle",function(){c.sendProductMessage(e).then(function(){return a()})["catch"](function(a){return b(a)})})})},e=function(e){d("WAWebBizProductMessageSendQpl").qplStartProductSendMessage("Forward",void 0,e.length);var f=e.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a.isUser&&a.contact.isContactBlocked&&(yield d("WAWebBlockContactAction").unblockContact(a.contact));return c(a)});return function(b){return a.apply(this,arguments)}}());d("WAWebBizProductMessageSendQpl").qplEndProductMessageSend((i||(i=b("Promise"))).all(f));d("WAWebModalManager").ModalManager.close();e.length===1&&(d("WAWebCmd").Cmd.openChatFromUnread(e[0]),window.innerWidth<=d("WAWebFrontendConstants").LAYOUT_2COLUMNS_MAX_WIDTH&&d("WAWebDrawerManager").DrawerManager.closeDrawerRight());a.onSend==null?void 0:a.onSend()},f=function(){d("WAWebModalManager").ModalManager.close()};return l.jsx(d("WAWebSelectModal.react").SelectModal,{onConfirm:e,maxItems:d("WAWebServerPropConstants").MULTICAST_LIMIT_GLOBAL,title:h._("__JHASH__Pz11_y6jv6u__JHASH__"),listType:d("WAWebSelectModal.react").ListType.ChatSelectModal,onCancel:f})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebProductCatalogSendCatalogButton.react",["fbt","WAWebCatalogIcon","WAWebCellFrame.react","WAWebRoundShape.react","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(a){var b=a.disabled;a=a.onClick;var e=b?"xt0e3qv":"",f=b?"x40yjcy":"";a=b?null:a;f=j.jsx("span",{className:f,children:h._("__JHASH__QT2MGtjFadE__JHASH__")});b=j.jsx(c("WAWebRoundShape.react"),{theme:"compact",disabled:b,children:j.jsx(d("WAWebCatalogIcon").CatalogIcon,{})});return j.jsx(c("WAWebCellFrame.react"),{image:b,onClick:a,primary:f,theme:"list-button-compact",className:e})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebProductCatalogSelectProductsModal.react",["fbt","WANullthrows","WAWebCatalogCollection","WAWebProductCatalogSendCatalogButton.react","WAWebSelectModal.react","react"],(function(a,b,c,d,e,f,g,h){var i,j;a=j||d("react");var k=i||(i=c("react"));b=a.forwardRef;var l=a.useState;e=function(a,b){var e=l(!1),f=e[0],g=e[1];e=l([]);var i=e[0],j=e[1];e=function(a,b,c){g(c.length===0)};var m=function(a){a=a;j(a);g(a.length>0)},n=function(){var b;b=c("WANullthrows")((b=i[0])==null?void 0:b.catalogWid);b=c("WANullthrows")(d("WAWebCatalogCollection").CatalogCollection.get(b));a.onShare(b)};f=k.jsx(c("WAWebProductCatalogSendCatalogButton.react"),{disabled:!f,onClick:n});return k.jsx(d("WAWebSelectModal.react").SelectModal,{ref:b,title:h._("__JHASH__g_Xg1UUzHmM__JHASH__"),onCancel:a.onCancel,onConfirm:a.onConfirm,listType:d("WAWebSelectModal.react").ListType.ProductSelectModal,enableSearchBox:!1,customHeader:f,onSelectionChanged:e,onDataLoaded:m})};f=b(e);g["default"]=f}),98);
__d("WAWebBizAttachProductModal.react",["fbt","Promise","WAWebBizProductMessageSendQpl","WAWebCatalogShortLinkUtils","WAWebComposeBoxActions","WAWebModalManager","WAWebProductCatalogLogEvents","WAWebProductCatalogSelectProductsModal.react","react"],(function(a,b,c,d,e,f,g,h){var i,j,k=j||c("react");function a(a){var e=function(c){var e=a.chat,f=a.sessionId,g=a.onSend;d("WAWebBizProductMessageSendQpl").qplStartProductSendMessage("Attachment",c.length);c=c.map(function(a,b){b=b===0?e.composeQuotedMsg:null;return e.sendProductMessage(a,b).then(function(){d("WAWebProductCatalogLogEvents").logProductMessageSent({product:a,catalogSessionId:f})})});d("WAWebBizProductMessageSendQpl").qplEndProductMessageSend((i||(i=b("Promise"))).all(c));e.composeQuotedMsg=null;g==null?void 0:g();d("WAWebModalManager").ModalManager.close()},f=function(b){var c=a.chat,e=a.sessionId,f=d("WAWebCatalogShortLinkUtils").createCatalogLink(b.id.user);f=h._("__JHASH__CGjr4vQ7WJh__JHASH__",[h._param("catalogUrl",f)]).toString();d("WAWebComposeBoxActions").ComposeBoxActions.paste(c,f);d("WAWebProductCatalogLogEvents").logSendCatalogClick({catalogOwnerWid:b.id,catalogSessionId:e});d("WAWebModalManager").ModalManager.close()},g=function(){a.onCancel==null?void 0:a.onCancel(),d("WAWebModalManager").ModalManager.close()};return k.jsx(c("WAWebProductCatalogSelectProductsModal.react"),{onCancel:g,onConfirm:e,onShare:f})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebChatAgentMsgInfoCell.react",["WAWebChatCell.react","WAWebClock","WAWebDetailImage.react","WAWebEmojiText.react","WAWebMsgGetters","react","useWAWebMsgValues"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){var b=a.agentName,e=a.msg;a=a.theme;e=d("useWAWebMsgValues").useMsgValues(e.id,[d("WAWebMsgGetters").getFrom,d("WAWebMsgGetters").getT]);var f=e[0];e=e[1];e=d("WAWebClock").Clock.relativeDateAndTimeStr(e);var g=d("WAWebDetailImage.react").getSize(d("WAWebDetailImage.react").DetailImageSize.Small);return i.jsx(c("WAWebChatCell.react"),{contextEnabled:function(){return!1},image:i.jsx("div",{className:"x1n2onr6",style:{height:g,width:g},children:i.jsx(d("WAWebDetailImage.react").DefaultIcon,{id:f})}),primary:i.jsx(d("WAWebEmojiText.react").EmojiText,{direction:"auto",text:b,titlify:!0,ellipsify:!0}),secondary:i.jsx("span",{title:e,children:e}),className:"x1sqbtui x1bnvlk4",theme:a,idle:!0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebChatContactMsgInfoCell.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={title:"_ahhp"};b=a;g["default"]=b}),98);
__d("WAWebChatContactMsgInfoCell.react",["WAWebCellFrame.react","WAWebChatContactMsgInfoCell.scss","WAWebClock","WAWebEmojiText.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){var b=a.icon,e=a.t;a=a.title;e=e!=null?d("WAWebClock").Clock.relativeDateAndTimeStr(e):"-";b=i.jsxs("div",{className:c("WAWebChatContactMsgInfoCell.scss").title,"data-testid":void 0,children:[b,i.jsx(d("WAWebEmojiText.react").EmojiText,{direction:"auto",text:a,titlify:!0,ellipsify:!0})]});return i.jsx(c("WAWebCellFrame.react"),{primary:b,secondary:e,theme:"plain",idle:!0,testid:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebChatKeptByMsgInfoCell.react",["WAWebChatCell.react","WAWebClock","WAWebContactGetters","WAWebDetailImage.react","WAWebEmojiText.react","WAWebFrontendContactGetters","react","useWAWebContactValues"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){var b=a.contact,e=a.kicTimestampMs;a=a.theme;b=d("useWAWebContactValues").useContactValues(b.id,[d("WAWebContactGetters").getId,d("WAWebContactGetters").getName,d("WAWebFrontendContactGetters").getFormattedName,d("WAWebContactGetters").getNotifyName]);var f=b[0],g=b[1],h=b[2];b=b[3];f=i.jsx(d("WAWebDetailImage.react").DetailImage,{id:f});var j;e!=null&&(j=d("WAWebClock").Clock.relativeDateAndTimeStr(e/1e3));e=i.jsx("span",{title:j,children:j});var k;!g&&b&&(k=i.jsx(d("WAWebEmojiText.react").EmojiText,{className:"xxayilr",direction:"auto",text:b}));return i.jsx(c("WAWebChatCell.react"),{contextEnabled:function(){return!1},image:f,primary:i.jsx(d("WAWebEmojiText.react").EmojiText,{direction:"auto",text:h,titlify:!0,ellipsify:!0}),secondary:e,secondaryDetail:k,style:"x1sqbtui x1bnvlk4",theme:a,idle:!0,testid:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebAvatarOverlay.react",["$InternalEnum","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j,k=j||c("react");a=(h||(h=d("react"))).forwardRef;var l=b("$InternalEnum").Mirrored(["DEFAULT","COMMUNITY"]),m={overlay:{position:"x10l6tqk",top:"x13vifvy",start:"x17qophe",left:null,right:null,zIndex:"xfo81ep",boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",alignItems:"x6s0dn4",justifyContent:"xl56j7k",width:"xh8yej3",height:"x5yr21d",paddingTop:"xqy66fx",fontSize:"x1nxh6w3",lineHeight:"x1u7k74",color:"x1j16vfr",textTransform:"xtvhhri",backgroundColor:"x146q241",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",$$css:!0},noBorderRadius:{borderTopStartRadius:"x168nmei",borderTopEndRadius:"x13lgxp2",borderBottomEndRadius:"x5pf9jr",borderBottomStartRadius:"xo71vjh",$$css:!0},icon:{color:"x7o08j2",$$css:!0},text:{width:"x1exxlbk",marginTop:"x1anpbxc",textAlign:"x2b8uid",overflowWrap:"x1mzt3pk",$$css:!0}};e=a(function(a,b){return k.jsxs("div",{ref:b,className:(i||(i=c("stylex")))([m.overlay,a.theme===l.COMMUNITY&&m.noBorderRadius]),children:[k.jsx("div",{className:"x7o08j2",children:a.icon}),k.jsx("div",{"data-testid":void 0,className:"x1exxlbk x1anpbxc x2b8uid x1mzt3pk",children:a.text})]},"avatar-overlay")});g.AvatarOverlayTheme=l;g.AvatarOverlay=e}),98);
__d("WAWebImageGallery.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={imageGallery:"_ak40",imageGalleryList:"_ak41",imageGalleryItem:"_ak3y",imageGalleryItemSpacer:"_ak42",imageGalleryItemImage:"_ak3-",imageGalleryItemOverlay:"_ak3w",selected:"_ak3z",imageGalleryFooter:"_ak3_",focusAnimation:"_ak3x"};b=a;g["default"]=b}),98);
__d("WAWebImageGallery.react",["fbt","WALogger","WANullthrows","WAWebClassnames","WAWebDomScroll","WAWebFocusIndicator","WAWebFocusTracer","WAWebFrontendConstants","WAWebImageGallery.scss","WAWebKeyboardHotKeys.react","WAWebSetRefCache","WAWebSingleSelection","WAWebSpinner.react","WAWebTabOrder","WAWebUnstyledButton.react","err","lodash","react","useWAWebLazyRef","useWAWebThrottledCallback"],(function(a,b,c,d,e,f,g,h){var i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]);k=function(){return a};return a}b=j||d("react");var l=i||(i=c("react"));e=b.forwardRef;var m=b.useCallback,n=b.useEffect,o=b.useImperativeHandle,p=b.useRef,q=b.useState,r=3;function a(a,b){var e=a.onImageClick,f=a.isLoadingMore,g=a.canLoadMore,i=a.onRequestMoreImages,j=a.onFocusPrev,s=a.thumbnails,t=p(null),u=c("useWAWebLazyRef")(function(){return new Map()}),v=p(null),w=c("useWAWebLazyRef")(function(){return new(c("WAWebSingleSelection"))(s,function(a){return a.id})}),x=q(null),y=x[0],z=x[1],A=m(function(a,b){a===void 0;b===void 0&&(b=!1);a=w.current;var e=a.getVal();if(e&&y!==e){z(e);if(a.index>-1){e=u.current.get(""+a.index);c("WAWebFocusTracer").focus(e);b&&e&&d("WAWebDomScroll").scrollIntoViewIfNeeded(e,!1)}}},[u,y,w]);x=function(a,b){b?u.current.set(a,b):u.current["delete"](a)};var B=new(c("WAWebSetRefCache"))(x);x=function(a){a.preventDefault(),a.stopPropagation()};var C=function(a){a=a.target;e&&a.nodeType===1&&a.tagName==="IMG"&&e(a.src)},D=function(a){a=w.current.getVal();a||d("WALogger").ERROR(k()).sendLogs("No value selected, but enter clicked");e&&a&&e(a.thumbUrl)},E=m(function(){if(f)return;if(!g||!i)return;if(!t.current)throw c("err")("Requesting more images when body not rendered");t.current.scrollTop+d("WAWebFrontendConstants").SCROLL_FUDGE>t.current.scrollHeight-t.current.clientHeight&&i()},[g,f,i]),F=c("useWAWebThrottledCallback")(E,100),G=function(a){a.preventDefault(),a.stopPropagation(),w.current.setPrev(!1),A(!0,!0)},H=function(a){a.preventDefault(),a.stopPropagation(),w.current.setNext(!1),A(!0,!0)},I=function(a){a.preventDefault();a.stopPropagation();if(w.current.index===0&&j)j();else{a=Math.max(w.current.index-r,0);w.current.set(a,!1,!1);A(!0,!0)}},J=function(a){a.preventDefault(),a.stopPropagation(),w.current.set(w.current.index+r,!1,!1),A(!0,!0)},K=function(a){a.stopPropagation();a.preventDefault();(w.current.index==null||w.current.index<0)&&w.current.setFirst(!1);A(!0,!1);a=c("WANullthrows")(u.current.get(""+w.current.index));a=a.getElementsByClassName(c("WAWebImageGallery.scss").imageGalleryItemOverlay);if(a.length!==1)throw c("err")("Unexpected number of overlay elements "+a.length);c("WAWebFocusIndicator").maybeIndicateFocus(a[0],c("WAWebImageGallery.scss").focusAnimation)},L=function(){w.current.unset(),z(void 0)};n(function(){E(),w.current.init(s,!1),A()},[E,w,s,A]);var M=function(){v.current&&v.current.focus()};o(b,function(){return{focus:M,handleRequestDismiss:L}});b={down:J,enter:D,left:G,right:H,up:I};J=c("lodash").map(a.thumbnails,function(a,b){var e,f=a.id,g=a.name;a=a.thumbUrl;var i=y?y.id===f:!1;i=d("WAWebClassnames").classnamesConvertMeToStylexPlease((e={},e[c("WAWebImageGallery.scss").selected]=i,e[c("WAWebImageGallery.scss").imageGalleryItem]=!0,e));e=l.jsx("div",{className:c("WAWebImageGallery.scss").imageGalleryItemOverlay});return l.jsxs("div",{ref:B.getRefSetter(""+b),className:i,tabIndex:-1,children:[e,l.jsx(c("WAWebUnstyledButton.react"),{onClick:C,children:l.jsx("img",{alt:h._("__JHASH__A6A8fFeKsoD__JHASH__",[h._param("name",g)]),className:c("WAWebImageGallery.scss").imageGalleryItemImage,src:a})})]},f)});D=a.isLoadingMore?l.jsx("div",{tabIndex:-1,className:c("WAWebImageGallery.scss").imageGalleryFooter,children:l.jsx(d("WAWebSpinner.react").Spinner,{stroke:6,size:24})}):null;return l.jsx(d("WAWebKeyboardHotKeys.react").HotKeys,{className:c("WAWebImageGallery.scss").imageGallery,"data-tab":d("WAWebTabOrder").TAB_ORDER.CHAT_IMAGE_GALLERY,handlers:b,onFocus:K,onMouseDown:x,ref:v,children:l.jsxs("div",{ref:t,className:c("WAWebImageGallery.scss").imageGalleryList,onScroll:F,children:[J,l.jsx("div",{tabIndex:-1,className:c("WAWebImageGallery.scss").imageGalleryItemSpacer}),l.jsx("div",{tabIndex:-1,className:c("WAWebImageGallery.scss").imageGalleryItemSpacer}),l.jsx("div",{tabIndex:-1,className:c("WAWebImageGallery.scss").imageGalleryItemSpacer}),D]})})}a.displayName=a.name+" [from "+f.id+"]";b=e(a);g["default"]=b}),98);
__d("WAWebUtilsGetColor",["WANullthrows","err"],(function(a,b,c,d,e,f,g){var h=new Map([["sand-200","rgb(234, 224, 214)"],["sand-300","rgb(170, 148, 125)"],["sand-600","rgb(94, 83, 72)"]]),i=function(a){return getComputedStyle(c("WANullthrows")(document.body)).getPropertyValue(a)};function a(a,b){var d=a==="sand"?c("WANullthrows")(h.get(a+"-"+b)):i("--wds-"+a+"-"+b);if(d==="")throw c("err")("Get color failed (color="+a+" depth="+b+"). Please check whether wds color changed or there is a typo in color name.");return d}g["default"]=a}),98);
__d("WAWebEditGroupProfileDrawerColorPanel.react",["WAWebClassnames","WAWebFlex.react","WAWebKeyboardHotKeys.react","WAWebThemeContext","WAWebUtilsGetColor","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j;b=j||d("react");var k=h||(h=c("react")),l=b.useContext,m=b.useRef,n={row:{marginTop:"xzbgwbi",$$css:!0},btnOutline:{boxSizing:"x9f619",width:"x1n7h9c3",height:"x1s1d1n7",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",marginStart:"x1hiyaco",marginLeft:null,marginRight:null,marginEnd:"x1cd8eua",$$css:!0},btn:{width:"x1td3qas",height:"x10w6t97",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",":focus_borderTopStartRadius":"x80oadr",":focus_borderTopEndRadius":"xwq6b5d",":focus_borderBottomEndRadius":"xtm992s",":focus_borderBottomStartRadius":"xc4qb57",$$css:!0},btnSelected:{width:"x1ksvffz",height:"xqaafxp",$$css:!0}};function a(a){var b=a.className,e=a.colors,f=a.onSelect,g=a.selectedIndex;a=l(d("WAWebThemeContext").ThemeContext);var h=a.theme,j=m(g),o=m([]),p={rows:e,getNum:function(){return p.rows.reduce(function(a,b){return a+b.length},0)}};a={right:function(){var a=j.current===p.getNum()-1?0:j.current+1;(a=o.current[a])==null?void 0:a.focus()},left:function(){var a=j.current===0?p.getNum()-1:j.current-1;(a=o.current[a])==null?void 0:a.focus()}};var q=0;return k.jsx(d("WAWebKeyboardHotKeys.react").HotKeys,{role:"tablist",handlers:a,className:d("WAWebClassnames").classnamesConvertMeToStylexPlease(b),children:p.rows.map(function(a,b){return k.jsx(d("WAWebFlex.react").FlexRow,{className:"xzbgwbi",justify:"center",children:a.map(function(a){var b=q++,e=g===b;return k.jsx(d("WAWebFlex.react").FlexRow,{justify:"center",align:"center",children:k.jsx(d("WAWebFlex.react").FlexRow,{justify:"center",align:"center",className:"x9f619 x1n7h9c3 x1s1d1n7 x14yjl9h xudhj91 x18nykt9 xww2gxu x1hiyaco x1cd8eua",style:{border:e?"1.5px solid "+c("WAWebUtilsGetColor")(a,h==="light"?600:300):""},children:k.jsx("button",{role:"tab",ref:function(a){return o.current[b]=a},tabIndex:e?0:-1,"aria-selected":e,className:(i||(i=c("stylex")))(n.btn,e&&n.btnSelected),style:{backgroundColor:c("WAWebUtilsGetColor")(a,200)},onClick:function(){return f(b)},onFocus:function(){return j.current=b}})})},b)})},b)})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebMediaEditorUtilsCreateCanvasAndImage",["Promise","WAWebCopyImageToClipboard","WAWebEmoji","WAWebFeatureDetectionDetectWebpSupport","WAWebFileUtils","WAWebInMemoryLottieStickerCache","WAWebMediaInMemoryBlobCache","WAWebWebpToAnimationFrames","asyncToGeneratorRuntime","err"],(function(a,b,c,d,e,f,g){var h;function i(a){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.rgbaBuffer;if(!b){var e=d("WAWebMediaInMemoryBlobCache").InMemoryMediaBlobCache.get(a.filehash);if(!e)throw c("err")("Failed to get media blob");e=(yield d("WAWebFileUtils").blobToArrayBuffer(e));e=(yield c("WAWebWebpToAnimationFrames")(e)).frames[0];if(!e)throw c("err")("Failed to get sticker first frame.");b=e.rgbaBuffer}e=a.fullWidth;a=a.fullHeight;var f=document.createElement("canvas");f.width=e;f.height=a;var g=f.getContext("2d");e=g.createImageData(e,a);e.data.set(new Uint8Array(b));g.putImageData(e,0,0);return f});return j.apply(this,arguments)}function k(a){return new(h||(h=b("Promise")))(function(b,c){var d=new Image();d.crossOrigin="anonymous";d.onload=function(){b(d)};d.onerror=c;d.src=a})}function a(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=d("WAWebEmoji").EmojiUtil.getGlyphPath(a,160);if(a==null)return;a=(yield k(a));return a});return l.apply(this,arguments)}function e(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){if(a.mediaData.isLottie===!0){var b=d("WAWebInMemoryLottieStickerCache").InMemoryLottieStickerCache.get(a.filehash);b=(yield d("WAWebCopyImageToClipboard").createCanvasFromLottieSticker(b))}else if(yield d("WAWebFeatureDetectionDetectWebpSupport").detectWebpSupport()){var c=a.mediaData.filehash;c=d("WAWebMediaInMemoryBlobCache").InMemoryMediaBlobCache.getOrCreateURL(c);b=(yield k(c))}else b=(yield i(a.mediaData));return b});return m.apply(this,arguments)}g.createCanvasFromSticker=i;g.createImageFromEmoji=a;g.createImageFromSticker=e}),98);
__d("WAWebProfileCropConstants",[],(function(a,b,c,d,e,f){a=192;b=640;c=96;f.PROF_PIC_MIN_SIDE=a;f.PROF_PIC_MAX_SIDE=b;f.PROF_PIC_THUMB_SIDE=c}),66);
__d("WAWebUtilsSharpenFilter",[],(function(a,b,c,d,e,f){function a(a){var b=[0,-1,0,-1,5,-1,0,-1,0],c=Math.round(Math.sqrt(b.length)),d=c*.5|0,e=a.data,f=a.width;a=a.height;var g=new Uint8ClampedArray(e);for(var h=0;h<a;h++)for(var i=0;i<f;i++){var j=i,k=h,l=(h*f+i)*4,m=[0,0,0];for(var n=0;n<c;n++)for(var o=0;o<c;o++){var p=k+n-d,q=j+o-d;if(p>=0&&p<a&&q>=0&&q<f){p=(p*f+q)*4;q=b[n*c+o];m[0]+=g[p]*q;m[1]+=g[p+1]*q;m[2]+=g[p+2]*q}}e[l]=m[0];e[l+1]=m[1];e[l+2]=m[2]}}f["default"]=a}),66);
__d("WAWebEditGroupProfileDrawer.react",["fbt","$InternalEnum","WANullthrows","WAWebCheckmarkLargeIcon","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerHeader.react","WAWebEditGroupProfileDrawerColorPanel.react","WAWebEditGroupProfileDrawerEmojiStickerPanelPopup.react","WAWebFlex.react","WAWebFlexItem.react","WAWebIconTabs.react","WAWebMediaEditorEmojiIcon","WAWebMediaEditorStickerIcon","WAWebMediaEditorUtilsCreateCanvasAndImage","WAWebMediaEditorUtilsReactKonvaCore","WAWebProfileCropConstants","WAWebRound.react","WAWebToast.react","WAWebToastManager","WAWebUtilsGetColor","WAWebUtilsSharpenFilter","asyncToGeneratorRuntime","err","react"],(function(a,b,c,d,e,f,g,h){var i,j;e=j||d("react");var k=i||(i=c("react")),l=e.useEffect,m=e.useRef,n=e.useState,o=64,p=b("$InternalEnum").Mirrored(["EMOJI","STICKER"]),q={container:{backgroundColor:"xa03szm",position:"x1n2onr6",width:"xh8yej3",height:"x5yr21d",$$css:!0},body:{flexGrow:"x1iyjqo2",$$css:!0},footer:{display:"x78zum5",position:"x1n2onr6",width:"xh8yej3",height:"xwvwv9b",zIndex:"xhtitgo",alignItems:"x7a106z",justifyContent:"xl56j7k",backgroundColor:"x1sapvj0",$$css:!0},btn:{transform:"x1cb1t30",$$css:!0},photoContainer:{marginTop:"xqui205",marginEnd:"xqmxbcd",marginBottom:"x1hq5gj4",marginStart:"xmupa6y",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",overflowX:"x6ikm8r",overflowY:"x10wlt62",isolation:"xc8icb0",$$css:!0},colorPanel:{marginTop:"x1yl842u",$$css:!0}},r={emojiIcon:{width:"x17z2i9w",height:"x17rw0jw",$$css:!0},stickerIcon:{width:"x1ig0tib",height:"x1pwvq5b",$$css:!0}},s=[["purple","sky-blue","green","yellow","orange","pink"],["cool-gray","cobalt","teal","red","sand"]],t=(e=[]).concat.apply(e,s),u=160,v=104,w={width:90,height:48};function x(a){var b=[];a=a.split(" ");for(var c=0;c<a.length;c++)a[c].length>0&&b.push(a[c]);return b}function y(a,b){var c="";for(var d=0;d<b.length;d++)c+=(d===0?"":" ")+b[d].text;d=x(c);if(a.length!==d.length)return!0;for(b=0;b<a.length;b++)if(a[b]!==d[b])return!0;return!1}function a(a){var e=a.onCancel,f=a.onFinished,g=a.sendEmojiStickerPanelOpenLoggingEvent;a=a.title;var i=n(null),j=i[0],z=i[1];i=n(null);var A=i[0],B=i[1];i=n(null);var C=i[0],D=i[1];i=n(0);var E=i[0],F=i[1],G=m(null),H=m(null),I=m(!1),J={EMOJI:0,STICKER:1},K=m((i={},i[J.EMOJI]=function(){},i[J.STICKER]=function(){},i));i=m([]);var L=m(null),M=h._("__JHASH__2a9wRVNB9nb__JHASH__").toString();l(function(){var a;(a=H.current)==null?void 0:a.cache()},[j]);l(function(){var a=L.current;if(a==null)return;var b=x(M),c=y(b,a.textArr);while(a.getHeight()>w.height||c)a.fontSize(a.fontSize()-1),c=y(b,a.textArr)},[M]);var N=k.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Stage,{width:u,height:u,className:"xqui205 xqmxbcd x1hq5gj4 xmupa6y x14yjl9h xudhj91 x18nykt9 xww2gxu x6ikm8r x10wlt62 xc8icb0",ref:G,onClick:function(){j==null&&C==null&&D(0)},children:k.jsxs(d("WAWebMediaEditorUtilsReactKonvaCore").Layer,{children:[k.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Rect,{width:u,height:u,fill:c("WAWebUtilsGetColor")(t[E],200)}),j==null?k.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Text,{ref:L,x:u/2,y:u/2,width:w.width,height:w.height,offset:{x:w.width/2,y:w.height/2},lineHeight:1.14,align:"center",verticalAlign:"middle",text:M,fontSize:14,fontFamily:'"SF Pro Text", "SF Pro Icons", system, -apple-system, system-ui, "system-ui", "Helvetica Neue", Helvetica, Arial, "Lucida Grande", "Kohinoor Devanagari", sans-serif',fill:c("WAWebUtilsGetColor")("cool-gray-alpha",50)}):k.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Image,{ref:H,width:v,height:v,offset:{x:v/2,y:v/2},x:u/2,y:u/2,image:j,filters:A===p.EMOJI&&I.current?[c("WAWebUtilsSharpenFilter")]:[]})]})});Object.values(J).forEach(function(a){typeof a==="number"&&(K.current[a]=function(){C===a&&D(null)})});var O=function(a){g!=null&&g(a)},P=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){try{if(a!=null){a=(yield d("WAWebMediaEditorUtilsCreateCanvasAndImage").createImageFromEmoji(a));a&&(z(a),I.current=a.naturalWidth<=o&&a.naturalHeight<=o,B(p.EMOJI))}else if(b!=null){a=(yield d("WAWebMediaEditorUtilsCreateCanvasAndImage").createImageFromSticker(b));z(a);B(p.STICKER)}else throw c("err")("Neither emoji nor sticker is provided in handleEmojiStickerSelect()")}catch(a){d("WAWebToastManager").ToastManager.open(k.jsx(d("WAWebToast.react").Toast,{msg:h._("__JHASH__C9w8O5X_0tX__JHASH__")}))}});return function(b,c){return a.apply(this,arguments)}}(),Q=function(){if(j==null)d("WAWebToastManager").ToastManager.open(k.jsx(d("WAWebToast.react").Toast,{msg:h._("__JHASH__hMxSdmwM_-a__JHASH__"),id:"ChooseAnEmojiOrStickerToContinueToast"}),d("WAWebToastManager").ToastPosition.CENTER);else{var a,b;a=(a=(a=G.current)==null?void 0:a.toDataURL({mimeType:"image/jpeg",pixelRatio:d("WAWebProfileCropConstants").PROF_PIC_THUMB_SIDE/u,quality:0,width:u,height:u}))!=null?a:"";b=(b=(b=G.current)==null?void 0:b.toDataURL({mimeType:"image/jpeg",pixelRatio:d("WAWebProfileCropConstants").PROF_PIC_MIN_SIDE*2/u,quality:1,width:u,height:u}))!=null?b:"";f(a,b,c("WANullthrows")(A))}};Q=k.jsx("div",{className:"x1cb1t30",children:k.jsx(d("WAWebRound.react").Round,{large:!0,onClick:Q,theme:j==null?d("WAWebRound.react").RoundTheme.Disabled:void 0,label:h._("__JHASH__gW0TpUvEri4__JHASH__"),children:k.jsx(d("WAWebCheckmarkLargeIcon").CheckmarkLargeIcon,{})})},"btn-submit");return k.jsxs(c("WAWebDrawer.react"),{theme:"products",children:[k.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:a,type:"multiMediaGallery",onCancel:e}),k.jsxs(c("WAWebDrawerBody.react"),{overflow:"hidden",children:[k.jsxs(d("WAWebFlex.react").FlexColumn,{className:"xa03szm x1n2onr6 xh8yej3 x5yr21d",align:"center",justify:"center",children:[k.jsx(c("WAWebFlexItem.react"),{grow:1,xstyle:q.body,children:k.jsxs(d("WAWebFlex.react").FlexColumn,{align:"center",children:[k.jsx(c("WAWebFlexItem.react"),{children:N}),k.jsx(c("WAWebFlexItem.react"),{children:k.jsx(d("WAWebIconTabs.react").IconTabs,{refs:i.current,selectedIndex:C,onSelect:function(a){a!==C&&(D(a),O(a===J.EMOJI?p.EMOJI:p.STICKER))},tabConfigs:[{Icon:d("WAWebMediaEditorEmojiIcon").MediaEditorEmojiIcon,iconStyle:r.emojiIcon,ariaLabel:h._("__JHASH__tJd2_iASRmu__JHASH__")},{Icon:d("WAWebMediaEditorStickerIcon").MediaEditorStickerIcon,iconStyle:r.stickerIcon,ariaLabel:h._("__JHASH__Lgi_15kaHGu__JHASH__")}],popupAtLaunch:!0})}),k.jsx(c("WAWebFlexItem.react"),{children:k.jsx(c("WAWebEditGroupProfileDrawerColorPanel.react"),{className:"x1yl842u",colors:s,selectedIndex:E,onSelect:function(a){F(a)}})})]})}),k.jsx(c("WAWebFlexItem.react"),{grow:0,xstyle:q.footer,children:Q})]}),C===J.EMOJI&&k.jsx(d("WAWebEditGroupProfileDrawerEmojiStickerPanelPopup.react").EmojiPanelPopup,{anchor:c("WANullthrows")((a=i.current[J.EMOJI])==null?void 0:a.current),onSelect:P,onClose:function(){return K.current[J.EMOJI]()}}),C===J.STICKER&&k.jsx(d("WAWebEditGroupProfileDrawerEmojiStickerPanelPopup.react").StickerPanelPopup,{anchor:c("WANullthrows")((e=i.current[J.STICKER])==null?void 0:e.current),onSelect:function(a){return P(null,a)},onClose:function(){return K.current[J.STICKER]()}})]})]},"attach-edit-group-profile-modal")}a.displayName=a.name+" [from "+f.id+"]";g.EMOJI_IMAGE_SHARPEN_SIZE_THRESHOLD=o;g.ImageType=p;g.COLOR_OPTIONS=t;g.PHOTO_SIZE=u;g.IMAGE_SIZE=v;g.EditGroupProfileDrawer=a}),98);
__d("WAWebEditImageDrawer.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={btnSend:"_alhy",attributionLink:"_ali1",mediaBody:"_ali4",attribution:"_ali0",footer:"_ali3",containerBackground:"_ali5",retake:"_alh-",retakeIcon:"_alh_",mediaElementBase:"_alis",mediaElement:"_alhz",hintText:"_ali2"};b=a;g["default"]=b}),98);
__d("WAWebEditedMedia",["WAWebFileUtils","WAWebURLUtils","lodash"],(function(a,b,c,d,e,f,g){a=function a(b,e,f,g){var h=this;this.updateEditData=function(a){h.saveEdits(),h.editData=c("lodash").merge({},h.editData,a)};this.updateEditItems=function(a,b){h.saveEdits();var c=[];h.editData.items&&h.editData.items.forEach(function(a){a!==b&&c.push(a)});c.push(a);h.editData.items=c};this.saveEdits=function(){var b=new a(h.media,h.originalImage,h.editData,h.previous);h.previous=b};this.revertEdit=function(){h.previous&&(h.editData=h.previous.editData,h.previous=h.previous.previous)};this.saveEditsFromCanvas=function(a){a=a.toDataURL();h.editedImage||(h.editedImage=new Image());h.editedImage.src=a};this.exportEditedMedia=function(){if(h.hasEdits()&&h.editedImage){var a=h.editedImage.src;return c("WAWebURLUtils").dataURLtoFile(a)}else if(h.media instanceof File)return h.media;return d("WAWebFileUtils").createFile([h.media],"",{type:h.media.type})};this.hasEdits=function(){return!!h.previous&&h.editedImage};this.cleanUp=function(){window.URL.revokeObjectURL(h.originalImage.src)};this.media=b;e?this.originalImage=e:(this.originalImage=new Image(),this.originalImage.src=window.URL.createObjectURL(b));this.previous=g;this.editData={height:0,width:0,offsetX:0,offsetY:0,rotation:0,scale:1,items:[],baseItem:null};c("lodash").merge(this.editData,f)};g["default"]=a}),98);
__d("WAWebStaticCanvas.react",["react"],(function(a,b,c,d,e,f,g){var h,i;e=i||d("react");var j=h||(h=c("react"));d=e.forwardRef;c=e.memo;function a(a,b){return j.jsx("canvas",{className:a.className,ref:b})}a.displayName=a.name+" [from "+f.id+"]";function b(a,b){return a.className===b.className}e=c(d(a),b);g["default"]=e}),98);
__d("WAWebMediaEditCanvas.react",["WAWeb-easeljs","WAWebObjectFit.react","WAWebStaticCanvas.react","isNonZeroNumber","react","useWAWebForceUpdate","useWAWebOnUnmount"],(function(a,b,c,d,e,f,g){var h,i;b=i||d("react");var j=h||(h=c("react"));e=b.forwardRef;var k=b.useEffect,l=b.useImperativeHandle,m=b.useRef,n=b.useState;function a(a,b){var e=a.mediaEditController,f=a.editedMedia,g=a.mediaPickerStatsLogger,h=a.activeMediaId,i=m(null),o=m(null),p=m(null),q=m(null),r=n({height:1,width:1}),s=r[0],t=r[1];r=n(null);var u=r[0],v=r[1],w=c("useWAWebForceUpdate")(),x=function(a){var b;u?b=u:(b=new(d("WAWeb-easeljs").Easel.Stage)(a),b.enableMouseOver());e.stage=b;return b},y=function(a,b){if(!i.current)return;var c=i.current;b&&g&&h!=null&&g.logChange(h,b);b=f.editData;var e=x(c);a&&(c.width=b.width,c.height=b.height);e.removeAllChildren();b.baseItem!=null&&e.addChild(b.baseItem);b.items&&e.addChild.apply(e,b.items);a=f.originalImage.naturalWidth;var j=f.originalImage.naturalHeight;e.regX=a/2;e.regY=j/2;e.rotation=b.rotation;d("isNonZeroNumber").isNonZeroNumber(b.width)&&d("isNonZeroNumber").isNonZeroNumber(b.height)&&(e.x=b.width/2+b.scale*b.offsetX,e.y=b.height/2+b.scale*b.offsetY);e.scaleX=b.scale;e.scaleY=b.scale;e.update();t({width:c.width,height:c.height});v(e)},z=function(){var a=f.editData;f.editedImage=null;var b=f.originalImage;!a.width&&!a.height&&(a.width=b.naturalWidth,a.height=b.naturalHeight);if(!a.baseItem){b=new(d("WAWeb-easeljs").Easel.Bitmap)(b);a.baseItem=b}y(!0)},A=function(){var a=f.originalImage;!a.complete?a.onload=z:z()},B=function(){y(!0);var a=i.current;a&&f.saveEditsFromCanvas(a)},C=function(a){if(!a)return;a.children.forEach(function(a){a.removeAllEventListeners()});a.removeAllEventListeners();a.removeAllChildren();a.enableMouseOver(0);a.clear()};k(function(){A(),w,q.current=new(d("WAWeb-easeljs").Easel.Stage)(p.current),q.current.autoClear=!1,q.current.enableMouseOver(),o.current&&(e.mediaContainer=o.current),e.cropOverlay=q.current},[]);c("useWAWebOnUnmount")(function(){var a=f.originalImage;a.complete||(a.onload=void 0);B();C(u);C(q.current)});var D=function(a,b){t({width:a,height:b})};l(b,function(){return{saveCanvas:B,drawCanvas:y,updateCanvasSize:D}});r=j.jsx("canvas",{ref:p,className:"x10l6tqk xzkaem6 x1s85apg x1qrby5j x3igimt"});b=j.jsx("div",{className:a.className,ref:o,children:j.jsxs(c("WAWebObjectFit.react"),{type:a.fitType||"scaleDown",size:s,children:[r,j.jsx(c("WAWebStaticCanvas.react"),{ref:i,className:"xhtitgo xh8yej3 x5yr21d"})]})});return b}f=e(a);g["default"]=f}),98);
__d("WAWebMediaEditControllerModel",["WAWebBaseModel"],(function(a,b,c,d,e,f,g){a=function(a){babelHelpers.inheritsLoose(b,a);function b(){var b,c;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(b=c=a.call.apply(a,[this].concat(f))||this,c.id=d("WAWebBaseModel").prop(),c.stage=d("WAWebBaseModel").prop(),c.cropOverlay=d("WAWebBaseModel").prop(),c.mediaContainer=d("WAWebBaseModel").prop(),b)||babelHelpers.assertThisInitialized(c)}var c=b.prototype;c.clearStage=function(a){if(!a)return;a.children.forEach(function(a){a.removeAllEventListeners()});a.removeAllEventListeners();a.removeAllChildren();a.clear()};return b}(d("WAWebBaseModel").BaseModel);b=d("WAWebBaseModel").defineModel(a);g["default"]=b}),98);
__d("WAWebProfileCropTool.react",["fbt","$InternalEnum","WAWeb-easeljs","WAWebImageUtils","WAWebKeyboardHotKeys.react","WAWebMinusIcon","WAWebPlusIcon","WAWebProfileCropConstants","WAWebUnstyledButton.react","asyncToGeneratorRuntime","err","react","useWAWebListener"],(function(a,b,c,d,e,f,g,h){var i,j;e=j||d("react");var k=i||(i=c("react")),l=e.forwardRef,m=e.useEffect,n=e.useImperativeHandle,o=e.useRef,p={scaler:{position:"x10l6tqk",end:"xeo10n6",left:null,right:null,zIndex:"xoegz02",width:"xgd8bvy",lineHeight:"x14ju556",backgroundColor:"x150wa6m",borderTopStartRadius:"x7s94mv",borderTopEndRadius:"xlqs5a9",borderBottomEndRadius:"x1v92rno",borderBottomStartRadius:"x1zj97q",boxShadow:"x1ctnl55",$$css:!0},scalerButton:{color:"xt16idv",cursor:"x1ypdohk",$$css:!0}},q="rgba(0, 0, 0, 0.5)",r=1.1,s=1.02,t=361,u=500,v=9/16,w=2+v,x="M90 0C0 0 0 0 0 90s0 90 90 90 90 0 90-90 0-90-90-90Z",y=b("$InternalEnum").Mirrored(["CIRCLE","RECT","SQUIRCLE"]);function a(a,e){var f=a.editedMedia,g=a.cropOverlay,i=a.drawCanvas,j=o(0),l=function(a,b){var c=f.editData,d=j.current*w,e=(a-c.width/2)*c.scale;a=(a+c.width/2)*c.scale;var g=(b+c.height/2)*c.scale;b=(b-c.height/2)*c.scale;var h=d/2;d=d/2*v;return{overlapLeft:Math.min(0,-h-e)/c.scale,overlapRight:Math.min(0,a-h)/c.scale,overlapTop:Math.min(0,-d-b)/c.scale,overlapBottom:Math.min(0,g-d)/c.scale,x:e<-h&&a>h,y:b<-d&&g>d}},z=function(a,b){var c=f.editData,d=j.current,e=(a-c.width/2)*c.scale;a=(a+c.width/2)*c.scale;var g=(b+c.height/2)*c.scale;b=(b-c.height/2)*c.scale;return{x:e<-d&&a>d,y:b<-d&&g>d}},A=function(b,c){var d=f.editData;b=d.offsetX+b/d.scale;c=d.offsetY+c/d.scale;var e=a.cropShape===y.RECT?l(b,c):z(b,c);e.x&&(d.offsetX=b);e.y&&(d.offsetY=c);i()},B=function(a,b){var c=a.stageX-b.x,d=a.stageY-b.y;A(c,d);b.x=a.stageX;b.y=a.stageY;return},C=function(a){var b=j.current,c=f.editData;b=b*w;b=Math.max(a,b/c.width);a=Math.max(a,b);c.scale=a;b=l(c.offsetX,c.offsetY);return{scale:c.scale,offsetX:c.offsetX+b.overlapLeft-b.overlapRight,offsetY:c.offsetY+b.overlapTop-b.overlapBottom}},D=function(a){var b=j.current,c=f.editData,d=Math.max(2*b/c.width,2*b/c.height);d=Math.max(a,d);if(c.width*a<b||c.height*a<b)return!1;a=-b/d+c.width/2;var e=b/d-c.width/2,g=-b/d+c.height/2;b=b/d-c.height/2;return{scale:d,offsetX:Math.min(Math.max(c.offsetX,e),a),offsetY:Math.min(Math.max(c.offsetY,b),g)}},E=function(b){return a.cropShape===y.RECT?C(b):D(b)},F=function(a){a===void 0&&(a=r);var b=f.editData;a=a!==0?a:r;a=E(b.scale*a);a&&(b.scale=a.scale,b.offsetX=a.offsetX,b.offsetY=a.offsetY,i())},G=function(a){a===void 0&&(a=r);var b=f.editData;a=a!==0?a:r;a=E(b.scale/a);a&&(b.scale=a.scale,b.offsetX=a.offsetX,b.offsetY=a.offsetY,i())};d("useWAWebListener").useListener(g.canvas,"mousewheel",function(a){a.deltaY>0?F(s):G(s)});m(function(){f.saveEdits();var b=f.editData,c=g.canvas;b.baseItem?b=b.baseItem.getBounds():b={width:0,height:0};c.style.display="block";c.width=b.width;c.height=b.height;var e=new(d("WAWeb-easeljs").Easel.Shape)();e.graphics.beginFill("rgba(0, 0, 0, 0.1)");e.graphics.drawRect(0,0,b.width,b.height);e.regX=b.width/2;e.regY=b.height/2;e.x=b.width/2;e.y=b.height/2;e.on("mousedown",function(a){a={x:a.stageX,y:a.stageY};var b=e.on("pressmove",B,null,!1,a);e.on("pressup",function(){e.off("pressmove",b)},null,!0)});e.cursor="move";b=c.getContext("2d");var h=c.width;c=c.height;var i=h/c>u/t?c/t:h/u;j.current=Math.min(t,u)/2*.9*i;var k=j.current,l;b.fillStyle=q;b.fillRect(0,0,h,c);b.globalCompositeOperation="destination-out";b.beginPath();if(a.cropShape===y.CIRCLE)b.arc(h/2,c/2,k,0,2*Math.PI,!0);else if(a.cropShape===y.RECT){var m=k*w,n=k*w*v;b.fillRect(h/2-m/2,c/2-n/2,m,n)}else if(a.cropShape===y.SQUIRCLE){l=new Path2D(x);b.translate(h/2-k,c/2-k);m=i*2*.9;b.scale(m,m)}b.fillStyle="#ffffff";l?b.fill(l):b.fill();g.addChild(e);g.update()},[]);var H=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a,b=f.editData;a=(a=f.editedImage)==null?void 0:a.src;var e=j.current;if(!a)throw c("err")("empty image");var g=e*2,h=g;g>d("WAWebProfileCropConstants").PROF_PIC_MAX_SIDE?h=d("WAWebProfileCropConstants").PROF_PIC_MAX_SIDE:g<d("WAWebProfileCropConstants").PROF_PIC_MIN_SIDE&&(h=d("WAWebProfileCropConstants").PROF_PIC_MIN_SIDE);g=e*w;e=e*w*v;a=(yield d("WAWebImageUtils").crop(a,b.width/2-g/2,b.height/2-e/2,g,e,h,h*v,d("WAWebImageUtils").DATA_URL|d("WAWebImageUtils").CANVAS));b=a;g=a.images.dataUrl;return{thumb:b.images.dataUrl,full:g}});return function(){return a.apply(this,arguments)}}(),I=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a,b=f.editData;a=(a=f.editedImage)==null?void 0:a.src;var e=j.current;if(!a)throw c("err")("empty image");e=e*2;var g=e;e>d("WAWebProfileCropConstants").PROF_PIC_MAX_SIDE?g=d("WAWebProfileCropConstants").PROF_PIC_MAX_SIDE:e<d("WAWebProfileCropConstants").PROF_PIC_MIN_SIDE&&(g=d("WAWebProfileCropConstants").PROF_PIC_MIN_SIDE);a=(yield d("WAWebImageUtils").crop(a,(b.width-e)/2,(b.height-e)/2,e,e,g,g,d("WAWebImageUtils").DATA_URL|d("WAWebImageUtils").CANVAS));b=(yield d("WAWebImageUtils").crop(a.images.canvas,0,0,d("WAWebProfileCropConstants").PROF_PIC_THUMB_SIDE,d("WAWebProfileCropConstants").PROF_PIC_THUMB_SIDE));e=a.images.dataUrl;return{thumb:b.images.dataUrl,full:e}});return function(){return a.apply(this,arguments)}}(),J=function(){return a.cropShape===y.RECT?H():I()};n(e,function(){return{crop:J}});var K=o(null);e=function(a){if(!K.current)return;a=a?a.target:document.activeElement;if(a!==K.current)return};var L={pageup:function(){return F()},pagedown:function(){return G()},down:function(){return A(0,-10)},up:function(){return A(0,10)},left:function(){return A(10,0)},right:function(){return A(-10,0)}};return k.jsxs("div",{className:"x10l6tqk xeo10n6 xoegz02 xgd8bvy x14ju556 x150wa6m x7s94mv xlqs5a9 x1v92rno x1zj97q x1ctnl55",children:[k.jsx(d("WAWebKeyboardHotKeys.react").HotKeys,{handlers:L,onFocus:e,ref:K,"aria-label":h._("__JHASH__Nbqos_9YjzD__JHASH__"),tabIndex:0}),k.jsx(c("WAWebUnstyledButton.react"),{xstyle:p.scalerButton,onClick:function(){return F()},"aria-label":h._("__JHASH__SQc8zEZS_oj__JHASH__"),testid:void 0,children:k.jsx(d("WAWebPlusIcon").PlusIcon,{})}),k.jsx(c("WAWebUnstyledButton.react"),{xstyle:p.scalerButton,onClick:function(){return G()},"aria-label":h._("__JHASH__LrMHYfVC0Hm__JHASH__"),testid:void 0,children:k.jsx(d("WAWebMinusIcon").MinusIcon,{})})]})}a.displayName=a.name+" [from "+f.id+"]";e=l(a);g.CropShapeType=y;g.WrappedProfileCropTool=e}),98);
__d("useWAWebMediaEditControllerValues",["useWAWebCollectionValues"],(function(a,b,c,d,e,f,g){function a(a,b){return d("useWAWebCollectionValues").useModelGetterValues(a,b)}g.useMediaEditControllerValues=a}),98);
__d("WAWebEditImageDrawer.react",["fbt","WAHex","WAWebCheckmarkLargeIcon","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerHeader.react","WAWebEditImageDrawer.scss","WAWebEditedMedia","WAWebExternalLink.react","WAWebMediaEditCanvas.react","WAWebMediaEditControllerGetters","WAWebMediaEditControllerModel","WAWebObjectFit.react","WAWebProfileCropTool.react","WAWebReturnIcon","WAWebRound.react","WAWebTosUrl","WAWebURLUtils","WAWebVelocityTransitionGroup","react","useWAWebLazyRef","useWAWebMediaEditControllerValues"],(function(a,b,c,d,e,f,g,h){var i,j;a=j||d("react");var k=i||(i=c("react"));b=a.forwardRef;var l=a.useRef,m=a.useState,n=361,o=500,p={NONE:"none",RETAKE:"retake",RESTART:"restart"};e=b(function(a,b){var e=a.attributionUrl,f=a.onRetake,g=a.retryText,i=a.onFinished,j=a.cropShape,q=l(),r=l(null),s=c("useWAWebLazyRef")(function(){return new(c("WAWebMediaEditControllerModel"))({id:d("WAHex").randomHex(8)})}),t=d("useWAWebMediaEditControllerValues").useMediaEditControllerValues(s.current,[d("WAWebMediaEditControllerGetters").getIsInitialized]);t=t[0];var u=m(!1),v=u[0],w=u[1];u=m({width:o,height:n});var x=u[0],y=u[1];u=m(function(){return new(c("WAWebEditedMedia"))(a.img)});var z=u[0],A=function(){var a;(a=q.current)==null?void 0:a.saveCanvas()};u=function(){var a;A();(a=r.current)==null?void 0:a.crop().then(function(a){var b=a.thumb;a=a.full;i(b,a);z.cleanUp()})};var B=function(a){if(a==null||!(a instanceof HTMLElement))return;x&&(x.width!==a.clientWidth||x.height!==a.clientHeight)&&y({width:a.clientWidth,height:a.clientHeight});v||w(!0)},C=function(a,b){var c;(c=q.current)==null?void 0:c.drawCanvas(a,b)};u=v?k.jsx("div",{className:c("WAWebEditImageDrawer.scss").btnSend,children:k.jsx(d("WAWebRound.react").Round,{large:!0,onClick:u,label:h._("__JHASH__dLplmpLrlRz__JHASH__"),children:k.jsx(d("WAWebCheckmarkLargeIcon").CheckmarkLargeIcon,{})})},"btn-send"):null;var D;t&&(D=k.jsx(d("WAWebProfileCropTool.react").WrappedProfileCropTool,{editedMedia:z,stage:s.current.stage,cropOverlay:s.current.cropOverlay,mediaContainer:s.current.mediaContainer,drawCanvas:C,ref:r,cropShape:j||d("WAWebProfileCropTool.react").CropShapeType.CIRCLE}));t=k.jsx(c("WAWebMediaEditCanvas.react"),{className:c("WAWebEditImageDrawer.scss").mediaElement,editedMedia:z,mediaEditController:s.current,fitType:"cover",ref:q});var E;if(f){var F;switch(g){case p.NONE:F=null;break;case p.RETAKE:F=h._("__JHASH__gzo29kra-Qa__JHASH__");break;case p.RESTART:default:F=h._("__JHASH__eHzEa7bXd6B__JHASH__")}E=k.jsxs("button",{className:c("WAWebEditImageDrawer.scss").retake,onClick:f,children:[k.jsx("div",{className:c("WAWebEditImageDrawer.scss").retakeIcon,children:k.jsx(d("WAWebReturnIcon").ReturnIcon,{})}),F]})}C=e?k.jsxs("div",{className:c("WAWebEditImageDrawer.scss").attribution,children:[k.jsx(d("WAWebExternalLink.react").ExternalLink,{className:c("WAWebEditImageDrawer.scss").attributionLink,href:e,children:c("WAWebURLUtils").hostname(e)}),k.jsxs("span",{children:[h._("__JHASH__ovJpHh9wQJM__JHASH__"),k.jsx(d("WAWebExternalLink.react").ExternalLink,{href:d("WAWebTosUrl").getTosUrl(),children:h._("__JHASH__4s3CMFOZwtI__JHASH__")})]})]}):null;s=j===d("WAWebProfileCropTool.react").CropShapeType.RECT?k.jsx("div",{className:c("WAWebEditImageDrawer.scss").hintText,children:h._("__JHASH__tXW5QPfMfBd__JHASH__")}):void 0;g=k.jsxs("div",{className:c("WAWebEditImageDrawer.scss").footer,children:[k.jsx(c("WAWebVelocityTransitionGroup"),{transitionName:"btn",children:u}),C,s]});e=(f=a.imageSize)!=null?f:{width:o,height:n};return k.jsxs(c("WAWebDrawer.react"),{ref:b,theme:"edit",children:[k.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:h._("__JHASH__wQS216Fkk_h__JHASH__"),type:"offset",onCancel:a.onCancel,focusBackOrCancel:!0,children:E}),k.jsxs(c("WAWebDrawerBody.react"),{overflow:"hidden",children:[k.jsxs("div",{className:c("WAWebEditImageDrawer.scss").mediaBody,children:[D,k.jsx("div",{className:c("WAWebEditImageDrawer.scss").containerBackground,children:k.jsx(c("WAWebVelocityTransitionGroup"),{transitionName:"capture",children:k.jsx(c("WAWebObjectFit.react"),{type:"cover",size:e,onObjectLoad:B,children:t})})})]}),g]})]},"attach-edit-modal")});g.RETRY_OPTIONS=p;g.EditImageDrawer=e}),98);
__d("WAWebEditImageModal.react",["fbt","WAWebEditImageDrawer.react","WAWebModal.react","WAWebModalManager","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(a){var b=a.cropShape,c=a.img,e=a.onFinished,f=a.onRetake;a=a.theme;var g=function(){d("WAWebModalManager").ModalManager.close()},i=function(a,b){e(a,b),d("WAWebModalManager").ModalManager.close()};return j.jsx(d("WAWebModal.react").Modal,{type:a,ariaLabel:h._("__JHASH__wQS216Fkk_h__JHASH__"),testid:void 0,children:j.jsx(d("WAWebEditImageDrawer.react").EditImageDrawer,{onCancel:g,onFinished:i,onRetake:f,retryText:d("WAWebEditImageDrawer.react").RETRY_OPTIONS.RESTART,img:c,cropShape:b||void 0})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebImageSearchDrawerBingImageSearch",["WAWebL10N","WAWebMiscErrors","WAWebURLUtils","WAWebXHR","asyncToGeneratorRuntime"],(function(a,b,c,d,e,f,g){var h="https://www.bingapis.com/api/v6/images/search",i="D41D8CD98F00B204E9800998ECF8427E4F4A7492",j={SQUARE:"Square",WIDE:"Wide",TALL:"Tall",ALL:"All"},k={SMALL:"Small",MEDIUM:"Medium",LARGE:"Large",WALLPAPER:"Wallpaper",ALL:"All"},l={ar:"ar-SA",da:"da-DK",de:"de-DE",en:"en-US",es:"es-US",fi:"fi-FI",fr:"fr-FR",it:"it-IT",ko:"ko-KR",nl:"nl-NL",pl:"pl-PL","pt-BR":"pt-BR",ru:"ru-RU",sv:"sv-SE",tr:"tr-TR","zh-CN":"zh-CN","zh-TW":"zh-TW","zh-HK":"zh-HK"},m=30;function a(a,b,c){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){e===void 0&&(e=m);e={q:a,SafeSearch:"Strict",appid:i,mkt:l[c("WAWebL10N").getNormalizedLocale()]||l.en,size:k.MEDIUM,aspect:j.SQUARE,count:e,offset:b};b=c("WAWebURLUtils").build(h,e);e=(yield c("WAWebXHR").get(b,c("WAWebXHR").RESP_TYPE.JSON));if(!Object.prototype.hasOwnProperty.call(e.response,"_type"))throw new(d("WAWebMiscErrors").InvalidServerResponseError)(b,e.status.toString(),"Not a valid Bing response: "+JSON.stringify(e.response));if(e.response._type==="ErrorResponse"){var f=e.response;throw new(d("WAWebMiscErrors").BingServerError)(a,e.status,f)}if(e.response._type!=="Images")throw new(d("WAWebMiscErrors").InvalidServerResponseError)(b,e.status.toString(),"Did not receive an image search response, potentially malformed query "+JSON.stringify(e.response));return e.response});return n.apply(this,arguments)}g.search=a}),98);
__d("WAWebImageSearchDrawerSearchImageRetry",["Promise","WABackoffUtils","WAPromiseDelays","WAPromiseLoop","WAWebEventsWaitForBbEvent","WAWebSocketConstants","WAWebSocketModel","asyncToGeneratorRuntime","lodash"],(function(a,b,c,d,e,f,g){var h;function a(a){return d("WAPromiseLoop").promiseLoop(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,c,e){c=d("WAPromiseDelays").delayMs(d("WABackoffUtils").expBackoff(e,6e4,void 0,.1));try{yield i();e=(yield a());if(e.status>=500&&e.status<600)return c;b(e)}catch(a){return c}});return function(a,b,d){return c.apply(this,arguments)}}())}function i(){return d("WAWebSocketModel").Socket.state===d("WAWebSocketConstants").SOCKET_STATE.CONNECTED?(h||(h=b("Promise"))).resolve():c("WAWebEventsWaitForBbEvent")(d("WAWebSocketModel").Socket,"change:state",c("lodash").matches({state:d("WAWebSocketConstants").SOCKET_STATE.CONNECTED}))}g["default"]=a}),98);
__d("WAWebImageSearchDrawer.react",["fbt","WAAbortError","WALogger","WAUnicodeUtils","WAWebChatListSearch.react","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerHeader.react","WAWebEmptyState.react","WAWebFocusIndicator","WAWebFocusTracer","WAWebImageGallery.react","WAWebImageSearchDrawerBingImageSearch","WAWebImageSearchDrawerSearchImageRetry","WAWebKeyboardHotKeys.react","WAWebMiscErrors","WAWebPonyfillsFetch","WAWebToast.react","WAWebToastManager","WAWebUA","err","lodash","react","useWAWebDebouncedCallback","useWAWebUnmountSignal"],(function(a,b,c,d,e,f,g,h){var i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Image search failed"]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["Image search failed"]);l=function(){return a};return a}b=j||d("react");var m=i||(i=c("react"));e=b.forwardRef;var n=b.useRef,o=b.useState;function a(a,b){var e=a.onImageSelected,f=c("useWAWebUnmountSignal")(),g=n(null),i=n(null),j=n(null),p=n(!1),q=n(null),r=o({}),s=r[0],t=r[1];r=o(!1);var u=r[0],v=r[1];r=o(0);var w=r[0],x=r[1];r=o("");var y=r[0],z=r[1];r=o([]);var A=r[0],B=r[1];r=o(0);var C=r[0],D=r[1],E=function(a,b){var d=c("lodash").keyBy(b.value,function(a){return a.thumbnailUrl}),e=c("lodash").map(b.value,function(a){return{id:a.imageId,name:a.name,thumbUrl:a.thumbnailUrl}}),f=b.value.length;if(y===a){x(b.nextOffset?b.nextOffset:w+f);B(A.concat(e));D((a=b.totalEstimatedMatches)!=null?a:0);t(Object.assign(d,s))}else{t(d);x(b.nextOffset?b.nextOffset:w+f);z(y);B(e);D((a=b.totalEstimatedMatches)!=null?a:0)}},F=c("useWAWebDebouncedCallback")(function(a,b){p.current=!1;var c=new AbortController(),e=d("WAWebImageSearchDrawerBingImageSearch").search(a,b).then(function(b){var f;if(c.signal.aborted)throw new(d("WAAbortError").AbortError)();e===((f=q.current)==null?void 0:f.promise)&&(E(a,b),v(!1))})["catch"](d("WAAbortError").catchAbort(function(){}))["catch"](function(a){d("WALogger").WARN(l()).verbose().devConsole(a);d("WAWebToastManager").ToastManager.open(m.jsx(d("WAWebToast.react").Toast,{msg:h._("__JHASH__aa1jmTtqFTn__JHASH__")}));e===((a=q.current)==null?void 0:a.promise)&&v(!1)})["finally"](function(){var a;e===((a=q.current)==null?void 0:a.promise)&&(q.current=null)});q.current={promise:e,controller:c};v(!0)},750),G=function(){F.cancel(),p.current&&(p.current=!1),q.current&&q.current.controller.abort()},H=function(){t({}),v(!1),x(0),z(""),B([]),D(0)},I=function(a,b){b===void 0&&(b=0),p.current=!0,F(a,b)};r=function(a){a=(a||"").trim();if(!a){G();H();return}if(d("WAUnicodeUtils").numCodepoints(a)<2)return;if(a===y)return;G();H();I(a)};var J=function(){if(p.current||q.current)return;if(!C||w>=C)return;I(y,w)},K=function(a){var b=s[a];if(!b)return;var g=b.contentUrl;if(d("WAWebUA").UA.isElectron)a=c("WAWebImageSearchDrawerSearchImageRetry")(function(){return c("WAWebPonyfillsFetch")(g)}).then(function(a){if(a.status!==200)throw new(d("WAWebMiscErrors").ServerStatusError)(null,g,a.status);return a.blob()});else throw c("err")("This call is only supported in non-MD mode");a.then(function(a){if(f.aborted)return;if(a instanceof Blob)e(a,b.hostPageUrl);else throw new(d("WAWebMiscErrors").ImageError)("Server did not respond with image bytes",g)})["catch"](function(a){d("WALogger").WARN(k()).verbose().devConsole(a),d("WAWebToastManager").ToastManager.open(m.jsx(d("WAWebToast.react").Toast,{msg:h._("__JHASH__cOGcTSVhDKu__JHASH__")}))})},L=function(){c("WAWebFocusIndicator").shouldIndicateFocus(),c("WAWebFocusTracer").focus(g.current)},M=function(a){if(a.repeat)return;if(!j.current)return;if(!g.current||!g.current.cursorIsAtEnd())return;a.preventDefault();a.stopPropagation();c("WAWebFocusIndicator").shouldIndicateFocus();j.current!=null&&c("WAWebFocusTracer").focus(j.current)},N=function(a){c("WAWebFocusIndicator").maybeIndicateFocus(i.current)},O=d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.POPUP;M={down:M};var P;A.length===0?u?P=m.jsx(d("WAWebEmptyState.react").SearchingImages,{}):!y?P=m.jsx(d("WAWebEmptyState.react").BeforeImageSearch,{}):P=m.jsx(d("WAWebEmptyState.react").ImageSearchEmpty,{}):P=m.jsx(c("WAWebImageGallery.react"),{ref:j,canLoadMore:w<C,isLoadingMore:u,thumbnails:A,onFocusPrev:L,onImageClick:K,onRequestMoreImages:J});return m.jsxs(c("WAWebDrawer.react"),{ref:b,children:[m.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:h._("__JHASH__WvFV8OztZTQ__JHASH__"),type:O,onBack:a.onBack,onCancel:a.onCancel}),m.jsxs(c("WAWebDrawerBody.react"),{children:[m.jsx(d("WAWebKeyboardHotKeys.react").HotKeys,{ref:i,handlers:M,onFocus:N,children:m.jsx(d("WAWebChatListSearch.react").ListSearch,{ref:g,placeholder:h._("__JHASH__9vyekyPc4Yb__JHASH__"),onSearch:r,loading:u})}),P]})]})}a.displayName=a.name+" [from "+f.id+"]";b=e(a);g["default"]=b}),98);
__d("WAWebImageSearchFlow.react",["$InternalEnum","WAWebEditImageDrawer.react","WAWebImageSearchDrawer.react","react","useWAWebFlow"],(function(a,b,c,d,e,f,g){var h,i,j=i||c("react"),k=(h||(h=d("react"))).useState,l=b("$InternalEnum").Mirrored(["ImageSearch","ImageEdit"]);function a(a){var b=a.onFinished;a=d("useWAWebFlow").useFlow(l.ImageSearch);var e=a[0],f=a[1];a=k();var g=a[0],h=a[1];a=k();var i=a[0],m=a[1];if(f.step==null)return null;var n;switch(f.step){case l.ImageSearch:a=function(a,b){h(a),m(b),f.push(l.ImageEdit)};n=j.jsx(c("WAWebImageSearchDrawer.react"),{onCancel:function(){return f.pop()},onImageSelected:a});break;case l.ImageEdit:if(g&&i!=null){a=function(a,c){b(a,c),f.end()};n=j.jsx(d("WAWebEditImageDrawer.react").EditImageDrawer,{onCancel:function(){return f.end()},attributionUrl:i,onFinished:a,onRetake:function(){return f.pop()},retryText:d("WAWebEditImageDrawer.react").RETRY_OPTIONS.NONE,img:g})}break}return j.jsx(e,{flow:f,children:n})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebTakePhotoMenuItem.react",["fbt","WAWebDropdownItem.react","WAWebEditCaptureFlowLoadable","WAWebModal.react","WAWebModalManager","WAWebProfileCropTool.react","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(a){var b=a.onImageTake,c=a.editCropShape,e=a.modalTheme,f=function(f){a.action!=null&&a.action(f),d("WAWebModalManager").ModalManager.open(j.jsx(d("WAWebEditCaptureFlowLoadable").EditCaptureFlowLoadable,{onFinished:b,editCropShape:c||d("WAWebProfileCropTool.react").CropShapeType.CIRCLE,modalTheme:e||d("WAWebModal.react").ModalTheme.Box}))};return j.jsx(d("WAWebDropdownItem.react").DropdownItem,{action:f,testid:void 0,disabled:a.disabled,children:h._("__JHASH__oIv2srgU-uj__JHASH__")})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebPhotoPicker.react",["fbt","WALogger","WAWebAnnouncementSpeakerIcon","WAWebAvatarOverlay.react","WAWebAvatarSpinner.react","WAWebCameraIcon","WAWebClassnames","WAWebCommunityGeneralChatImage.react","WAWebCommunitySquircleIcon","WAWebConfirmPopup.react","WAWebContactCollection","WAWebDataTransfer","WAWebDefaultGroupIcon","WAWebDefaultNewsletterIcon","WAWebDefaultUserIcon","WAWebDropdownItem.react","WAWebEditGroupProfileDrawer.react","WAWebEditImageModal.react","WAWebFileUtils","WAWebFocusTracer","WAWebImageSearchFlow.react","WAWebImg.react","WAWebKeyboardHotKeys.react","WAWebMediaEditorUtilsCreateCanvasAndImage","WAWebMediaEditorUtilsReactKonvaCore","WAWebMediaLoad","WAWebMiscGatingUtils","WAWebModal.react","WAWebModalManager","WAWebNonEmptyString","WAWebObjectFit.react","WAWebPhotoPickType","WAWebPhotoPicker.scss","WAWebPhotoPickerConstants","WAWebPhotoViewerModal.react","WAWebPonyfillsGetUserMedia","WAWebProfileCropConstants","WAWebProfileCropTool.react","WAWebRefreshIcon","WAWebRoundShape.react","WAWebSpinner.react","WAWebTakePhotoMenuItem.react","WAWebUA","WAWebUimUie.react","WAWebUimUieMenu.react","WAWebUnstyledButton.react","WAWebUseIsKeyboardUser","WAWebUtilsGetColor","WAWebUtilsSharpenFilter","WAWebVelocityTransitionGroup","WAWebWamEnumGroupProfileActionType","WAWebWamEnumProfilePictureType","asyncToGeneratorRuntime","lodash","react","stylex","useWAWebUIM"],(function(a,b,c,d,e,f,g,h){var i,j,k;function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["PhotoPicker:onImageReceived failed to load image: ",""]);l=function(){return a};return a}e=k||d("react");var m=i||(i=c("react")),aa=e.useEffect,n=e.useRef,o=e.useState,p={cornerSpinner:{position:"x10l6tqk",start:"x16q8cke",left:null,right:null,top:"xomnu4r",zIndex:"x1355qak",pointerEvents:"x47corl",$$css:!0},loadingBg:{position:"x10l6tqk",top:"x13vifvy",start:"x17qophe",left:null,right:null,end:"xds687c",bottom:"x1ey2m1c",backgroundColor:"xj4c5ne",zIndex:"x1vjfegm",$$css:!0},communitySquircle:{color:"x1oc2adj",$$css:!0},newsletterAvatar:{color:"x1oc2adj",$$css:!0},dimmed:{opacity:"xavfwda",$$css:!0},hidden:{display:"x1s85apg",$$css:!0},newSuggestion:{position:"x10l6tqk",bottom:"x1ey2m1c",end:"xds687c",left:null,right:null,zIndex:"x14g40p9",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",borderTopWidth:"xmn4e3e",borderEndWidth:"x10qsr78",borderBottomWidth:"x2x41l1",borderStartWidth:"x19jh3bc",borderTopStyle:"x13fuv20",borderEndStyle:"xu3j5b3",borderBottomStyle:"x1q0q8m5",borderStartStyle:"x26u7qi",borderTopColor:"x1s0ki91",borderEndColor:"x1mn67wr",borderBottomColor:"x1sik5lz",borderStartColor:"x26ctlz",$$css:!0},focusRing:{":focus_borderTopStartRadius":"xvmu2xp",":focus_borderTopEndRadius":"x16ngqik",":focus_borderBottomEndRadius":"x1vlmnad",":focus_borderBottomStartRadius":"x12oeec4",":focus_boxShadow":"xsbtyp8",$$css:!0},icon:{position:"x10l6tqk",bottom:"x1ey2m1c",end:"xds687c",left:null,right:null,zIndex:"x1n327nk",borderTopColor:"xg3ugn6",borderEndColor:"xiv0sok",borderBottomColor:"x1xqhb0f",borderStartColor:"x1gmqvdg",borderTopStyle:"x13fuv20",borderEndStyle:"xu3j5b3",borderBottomStyle:"x1q0q8m5",borderStartStyle:"x26u7qi",borderTopWidth:"xmn4e3e",borderEndWidth:"x10qsr78",borderBottomWidth:"x2x41l1",borderStartWidth:"x19jh3bc",color:"x1awj2ng",backgroundColor:"x13ase7j",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",height:"xxk0z11",width:"xvy4d1p",display:"x78zum5",alignItems:"x6s0dn4",justifyContent:"xl56j7k",pointerEvents:"x47corl",$$css:!0},imageBorder:{borderTopStyle:"x13fuv20",borderEndStyle:"xu3j5b3",borderBottomStyle:"x1q0q8m5",borderStartStyle:"x26u7qi",borderTopColor:"xyj1x25",borderEndColor:"x1mh0e9j",borderBottomColor:"x1v2jjsl",borderStartColor:"xa5e9bk",borderTopWidth:"x178xt8z",borderEndWidth:"xm81vs4",borderBottomWidth:"xso031l",borderStartWidth:"xy80clv",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",$$css:!0}};function a(a){var e,f,g=a.startImage,i=g===void 0?"":g,k=a.type,ba=a.attachToChat,q=a.id;g=a.pending;g=g===void 0?!1:g;var r=a.readOnly,s=r===void 0?!1:r,t=a.onImageSet,u=a.size;r=a.testid;var v=a.theme;r=a.dimmed;r=r===void 0?!1:r;var w=a.sendGroupProfilePictureLoggingEvent,x=a.HoverIcon,y=a.showAddIconOverlay;y=y===void 0?!0:y;a=a.showOutline;a=a===void 0?!1:a;e=o((e=i)!=null?e:"");var z=e[0],A=e[1];e=o(!1);var B=e[0],C=e[1];e=o(null);var D=e[0],E=e[1];e=o();var F=e[0],G=e[1];e=o();var H=e[0],ca=e[1],da=c("useWAWebUIM")();e=c("WAWebUseIsKeyboardUser")();e=e.isKeyboardUser;var I=n(null),J=n(null),K=h._("__JHASH__xEWtUVdPU1r__JHASH__"),L=n(),M=n([].concat(d("WAWebPhotoPickerConstants").getPhotoPickerQualifiedEmojis()));if(((f=i)!=null?f:"")!==z){A((f=i)!=null?f:"");E(i===""?null:D)}var N=!g&&(D!=null||z===""&&!s),O=function(a){k===d("WAWebPhotoPickerConstants").PhotoPickerType.GROUP&&(w==null?void 0:w(a,!!i))},P=function(a){k===d("WAWebPhotoPickerConstants").PhotoPickerType.GROUP&&w!=null&&w(d("WAWebWamEnumGroupProfileActionType").GROUP_PROFILE_ACTION_TYPE.PROFILE_PIC_UPDATED,!!i,a)},ea=function(a){k===d("WAWebPhotoPickerConstants").PhotoPickerType.GROUP&&w!=null&&w(d("WAWebWamEnumGroupProfileActionType").GROUP_PROFILE_ACTION_TYPE[String(a)+"_PANEL_OPEN"],!!i)},Q=function(a){O(d("WAWebWamEnumGroupProfileActionType").GROUP_PROFILE_ACTION_TYPE.TAP_ACTION_ITEM_UPLOAD_PHOTO);a=J.current;if(!a)return;a.click();return!0},R=function(){G(null)};f=function(a){var b=a.currentTarget.clientWidth;a=a.currentTarget.clientHeight;E({width:b,height:a})};var fa=function(a){C(!1)},ga=function(a){C(!0)},ha=function(a){C(!0)},S=function(a,b,c){var e=d("WAWebNonEmptyString").asMaybeNonEmptyString(a),f=d("WAWebNonEmptyString").asMaybeNonEmptyString(b);if(e==null||f==null){A("");E(null);return}d("WAWebMediaLoad").loadImage(e).then(function(a){A(e),t(e,f,c)})["catch"](function(b){d("WALogger").WARN(l(),String(b));var a;switch(k){case d("WAWebPhotoPickerConstants").PhotoPickerType.NEWSLETTER:a=h._("__JHASH__rk8vmgvs7Sp__JHASH__");break;case d("WAWebPhotoPickerConstants").PhotoPickerType.GROUP:case d("WAWebPhotoPickerConstants").PhotoPickerType.GENERAL_GROUP:a=h._("__JHASH__zFen_en22lK__JHASH__");break;case d("WAWebPhotoPickerConstants").PhotoPickerType.COMMUNITY:a=h._("__JHASH__Dy__45vbdIC__JHASH__");break;case d("WAWebPhotoPickerConstants").PhotoPickerType.PROFILE:a=h._("__JHASH__EzF_YPtIrPH__JHASH__");break;case d("WAWebPhotoPickerConstants").PhotoPickerType.DEFAULT_ANNOUNCEMENT_GROUP:break;case d("WAWebPhotoPickerConstants").PhotoPickerType.COVER_PHOTO:break}d("WAWebModalManager").ModalManager.open(m.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{onOK:function(){return d("WAWebModalManager").ModalManager.close()},children:a}))})},ia=function(a){var b=URL.createObjectURL(a);d("WAWebMediaLoad").loadImage(b).then(function(b){if(b&&(b.width<d("WAWebProfileCropConstants").PROF_PIC_MIN_SIDE||b.height<d("WAWebProfileCropConstants").PROF_PIC_MIN_SIDE))d("WAWebModalManager").ModalManager.open(m.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{onOK:function(){return d("WAWebModalManager").ModalManager.close()},children:h._("__JHASH__HAKjQo7baxS__JHASH__",[h._plural(d("WAWebProfileCropConstants").PROF_PIC_MIN_SIDE,"number_of_pixels")])}));else{b=k===d("WAWebPhotoPickerConstants").PhotoPickerType.COVER_PHOTO?d("WAWebModal.react").ModalTheme.BoxLarge:d("WAWebModal.react").ModalTheme.Box;var e;k===d("WAWebPhotoPickerConstants").PhotoPickerType.COVER_PHOTO?e=d("WAWebProfileCropTool.react").CropShapeType.RECT:k===d("WAWebPhotoPickerConstants").PhotoPickerType.COMMUNITY?e=d("WAWebProfileCropTool.react").CropShapeType.SQUIRCLE:e=d("WAWebProfileCropTool.react").CropShapeType.CIRCLE;d("WAWebModalManager").ModalManager.open(m.jsx(c("WAWebEditImageModal.react"),{img:a,onFinished:function(a,b){P(d("WAWebWamEnumProfilePictureType").PROFILE_PICTURE_TYPE.PHOTO_UPLOAD),S(a,b,d("WAWebPhotoPickType").PhotoPickType.Gallery)},onRetake:Q,cropShape:e,theme:b}))}})["catch"](function(){var a;switch(k){case d("WAWebPhotoPickerConstants").PhotoPickerType.NEWSLETTER:a=h._("__JHASH__rk8vmgvs7Sp__JHASH__");break;case d("WAWebPhotoPickerConstants").PhotoPickerType.GROUP:case d("WAWebPhotoPickerConstants").PhotoPickerType.GENERAL_GROUP:a=h._("__JHASH__zFen_en22lK__JHASH__");break;case d("WAWebPhotoPickerConstants").PhotoPickerType.COMMUNITY:a=h._("__JHASH__Dy__45vbdIC__JHASH__");break;case d("WAWebPhotoPickerConstants").PhotoPickerType.PROFILE:a=h._("__JHASH__EzF_YPtIrPH__JHASH__");break;case d("WAWebPhotoPickerConstants").PhotoPickerType.DEFAULT_ANNOUNCEMENT_GROUP:break;case d("WAWebPhotoPickerConstants").PhotoPickerType.COVER_PHOTO:break}d("WAWebModalManager").ModalManager.open(m.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{onOK:function(){return d("WAWebModalManager").ModalManager.close()},children:a}))})["finally"](function(){URL.revokeObjectURL(b)})},ja=function(a){R();var b=a.target.files[0];if(!b)return!1;ia(b);a.target.value="";I.current&&c("WAWebFocusTracer").focus(I.current)},T=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=Math.floor(Math.random()*M.current.length);ca({color:c("WAWebUtilsGetColor")(d("WAWebEditGroupProfileDrawer.react").COLOR_OPTIONS[Math.floor(Math.random()*d("WAWebEditGroupProfileDrawer.react").COLOR_OPTIONS.length)],200),emoji:yield d("WAWebMediaEditorUtilsCreateCanvasAndImage").createImageFromEmoji(M.current[a])});M.current.splice(a,1);M.current.length===0&&(M.current=[].concat(d("WAWebPhotoPickerConstants").getPhotoPickerQualifiedEmojis()))});return function(){return a.apply(this,arguments)}}(),ka=function(a){if(!F)return;var b=new(c("WAWebDataTransfer"))(a.clipboardData);b=c("lodash").filter(b.getFiles(),function(a){return d("WAWebFileUtils").typeFromMimetype(a.type)==="image"});if(!b.length)return;a.preventDefault();a.stopPropagation();R();a=b[0];ia(a)},la=function(){O(d("WAWebWamEnumGroupProfileActionType").GROUP_PROFILE_ACTION_TYPE.TAP_ACTION_ITEM_WEB_SEARCH),d("WAWebModalManager").ModalManager.open(m.jsx(d("WAWebModal.react").Modal,{type:d("WAWebModal.react").ModalTheme.Box,children:m.jsx(c("WAWebImageSearchFlow.react"),{onFinished:function(a,b){P(d("WAWebWamEnumProfilePictureType").PROFILE_PICTURE_TYPE.WEB_SEARCH),S(a,b,d("WAWebPhotoPickType").PhotoPickType.WebSearch)}})}))},U=function(){O(d("WAWebWamEnumGroupProfileActionType").GROUP_PROFILE_ACTION_TYPE.TAP_ACTION_ITEM_VIEW_PHOTO);var a=I.current;if(!a||!q)return;var b=function(b){b(a)},e=d("WAWebContactCollection").ContactCollection.assertGet(q),f={transition:"profile-viewer"};ba&&(f.uim=da);d("WAWebModalManager").ModalManager.openMedia(m.jsx(c("WAWebPhotoViewerModal.react"),{contact:e,profilePicThumb:e.getProfilePicThumb(),animateBorderRadius:k!==d("WAWebPhotoPickerConstants").PhotoPickerType.COMMUNITY,animateSquircle:k===d("WAWebPhotoPickerConstants").PhotoPickerType.COMMUNITY,getZoomNode:b}),f)},ma=function(){t(void 0,void 0,d("WAWebPhotoPickType").PhotoPickType.None),d("WAWebModalManager").ModalManager.close(),P(d("WAWebWamEnumProfilePictureType").PROFILE_PICTURE_TYPE.REMOVE_PHOTO)},na=function(b){O(d("WAWebWamEnumGroupProfileActionType").GROUP_PROFILE_ACTION_TYPE.TAP_ACTION_ITEM_REMOVE_PHOTO);var a;switch(k){case d("WAWebPhotoPickerConstants").PhotoPickerType.NEWSLETTER:a=h._("__JHASH__8xAhiJ26dK7__JHASH__");break;case d("WAWebPhotoPickerConstants").PhotoPickerType.GROUP:case d("WAWebPhotoPickerConstants").PhotoPickerType.GENERAL_GROUP:a=h._("__JHASH__EUdCRIvMaPn__JHASH__");break;case d("WAWebPhotoPickerConstants").PhotoPickerType.COMMUNITY:a=h._("__JHASH__ZOCtKXvYSMi__JHASH__");break;case d("WAWebPhotoPickerConstants").PhotoPickerType.PROFILE:a=h._("__JHASH__BTeBjirWxaV__JHASH__");break;case d("WAWebPhotoPickerConstants").PhotoPickerType.DEFAULT_ANNOUNCEMENT_GROUP:break;case d("WAWebPhotoPickerConstants").PhotoPickerType.COVER_PHOTO:a=h._("__JHASH__0S3nFTymkbv__JHASH__");break}d("WAWebModalManager").ModalManager.open(m.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{onOK:ma,okText:h._("__JHASH__twqDGXuDz6h__JHASH__"),onCancel:function(){return d("WAWebModalManager").ModalManager.close()},cancelText:h._("__JHASH__JomY4EcHzcJ__JHASH__"),children:a}))},oa=function(a){O(d("WAWebWamEnumGroupProfileActionType").GROUP_PROFILE_ACTION_TYPE.TAP_ACTION_ITEM_EMOJI_STICKER);a=h._("__JHASH__Kjw81Ud1sXc__JHASH__");d("WAWebModalManager").ModalManager.open(m.jsx(d("WAWebModal.react").Modal,{type:d("WAWebModal.react").ModalTheme.Box,ariaLabel:a,testid:void 0,children:m.jsx(d("WAWebEditGroupProfileDrawer.react").EditGroupProfileDrawer,{title:a,onCancel:function(){return d("WAWebModalManager").ModalManager.close()},onFinished:function(a,b,c){P(d("WAWebWamEnumProfilePictureType").PROFILE_PICTURE_TYPE[String(c)]),S(a,b,c===d("WAWebEditGroupProfileDrawer.react").ImageType.EMOJI?d("WAWebPhotoPickType").PhotoPickType.Emoji:d("WAWebPhotoPickType").PhotoPickType.Sticker),d("WAWebModalManager").ModalManager.close()},sendEmojiStickerPanelOpenLoggingEvent:ea})}))},pa=function(){var a=[];q!=null&&z!==""&&a.push(m.jsx(d("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:U,children:h._("__JHASH__vn1_qJDedgS__JHASH__")},"view"));if(c("WAWebPonyfillsGetUserMedia")){var b=k===d("WAWebPhotoPickerConstants").PhotoPickerType.COVER_PHOTO?d("WAWebProfileCropTool.react").CropShapeType.RECT:d("WAWebProfileCropTool.react").CropShapeType.CIRCLE,e=k===d("WAWebPhotoPickerConstants").PhotoPickerType.COVER_PHOTO?d("WAWebModal.react").ModalTheme.BoxLarge:d("WAWebModal.react").ModalTheme.Box;a.push(m.jsx(c("WAWebTakePhotoMenuItem.react"),{onImageTake:function(a,b){P(d("WAWebWamEnumProfilePictureType").PROFILE_PICTURE_TYPE.PHOTO_CAMERA),S(a,b,d("WAWebPhotoPickType").PhotoPickType.Camera)},editCropShape:b,modalTheme:e,action:function(){O(d("WAWebWamEnumGroupProfileActionType").GROUP_PROFILE_ACTION_TYPE.TAP_ACTION_ITEM_TAKE_PHOTO)}},"take"))}a.push(m.jsx(d("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:Q,children:h._("__JHASH__xzvwSpv2iRx__JHASH__")},"upload"));d("WAWebMiscGatingUtils").groupProfileEditorEnabled()&&(k===d("WAWebPhotoPickerConstants").PhotoPickerType.GROUP||k===d("WAWebPhotoPickerConstants").PhotoPickerType.COMMUNITY||k===d("WAWebPhotoPickerConstants").PhotoPickerType.NEWSLETTER)&&a.push(m.jsx(d("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:oa,children:h._("__JHASH__QCijWvBzqVd__JHASH__")},"edit"));d("WAWebUA").UA.isElectron&&((k===d("WAWebPhotoPickerConstants").PhotoPickerType.GROUP||k===d("WAWebPhotoPickerConstants").PhotoPickerType.COMMUNITY)&&a.push(m.jsx(d("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:la,children:h._("__JHASH__UepigpbLh-8__JHASH__")},"search")));z!==""&&a.push(m.jsx(d("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:na,children:h._("__JHASH__2xIAPFguRuk__JHASH__")},"remove"));return a},qa=function(a){if(!N)return;if(s){z!==""&&U();return}a.stopPropagation();a.preventDefault();var b=pa();G({menu:b,event:a});k===d("WAWebPhotoPickerConstants").PhotoPickerType.GROUP&&w!=null&&w(d("WAWebWamEnumGroupProfileActionType").GROUP_PROFILE_ACTION_TYPE.CHANGE_PROFILE_PHOTO,!!i)},ra=function(a){if(!N)return;if(s){z!==""&&U();return}a.stopPropagation();a.preventDefault();a=pa();G({menu:a,anchor:I.current})},sa=function(){return u!=null?{width:u,height:u}:void 0},V;z!==""&&(V=m.jsx(c("WAWebObjectFit.react"),{type:"cover",size:D,children:m.jsx(c("WAWebImg.react"),{src:z,crossOrigin:!1,style:{height:"100%",width:"100%"},onLoad:f})}));var W;(g||z!==""&&!D)&&(k===d("WAWebPhotoPickerConstants").PhotoPickerType.COVER_PHOTO?W=m.jsx("div",{className:"x10l6tqk x13vifvy x17qophe xds687c x1ey2m1c xj4c5ne x1vjfegm",children:m.jsx("div",{className:"x10l6tqk x16q8cke xomnu4r x1355qak x47corl",children:m.jsx(d("WAWebSpinner.react").Spinner,{size:24,stroke:3,color:"solidwhite"})})}):W=m.jsx(c("WAWebAvatarSpinner.react"),{}));f=null;if(!g&&!s&&(z===""||D)&&(z===""||F||B)){var X="";switch(k){case d("WAWebPhotoPickerConstants").PhotoPickerType.NEWSLETTER:X=z!==""?h._("__JHASH__6rg9NZiv5UL__JHASH__"):h._("__JHASH__3UKVAWU6L-u__JHASH__");break;case d("WAWebPhotoPickerConstants").PhotoPickerType.GROUP:case d("WAWebPhotoPickerConstants").PhotoPickerType.GENERAL_GROUP:X=z!==""?h._("__JHASH__xqDdEkOgXvD__JHASH__"):h._("__JHASH__spct1VzJ6Lk__JHASH__");break;case d("WAWebPhotoPickerConstants").PhotoPickerType.COMMUNITY:X=z!==""?h._("__JHASH__-mV8YWbPJT9__JHASH__"):h._("__JHASH__q3konMVr11r__JHASH__");break;case d("WAWebPhotoPickerConstants").PhotoPickerType.PROFILE:X=z!==""?h._("__JHASH__tTnGRfZUExy__JHASH__"):h._("__JHASH___hBloUW7zR1__JHASH__");break;case d("WAWebPhotoPickerConstants").PhotoPickerType.DEFAULT_ANNOUNCEMENT_GROUP:break;case d("WAWebPhotoPickerConstants").PhotoPickerType.COVER_PHOTO:break}k!==d("WAWebPhotoPickerConstants").PhotoPickerType.COVER_PHOTO&&y&&(f=m.jsx(d("WAWebAvatarOverlay.react").AvatarOverlay,{icon:m.jsx(d("WAWebCameraIcon").CameraIcon,{}),text:X,theme:k===d("WAWebPhotoPickerConstants").PhotoPickerType.COMMUNITY?d("WAWebAvatarOverlay.react").AvatarOverlayTheme.COMMUNITY:d("WAWebAvatarOverlay.react").AvatarOverlayTheme.DEFAULT}));K=X}aa(function(){if(v===d("WAWebPhotoPickerConstants").PhotoPickerThemeType.EMOJI_SUGGESTIONS&&H){var a,b,c={mimeType:"image/jpeg",width:d("WAWebEditGroupProfileDrawer.react").PHOTO_SIZE,height:d("WAWebEditGroupProfileDrawer.react").PHOTO_SIZE};a=(a=(a=L.current)==null?void 0:a.toDataURL(babelHelpers["extends"]({},c,{pixelRatio:d("WAWebProfileCropConstants").PROF_PIC_THUMB_SIDE/d("WAWebEditGroupProfileDrawer.react").PHOTO_SIZE,quality:0})))!=null?a:"";c=(b=(b=L.current)==null?void 0:b.toDataURL(babelHelpers["extends"]({},c,{pixelRatio:d("WAWebProfileCropConstants").PROF_PIC_MIN_SIDE*2/d("WAWebEditGroupProfileDrawer.react").PHOTO_SIZE,quality:1})))!=null?b:"";S(a,c,d("WAWebPhotoPickType").PhotoPickType.Emoji)}},[H]);var ta,ua;if(v===d("WAWebPhotoPickerConstants").PhotoPickerThemeType.EMOJI_SUGGESTIONS){y=H||{};X=y.color;y=y.emoji;ta=m.jsx(c("WAWebUnstyledButton.react"),{testid:void 0,xstyle:p.newSuggestion,onClick:T,"aria-label":h._("__JHASH__TUApnaWfGnz__JHASH__"),children:m.jsx(c("WAWebRoundShape.react"),{children:m.jsx(d("WAWebRefreshIcon").RefreshIcon,{width:30,height:30})})});if(X!=null&&y){var Y;ua=m.jsx((T=d("WAWebMediaEditorUtilsReactKonvaCore")).Stage,{ref:L,width:(Y=d("WAWebEditGroupProfileDrawer.react")).PHOTO_SIZE,height:Y.PHOTO_SIZE,className:"x1s85apg",children:m.jsxs(T.Layer,{children:[m.jsx(T.Rect,{width:Y.PHOTO_SIZE,height:Y.PHOTO_SIZE,fill:X}),m.jsx(T.Image,{width:Y.IMAGE_SIZE,height:Y.IMAGE_SIZE,offset:{x:Y.IMAGE_SIZE/2,y:Y.IMAGE_SIZE/2},x:Y.PHOTO_SIZE/2,y:Y.PHOTO_SIZE/2,image:y,filters:y.naturalWidth<=d("WAWebEditGroupProfileDrawer.react").EMOJI_IMAGE_SHARPEN_SIZE_THRESHOLD&&y.naturalHeight<=d("WAWebEditGroupProfileDrawer.react").EMOJI_IMAGE_SHARPEN_SIZE_THRESHOLD?[c("WAWebUtilsSharpenFilter")]:[]})]})})}}var va;F&&(va=m.jsx(d("WAWebUimUie.react").UIE,{displayName:"PhotoPickerContextMenu",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:R,children:m.jsx(c("WAWebUimUieMenu.react"),{contextMenu:F})}));var Z;if(g||z===""||!D){var $;switch(k){case d("WAWebPhotoPickerConstants").PhotoPickerType.PROFILE:$=m.jsx(d("WAWebDefaultUserIcon").DefaultUserIcon,{});break;case d("WAWebPhotoPickerConstants").PhotoPickerType.COMMUNITY:$=m.jsx(d("WAWebCommunitySquircleIcon").CommunitySquircleIcon,{iconXstyle:p.communitySquircle});break;case d("WAWebPhotoPickerConstants").PhotoPickerType.NEWSLETTER:$=m.jsx(d("WAWebDefaultNewsletterIcon").DefaultNewsletterIcon,{iconXstyle:p.newsletterAvatar});break;case d("WAWebPhotoPickerConstants").PhotoPickerType.DEFAULT_ANNOUNCEMENT_GROUP:$=m.jsx(d("WAWebAnnouncementSpeakerIcon").AnnouncementSpeakerIcon,{directional:!0});break;case d("WAWebPhotoPickerConstants").PhotoPickerType.GENERAL_GROUP:Z=m.jsx(d("WAWebCommunityGeneralChatImage.react").CommunityGeneralChatImage,{});break;case d("WAWebPhotoPickerConstants").PhotoPickerType.COVER_PHOTO:$=null;break;default:$=m.jsx(d("WAWebDefaultGroupIcon").DefaultGroupIcon,{});break}if($!=null){Z=m.jsx("div",{className:d("WAWebClassnames").classnamesConvertMeToStylexPlease((X={},X[c("WAWebPhotoPicker.scss").defaultAnnouncementGroupIcon]=k===d("WAWebPhotoPickerConstants").PhotoPickerType.DEFAULT_ANNOUNCEMENT_GROUP,X[c("WAWebPhotoPicker.scss").defaultIcon]=!0,X)),children:$})}}T=document.activeElement===I.current?{space:ra,enter:ra}:{};return m.jsxs(d("WAWebKeyboardHotKeys.react").HotKeys,{className:d("WAWebClassnames").classnamesConvertMeToStylexPlease((Y={},Y[c("WAWebPhotoPicker.scss").coverPhoto]=v===d("WAWebPhotoPickerConstants").PhotoPickerThemeType.COVER_PHOTO,Y[c("WAWebPhotoPicker.scss").container]=!0,Y),(j||(j=c("stylex")))(B&&z!==""&&s&&p.dimmed,a&&V!=null&&p.imageBorder)),style:sa(),handlers:T,"aria-label":K.toString(),role:"button",children:[m.jsxs("div",{className:d("WAWebClassnames").classnamesConvertMeToStylexPlease((y={},y[c("WAWebPhotoPicker.scss").squircleBackground]=k===d("WAWebPhotoPickerConstants").PhotoPickerType.COMMUNITY||k===d("WAWebPhotoPickerConstants").PhotoPickerType.DEFAULT_ANNOUNCEMENT_GROUP,y[c("WAWebPhotoPicker.scss").clickable]=N,y[c("WAWebPhotoPicker.scss").body]=!0,y),j(e&&N&&p.focusRing)),onClick:qa,onMouseOver:ha,onMouseEnter:ga,onMouseLeave:fa,onPaste:ka,onFocus:ga,onBlur:fa,ref:I,title:K,dir:"ltr",tabIndex:N?0:-1,role:N?"button":"none","data-testid":void 0,children:[m.jsxs("div",{className:d("WAWebClassnames").classnamesConvertMeToStylexPlease((g={},g[c("WAWebPhotoPicker.scss").imageContainer]=!0,g),j(r&&p.dimmed)),children:[V,Z,ua]}),m.jsxs(c("WAWebVelocityTransitionGroup"),{transitionName:"fade",children:[W,f]})]}),x!=null&&m.jsx("div",{className:"x10l6tqk x1ey2m1c xds687c x1n327nk xg3ugn6 xiv0sok x1xqhb0f x1gmqvdg x13fuv20 xu3j5b3 x1q0q8m5 x26u7qi xmn4e3e x10qsr78 x2x41l1 x19jh3bc x1awj2ng x13ase7j x14yjl9h xudhj91 x18nykt9 xww2gxu xxk0z11 xvy4d1p x78zum5 x6s0dn4 xl56j7k x47corl",children:m.jsx(x,{width:16,height:16})}),m.jsx("input",{ref:J,type:"file",accept:"image/gif,image/jpeg,image/jpg,image/png",style:{display:"none"},onChange:ja}),va,ta]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebCommunityExistingGroupConfirmationPopup.react",["fbt","WAWebConfirmPopup.react","WAWebEmojiText.react","WAWebFbtCommon","WAWebModalManager","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(a){var b=a.communityName,e=a.groupCount,f=a.onContinue;a=b!=null?h._("__JHASH__15SrpYV2OTc__JHASH__",[h._plural(e),h._param("community-name",j.jsx(d("WAWebEmojiText.react").EmojiText,{text:b}))]):h._("__JHASH__kdAMm48oMlX__JHASH__",[h._plural(e)]);b=function(){d("WAWebModalManager").ModalManager.close()};e=function(){f(),d("WAWebModalManager").ModalManager.close()};return j.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{onOK:e,onCancel:b,okText:c("WAWebFbtCommon")("Continue"),children:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebCommunityExistingGroupsDrawer.react",["fbt","WAAbortError","WALogger","WANullthrows","WAPromiseRaceAbort","WAWebChatCollection","WAWebChatModel","WAWebChatParticipantList.react","WAWebCheckmarkIcon","WAWebClassnames","WAWebCommunityAddGroupConfirmationPopup.react","WAWebCommunityExistingGroupConfirmationPopup.react","WAWebCommunityGatingUtils","WAWebCommunitySubgroupsLimitReachedPopup.react","WAWebConfirmPopup.react","WAWebContactCollection","WAWebCopyPasteSelectable.react","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerHeader.react","WAWebEmojiText.react","WAWebFbtCommon","WAWebFlatListContainer.react","WAWebFlatListController","WAWebFocusIndicator","WAWebFocusTracer","WAWebGroupMetadataCollection","WAWebGroupType","WAWebKeyboardHotKeys.react","WAWebL10N","WAWebModalManager","WAWebMultiSelectChatList.react","WAWebMultiSelection","WAWebNameGroupModal.react","WAWebRound.react","WAWebSetSubjectGroupAction","WAWebSingleSelection","WAWebSpinner.react","WAWebText.react","WAWebTopMenuRedesignGatingUtils","WAWebUnstyledButton.react","WAWebVelocityTransitionGroup","asyncToGeneratorRuntime","lodash","react","useWAWebLazyRef","useWAWebUnmountSignal"],(function(a,b,c,d,e,f,g,h){var i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["name_group_modal:onSetSubject failed"]);k=function(){return a};return a}a=j||d("react");var l=i||(i=c("react"));e=a.forwardRef;var m=a.useEffect,n=a.useRef,o=a.useState,p={search:{paddingTop:"x9desvi",paddingEnd:"x1gz9zih",paddingLeft:null,paddingRight:null,paddingBottom:"xsag5q8",paddingStart:"x1b9tyad",marginTop:"x10wh9bi",marginEnd:"x1wdrske",marginBottom:"x8viiok",marginStart:"x18hxmgj",backgroundColor:"x150wa6m",$$css:!0},inputArea:{display:"x1rg5ohu",width:"xh8yej3",height:"xt7dq6l",paddingTop:"x1nn3v0j",paddingEnd:"x4uap5",paddingBottom:"x1120s5i",paddingStart:"xkhd6sd",marginTop:"xdj266r",marginEnd:"x11i5rnm",marginBottom:"xat24cr",marginStart:"x1mh8g0r",fontSize:"x6prxxf",lineHeight:"x37zpob",color:"xzsf02u",verticalAlign:"x16dsc37",backgroundColor:"xjbqb8w",borderTop:"x76ihet",borderEnd:"xwmqs3e",borderBottom:"x112ta8",borderStart:"xxxdfa6",outline:"x1a2a7pz",$$css:!0},inputLine:{position:"x1n2onr6",width:"xh8yej3",minHeight:"xisnujt",maxHeight:"x1hkcv85",paddingTop:"x1yrsyyn",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"x1h0ha7o",paddingLeft:null,paddingRight:null,overflowY:"x1odjw0f",fontSize:"x6prxxf",fontWeight:"x1fcty0u",lineHeight:"x132q4wb",backgroundColor:"xjbqb8w",borderTop:"x76ihet",borderEnd:"xwmqs3e",borderBottom:"xx6wbpl",borderStart:"xxxdfa6",outline:"x1a2a7pz",transition:"x1wl3egx",$$css:!0},drawerSection:{zIndex:"xhtitgo",display:"x78zum5",justifyContent:"x1l1ennw",paddingBottom:"x1gan7if",marginTop:"xjv05ge",textAlign:"x2b8uid",$$css:!0},inputAreaSizer:{position:"xixxii4",visibility:"xlshs6z",$$css:!0},contacts:{position:"x1n2onr6",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",flexBasis:"x18xmwgd",overflowX:"x6ikm8r",overflowY:"x1odjw0f",backgroundColor:"x150wa6m",$$css:!0},paragraph:{paddingTop:"x1p5oq8j",paddingEnd:"xxbr6pl",paddingBottom:"xwxc41k",paddingStart:"xbbxn1n",fontSize:"x1f6kntn",lineHeight:"x37zpob",textAlign:"x2b8uid",color:"x16cd2qt",backgroundColor:"x150wa6m",borderBottom:"x1w7fho5",overflowWrap:"x1mzt3pk",$$css:!0},spinner:{backgroundColor:"x150wa6m",display:"x78zum5",justifyContent:"xl56j7k",paddingTop:"x4i7bpe",paddingEnd:"x4uap5",paddingBottom:"x1sgudl8",paddingStart:"xkhd6sd",$$css:!0},createNewGroupText:{color:"x1eqckd8",$$css:!0}};f=e(function(a,e){var f=a.onBack,g=a.onSubmit,i=a.onCreateNewGroup,j=a.addedExistingGroups,q=a.groupsSuggestedByMeToCommunity,r=a.communityName,s=a.currentSubgroupCount,t=a.fromInfo,u=a.isCommunityAdmin,v=u===void 0?!1:u,w=a.isCommunityCreation;u=a.isParentGroupClosed;var x=u===void 0?!1:u,y=w===!0?d("WAWebCommunityGatingUtils").getParentGroupLinkLimitCommunityCreation():d("WAWebCommunityGatingUtils").getParentGroupLinkLimit(),z=y-s,A=Array.from((a=j)!=null?a:[]);u=o(!1);s=u[0];var B=u[1];a=o("");u=a[0];var C=a[1],D=c("useWAWebLazyRef")(function(){return new(c("WAWebMultiSelection"))([],function(a){return a.id.toString()})}),E=c("useWAWebLazyRef")(function(){return new(c("WAWebSingleSelection"))([],function(a){return a.id.toString()})});a=n(null);var F=o([]),G=F[0],H=F[1];F=o([]);var I=F[0],J=F[1];F=o(!0);var K=F[0],L=F[1];F=n(new(c("WAWebFlatListController"))());var M=n();m(function(){c("WAWebFocusTracer").focus(M.current)});var N=function(){L(!0);var a=d("WAWebContactCollection").ContactCollection.getGroupContacts();a=a.filter(function(a){var b=d("WAWebChatCollection").ChatCollection.get(a.id.toString());b=b==null?void 0:(b=b.groupMetadata)==null?void 0:b.participants;return b!=null&&b.iAmAdmin()&&!(j==null?void 0:j.has(a.id))});a=a.filter(function(a){a=c("WAWebGroupMetadataCollection").get(a.id.toString());return(a==null?void 0:a.groupType)===d("WAWebGroupType").GroupType.DEFAULT||(a==null?void 0:a.groupType)===d("WAWebGroupType").GroupType.LINKED_SUBGROUP});J(a);L(!1)};m(function(){N()},[]);var O=function(){c("WAWebFocusIndicator").shouldIndicateFocus(),c("WAWebFocusTracer").focus(M.current)},P=function(){B(!0),void g(G)["finally"](function(){return B(!1)})},Q=function(){if(!v){var a=h._("__JHASH__gpV9n23LdCq__JHASH__",[h._plural(G.length,"group-count")]),b=G.length===1?h._("__JHASH__AVU6mJ9x1On__JHASH__"):h._("__JHASH__AqVGrDO_YSQ__JHASH__");d("WAWebModalManager").ModalManager.open(l.jsx(c("WAWebCommunityAddGroupConfirmationPopup.react"),{title:a,disclaimer:b,onOK:function(){d("WAWebModalManager").ModalManager.close(),P()},onCancel:function(){return d("WAWebModalManager").ModalManager.close()}}))}else x?P():d("WAWebModalManager").ModalManager.open(l.jsx(c("WAWebCommunityExistingGroupConfirmationPopup.react"),{onContinue:P,communityName:r,groupCount:G.length}))},R=function(a){D.current.setVal(a,!1),H(D.current.getSelected()),C("")},S=function(a,b){R(b)},T=function(a){a==null?void 0:a.preventDefault(),E.current.setFirst(!0)},U=function(a){E.current.unset(),c("WAWebFocusTracer").focus(M.current)},V=c("useWAWebUnmountSignal")(),W=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=a;yield c("WAPromiseRaceAbort")(d("WAWebSetSubjectGroupAction").setGroupSubject(b,a),V)["catch"](d("WAAbortError").catchAbort(function(){}))["catch"](function(a){d("WALogger").WARN(k()).devConsole(a)});d("WAWebModalManager").ModalManager.close();H(D.current.getSelected());C("")});return function(b,c){return a.apply(this,arguments)}}(),X=function(){d("WAWebModalManager").ModalManager.open(l.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{onOK:function(){return d("WAWebModalManager").ModalManager.close()},okText:c("WAWebFbtCommon")("OK"),children:h._("__JHASH__TRqQJIz5tfr__JHASH__")}))},Y=function(a,b){if(G.length>=z&&b)d("WAWebModalManager").ModalManager.open(l.jsx(c("WAWebCommunitySubgroupsLimitReachedPopup.react"),{maxSubgroups:y,isCommunityCreation:w}));else{b=c("WAWebGroupMetadataCollection").get(a.id);var e=(b==null?void 0:b.isUnnamed)===!0;if(e){e=c("WANullthrows")(d("WAWebChatCollection").ChatCollection.get(a.id.toString()));var f=c("WANullthrows")(D.current.list.find(function(b){return b.id.toString()===a.id.toString()})),g=h._("__JHASH__RYurgcrM-Ga__JHASH__");d("WAWebModalManager").ModalManager.open(l.jsx(c("WAWebNameGroupModal.react"),{chat:e,subtext:g,onCancel:function(){R(f),d("WAWebModalManager").ModalManager.close()},onOK:W,editable:b==null?void 0:b.canSetSubject(),editRestrictionInfo:(b==null?void 0:b.restrict)?X:void 0}))}else H(D.current.getSelected()),C("")}},Z=function(){var a=c("lodash").differenceWith(I,A,function(a,b){return a.id.equals(b)});return a},$;G.length>0&&($=l.jsx(d("WAWebRound.react").Round,{testid:void 0,onClick:Q,label:c("WAWebFbtCommon")("Next"),children:s?l.jsx(d("WAWebSpinner.react").Spinner,{color:"white",size:30}):l.jsx(d("WAWebCheckmarkIcon").CheckmarkIcon,{})}));Q=function(a){var b=c("WAWebGroupMetadataCollection").get(a.id.toString());b=(b==null?void 0:b.groupType)===d("WAWebGroupType").GroupType.LINKED_SUBGROUP;var e=Boolean(q==null?void 0:q.some(function(b){return b.equals(a.id)}));return b||e};s=function(a,b){if(!b||!(a instanceof d("WAWebChatModel").Chat))return;b=c("WAWebGroupMetadataCollection").get(a.id.toString());b=(b==null?void 0:b.groupType)===d("WAWebGroupType").GroupType.LINKED_SUBGROUP;if(b){b=(b=a.groupMetadata)==null?void 0:(b=b.getParentGroupChat())==null?void 0:b.formattedTitle;return h._("__JHASH__TkAYfl948fX__JHASH__",[h._param("community-name",l.jsx(d("WAWebEmojiText.react").EmojiText,{text:b}))])}else if(Boolean(q==null?void 0:q.some(function(b){return b.equals(a.id)})))return h._("__JHASH__JzMN274gz_1__JHASH__")};var aa=Z();Z=l.jsx(c("WAWebMultiSelectChatList.react"),{ref:a,active:E.current,selections:D.current,flatListController:F.current,msgType:"message",onLeaveList:O,searchText:u,maxChats:z,onSelectionChanged:Y,chatFilter:function(a){return aa.some(function(b){return b.id.equals(a.id)})},excludeBroadcast:!0,excludeContacts:!0,isCommunityExistingGroupsDrawer:!0,isDisabled:Q,customItemSecondaryText:s});I.length>0?!v?a=h._("__JHASH__ehGsQNtOkd9__JHASH__"):x?a=h._("__JHASH__8ztYXgjINzG__JHASH__"):a=h._("__JHASH__1Q_cmGMvFRr__JHASH__"):a=l.jsxs(l.Fragment,{children:[h._("__JHASH__3noVCKm6Oz3__JHASH__")," ",l.jsx(c("WAWebUnstyledButton.react"),{xstyle:p.createNewGroupText,onClick:i,children:h._("__JHASH__rNMa5amjd6Y__JHASH__")})]});Y=h._("__JHASH__Pa6QhNQcFVP__JHASH__",[h._implicitParam("=m1",l.jsx("span",{dir:c("WAWebL10N").LR("ltr","rtl"),children:h._("__JHASH__tCcM4ifaOKl__JHASH__",[h._param("groupcount",c("WAWebL10N").n(G.length)),h._param("subgroups-left-to-max",c("WAWebL10N").n(z)),h._implicitParam("=m2",l.jsx("span",{dir:c("WAWebL10N").LR("ltr","rtl"),children:h._("__JHASH__I-4rxNFz7tp__JHASH__")}))])}))]);return l.jsxs(c("WAWebDrawer.react"),{ref:e,children:[l.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:Y,type:t===!0||d("WAWebTopMenuRedesignGatingUtils").topMenuRedesignEnabled()?d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.SMALL:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.LARGE,onBack:f}),l.jsxs(c("WAWebDrawerBody.react"),{children:[l.jsx(d("WAWebText.react").TextParagraph,{xstyle:p.paragraph,children:a}),K?l.jsx("div",{className:"x150wa6m x78zum5 xl56j7k x4i7bpe x4uap5 x1sgudl8 xkhd6sd",children:l.jsx(d("WAWebSpinner.react").Spinner,{})}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"x9desvi x1gz9zih xsag5q8 x1b9tyad x10wh9bi x1wdrske x8viiok x18hxmgj x150wa6m",children:l.jsxs("div",{className:"x1n2onr6 xh8yej3 xisnujt x1hkcv85 x1yrsyyn x4uap5 x18d9i69 x1h0ha7o x1odjw0f x6prxxf x1fcty0u x132q4wb xjbqb8w x76ihet xwmqs3e xx6wbpl xxxdfa6 x1a2a7pz x1wl3egx",children:[l.jsx("div",{"data-list-scroll-container":!0,children:l.jsx(c("WAWebChatParticipantList.react"),{theme:"list-names",contacts:G,onDelete:S,onFocusSearch:O})}),l.jsx(d("WAWebKeyboardHotKeys.react").HotKeys,{handlers:{down:T},onFocus:U,children:l.jsx("input",{"data-testid":void 0,className:d("WAWebClassnames").classnamesConvertMeToStylexPlease("x1rg5ohu xh8yej3 xt7dq6l x1nn3v0j x4uap5 x1120s5i xkhd6sd xdj266r x11i5rnm xat24cr x1mh8g0r x6prxxf x37zpob xzsf02u x16dsc37 xjbqb8w x76ihet xwmqs3e x112ta8 xxxdfa6 x1a2a7pz",d("WAWebCopyPasteSelectable.react").SELECTABLE_INPUT_CSS_CLASS),ref:M,placeholder:h._("__JHASH__5dieFWhOI_t__JHASH__"),onChange:function(a){return C(a.target.value)},value:u,type:"text"})}),l.jsx("span",{className:"xixxii4 xlshs6z",children:u})]})}),l.jsx(c("WAWebFlatListContainer.react"),{className:"x1n2onr6 x1iyjqo2 xs83m0k x18xmwgd x6ikm8r x1odjw0f x150wa6m",flatListControllers:[F.current],children:Z})]}),l.jsx(c("WAWebVelocityTransitionGroup"),{transitionName:"btn",className:"xhtitgo x78zum5 x1l1ennw x1gan7if xjv05ge x2b8uid",children:$})]})]})});a=f;g["default"]=a}),98);
__d("WAWebCommunitySubgroupComparator",[],(function(a,b,c,d,e,f){function a(a,b){if(a.announcementGroup===!0)return-1;return b.announcementGroup===!0?1:a.name.toLowerCase().localeCompare(b.name.toLowerCase())}f.SubgroupComparator=a}),66);
__d("WAWebCommunityHomeGroupsManager.react",["fbt","WANullthrows","WAWebAnnouncementSpeakerIcon","WAWebCellFrame.react","WAWebChatCollection","WAWebCommunityCells.react","WAWebCommunityGatingUtils","WAWebCommunityGetParticipantInfoText","WAWebCommunityRemoveSubgroup","WAWebCommunitySubgroupComparator","WAWebCommunitySubgroupsLimitReachedPopup.react","WAWebDetailImage.react","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerHeader.react","WAWebDrawerSection.react","WAWebEmojiText.react","WAWebExternalLink.react","WAWebFaqUrl","WAWebFbtCommon","WAWebGroupMetadataCollection","WAWebGroupType","WAWebL10N","WAWebModalManager","WAWebNavigableFlatList.react","WAWebRoundShape.react","WAWebSingleSelection","WAWebSpinner.react","WAWebSquircleIcon.react","WAWebTopMenuRedesignGatingUtils","WAWebUISpacing","WAWebUnjoinedSubgroupMetadataCollection","WAWebUnstyledButton.react","WAWebVelocityTransitionGroup","WAWebWDSText.react","react","useWAWebFocusOnMount","useWAWebLazyRef","useWAWebModelValues"],(function(a,b,c,d,e,f,g,h){var i,j;a=j||d("react");var k=i||(i=c("react"));b=a.forwardRef;var l=a.useMemo,m=a.useState,n=d("WAWebCommunityCells.react").RemoveButtonFactory(),o={icon:{height:"x112a4uq",width:"x15jighw",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},announcementIcon:{backgroundColor:"x13vkxft",$$css:!0},announcementSpeaker:{color:"x1o6zcso",$$css:!0},hotKeys:{height:"x5yr21d",$$css:!0},communitySettingsButton:{color:"x1n68mz9",$$css:!0},communitySettingsSection:{backgroundColor:"x15g3fpr",$$css:!0}},p=k.jsx(c("WAWebSquircleIcon.react"),{xstyle:[o.icon,o.announcementIcon],transparent:!0,children:k.jsx(d("WAWebAnnouncementSpeakerIcon").AnnouncementSpeakerIcon,{directional:!0,height:40,width:40,iconXstyle:o.announcementSpeaker})}),q=function(a){var b,e=d("WAWebChatCollection").ChatCollection.get(a.toString());e?(b=c("WANullthrows")(e.groupMetadata),e=e.title()):(b=c("WAWebUnjoinedSubgroupMetadataCollection").assertGet(a.toString()),e=b.subject);return[b,e]};function r(a){var b=a.data,e=b.itemKey,f=b.parentId,g=b.name,i=b.icon,j=b.secondary,l=b.showRemove,o=b.subgroupWid;b=m(!1);var p=b[0],q=b[1];b=d("WAWebChatCollection").ChatCollection.get(e);e=d("useWAWebModelValues").useOptionalModelValues(b,["formattedTitle"]);var r=(e=e==null?void 0:e.formattedTitle)!=null?e:g;(b==null?void 0:(e=b.groupMetadata)==null?void 0:e.groupType)===d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP&&(r=h._("__JHASH__x2ZQLkFbyM5__JHASH__").toString());g=function(){d("WAWebCommunityRemoveSubgroup").handleRemoveSubgroup({parentId:f,removedSubgroupWid:o,removedSubgroupTitle:r,setLoading:q})};return k.jsx(c("WAWebCellFrame.react"),{primary:k.jsx(d("WAWebEmojiText.react").EmojiText,{text:r,ellipsify:!0}),image:i,secondary:j,detail:l&&(p?k.jsx(c("WAWebVelocityTransitionGroup"),{transitionName:"fade",children:k.jsx(d("WAWebSpinner.react").Spinner,{size:18,stroke:6,color:"highlight"})}):k.jsx(c("WAWebVelocityTransitionGroup"),{transitionName:"fade",children:k.jsx(n,{onClick:g,active:a.active,subgroup:o,groupName:r})}))})}r.displayName=r.name+" [from "+f.id+"]";e=b(function(a,b){var e=a.joinedSubgroups,f=a.unjoinedSubgroups,g=a.currentSubgroupCount,i=a.onNewGroupFlow,j=a.onExistingGroupFlow,m=a.onCommunitySettingsClick,n=a.onBack,s=a.parentId;a=a.fromInfo;var t=d("WAWebCommunityGatingUtils").getParentGroupLinkLimit(),u=c("useWAWebLazyRef")(function(){return new(c("WAWebSingleSelection"))([],function(a){return a.itemKey})}),v=c("useWAWebFocusOnMount")(),w=d("useWAWebModelValues").useOptionalModelValues(c("WAWebGroupMetadataCollection").get(s),["allowNonAdminSubGroupCreation","participants"]),x=function(){d("WAWebModalManager").ModalManager.open(k.jsx(c("WAWebCommunitySubgroupsLimitReachedPopup.react"),{maxSubgroups:t}))},y=function(){g>=t?x():j()},z=function(){g>=t?x():i()},A=l(function(){return[].concat(e,f).map(function(a){var b=q(a),e=b[0];b=b[1];if(e.defaultSubgroup===!0)return{itemKey:a.toString(),subgroupWid:a,parentId:s,name:b,icon:p,secondary:null,announcementGroup:!0,showRemove:!1};var f=k.jsx(d("WAWebDetailImage.react").DetailImage,{id:a}),g;!e.participants.iAmMember()?g=h._("__JHASH__4CntH5CxPUe__JHASH__"):e.participants!=null?g=d("WAWebCommunityGetParticipantInfoText").getParticipantInfoText(e.participants):g=h._("__JHASH__mOyFeOrHiA___JHASH__",[h._param("subject",b)]);return{name:b,subgroupWid:a,parentId:s,itemKey:a.toString(),icon:k.jsx(c("WAWebRoundShape.react"),{xstyle:o.icon,transparent:!0,children:f}),secondary:g,announcementGroup:!1,showRemove:(e=w==null?void 0:w.participants.iAmAdmin())!=null?e:!1}}).sort(d("WAWebCommunitySubgroupComparator").SubgroupComparator)},[e,f,s,w==null?void 0:w.participants]),B=l(function(){return A.map(function(a){var b=a.showRemove;a=a.subgroupWid;if(b)return{itemKey:"remove-button-"+a.toString()}}).filter(Boolean)},[A]);u.current.init(B);B=(B=w==null?void 0:w.participants.iAmAdmin())!=null?B:!1;var C=c("WAWebL10N").getNormalizedLocale();C=C==="ar"||C==="fa"?"rtl":"ltr";C=B?h._("__JHASH__mCY1nekoWN2__JHASH__",[h._implicitParam("=m1",k.jsx("span",{dir:C,children:h._("__JHASH__rsccOp85Ukk__JHASH__",[h._param("groupcount",c("WAWebL10N").n(g)),h._param("maxsubgroups",c("WAWebL10N").n(t)),h._implicitParam("=m2",k.jsx("span",{dir:C,children:h._("__JHASH__KX7lVUzIv4T__JHASH__")}))])}))]):h._("__JHASH__02uKytVPklf__JHASH__",[h._implicitParam("=m1",k.jsx("span",{dir:C,children:h._("__JHASH__ZIdIp_MECg3__JHASH__",[h._param("groupcount",c("WAWebL10N").n(g)),h._param("maxsubgroups",c("WAWebL10N").n(t)),h._implicitParam("=m2",k.jsx("span",{dir:C,children:h._("__JHASH__QnxuwOEy6cw__JHASH__")}))])}))]);var D=(w==null?void 0:w.allowNonAdminSubGroupCreation)===!0,E=k.jsx(d("WAWebExternalLink.react").ExternalLink,{href:d("WAWebFaqUrl").getMemberAddedGroupsUrl(),children:c("WAWebFbtCommon")("Learn more")});B?B=D?h._("__JHASH__feDtcqhLjlf__JHASH__",[h._implicitParam("=m2",k.jsx(c("WAWebUnstyledButton.react"),{onClick:m,xstyle:o.communitySettingsButton,children:h._("__JHASH__p2cEmMjgdxE__JHASH__")}))]):h._("__JHASH__hE_dwaBZNdL__JHASH__",[h._implicitParam("=m2",k.jsx(c("WAWebUnstyledButton.react"),{onClick:m,xstyle:o.communitySettingsButton,children:h._("__JHASH__cDv6z425hcJ__JHASH__")}))]):B=D?h._("__JHASH__kcfz_unpYTO__JHASH__",[h._param("learn-more",E)]):h._("__JHASH__D84G_FsDXAw__JHASH__",[h._param("learn-more",E)]);m=d("WAWebCommunityGatingUtils").memberAddedGroupsM1Enabled()?k.jsx(c("WAWebDrawerSection.react"),{xstyle:[o.communitySettingsSection,d("WAWebUISpacing").uiMargin.all30,d("WAWebUISpacing").uiMargin.top0],shadow:!1,children:k.jsx(d("WAWebWDSText.react").WDSTextMuted,{children:B})}):null;return k.jsx("div",{role:"complementary",ref:v,tabIndex:"-1","aria-label":h._("__JHASH__Mxfl-FDZBHg__JHASH__"),children:k.jsxs(c("WAWebDrawer.react"),{ref:b,testid:void 0,children:[k.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:C,titleStr:C,type:a||d("WAWebTopMenuRedesignGatingUtils").topMenuRedesignEnabled()?d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.SMALL:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.LARGE,onBack:n}),k.jsxs(c("WAWebDrawerBody.react"),{children:[k.jsxs(c("WAWebDrawerSection.react"),{children:[k.jsx(d("WAWebCommunityCells.react").CreateNewGroupCell,{onClick:z}),k.jsx(d("WAWebCommunityCells.react").AddExistingGroupsCell,{onClick:y})]}),m,k.jsx(c("WAWebDrawerSection.react"),{title:h._("__JHASH__kUCZ2htzar0__JHASH__"),testid:void 0,children:k.jsx(d("WAWebNavigableFlatList.react").NavigableFlatList,{selection:u.current,ariaLabel:h._("__JHASH__UH70WN8f-8Q__JHASH__"),listData:A,onRenderItem:function(a){return k.jsx(r,{data:a,active:u.current})},rotateList:!0})})]})]})})});g.styles=o;g.CommunityHomeGroupsManager=e}),98);
__d("WAWebAddContactToGroupFlow.react",["fbt","$InternalEnum","WANullthrows","WAWebApiContact","WAWebChatCollection","WAWebCmd","WAWebComposeBoxActions","WAWebConfirmPopup.react","WAWebContactGetters","WAWebEmojiText.react","WAWebFocusTracer","WAWebFrontendContactGetters","WAWebGroupsModal.react","WAWebModifyParticipantsGroupAction","fbs","react","useWAWebFlow"],(function(a,b,c,d,e,f,g,h){var i,j;e=j||d("react");var k=i||(i=c("react")),l=e.useRef,m=e.useState,n=b("$InternalEnum").Mirrored(["SelectGroup","Confirm"]);function a(a){var b=d("useWAWebFlow").useFlow(n.SelectGroup),e=b[0],f=b[1];b=m();var g=b[0],i=b[1];b=function(b){var e=b.groupMetadata;if(!b.isGroup||b.isGroup&&!(e==null?void 0:e.participants.iAmMember()))return!1;b=(e==null?void 0:e.isLidAddressingMode)===!0?d("WAWebApiContact").getCurrentLid(a.contact.id):a.contact.id;if(b!=null&&(e==null?void 0:e.participants.get(b)))return h._("__JHASH__E9XjA99xrft__JHASH__").toString();return!(e==null?void 0:e.participants.iAmAdmin())?c("fbs")._("__JHASH__vHQqGAVBFML__JHASH__").toString():!0};var j=function(b){d("WAWebModifyParticipantsGroupAction").addParticipants(b,[a.contact]).then(function(){d("WAWebCmd").Cmd.openChatFromUnread(b).then(function(a){a&&d("WAWebComposeBoxActions").ComposeBoxActions.focus(b)})})["catch"](function(){}),f.end()},o=l(null),p=function(){if(!o.current)return;var a=o.current;if(!a||a.contains(document.activeElement))return;c("WAWebFocusTracer").focus(a)},q=function(a){p(),i(a),f.push(n.Confirm)};if(f.step==null)return null;var r=null;switch(f.step){case n.SelectGroup:r=k.jsx(c("WAWebGroupsModal.react"),{chats:d("WAWebChatCollection").ChatCollection.filter(function(a){return d("WAWebContactGetters").getIsGroup(a)}),filter:b,onCancel:function(){return f.pop()},onGroup:q});break;case n.Confirm:r=k.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{cancelText:h._("__JHASH__JomY4EcHzcJ__JHASH__"),okText:h._("__JHASH__QtQHyeSf3uq__JHASH__"),onOK:function(){return j(c("WANullthrows")(g))},onCancel:function(){return f.pop()},children:k.jsx(d("WAWebEmojiText.react").EmojiText,{text:h._("__JHASH__dh1fyYvujaR__JHASH__",[h._param("participant",d("WAWebFrontendContactGetters").getFormattedName(a.contact)),h._param("subject",c("WANullthrows")(g).contact.name)])})});break}return k.jsx(e,{ref:o,flow:f,children:r})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebArchivedDrawer.react",["fbt","WAWebApiChat","WAWebChat.react","WAWebChatCollection","WAWebChatCommunityUtils","WAWebCmd","WAWebCommunityGatingUtils","WAWebComposeBoxActions","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerHeader.react","WAWebEmptyState.react","WAWebFlatList.react","WAWebFlatListController","WAWebFocusTracer","WAWebKeyboardHotKeys.react","WAWebSettingsGetters","WAWebSingleSelection","WAWebText.react","WAWebTopMenuRedesignGatingUtils","react","stylex","useWAWebLazyRef","useWAWebListener","useWAWebSettingsValues"],(function(a,b,c,d,e,f,g,h){var i,j,k;b=k||d("react");var l=i||(i=c("react"));e=b.forwardRef;var m=b.useEffect,n=b.useRef,o=b.useState,p={persistentHeaderContainer:{borderBottom:"x1e2j2n0",backgroundColor:"xoiwyku",$$css:!0},persistentHeaderContainerBackgroundOverride:{backgroundColor:"x1xnncb0",$$css:!0},persistentHeaderContent:{paddingTop:"x1yrsyyn",paddingEnd:"x4uap5",paddingBottom:"x10b6aqq",paddingStart:"xkhd6sd",$$css:!0},persistentHeaderText:{paddingTop:"x1yrsyyn",paddingEnd:"xmns6w2",paddingBottom:"x10b6aqq",paddingStart:"xpkgp8e",textAlign:"x1yc453h",$$css:!0},flatListContainer:{overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},bold:{fontWeight:"x117nqv4",$$css:!0}},q=d("WAWebChat.react").ChatFactory(),r=d("WAWebFlatList.react").FlatListFactory();function a(a,b){var e=a.onClose,f=function(){return d("WAWebChatCollection").ChatCollection.filter(function(a){return a.archive&&a.shouldAppearInList})};a=d("useWAWebSettingsValues").useSettingsValues([d("WAWebSettingsGetters").getShowArchiveV2,d("WAWebSettingsGetters").getArchive]);var g=a[0],i=a[1];a=c("useWAWebLazyRef")(function(){return new(c("WAWebFlatListController"))()});var k=c("useWAWebLazyRef")(function(){return new(c("WAWebSingleSelection"))([],function(a){return a.id.toString()})}),s=n(null),t=o(f),u=t[0],v=t[1];t=function(a){var b=k.current.getVal();a===b&&k.current.unset()};var w=function(){return g};d("useWAWebListener").useListener(d("WAWebChatCollection").ChatCollection,[w()?"sort":null,"change:archive","add","remove"].filter(Boolean),function(){v(f())});var x=function(a){k.current.setVal(a,!1)};d("useWAWebListener").useListener(d("WAWebCmd").Cmd,"close_chat",t);d("useWAWebListener").useListener(d("WAWebCmd").Cmd,"update_chatlist_selection",x);t=function(){var a=d("WAWebChatCollection").ChatCollection.some(function(a){return a.archive});return a};var y=function(){return d("WAWebChatCollection").ChatCollection.toArray().find(function(a){return a.active&&a.archive})};m(function(){if(w()){var a=f(),b=new Map();a.forEach(function(a){a.archiveAtMentionViewedInDrawer=!0,b.set(a.id.toString(),!0)});d("WAWebApiChat").updateChatArchiveDrawer(b)}s.current&&c("WAWebFocusTracer").focus(s.current);a=y();a&&x(a)},[]);var z=function(){e()},A=function(a,b){d("WAWebCmd").Cmd.openChatFromUnread(b).then(function(a){a&&d("WAWebComposeBoxActions").ComposeBoxActions.focus(b)}),i.enabled||z()},B=function(a){a.preventDefault(),a.stopPropagation(),k.current.setNext(!0)},C=function(a){a.preventDefault(),a.stopPropagation(),k.current.setPrev(!0)},D=function(){return u.map(function(a){return{itemKey:a.id.toString(),chat:a,height:d("WAWebCommunityGatingUtils").shouldShowNewSubgroupIdentity(a.groupMetadata)?d("WAWebChatCommunityUtils").SUBGROUP_V2_CHAT_CELL_HEIGHT:void 0}})};k.current.init(u,!0);var E;if(t()){t=h._("__JHASH__mr-G7SkLOWq__JHASH__",[h._implicitParam("=m2",l.jsx("span",{className:"x117nqv4",children:h._("__JHASH__RcpovFgViWh__JHASH__")}))]);var F=h._("__JHASH__EDLaLyXUlTJ__JHASH__",[h._implicitParam("=m2",l.jsx("span",{className:"x117nqv4",children:h._("__JHASH__d_gqvp1JFMj__JHASH__")}))]);E=l.jsx("div",{className:(j||(j=c("stylex")))(p.persistentHeaderContainer,d("WAWebTopMenuRedesignGatingUtils").topMenuRedesignEnabled()&&p.persistentHeaderContainerBackgroundOverride),children:l.jsx("div",{className:"x1yrsyyn x4uap5 x10b6aqq xkhd6sd",children:l.jsx("div",{className:"x1yrsyyn xmns6w2 x10b6aqq xpkgp8e x1yc453h",children:l.jsx(d("WAWebText.react").WDSTextMuted,{as:"p",children:g?t:F})})})})}if(u.length>0){t={down:B,up:C};F=l.jsxs(d("WAWebKeyboardHotKeys.react").HotKeys,{ref:s,handlers:t,children:[E,l.jsx(r,{className:"x6ikm8r x10wlt62",data:D(),flatListController:a.current,direction:"vertical",renderItem:function(a){return l.jsx(q,{chat:a.chat,mode:d("WAWebChat.react").Mode.LAST,active:k.current,onClick:A,hideArchivedIcon:i.enabled,hideMuteIcon:w(),hideMuteOption:w(),ephemeralIcon:"chat-list",showCommunityInfo:!0})}})]})}else F=l.jsx(d("WAWebEmptyState.react").Archived,{});B=i.enabled?h._("__JHASH__TQ2BuCO_4ej__JHASH__"):h._("__JHASH__IkojJE167d4__JHASH__");return l.jsxs(c("WAWebDrawer.react"),{ref:b,theme:"archived",children:[l.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:B,onBack:z,type:d("WAWebTopMenuRedesignGatingUtils").topMenuRedesignEnabled()?d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.SMALL:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.LARGE,menu:null}),l.jsx(c("WAWebDrawerBody.react"),{flatListControllers:[a.current],children:F})]})}a.displayName=a.name+" [from "+f.id+"]";b=e(a);g["default"]=b}),98);
__d("WAWebArchivedFlow.react",["$InternalEnum","WAWebArchivedDrawer.react","WAWebSettingsModel","react","useWAWebFlow"],(function(a,b,c,d,e,f,g){var h,i=h||c("react"),j=b("$InternalEnum").Mirrored(["Chats"]);function a(a){a=a.onEnd;a=d("useWAWebFlow").useFlow(j.Chats,{transitions:d("useWAWebFlow").FlowTransitions.DrawerLeft,onEnd:a});var b=a[0],e=a[1];if(e.step==null)return null;var f;switch(e.step){case j.Chats:f=i.jsx(c("WAWebArchivedDrawer.react"),{settings:c("WAWebSettingsModel"),onClose:function(){e.pop()}});break}return i.jsx(b,{flow:e,children:f})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebMediaEditor.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={container:"_ajwt",previewOnly:"_ajwu",documentPreview:"_ajwv",dropOverlay:"_ajww",dropOverlayOutline:"_ajwx",spinner:"_ajwy",footer:"_ajwz",addMediaButton:"_ajw-",addMediaButtonDisabled:"_ajw_",filmstripContainer:"_ajx0",thumbs:"_ajx1",sendButton:"_ajx2",captureFooter:"_ajx3"};b=a;g["default"]=b}),98);
__d("WAWebMediaEditorAddIcon",["err"],(function(a,b,c,d,e,f,g){function a(){throw c("err")("This SVG doesn't exist on web!")}g.MediaEditorAddIcon=a}),98);
__d("WAWebMediaEditorEnumsThickness",["$InternalEnum"],(function(a,b,c,d,e,f){var g=b("$InternalEnum").Mirrored(["SMALL","MEDIUM","LARGE","XLARGE"]);function a(){return Array.from(g.members())}function c(a){switch(a){case g.SMALL:return 8;case g.MEDIUM:return 12;case g.LARGE:return 18;case g.XLARGE:return 24}}f.ThicknessType=g;f.getAllThicknesses=a;f.getThicknessValue=c}),66);
__d("WAWebMediaEditorFilmstripAttachMediaThumb.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={thumb:"_ak3k",active:"_ak3l",bodyWrapper:"_ak3n",body:"_ak3i",bodyIcon:"_ak3j",btnDelete:"_ak3m"};b=a;g["default"]=b}),98);
__d("WAWebMediaEditorFilmstripAttachMediaThumb.react",["fbt","WAWebAudioFileIcon","WAWebClassnames","WAWebMediaEditorFilmstripAttachMediaThumb.scss","WAWebMimeTypes","WAWebMsgType","WAWebStateUtils","WAWebXAltIcon","react","useWAWebModelValues"],(function(a,b,c,d,e,f,g,h){var i,j,k=j||c("react");b=(i||(i=d("react"))).forwardRef;function l(a){a=a.attachMedia;a=d("useWAWebModelValues").useModelValues(a,["mimetype","preview","type","fullPreview","fullPreviewSize","documentPageCount"]);var b;if(a.type===d("WAWebMsgType").MSG_TYPE.IMAGE)b=a.preview;else if(a.type===d("WAWebMsgType").MSG_TYPE.VIDEO)b="data:image/jpeg;base64,"+a.preview;else if(d("WAWebMimeTypes").previewType(a.mimetype)==="pdf"){var e=a.fullPreview&&a.fullPreviewSize&&a.documentPageCount!=null&&a.documentPageCount>0;e&&(b=a.fullPreview)}if(b)return k.jsx("div",{className:c("WAWebMediaEditorFilmstripAttachMediaThumb.scss").body,children:k.jsx("img",{src:b,alt:h._("__JHASH__oQ6YeRrk7BR__JHASH__")})});if(a.type===d("WAWebMsgType").MSG_TYPE.AUDIO)return k.jsx("div",{className:c("WAWebMediaEditorFilmstripAttachMediaThumb.scss").body,children:k.jsx(d("WAWebAudioFileIcon").AudioFileIcon,{})});e=d("WAWebClassnames").classnamesConvertMeToStylexPlease(c("WAWebMediaEditorFilmstripAttachMediaThumb.scss").body,c("WAWebMediaEditorFilmstripAttachMediaThumb.scss").bodyIcon,(a=(e=d("WAWebMimeTypes").DOCUMENT_MIMETYPES[a.mimetype])==null?void 0:e.icon)!=null?a:"icon-doc-generic");return k.jsx("div",{className:e})}l.displayName=l.name+" [from "+f.id+"]";function a(a,b){var e,f,g=a.attachMedia,i=a.onClick,j=a.onClose,m=function(a){i(d("WAWebStateUtils").unproxy(g),a)},n=function(a){j(d("WAWebStateUtils").unproxy(g),a)};return k.jsxs("button",{className:d("WAWebClassnames").classnamesConvertMeToStylexPlease((e={},e[(f=c("WAWebMediaEditorFilmstripAttachMediaThumb.scss")).active]=a.active,e[f.thumb]=!0,e)),onClick:m,"aria-label":h._("__JHASH__7tmtOGSo1kr__JHASH__"),ref:b,children:[k.jsx("div",{className:f.btnDelete,onClick:n,role:"button",children:k.jsx(d("WAWebXAltIcon").XAltIcon,{})}),k.jsx("div",{className:f.bodyWrapper,children:k.jsx(l,{attachMedia:g})})]})}a.displayName=a.name+" [from "+f.id+"]";e=b(a);g["default"]=e}),98);
__d("WAWebMediaEditorFilmstripDragAndDrop.react",["WAWebMediaEditorFilmstripAttachMediaThumb.react","WAWebMsgType","react","react-sortable-hoc","useWAWebForceUpdate"],(function(a,b,c,d,e,f,g){var h,i=h||c("react"),j=d("react-sortable-hoc").SortableElement(function(a){a=a.children;return a}),k=d("react-sortable-hoc").SortableContainer(function(a){a=a.children;return a});function a(a){var b=a.mediaCollection,e=a.className,f=a.onElementRef,g=a.onClick,h=a.onClose;a=b.getPreviewableMedias();var l=c("useWAWebForceUpdate")(),m=function(a){var c=a.oldIndex;a=a.newIndex;b.reorder(c,a);l()};return i.jsx(k,{onSortEnd:m,axis:"x",helperClass:"SortableHelper",distance:10,children:i.jsx("div",{className:e,children:a.map(function(a,e){return i.jsx(j,{index:e,children:i.jsx(c("WAWebMediaEditorFilmstripAttachMediaThumb.react"),{attachMedia:a,active:a===b.getActive(),previewMode:((e=b.getActive())==null?void 0:e.type)!==d("WAWebMsgType").MSG_TYPE.IMAGE,onClick:g,onClose:h,ref:function(a){function b(b){return a.apply(this,arguments)}b.toString=function(){return a.toString()};return b}(function(b){return f(a.id,b)})})},a.id)})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebMediaEditorCanvasImage.react",["WAWebMediaEditorUtilsReactKonvaCore","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){a=a.layer;return i.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Image,{width:a.width,height:a.height,image:a.image})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebMediaEditorCanvasOutline.react",["WAWebConstantsDeprecated","WAWebMediaEditorGeometryRect","WAWebMediaEditorUtilsReactKonvaCore","lodash","react"],(function(a,b,c,d,e,f,g){var h,i;b=i||d("react");var j=h||(h=c("react"));e=b.forwardRef;var k=b.useImperativeHandle,l=b.useRef;function a(a,b){var e=a.layer;a.dimension;var f=l(),g=l();k(b,function(){return{show:function(){var a;(a=f.current)==null?void 0:a.show()},hide:function(){var a;(a=f.current)==null?void 0:a.hide()},getBoundingRect:function(){var a=g.current;if(!a)return;a=a.getClientRect();var b=a.x,d=a.y,f=a.width;a=a.height;return c("WAWebMediaEditorGeometryRect").create({x:b,y:d,width:f,height:a,rotation:e.rotation,scale:e.scale})}}});a=c("lodash").flatMap(e.getAllPoints(),function(a){return[a.x,a.y]});return j.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Group,{ref:f,width:e.width,height:e.height,visible:!1,children:j.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Line,{ref:g,points:a,closed:!0,fill:"white",lineCap:"round",lineJoin:"round",tension:c("WAWebConstantsDeprecated").MEDIA_EDITOR_OUTLINE_TENSION,globalCompositeOperation:"destination-in"})})}a.displayName=a.name+" [from "+f.id+"]";b=e(a);g.Outline=b}),98);
__d("WAWebMediaEditorCanvasBackground.react",["WAWebCanvasUtils","WAWebMediaEditorCanvasImage.react","WAWebMediaEditorCanvasOutline.react","WAWebMediaEditorUtilsReactKonvaCore","WAWebStickerConstants","react"],(function(a,b,c,d,e,f,g){var h,i;b=i||d("react");var j=h||(h=c("react"));e=b.forwardRef;var k=b.useImperativeHandle,l=b.useRef;function a(a,b){var e=a.layer,f=a.outlineLayer,g=a.dimension;a.removeBackground;var h=a.scale;a=a.visible;var i=l(),m=l(),n=function(){var a;(a=m.current)==null?void 0:a.show()},o=function(){var a;(a=m.current)==null?void 0:a.hide()};k(b,function(){return{toCanvas:function(){var a;a=(a=m.current)==null?void 0:a.getBoundingRect();var b=i.current;if(!a||!b||a.size.isEmpty())return;var c=a.x,e=a.y,f=a.width;a=a.height;n();b=b.toCanvas({x:c,y:e,width:f,height:a,pixelRatio:1/h});o();c=Math.max(b.width,b.height);e=c/d("WAWebStickerConstants").STICKER_DIMENSION;f=d("WAWebStickerConstants").STICKER_BORDER_WIDTH*e;a=Math.max(Math.ceil(f),2);c=d("WAWebCanvasUtils").addBorder(b,a);e=d("WAWebCanvasUtils").trim(c);return e}}});if(!e||!f)return null;b=e.frame.getCenter();return j.jsxs(d("WAWebMediaEditorUtilsReactKonvaCore").Group,{ref:i,visible:a,children:[j.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Group,{x:b.x,y:b.y,offsetX:e.width/2,offsetY:e.height/2,width:e.width,height:e.height,rotation:e.rotation,scaleX:e.scale,scaleY:e.scale,children:j.jsx(c("WAWebMediaEditorCanvasImage.react"),{layer:e})}),j.jsx(d("WAWebMediaEditorCanvasOutline.react").Outline,{ref:m,layer:f,dimension:g})]})}a.displayName=a.name+" [from "+f.id+"]";b=e(a);g["default"]=b}),98);
__d("WAWebMediaEditorCanvasContext",["react"],(function(a,b,c,d,e,f,g){var h;a=(h||d("react")).createContext;b={transforming:!1,dragging:!1,editing:!1,canEditBackground:!1};c=a(b);g.CanvasContext=c}),98);
__d("WAWebMediaEditorCanvasEditableText.react",["fbt","WAWebDropdown.react","WAWebEmojiPanel.react","WAWebMediaEditorEnumsFonts","WAWebMediaEditorUtilsTextInCanvas","WAWebRichTextInput.react","WAWebSmileyIcon","WAWebUISpacing","WAWebUimUie.react","WAWebUimUieMenu.react","lodash","react","stylex","useWAWebOnOutsideClick","useWAWebPrevious","useWAWebStaticButtonA11y"],(function(a,b,c,d,e,f,g,h){var i,j,k;a=k||d("react");var l=i||(i=c("react"));b=a.forwardRef;var m=a.useCallback,n=a.useEffect,o=a.useImperativeHandle,p=a.useRef,q=a.useState,r={positioner:{position:"x10l6tqk",display:"x78zum5",alignItems:"x6s0dn4",justifyContent:"xl56j7k",width:"xnalus7",height:"xqtp20y",$$css:!0},container:{boxSizing:"x9f619",borderTop:"x1xc06ks",borderEnd:"xky7lmy",borderBottom:"x1yqjdxy",borderStart:"x1ca9zfk",borderTopStartRadius:"x8u2fvd",borderTopEndRadius:"x1ht7hnu",borderBottomEndRadius:"x1quq95r",borderBottomStartRadius:"x5yzy4c",borderTopWidth:"xamhcws",borderEndWidth:"xol2nv",borderBottomWidth:"xlxy82",borderStartWidth:"x19p7ews",$$css:!0},inputContainer:{position:"x1n2onr6",$$css:!0},inputWrapper:{position:"x10l6tqk",top:"x13vifvy",start:"x17qophe",left:null,right:null,display:"x78zum5",alignItems:"x6s0dn4",justifyContent:"x1szn6h9",width:"xh8yej3",height:"x5yr21d",borderTopStartRadius:"xhk9q7s",borderTopEndRadius:"x1otrzb0",borderBottomEndRadius:"x1i1ezom",borderBottomStartRadius:"x1o6z2jb",$$css:!0},inputText:{fontSize:"x1lkfr7t",$$css:!0},emojiButton:{transform:"xuuh30",top:"x1uvocx6",position:"x10l6tqk",start:"xtzzx4i",left:null,right:null,color:"x7y3cno",$$css:!0},emojiButtonWrapper:{cursor:"x1ypdohk",backgroundColor:"x1hqk2wv",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",":hover_backgroundColor":"x11q5tta",$$css:!0}};e=b(function(a,b){var e=a.text,f=a.layer,g=a.layerCenter,i=a.scale,k=a.onSave,v=a.onUnselect,w=a.onOutsideClick;a=q(e);var x=a[0],y=a[1];e=q();var z=e[0],A=e[1],B=p(),C=m(function(){k(x.replace(/^\n+/,"").replace(/\n+$/,""))},[k,x]);o(b,function(){return{save:function(){C(),v()}}},[C,v]);a=d("useWAWebOnOutsideClick").useOnOutsideClickRef(function(a){if(z||(w==null?void 0:w(a))===!1)return;C();v()});e=function(a){y(a.text)};var D=function(a){var b=B.current;if(!b)return;b.replaceSelection(a)},E=function(){A(null)};b=function(a){A({menu:l.jsx(d("WAWebEmojiPanel.react").EmojiPanel,{onEmoji:D,onFocusNext:E,onFocusPrev:E}),anchor:a.target})};b=c("useWAWebStaticButtonA11y")(b);var F=b[0];b=b[1];n(function(){var a;(a=B.current)==null?void 0:a.focus()},[]);g={left:g.x*i,top:g.y*i};i={color:f.textColor.toHex(),fontFamily:d("WAWebMediaEditorEnumsFonts").getFontStyle(f.font).fontFamily,textAlign:s(f.alignment),paddingLeft:f.styles.lineHorizontalPadding+1,paddingRight:f.styles.lineHorizontalPadding+1,paddingTop:1,paddingBottom:1,borderWidth:0,borderRadius:6,margin:0,boxSizing:"border-box",backgroundColor:f.textBackground?f.textBackgroundColor.toHex():void 0};var G=f.styles.backgroundShadow;G=babelHelpers["extends"]({},i,{boxShadow:f.textBackground?G.offsetX+"px "+G.offsetY+"px "+G.radius+"px "+G.spread+"px "+G.color.toRgbaString():void 0});var H=u(i),I=h._("__JHASH__gY6lXZ8fR5G__JHASH__");return l.jsxs("div",{className:"x10l6tqk x78zum5 x6s0dn4 xl56j7k xnalus7 xqtp20y",style:g,children:[l.jsx("div",{className:(j||(j=c("stylex")))(r.container,d("WAWebUISpacing").uiPadding.all4),children:l.jsxs("div",{className:"x1n2onr6",ref:a,children:[l.jsx("div",babelHelpers["extends"]({className:"xuuh30 x1uvocx6 x10l6tqk xtzzx4i x7y3cno"},b,{ref:F,children:l.jsx("div",{className:j(r.emojiButtonWrapper,d("WAWebUISpacing").uiPadding.all2),children:l.jsx(d("WAWebSmileyIcon").SmileyIcon,{})})})),l.jsx("div",{className:"x10l6tqk x13vifvy x17qophe x78zum5 x6s0dn4 x1szn6h9 xh8yej3 x5yr21d xhk9q7s x1otrzb0 x1i1ezom x1o6z2jb",style:G,children:l.jsx(d("WAWebRichTextInput.react").RichTextInput,{ref:B,textXstyle:r.inputText,initialText:x,onChange:e,onEnter:C,multiline:!0,placeholder:I},H)}),l.jsx(t,{layer:f,draftText:x,placeholderText:I,textStyle:i})]})}),z&&l.jsx(d("WAWebUimUie.react").UIE,{displayName:"EmojiPicker",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:E,children:l.jsx(c("WAWebUimUieMenu.react"),{contextMenu:babelHelpers["extends"]({dirY:d("WAWebDropdown.react").DirY.TOP,type:d("WAWebDropdown.react").MenuType.EmojiPicker},z)})})]})});function s(a){switch(a){case d("WAWebMediaEditorEnumsFonts").TextAlignment.LEFT:return"left";case d("WAWebMediaEditorEnumsFonts").TextAlignment.CENTER:return"center";case d("WAWebMediaEditorEnumsFonts").TextAlignment.RIGHT:return"right"}}function t(a){var b=a.draftText,c=a.layer,e=a.placeholderText;a=a.textStyle;a=babelHelpers["extends"]({},a,{fontSize:"17px",lineHeight:"25px",padding:"0 10px"});b||(a=babelHelpers["extends"]({},a,{fontFamily:void 0,padding:"0 14px"}));b=b?b:e.toString();return l.jsx("div",{className:"x9f619 x126k92a xlshs6z",style:a,children:d("WAWebMediaEditorUtilsTextInCanvas").getLines(b,c.font,c.fontSize,0).map(function(a,b){return l.jsx("div",{className:"x1sdyfia",children:a.words.length===0?" ":a.words.map(function(a,b){return a.emojiPath!=null?l.jsx("span",{className:"x1rg5ohu xezl2tj x17rw0jw"},b):a.text})},b)})})}t.displayName=t.name+" [from "+f.id+"]";function u(a){var b=c("useWAWebPrevious")(a),d=p(0);b&&!c("lodash").isEqual(b,a)&&(d.current+=1);return d.current}g.EditableText=e}),98);
__d("WAWebMediaEditorCanvasBlur.react",["WAWebMediaEditorLayersBlur","WAWebMediaEditorUtilsReactKonvaCore","konva","react"],(function(a,b,c,d,e,f,g){var h,i;b=i||d("react");var j=h||(h=c("react")),k=b.useEffect,l=b.useRef,m=3,n=.4;function a(a){var b,e,f,g=a.frame,h=a.layer,i=a.onTransform,o=a.onTransformEnd,p=a.onTransformStart,q=a.scale,r=a.selectedNodeRef;a=a.showPadding;var s=l();k(function(){var a;s==null?void 0:(a=s.current)==null?void 0:a.cache({pixelRatio:n,imageSmoothingEnabled:!1})},[h.image]);a=a?50:0;b=(b=g==null?void 0:g.x)!=null?b:h.x;e=(e=g==null?void 0:g.y)!=null?e:h.y;f=(f=g==null?void 0:g.width)!=null?f:h.width;g=(g=g==null?void 0:g.height)!=null?g:h.height;q=((q=q)!=null?q:1)*h.backgroundFrame.scale*m/n;b=-b+h.backgroundFrame.width/2+h.backgroundFrame.x;e=-e+h.backgroundFrame.height/2+h.backgroundFrame.y;var t=h.backgroundFrame.width+a/h.backgroundFrame.scale*2,u=h.backgroundFrame.height+a/h.backgroundFrame.scale*2,v=t/2,w=u/2;return j.jsxs(d("WAWebMediaEditorUtilsReactKonvaCore").Group,{width:f,height:g,clipX:0,clipY:0,clipWidth:f,clipHeight:g,children:[j.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Image,{ref:s,x:b,y:e,width:t,height:u,offsetX:v,offsetY:w,fillPatternImage:h.image,fillPatternOffsetX:-a/h.backgroundFrame.scale,fillPatternOffsetY:-a/h.backgroundFrame.scale,fillPatternRepeat:"no-repeat",scaleX:h.backgroundFrame.scale,scaleY:h.backgroundFrame.scale,rotation:(e=(b=h.backgroundFrame)==null?void 0:b.rotation)!=null?e:0,perfectDrawEnabled:!1,filters:[h.mode===d("WAWebMediaEditorLayersBlur").BlurMode.Smooth?c("konva").Filters.Blur:c("konva").Filters.Pixelate],blurRadius:h.radius/q,pixelSize:h.radius/q}),j.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Rect,{ref:r,x:0,y:0,width:f,height:g,fill:"transparent",onTransformStart:p,onTransformEnd:o,onTransform:i})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebMediaEditorCanvasHoveredState.react",["WAWebMediaEditorUtilsColor","WAWebMediaEditorUtilsReactKonvaCore","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react"),j=new(d("WAWebMediaEditorUtilsColor").Color)(82,248,24,1),k=2;function a(a){var b=a.borderRadius;a=a.layer;return i.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Rect,{width:a.width,height:a.height,stroke:j.toRgbaString(),strokeWidth:k,cornerRadius:b,strokeScaleEnabled:!1})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebMediaEditorCanvasPaint",["WAWebMediaEditorUtilsReactKonvaCore","react"],(function(a,b,c,d,e,f,g){var h,i;b=i||d("react");var j=h||(h=c("react")),k=b.useEffect,l=b.useMemo,m=b.useRef;function a(a){var b=a.layer,c=l(function(){var a=document.createElement("canvas");a.width=Math.max(b.width,1);a.height=Math.max(b.height,1);return a},[b.width,b.height]),e=m();k(function(){var a=c.getContext("2d");a.clearRect(0,0,c.width,c.height);b.paths.forEach(function(a){return n(c,a)});(a=e.current)==null?void 0:(a=a.getLayer())==null?void 0:a.batchDraw()},[b.paths,c]);return j.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Image,{ref:e,width:b.width,height:b.height,image:c,listening:!1})}a.displayName=a.name+" [from "+f.id+"]";function n(a,b){var c=b.points;if(!c.length)return;var d=a.getContext("2d");a={color:b.color,thickness:b.thickness,smoothing:!1};o(d,a);d.beginPath();d.moveTo(c[0].x,c[0].y);c.forEach(function(a){return d.lineTo(a.x,a.y)});d.stroke()}function o(a,b){a.lineCap="round",a.lineJoin="round",a.lineWidth=b.thickness,a.strokeStyle=b.color.toHex()}g["default"]=a}),98);
__d("WAWebMediaEditorCanvasSelectedState.react",["WAWebMediaEditorLayersBlur","WAWebMediaEditorUtilsColor","WAWebMediaEditorUtilsReactKonvaCore","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react"),j=new(d("WAWebMediaEditorUtilsColor").Color)(82,248,24,1),k=new(d("WAWebMediaEditorUtilsColor").Color)(82,248,24,.1),l=new(d("WAWebMediaEditorUtilsColor").Color)(0,0,0,0),m=2;function a(a){var b,c=a.borderRadius,e=a.frame;a=a.layer;var f=a instanceof d("WAWebMediaEditorLayersBlur").BlurLayer;return i.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Rect,{width:(b=e==null?void 0:e.width)!=null?b:a.width,height:(b=e==null?void 0:e.height)!=null?b:a.height,fill:(f?l:k).toRgbaString(),stroke:j.toRgbaString(),strokeWidth:m,cornerRadius:c,strokeScaleEnabled:!1})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebMediaEditorCanvasText.react",["WAWebMediaEditorEnumsFonts","WAWebMediaEditorUtilsReactKonvaCore","WAWebMediaEditorUtilsTextInCanvas","react"],(function(a,b,c,d,e,f,g){var h,i;b=i||d("react");var j=h||(h=c("react")),k=b.useEffect,l=b.useRef,m=b.useState;function n(a){var b=a.emojiImages,c=a.layer;a=a.line;var e=Math.max.apply(Math,c.lineWidths),f=0;switch(c.alignment){case d("WAWebMediaEditorEnumsFonts").TextAlignment.LEFT:f=0;break;case d("WAWebMediaEditorEnumsFonts").TextAlignment.CENTER:f=(e-a.width)/2;break;case d("WAWebMediaEditorEnumsFonts").TextAlignment.RIGHT:f=e-a.width;break}var g=0;return a.words.map(function(a,e){var h=a.text,i=a.emojiPath;a=a.width;var k=f+c.styles.lineHorizontalPadding+g,l=c.styles.lineVerticalPadding;if(i){i=b[i];i?i=j.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Image,{x:k,y:l,width:c.lineHeight,height:c.lineHeight,image:i},e):i=j.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Rect,{x:k,y:l,width:c.lineHeight,height:c.lineHeight,fill:"rgba(0,0,0,0)"},e)}else{var m=d("WAWebMediaEditorUtilsTextInCanvas").getTextBounds(c.font,c.fontSize);i=j.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Text,{x:k,y:l-m.top+(m.top+m.bottom)/2,width:a,height:c.lineHeight,text:h,fill:c.textColor.toHex(),fontFamily:d("WAWebMediaEditorEnumsFonts").getFontStyle(c.font).fontFamily,fontSize:c.fontSize},e)}g+=a;return i})}n.displayName=n.name+" [from "+f.id+"]";function a(a){var b=a.layer;a=a.shadow;var c=o(b.lines),e=b.lines.map(function(a,e){var f=a.width+b.styles.lineHorizontalPadding*2,g=b.lineHeight+b.styles.lineVerticalPadding*2;return j.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Group,{width:f,height:g,y:e*g,children:j.jsx(n,{line:a,layer:b,emojiImages:c})},e)}),f=b.styles.backgroundShadow;return j.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Group,{visible:b.width!==0,width:b.width,height:b.height,children:j.jsxs(d("WAWebMediaEditorUtilsReactKonvaCore").Group,{x:b.styles.layerPadding,y:b.styles.layerPadding,children:[b.textBackground&&(a?j.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Path,{data:b.backgroundPath,stroke:b.textBackgroundColor.toHex(),fill:b.textBackgroundColor.toHex(),shadowColor:f.color.toHex(),shadowBlur:f.radius,shadowOffset:{x:f.offsetX,y:f.offsetY},shadowOpacity:f.color.alpha},"1"):j.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Path,{data:b.backgroundPath,stroke:b.textBackgroundColor.toHex(),fill:b.textBackgroundColor.toHex()},"2")),e]})})}a.displayName=a.name+" [from "+f.id+"]";function o(a){var b=[];for(var c=0;c<a.length;c++){var d=a[c];for(var d=d.words,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;g=g.emojiPath;g&&b.push(g)}}return p(b)}function p(a){var b=Array.from(new Set(a));a=b.join("");var c=l({}),d=m(0),e=d[1];k(function(){c.current={},e(0),b.forEach(function(a){var b=new Image();b.onload=function(){c.current[a]=b,e(Object.keys(c.current).length)};b.src=a})},[e,a]);return c.current}g["default"]=a}),98);
__d("WAWebMediaEditorUtilsKonva",["WAWebMediaEditorGeometryPoint"],(function(a,b,c,d,e,f,g){function a(a,b,d){d===void 0&&(d=!1);if(!b)return new(c("WAWebMediaEditorGeometryPoint"))({x:0,y:0});var e=b.getAbsoluteScale(),f=e.x;e=e.y;b=b.content.getBoundingClientRect();var g=a.clientX-b.left;a=a.clientY-b.top;d&&(g=Math.min(Math.max(0,g),b.width),a=Math.min(Math.max(0,a),b.height));return new(c("WAWebMediaEditorGeometryPoint"))({x:g/f,y:a/e})}function b(a){return new(c("WAWebMediaEditorGeometryPoint"))({x:a.target.x()-a.target.offsetX(),y:a.target.y()-a.target.offsetY()})}function d(a){return a.target.rotation()}function e(a){return a.target.scaleX()}function f(a){return(a=(a=a.target.attrs.name)==null?void 0:a.includes("anchor"))!=null?a:!1}function h(a,b){if(!b)return!1;var c=b.getAbsoluteScale(),d=c.x;c=c.y;b=b.content.getBoundingClientRect();var e=b.width;b=b.height;return a.x===0&&a.y===0||a.x===0&&a.y===b/c||a.x===e/d&&a.y===0||a.x===e/d&&a.y===b/c}g.getPointFromStage=a;g.getPointFromGroup=b;g.getRotationFromGroup=d;g.getScaleFromGroup=e;g.isEventOnAnchor=f;g.isStageCorner=h}),98);
__d("WAWebMediaEditorUtilsRemoveBoundBoxRotation",[],(function(a,b,c,d,e,f){function a(a,b,c){c===void 0&&(c=!1);b=(b+360)%360;if(!c&&(b===90||b===270)){var d=a.height;a.height=a.width;a.width=d}(b===90||b===180)&&(!c?a.x-=a.width:a.x+=a.width);(b===180||b===270)&&(!c?a.y-=a.height:a.y+=a.height);if(c&&(b===90||b===270)){d=a.height;a.height=a.width;a.width=d}}f["default"]=a}),66);
__d("WAWebMediaEditorCanvasLayer.react",["WAWebMediaEditorCanvasBlur.react","WAWebMediaEditorCanvasContext","WAWebMediaEditorCanvasHoveredState.react","WAWebMediaEditorCanvasImage.react","WAWebMediaEditorCanvasOutline.react","WAWebMediaEditorCanvasPaint","WAWebMediaEditorCanvasSelectedState.react","WAWebMediaEditorCanvasText.react","WAWebMediaEditorGeometryRect","WAWebMediaEditorLayersBlur","WAWebMediaEditorLayersDraw","WAWebMediaEditorLayersImage","WAWebMediaEditorLayersText","WAWebMediaEditorUtilsKonva","WAWebMediaEditorUtilsReactKonvaCore","WAWebMediaEditorUtilsRemoveBoundBoxRotation","react","useWAWebMergeRefs"],(function(a,b,c,d,e,f,g){var h,i;b=i||d("react");var j=h||(h=c("react")),k=b.useContext,l=b.useEffect,m=b.useState,n=[0,45,90,135,180,225,270,315],o=36,p=18,q=5,r=40,s=0;function a(a){var b,e=a.canvasRotation,f=a.dimension,g=a.editable,h=a.editing,i=a.hidden,t=a.layer,u=a.onDoubleClick,v=a.onDragEnd,w=a.onDragMove,x=a.onDragStart,y=a.onSelect,z=a.onTransformEnd,A=a.onTransformStart,B=a.scale,C=a.selected,D=a.selectedGroupRef,E=a.selectedNodeRef,F=a.stageHeight,G=a.stageWidth,H=a.textBackgroundShadow;a=a.transformerRef;var I=m(!1),J=I[0],K=I[1];I=m(null);var L=I[0],M=I[1],N=k(d("WAWebMediaEditorCanvasContext").CanvasContext);I=c("useWAWebMergeRefs")(D,E);var O=t instanceof d("WAWebMediaEditorLayersBlur").BlurLayer,P=t instanceof d("WAWebMediaEditorLayersImage").ImageLayer&&(t.isSticker()||t.isBackground()),Q=t.frame.getCenter(),R=(b=L==null?void 0:L.x)!=null?b:t.x,S=(b=L==null?void 0:L.y)!=null?b:t.y,T=(b=L==null?void 0:L.width)!=null?b:t.width,U=(b=L==null?void 0:L.height)!=null?b:t.height;b=q;P&&(b=r);O&&(b=s);P=function(a){if(!t.editable||N.dragging||N.transforming)return;a.cancelBubble=!0;K(!0)};var aa=function(a){if(!t.editable)return;a.cancelBubble=!0;K(!1)},ba=function(a){a=d("WAWebMediaEditorUtilsKonva").getPointFromGroup(a);v(t,a);O&&M(null)},ca=function(a){if(O){var b=a.target;M(c("WAWebMediaEditorGeometryRect").create({x:b.x(),y:b.y(),width:t.width,height:t.height,rotation:t.rotation,scale:t.scale}))}else w(t,a)},V=function(a){if(!C)return;var b=d("WAWebMediaEditorUtilsKonva").getRotationFromGroup(a);a=d("WAWebMediaEditorUtilsKonva").getScaleFromGroup(a);z(t,b,a,L);O&&M(null)},W=function(a){if(!C||!O)return;a=a.target;a.width(a.width()*a.scaleX());a.height(a.height()*a.scaleY());a.scaleX(1);a.scaleY(1);var b=c("WAWebMediaEditorGeometryRect").create({x:R+a.x(),y:S+a.y(),width:a.width(),height:a.height(),rotation:a.rotation(),scale:t.scale});a.x(0);a.y(0);M(b)},da=function(a){if(!t.editable)return;a.cancelBubble=!0;y(t)},ea=function(a){var b={x:{min:0,max:G},y:{min:0,max:F}};O&&(e===0?(b.x.max-=T*B,b.y.max-=U*B):e===90?(b.x.min+=U*B,b.y.max-=T*B):e===180?(b.x.min+=T*B,b.y.min+=U*B):(b.x.max-=U*B,b.y.min+=T*B));a.x<b.x.min?a.x=b.x.min:a.x>b.x.max&&(a.x=b.x.max);a.y<b.y.min?a.y=b.y.min:a.y>b.y.max&&(a.y=b.y.max);return a},X,Y,Z,$;if(g&&C&&!h){Y=j.jsx(c("WAWebMediaEditorCanvasSelectedState.react"),{layer:t,borderRadius:b,frame:L});var fa=function(a,b){var f=b.width/B,g=b.height/B;if(t instanceof d("WAWebMediaEditorLayersText").TextLayer&&(f<=p||g<=p)||f<=o||g<=o)return a;if(O){c("WAWebMediaEditorUtilsRemoveBoundBoxRotation")(b,e);c("WAWebMediaEditorUtilsRemoveBoundBoxRotation")(a,e);f={x:{min:0,max:G-b.width},y:{min:0,max:F-b.height}};b.x<f.x.min?(b.width-=f.x.min-b.x,b.x=f.x.min):b.x>f.x.max&&(b.width-=b.x-f.x.max);b.y<f.y.min?(b.height-=f.y.min-b.y,b.y=f.y.min):b.y>f.y.max&&(b.height-=b.y-f.y.max);c("WAWebMediaEditorUtilsRemoveBoundBoxRotation")(b,e,!0);c("WAWebMediaEditorUtilsRemoveBoundBoxRotation")(a,e,!0)}return b};$=j.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Transformer,{ref:a,anchorStroke:"blue",anchorFill:"white",anchorSize:8,anchorCornerRadius:4,borderEnabled:!1,centeredScaling:!O,enabledAnchors:O?["top-left","top-center","top-right","middle-left","middle-right","bottom-left","bottom-center","bottom-right"]:["bottom-right"],resizeEnabled:!0,rotateAnchorOffset:12,rotateEnabled:!O,rotationSnaps:n,ignoreStroke:!0,rotationSnapTolerance:10,boundBoxFunc:fa,keepRatio:!O},"transformer")}g&&J&&!C&&(Z=j.jsx(c("WAWebMediaEditorCanvasHoveredState.react"),{layer:t,borderRadius:b}));t instanceof d("WAWebMediaEditorLayersImage").ImageLayer?X=j.jsx(c("WAWebMediaEditorCanvasImage.react"),{layer:t}):t instanceof d("WAWebMediaEditorLayersBlur").BlurLayer?X=j.jsx(c("WAWebMediaEditorCanvasBlur.react"),{layer:t,scale:B,frame:L,selectedNodeRef:C?E:null,showPadding:N.canEditBackground,onTransformStart:function(){return A(t)},onTransformEnd:V,onTransform:W}):t instanceof d("WAWebMediaEditorLayersDraw").DrawLayer?t.type===d("WAWebMediaEditorLayersDraw").DrawLayerType.Paint?X=j.jsx(c("WAWebMediaEditorCanvasPaint"),{layer:t}):t.type===d("WAWebMediaEditorLayersDraw").DrawLayerType.Outline&&(X=j.jsx(d("WAWebMediaEditorCanvasOutline.react").Outline,{layer:t,dimension:f})):t instanceof d("WAWebMediaEditorLayersText").TextLayer&&!h&&(X=j.jsx(c("WAWebMediaEditorCanvasText.react"),{layer:t,shadow:H}));i&&(X=j.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Rect,{width:t.width,height:t.height}));l(function(){h&&K(!1)},[h,K]);a=null;C&&(O?a=D:a=I);return j.jsxs(j.Fragment,{children:[j.jsxs(d("WAWebMediaEditorUtilsReactKonvaCore").Group,{ref:a,x:O?R:Q.x,y:O?S:Q.y,offsetX:O?0:T/2,offsetY:O?0:U/2,width:T,height:U,rotation:t.rotation,scaleX:t.scale,scaleY:t.scale,draggable:g,dragBoundFunc:ea,onMouseEnter:P,onMouseLeave:aa,onMouseDown:da,onDblClick:function(){return u(t)},onDragStart:function(){return x(t)},onDragEnd:ba,onDragMove:ca,onTransformStart:function(){return A(t)},onTransformEnd:V,onTransform:W,children:[X,Y,Z]}),$]})}a.displayName=a.name+" [from "+f.id+"]";g.CanvasLayer=a}),98);
__d("useWAWebIsMouseDownDrag",["react","useWAWebListener"],(function(a,b,c,d,e,f,g){var h;b=h||d("react");var i=b.useCallback,j=b.useRef;function a(a,b){a===void 0&&(a=200);b===void 0&&(b=window);var c=j(null);d("useWAWebListener").useListener(b,"mousedown",function(){c.current=self.performance.now()});d("useWAWebListener").useListener(b,"mouseup",function(){c.current=null});b=i(function(){var b=c.current;return b!=null&&self.performance.now()-b>=a},[a]);return b}g["default"]=a}),98);
__d("WAWebMediaEditorCanvasUseDraw",["WAWebMediaEditorUtilsKonva","react","useWAWebForceUpdate","useWAWebIsMouseDownDrag","useWAWebListener"],(function(a,b,c,d,e,f,g){var h;b=h||d("react");var i=b.useEffect,j=b.useRef,k=b.useState;function a(a){var b=a.onDrawStart,e=a.onDrawEnd,f=a.onDone,g=a.onMouseMove,h=a.data,l=a.minPointDistance,m=l===void 0?0:l;l=a.clickThreshold;l=l===void 0?0:l;var n=a.boundToStage,o=n===void 0?!1:n,p=a.pathStyle,q=a.stage;n=a.doneTargets;var r=n===void 0?{}:n;a=k();n=a[0];var s=a[1],t=j([]),u=j(!1),v=c("useWAWebForceUpdate")(),w=c("useWAWebIsMouseDownDrag")(l),x=j(!1);a=function(a){var c;b==null?void 0:b();if((c=r.mousedown)==null?void 0:c.includes(a.target.name())){f==null?void 0:f();return}c=d("WAWebMediaEditorUtilsKonva").getPointFromStage(a.evt,q,o);t.current.push(c);u.current=!0;v()};l=function(a){var b;b=((b=r.mouseup)==null?void 0:b.includes(a.target.name()))===!0;a=t.current.length===1;b&&!a&&(x.current=!0)};var y=function(a){u.current=!1;if(t.current.length!==0){a=t.current.map(function(a){return h.toCanvasPoint(a)});e(babelHelpers["extends"]({points:a},p));t.current=[];v()}},z=function(a){g==null?void 0:g(a)},A=function(a){var b=d("WAWebMediaEditorUtilsKonva").getPointFromStage(a,q,o),c=o&&u.current;s(c?d("WAWebMediaEditorUtilsKonva").getPointFromStage(a,q,!0):b);if(u.current){c=t.current;a=c[c.length-1];(!a||a.distance(b)>=m&&w()||d("WAWebMediaEditorUtilsKonva").isStageCorner(b,q))&&c.push(b)}};d("useWAWebListener").useListener(window,"mouseup",y);d("useWAWebListener").useListener(window,"mousemove",A);i(function(){x.current&&(f==null?void 0:f(),x.current=!1)});y={onMouseDown:a,onMouseUp:l,onMouseMove:z};return{cursorPosition:n,points:t.current,handlers:y}}g["default"]=a}),98);
__d("WAWebMediaEditorCanvasOutlineOverlay.react",["WAWebConstantsDeprecated","WAWebMediaEditorCanvasUseDraw","WAWebMediaEditorUtilsColor","WAWebMediaEditorUtilsReactKonvaCore","cr:4986","lodash","react"],(function(a,b,c,d,e,f,g){var h,i;b=i||d("react");var j=h||(h=c("react"));e=b.forwardRef;var k=b.useEffect,l=b.useImperativeHandle,m=b.useRef,n=12,o=3,p="#FA6533",q=12,r=6,s="dot-first",t="dot-last";function a(a,b){var e=a.width,f=a.height,g=a.scale,h=a.data,i=a.smoothing,v=a.onDrawEnd,w=a.onDone,x=a.onCursorChange,y=m(),z=m(!1),A=m("crosshair");k(function(){x("crosshair")},[]);l(b,function(){return{show:function(){var a;(a=y.current)==null?void 0:a.show()},hide:function(){var a;(a=y.current)==null?void 0:a.hide()}}});a=function(){z.current=!0};b=function(a){z.current=!1,v(a)};var B=function(a){a=a.target.name()===s;var b=z.current;a=a&&!b?"pointer":"crosshair";a!==A.current&&(A.current=a,x(a))};b=c("WAWebMediaEditorCanvasUseDraw")({onDrawStart:a,onDrawEnd:b,onDone:w,onMouseMove:B,data:h,stage:(a=y.current)==null?void 0:a.getStage(),minPointDistance:n/g,clickThreshold:200,boundToStage:!0,doneTargets:{mousedown:[s,t],mouseup:[s]},pathStyle:{color:d("WAWebMediaEditorUtilsColor").Color.White,thickness:0,smoothing:i}});w=b.cursorPosition;B=b.points;a=b.handlers;b=h.outlineLayer.getAllPoints().map(function(a){return h.toScreenPoint(a)});!i&&b.length&&b.push(b[b.length-1]);var C=Boolean(B.length);C&&b.push(B[0]);b.push.apply(b,B);C=[].concat(b);!i&&C.length&&C.push(C[C.length-1]);w&&C.push(w);B=c("lodash").flatMap(C,function(a){return[a.x,a.y]});i=o/g;w=[q/g,r/g];return j.jsxs(d("WAWebMediaEditorUtilsReactKonvaCore").Layer,babelHelpers["extends"]({ref:y},a,{width:e,height:f,children:[j.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Rect,{x:0,y:0,width:e,height:f,fill:"rgba(0,0,0,0)"}),j.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Line,{points:B,lineCap:"round",lineJoin:"round",stroke:p,strokeWidth:i,dash:w,tension:c("WAWebConstantsDeprecated").MEDIA_EDITOR_OUTLINE_TENSION}),j.jsx(u,{points:b,scale:g})]}),"paintCursor")}a.displayName=a.name+" [from "+f.id+"]";b=e(a);function u(a){var b=a.points;a=a.scale;if(!b.length)return null;var c=b[0];b=b[b.length-1];a=o/a;var e;return j.jsxs(j.Fragment,{children:[e,j.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Circle,{name:t,x:b.x,y:b.y,radius:a}),j.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Circle,{x:c.x,y:c.y,radius:a,stroke:"white"}),j.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Circle,{name:s,x:c.x,y:c.y,radius:a*4})]})}u.displayName=u.name+" [from "+f.id+"]";g["default"]=b}),98);
__d("WAWebMediaEditorCanvasPaintOverlay.react",["WAWebMediaEditorCanvasUseDraw","WAWebMediaEditorUtilsReactKonvaCore","lodash","react"],(function(a,b,c,d,e,f,g){var h,i;a=i||d("react");var j=h||(h=c("react"));b=a.forwardRef;var k=a.useImperativeHandle,l=a.useRef;e=function(a,b){var e=a.width,f=a.height;a.scale;var g=a.pathStyle,h=a.data;a=a.onDrawEnd;var i=l(),m=l();k(b,function(){return{toggleCursor:function(a){var b=m.current;if(!b)return;a?b.show():b.hide()}}});a=c("WAWebMediaEditorCanvasUseDraw")({onDrawEnd:a,data:h,pathStyle:g,stage:(b=i.current)==null?void 0:b.getStage()});h=a.cursorPosition;b=a.points;a=a.handlers;b=c("lodash").flatMap(b,function(a){return[a.x,a.y]});return j.jsxs(d("WAWebMediaEditorUtilsReactKonvaCore").Layer,babelHelpers["extends"]({ref:i},a,{width:e,height:f,children:[j.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Rect,{width:e,height:f,fill:"rgba(0, 0, 0, 0)"}),h&&j.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Circle,{ref:m,x:h.x,y:h.y,radius:g.thickness/2,fill:g.color.toRgbaString()}),j.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Line,{points:b,lineCap:"round",lineJoin:"round",stroke:g.color.toRgbaString(),strokeWidth:g.thickness})]}),"paintCursor")};f=b(e);g["default"]=f}),98);
__d("WAWebMediaEditorCanvasTransparentGrid.react",["WAWebMediaEditorUtilsColor","WAWebMediaEditorUtilsReactKonvaCore","react"],(function(a,b,c,d,e,f,g){var h,i;b=i||d("react");var j=h||(h=c("react"));e=b.forwardRef;var k=b.useEffect,l=b.useImperativeHandle,m=b.useMemo,n=b.useRef,o=20,p=new(d("WAWebMediaEditorUtilsColor").Color)(230,230,230).toRgbString(),q=new(d("WAWebMediaEditorUtilsColor").Color)(255,255,255).toRgbString();function a(a,b){var c=a.width,e=a.height,f=n();l(b,function(){return{hide:function(){var a;(a=f.current)==null?void 0:a.hide()},show:function(){var a;(a=f.current)==null?void 0:a.show()}}});var g=m(function(){var a=document.createElement("canvas");a.width=Math.max(c,1);a.height=Math.max(e,1);return a},[c,e]);k(function(){var a=g.getContext("2d");a.clearRect(0,0,g.width,g.height);var b=o,d=Math.ceil(c/b),h=Math.ceil(e/b);for(var i=0;i<h;i++)for(var j=0;j<d;j++){var k=(i+j)%2===0?q:p;a.beginPath();a.rect(j*b,i*b,b,b);a.fillStyle=k;a.fill()}(k=f.current)==null?void 0:(j=k.getLayer())==null?void 0:j.batchDraw()},[g,c,e]);return j.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Image,{ref:f,width:c,height:e,image:g})}a.displayName=a.name+" [from "+f.id+"]";c=e(a);g["default"]=c}),98);
__d("WAWebMediaEditorCanvas.react",["WAWebMediaEditorCanvasBackground.react","WAWebMediaEditorCanvasContext","WAWebMediaEditorCanvasEditableText.react","WAWebMediaEditorCanvasLayer.react","WAWebMediaEditorCanvasOutlineOverlay.react","WAWebMediaEditorCanvasPaintOverlay.react","WAWebMediaEditorCanvasTransparentGrid.react","WAWebMediaEditorEnumsThickness","WAWebMediaEditorLayersBlur","WAWebMediaEditorLayersText","WAWebMediaEditorUtilsColor","WAWebMediaEditorUtilsKonva","WAWebMediaEditorUtilsReactKonvaCore","err","lodash","react"],(function(a,b,c,d,e,f,g){var h,i;b=i||d("react");var j=h||(h=c("react"));e=b.forwardRef;var k=b.useEffect,l=b.useImperativeHandle,m=b.useRef,n=b.useState,o=15,p=1,q="#52F818";function r(a){var b=a.canEditBackground,c=a.canEditLayer;a.canvasContextRef;var e=a.currentlyEditingTextLayer,f=a.data,g=a.dragging,h=a.inOutlineMode,i=a.inPaintMode,k=a.isEditingBackground,l=a.onDoubleClick,m=a.onDragEnd,n=a.onDragMove,o=a.onDragStart,p=a.onSelect,q=a.onTransformEnd,r=a.onTransformStart,s=a.scale,u=a.selectedGroupRef,v=a.selectedNodeRef,w=a.transformerRef,x=!1;return j.jsxs(j.Fragment,{children:[b&&f.background&&j.jsx(t,{layer:f.background,hidden:!k(),data:f,scale:s,dragging:g,canEditLayer:c,inPaintMode:i,inOutlineMode:h,currentlyEditingTextLayer:e,selectedGroupRef:u,selectedNodeRef:v,transformerRef:w,onSelect:p,onDoubleClick:l,onDragMove:n,onDragStart:o,onDragEnd:m,onTransformStart:r,onTransformEnd:q}),!k()&&f.layers.filter(function(a){return a instanceof d("WAWebMediaEditorLayersBlur").BlurLayer}).map(function(a){return j.jsx(t,{layer:a,hidden:x,data:f,scale:s,dragging:g,canEditLayer:c,inPaintMode:i,inOutlineMode:h,currentlyEditingTextLayer:e,selectedGroupRef:u,selectedNodeRef:v,transformerRef:w,onSelect:p,onDoubleClick:l,onDragMove:n,onDragStart:o,onDragEnd:m,onTransformStart:r,onTransformEnd:q},String(a.id))}),f.paintLayer&&j.jsx(t,{layer:f.paintLayer,hidden:x,data:f,scale:s,dragging:g,canEditLayer:c,inPaintMode:i,inOutlineMode:h,currentlyEditingTextLayer:e,selectedGroupRef:u,selectedNodeRef:v,transformerRef:w,onSelect:p,onDoubleClick:l,onDragMove:n,onDragStart:o,onDragEnd:m,onTransformStart:r,onTransformEnd:q}),f.layers.filter(function(a){return!(a instanceof d("WAWebMediaEditorLayersBlur").BlurLayer)}).map(function(a){return j.jsx(t,{layer:a,hidden:x,data:f,scale:s,dragging:g,canEditLayer:c,inPaintMode:i,inOutlineMode:h,currentlyEditingTextLayer:e,selectedGroupRef:u,selectedNodeRef:v,transformerRef:w,onSelect:p,onDoubleClick:l,onDragMove:n,onDragStart:o,onDragEnd:m,onTransformStart:r,onTransformEnd:q},String(a.id))})]})}r.displayName=r.name+" [from "+f.id+"]";function s(a){var b=a.getStage,c=a.guides,e=a.guidesLayerRef;a=a.scale;var f=c.vertical;c=c.horizontal;if(!f&&!c)return null;b=b();return j.jsxs(d("WAWebMediaEditorUtilsReactKonvaCore").Layer,{ref:e,children:[f&&j.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Line,{x:f.position/a,y:0,points:[0,0,0,b.height()/a],stroke:q,strokeWidth:p,strokeScaleEnabled:!1},"vertical"),c&&j.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Line,{x:0,y:c.position/a,points:[0,0,b.width()/a,0],stroke:q,strokeWidth:p,strokeScaleEnabled:!1},"horizontal")]},"guides")}s.displayName=s.name+" [from "+f.id+"]";function t(a){var b=a.canEditLayer,c=a.currentlyEditingTextLayer,e=a.data,f=a.dragging,g=a.hidden,h=a.inOutlineMode,i=a.inPaintMode,k=a.layer,l=a.onDoubleClick,m=a.onDragEnd,n=a.onDragMove,o=a.onDragStart,p=a.onSelect,q=a.onTransformEnd,r=a.onTransformStart,s=a.scale,t=a.selectedGroupRef,u=a.selectedNodeRef,v=a.transformerRef;a=e.selectedLayer===k&&c!==k;var w=e.screenWidth*s,x=e.screenHeight*s,y=e.cropSize.dimension;b=k.editable&&b&&!i&&!h&&!c;return j.jsx(d("WAWebMediaEditorCanvasLayer.react").CanvasLayer,{layer:k,scale:s,canvasRotation:e.rotation,textBackgroundShadow:!f,dimension:y,editing:c===k,selected:a,editable:b,stageHeight:x,stageWidth:w,selectedGroupRef:function(a){t.current=a},selectedNodeRef:function(a){u.current=a},transformerRef:function(a){v.current=a},onSelect:p,onDoubleClick:l,onDragMove:n,onDragStart:o,onDragEnd:m,onTransformStart:r,onTransformEnd:q,hidden:g},String(k.id))}t.displayName=t.name+" [from "+f.id+"]";function u(a){var b=a.data,c=a.draftTextLayer,e=a.editableTextRef,f=a.onLayerUnselect,g=a.onTextInputOutsideClick,h=a.onTextSave;a=a.scale;if(!c)return null;b=b.toScreenPoint(c.frame.getCenter());return j.jsx(d("WAWebMediaEditorCanvasEditableText.react").EditableText,{ref:e,layer:c,layerCenter:b,text:c.text,scale:a,onSave:h,onUnselect:f,onOutsideClick:g})}u.displayName=u.name+" [from "+f.id+"]";function a(a,b){var e=a.inPaintMode,f=e===void 0?!1:e;e=a.inOutlineMode;var g=e===void 0?!1:e;e=a.paintColor;e=e===void 0?d("WAWebMediaEditorUtilsColor").Color.White:e;var h=a.paintThickness;h=h===void 0?d("WAWebMediaEditorEnumsThickness").ThicknessType.MEDIUM:h;var i=a.outlineSmoothing;i=i===void 0?!0:i;var p=a.canEditLayer;p=p===void 0?!0:p;var q=a.canEditBackground;q=q===void 0?!1:q;var t=a.outlineEnabled;t=t===void 0?!1:t;var v=a.currentlyEditingTextLayer,w=v===void 0?null:v;v=a.draftTextLayer;var x=v===void 0?null:v;v=a.onLayerSelect;var y=v===void 0?function(a){}:v;v=a.onLayerUnselect;var z=v===void 0?function(){}:v;v=a.onLayerTranslate;var aa=v===void 0?function(a,b){}:v;v=a.onLayerTransform;var ba=v===void 0?function(b,c,a,d){}:v;v=a.onTextEditingStart;var ca=v===void 0?function(a){}:v;v=a.onTextEditingEnd;var da=v===void 0?function(a,b){}:v;v=a.onTextInputOutsideClick;v=v===void 0?function(){return!0}:v;var A=a.onPaintDrawEnd;A=A===void 0?function(){}:A;var B=a.onOutlineDrawEnd;B=B===void 0?function(){}:B;var C=a.onOutlineDone;C=C===void 0?function(){}:C;var D=a.scale,E=a.data,F=m(null),G=m(null),H=m(null),I=m(null),J=m(null),K=m(null),L=m(null),M=m(null),N=m(null),O=m(null),P=m({dragging:!1,transforming:!1,editing:!1,canEditBackground:q}),Q=n({horizontal:null,vertical:null}),R=Q[0],S=Q[1];Q=n(!1);var T=Q[0],U=Q[1];Q=n(!1);var ea=Q[0],V=Q[1];Q=n("crosshair");var fa=Q[0],ga=Q[1],ha=function(){var a;(a=I.current)==null?void 0:a.hide();(a=G.current)==null?void 0:(a=a.getChildren()[1])==null?void 0:a.hide();(a=G.current)==null?void 0:(a=a.getChildren()[2])==null?void 0:a.hide();(a=J.current)==null?void 0:a.hide();(a=L.current)==null?void 0:a.toggleCursor(!1);(a=M.current)==null?void 0:a.hide();(a=I.current)==null?void 0:(a=a.getLayer())==null?void 0:a.batchDraw();(a=K.current)==null?void 0:a.hide()},ia=function(){var a;(a=I.current)==null?void 0:a.show();(a=G.current)==null?void 0:(a=a.getChildren()[1])==null?void 0:a.show();(a=G.current)==null?void 0:(a=a.getChildren()[2])==null?void 0:a.show();(a=J.current)==null?void 0:a.show();(a=L.current)==null?void 0:a.toggleCursor(!0);(a=M.current)==null?void 0:a.show();(a=I.current)==null?void 0:(a=a.getLayer())==null?void 0:a.batchDraw();(a=K.current)==null?void 0:a.show()};Q=function(a){!w&&!d("WAWebMediaEditorUtilsKonva").isEventOnAnchor(a)&&z()};var ja=function(){P.current.dragging=!0,U(!0)},ka=function(a,b){P.current.dragging=!1,aa(a,b),S({vertical:null,horizontal:null}),U(!1)},la=function(){P.current.transforming=!0,V(!0)},ma=function(a,b,c,d){P.current.transforming=!1,ba(a,b,c,d),V(!1)},W=function(){if(!F.current)throw c("err")("MediaEditorCanvas:stage is not initialized");return F.current.getStage()},na=function(a,b){a=[{position:W().width()/2,orientation:"v"},{position:W().height()/2,orientation:"h"}];b=b.target;var d=b.absolutePosition(),e=[{position:d.y,orientation:"h"},{position:d.x,orientation:"v"}],f=[];for(var g=0;g<e.length;g++){var h=e[g];for(var i=0;i<a.length;i++){var j=a[i];if(h.orientation!==j.orientation)continue;var k=Math.abs(j.position-h.position);k<=o&&f.push({guide:j,distance:k})}}f.sort(function(a,b){return a.distance-b.distance});j=null;k=null;for(i=0;i<f.length;i++){h=f[i];g=h.guide;g.orientation==="v"&&!j?j=g:g.orientation==="h"&&!k&&(k=g)}b.absolutePosition({x:(e=(a=j)==null?void 0:a.position)!=null?e:d.x,y:(g=(h=k)==null?void 0:h.position)!=null?g:d.y});i={horizontal:k,vertical:j};c("lodash").isEqual(R,i)||S(i)},oa=function(a){a instanceof d("WAWebMediaEditorLayersText").TextLayer&&ca(a)},pa=function(a){x&&da(x,a)},qa=function(a){y(a)},ra=function(a){ga(a)};k(function(){if(H.current){var a;(a=I.current)==null?void 0:a.nodes([H.current]);(a=I.current)==null?void 0:(a=a.getLayer())==null?void 0:a.batchDraw()}});var sa=function(){ha();var a=W().toDataURL({mimeType:"image/png",quality:1,pixelRatio:1/D});ia();return a},ta=function(){var a;return(a=O.current)==null?void 0:a.toCanvas()},ua=function(){var a;(a=N.current)==null?void 0:a.save()},X=function(){return(T||ea)&&E.selectedLayer===E.background},va=function(){if(f)return"none";return g?fa:"default"};l(b,function(){return{getStage:W,getDataUrl:sa,endTextEditing:ua,getBackground:ta}});b=E.screenWidth/2;var Y=E.screenHeight/2,Z=E.toScreenPoint(E.cropCenter),$=E.toScreenPoint(E.canvasCenter);b=b-(Z.x-$.x);Y=Y-(Z.y-$.y);Z=t&&!g;$=E.cropSize.dimension;return j.jsxs(j.Fragment,{children:[j.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Stage,{ref:F,width:E.screenWidth*D,height:E.screenHeight*D,onMouseDown:Q,scaleX:D,scaleY:D,style:babelHelpers["extends"]({cursor:va()},(Q=a.style)!=null?Q:{}),children:j.jsxs(d("WAWebMediaEditorCanvasContext").CanvasContext.Provider,{value:P.current,children:[t&&j.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Layer,{x:b,y:Y,offsetX:E.width/2,offsetY:E.height/2,rotation:E.rotation,children:j.jsx(c("WAWebMediaEditorCanvasTransparentGrid.react"),{ref:K,width:E.width,height:E.height})},"transparent"),j.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Layer,{x:b,y:Y,offsetX:E.width/2,offsetY:E.height/2,rotation:E.rotation,children:j.jsx(c("WAWebMediaEditorCanvasBackground.react"),{ref:O,layer:E.background,outlineLayer:E.outlineLayer,dimension:$,removeBackground:Z,scale:D,visible:!X()})},"background"),j.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Layer,{x:b,y:Y,offsetX:E.width/2,offsetY:E.height/2,rotation:E.rotation,children:j.jsx(r,{canEditBackground:q,data:E,scale:D,canvasContextRef:P,isEditingBackground:X,canEditLayer:p,dragging:T,inPaintMode:f,inOutlineMode:g,currentlyEditingTextLayer:w,selectedGroupRef:G,selectedNodeRef:H,transformerRef:I,onSelect:qa,onDoubleClick:oa,onDragMove:na,onDragStart:ja,onDragEnd:ka,onTransformStart:la,onTransformEnd:ma})},"edits"),j.jsx(s,{guides:R,scale:D,guidesLayerRef:J,getStage:W}),f&&j.jsx(c("WAWebMediaEditorCanvasPaintOverlay.react"),{ref:L,width:E.screenWidth,height:E.screenHeight,scale:D,pathStyle:{color:e,thickness:d("WAWebMediaEditorEnumsThickness").getThicknessValue(h),smoothing:!1},data:E,onDrawEnd:A}),g&&j.jsx(c("WAWebMediaEditorCanvasOutlineOverlay.react"),{ref:M,width:E.screenWidth,height:E.screenHeight,scale:D,data:E,smoothing:i,onDrawEnd:B,onDone:C,onCursorChange:ra})]})}),j.jsx(u,{draftTextLayer:x,data:E,editableTextRef:N,scale:D,onTextSave:pa,onLayerUnselect:z,onTextInputOutsideClick:v})]})}b=e(a);g["default"]=b}),98);
__d("WAWebMediaEditorCaptionInput.react",["fbt","WAUnicodeUtils","WAWebAttachMediaViewOnce.react","WAWebChatPreferenceCollection","WAWebComposeBoxUtils","WAWebConstantsDeprecated","WAWebDropdown.react","WAWebElevatedPushNamesFlag","WAWebEmojiInputIcon","WAWebEmojiPanel.react","WAWebEmojiSuggestions.react","WAWebFlex.react","WAWebGroupType","WAWebL10N","WAWebMentionSuggestions.react","WAWebRichTextInput.react","WAWebRichTextInputGatingUtils","WAWebSuggestionsPanelContainer.react","WAWebUimUie.react","WAWebUimUieMenu.react","WAWebUnstyledButton.react","WAWebUseIsKeyboardUser","WAWebXAltIcon","react","stylex","useWAWebModelValues"],(function(a,b,c,d,e,f,g,h){var i,j,k;b=k||d("react");var l=i||(i=c("react")),m=b.useEffect,n=b.useRef,o=b.useState,p={container:{position:"x1n2onr6",width:"xh8yej3",maxWidth:"xic84rp",marginTop:"xdj266r",marginEnd:"x1ap2d02",marginBottom:"xat24cr",marginStart:"x1xcg2w3",$$css:!0},inputContainer:{boxSizing:"x9f619",width:"xh8yej3",minHeight:"x1ba4aug",paddingTop:"x1iorvi4",paddingEnd:"x1pi30zi",paddingBottom:"xjkvuk6",paddingStart:"x1swvt13",backgroundColor:"x7nbn6e",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",$$css:!0},inputContainerForVideo:{backgroundColor:"xxntkus",$$css:!0},inputContainerForDoc:{backgroundColor:"xs4cid0",$$css:!0},buttonContainer:{minHeight:"x1rj1pf4",$$css:!0},inputButton:{marginStart:"x1i64zmx",marginLeft:null,marginRight:null,color:"xt16idv",$$css:!0},charCounter:{marginStart:"x1i64zmx",marginLeft:null,marginRight:null,fontSize:"x1f6kntn",color:"xiqmkuo",$$css:!0},suggestionsPositioner:{position:"x10l6tqk",end:"x4r51d9",left:null,right:null,bottom:"x10w3d4m",start:"xi8xln7",height:"xbktue8",paddingEnd:"x1iji9kk",paddingLeft:null,paddingRight:null,paddingStart:"x1sln4lm",overflowX:"x6ikm8r",overflowY:"x10wlt62",color:"xzwifym",pointerEvents:"x47corl",$$css:!0},suggestionsContainer:{position:"x10l6tqk",end:"x160vmok",left:null,right:null,bottom:"x1c7jfne",start:"xoyjkpr",$$css:!0},secondaryButtonContainer:{marginStart:"x1i64zmx",marginLeft:null,marginRight:null,$$css:!0},richTextInput:{width:"xh8yej3",marginTop:"x1k70j0n",marginEnd:"x11i5rnm",marginBottom:"xzueoph",marginStart:"x1mh8g0r",minHeight:"xisnujt",color:"xzwifym",wordWrap:"x1vvkbs",whiteSpace:"x126k92a",userSelect:"x1hx0egp",$$css:!0},richTextInputText:{fontSize:"x1lkfr7t",$$css:!0}};function a(a){var b=a.chat,e=a.caption,f=a.setCaptionInputRef,g=a.onEnter,i=n(null),k=n(null),r=o(null),s=r[0],t=r[1];r=c("WAWebUseIsKeyboardUser")();var u=r.isKeyboardUser,v=function(){var a;(a=i.current)==null?void 0:a.focus()};r=d("useWAWebModelValues").useModelValues(c("WAWebChatPreferenceCollection").getDefault(),["spellcheck","transformTextEmoji","enterIsSend"]);m(function(){v()},[]);var w=function(a){i.current=a,f(a)},x=function(a){(a=i.current)==null?void 0:a.reset();v()},y=function(){t(null),u&&v()},z=function(a){var b=i.current;b&&(b.focus(),b.replaceSelection(a));u&&y()},A=function(a){a.preventDefault();a.stopPropagation();var b=l.jsx(d("WAWebEmojiPanel.react").EmojiPanel,{onEmoji:z,onFocusNext:v,onFocusPrev:v});t({menu:b,dirY:d("WAWebDropdown.react").DirY.TOP,type:d("WAWebDropdown.react").MenuType.EmojiPicker,anchor:a.target});v()},B=function(a){var b;((b=i.current)==null?void 0:b.isFocused())?g(a):g()},C=d("WAUnicodeUtils").numCodepoints(a.caption||""),D=c("WAWebConstantsDeprecated").MAX_CAPTION_LENGTH-C<50;x=e!=null&&e!==""?l.jsx(c("WAWebUnstyledButton.react"),{xstyle:p.inputButton,onClick:x,title:h._("__JHASH__q2QVQr1smB2__JHASH__"),children:l.jsx(d("WAWebXAltIcon").XAltIcon,{})}):null;D=D&&l.jsx("div",{className:"x1i64zmx x1f6kntn xiqmkuo",children:c("WAWebL10N").n(c("WAWebConstantsDeprecated").MAX_CAPTION_LENGTH-C)});C=null;s&&(C=l.jsx(d("WAWebUimUie.react").UIE,{displayName:"EmojiPicker",escapable:!0,popable:!0,dismissOnWindowResize:!0,ref:k,requestDismiss:y,children:l.jsx(c("WAWebUimUieMenu.react"),{contextMenu:s})}));k=null;a.theme!=="document"&&!b.id.isStatusV3()&&!b.isNewsletter&&!a.viewOnceDisabled&&(k=l.jsx("div",{className:"x1i64zmx",children:l.jsx(c("WAWebAttachMediaViewOnce.react"),{disabled:!1,isOn:Boolean(a.viewOnce),mediaType:a.msgType,onChange:a.onToggleViewOnce})}));s=a.chat.groupMetadata;((b=a.chat.groupMetadata)==null?void 0:b.groupType)===d("WAWebGroupType").GroupType.LINKED_ANNOUNCEMENT_GROUP&&!d("WAWebMentionSuggestions.react").shouldEnableGroupMentions(s)&&(s=null);b=d("WAWebComposeBoxUtils").getComposeBoxPlaceholderText(a.chat);w=l.jsx(d("WAWebRichTextInput.react").RichTextInput,{ref:w,testid:void 0,initialText:e,placeholder:b,title:b,onChange:function(b){return a.onChange(b.parsableText)},onEnter:B,onFiles:a.onFiles,maxLength:c("WAWebConstantsDeprecated").MAX_CAPTION_LENGTH,maxVisibleLines:5,multiline:!0,spellCheck:d("WAWebRichTextInputGatingUtils").improvedMessageComposerEnabled()?r.spellcheck:!0,transformTextEmoji:d("WAWebRichTextInputGatingUtils").improvedMessageComposerEnabled()?r.transformTextEmoji:!0,enterIsNewLine:d("WAWebRichTextInputGatingUtils").improvedMessageComposerEnabled()?!r.enterIsSend:!1,focusOnMount:!0,textFormatEnabled:!0,groupMetadata:s,xstyle:p.richTextInput,textXstyle:p.richTextInputText,bulletPointsEnabled:d("WAWebRichTextInputGatingUtils").expandedTextFormattingPreviewEnabled(),numberedListEnabled:d("WAWebRichTextInputGatingUtils").expandedTextFormattingPreviewEnabled(),inlineCodeEnabled:d("WAWebRichTextInputGatingUtils").expandedTextFormattingPreviewEnabled(),blockQuoteEnabled:d("WAWebRichTextInputGatingUtils").expandedTextFormattingPreviewEnabled(),internLinksEnabled:a.internLinksEnabled!==!1&&d("WAWebRichTextInputGatingUtils").improvedMessageComposerEnabled(),phoneNumbersEnabled:a.phoneNumbersEnabled!==!1&&d("WAWebRichTextInputGatingUtils").improvedMessageComposerEnabled(),linksEnabled:d("WAWebRichTextInputGatingUtils").improvedMessageComposerEnabled()});var E;b=(e=i.current)==null?void 0:e.editor;b!=null&&(E=l.jsx("div",{className:"x10l6tqk x4r51d9 x10w3d4m xi8xln7 xbktue8 x1iji9kk x1sln4lm x6ikm8r x10wlt62 xzwifym x47corl",children:l.jsxs("div",{className:"x10l6tqk x160vmok x1c7jfne xoyjkpr",children:[l.jsx(d("WAWebMentionSuggestions.react").MentionSuggestions,{kind:d("WAWebSuggestionsPanelContainer.react").SuggestionsPanelKind.MediaEditorCaption,editor:b,groupMetadata:s,elevatedPushNamesEnabled:d("WAWebElevatedPushNamesFlag").elevatedPushNamesM2Enabled(a.chat)}),l.jsx(d("WAWebEmojiSuggestions.react").EmojiSuggestions,{kind:d("WAWebSuggestionsPanelContainer.react").SuggestionsPanelKind.MediaEditorCaption,editor:b})]})}));return l.jsxs(d("WAWebFlex.react").FlexRow,{className:"x1n2onr6 xh8yej3 xic84rp xdj266r x1ap2d02 xat24cr x1xcg2w3",align:"center",justify:"center",children:[E,l.jsxs(d("WAWebFlex.react").FlexRow,{align:"start",className:(j||(j=c("stylex")))(p.inputContainer,a.theme==="document"&&p.inputContainerForDoc,a.theme==="video"&&p.inputContainerForVideo),children:[w,l.jsxs(d("WAWebFlex.react").FlexRow,{xstyle:p.buttonContainer,align:"center",children:[D,x,l.jsx(q,{onClick:A})]})]}),k,C]})}a.displayName=a.name+" [from "+f.id+"]";function q(a){a=a.onClick;return l.jsx(c("WAWebUnstyledButton.react"),{onClick:a,xstyle:p.inputButton,title:h._("__JHASH__KsoeGGTFGmo__JHASH__"),children:l.jsx(d("WAWebEmojiInputIcon").EmojiInputIcon,{})})}q.displayName=q.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebMediaEditorImage.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={container:"_ah9n",header:"_ah9o",headerRight:"_ah9p",canvasContainer:"_ah9q",cropRotateContainer:"_ah9r",closeButton:"_ah9s",closeButtonPlaceholder:"_ah9t",canvas:"_ah9u",footer:"_ah9v",bottomToolbar:"_ah9w",captionInputContainer:"_ah9x",captionInputHidden:"_ah9y"};b=a;g["default"]=b}),98);
__d("WAWebMediaEditorPreviewCropRotate.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={container:"_ajuo",cropperContainer:"_ajup"};b=a;g["default"]=b}),98);
__d("WAWebMediaEditorUtilsSize",[],(function(a,b,c,d,e,f){function a(a,b,c,d){if(a===0||b===0)return 1;if(!c.isEmpty()&&(a>c.width||b>c.height))return Math.min(c.width/a,c.height/b);return!d.isEmpty()&&a<d.width&&b<d.height?Math.min(d.width/a,d.height/b):1}f.calculateContainScale=a}),66);
__d("WAWebMediaEditorPreviewCropRotate.react",["WAWebMediaEditorCanvas.react","WAWebMediaEditorGeometryPoint","WAWebMediaEditorGeometrySize","WAWebMediaEditorPreviewCropRotate.scss","WAWebMediaEditorUtilsReactKonvaCore","WAWebMediaEditorUtilsSize","err","react"],(function(a,b,c,d,e,f,g){var h,i;b=i||d("react");var j=h||(h=c("react")),k=b.useEffect,l=b.useRef,m=new(c("WAWebMediaEditorGeometrySize"))({width:200,height:200}),n=20,o=10,p=10;function a(a){var b=a.containerSize,e=a.cropOrigin,f=a.cropSize,g=a.data,h=a.keepRatio,i=a.onCropChange,u=a.rotation;a=a.sendAsSticker;var v=g.resetCropRotate().setRotation(u),w=l(),x=l(),y=f.width,z=f.height,A=e.x;e=e.y;f=l(f);var B=y/f.current.width,C=z/f.current.height,D=g.width,E=g.height;g=q(D,E,u);var F=g.width,G=g.height;g=new(c("WAWebMediaEditorGeometrySize"))({width:b.width-p*2,height:b.height-p*2});var H=d("WAWebMediaEditorUtilsSize").calculateContainScale(u%180?E:D,u%180?D:E,g,m),I=p/H;b=new(c("WAWebMediaEditorGeometrySize"))({width:D+I*2,height:E+I*2});g=q(b.width,b.height,u);var J=g.width;g=g.height;var K=b.width/2;b=b.height/2;var L=J/2,M=g/2;k(function(){var a=w.current,b=x.current;if(a&&b&&a.nodes().length===0){a.nodes([b]);(a=b.getLayer())==null?void 0:a.batchDraw()}});var N=function(a){a=a.target;var b=Math.round(a.x()),d=Math.round(a.y()),e=Math.min(Math.round(a.width()*a.scaleX()),D-b);a=Math.min(Math.round(a.height()*a.scaleY()),E-d);i(new(c("WAWebMediaEditorGeometryPoint"))({x:b,y:d}),new(c("WAWebMediaEditorGeometrySize"))({width:e,height:a}))},O=function(a,b){var c=D*H+p*2,d=E*H+p*2;a=t(a,c,d,u,-u);b=t(b,c,d,u,-u);Math.round(b.x)<p?(b.x=p,b.width=a.width+(a.x-p)):Math.round(b.width)<n?(b.x=a.x,b.width=a.width):Math.round(b.x+b.width)>Math.round(c)-p&&(b.width=c-b.x-p);Math.round(b.y)<p?(b.y=p,b.height=a.height+(a.y-p)):Math.round(b.height)<n?(b.y=a.y,b.height=a.height):Math.round(b.y+b.height)>Math.round(d)-p&&(b.height=d-b.y-p);return t(b,c,d,0,u)},P=function(a){var b=q(y,z,u),c=b.width;b=b.height;a=r(a.x,a.y,c*H,b*H,u);var d=a.x;a=a.y;d<p?d=p:(d-p)/H+c>F&&(d=Math.round(F-c+I)*H);a<p?a=p:(a-p)/H+b>G&&(a=Math.round(G-b+I)*H);d=s(d,a,c*H,b*H,u);return d},Q=["top-left","top-right","bottom-left","bottom-right"];h||Q.push("top-center","middle-right","middle-left","bottom-center");return j.jsxs("div",{className:c("WAWebMediaEditorPreviewCropRotate.scss").container,children:[j.jsx(c("WAWebMediaEditorCanvas.react"),{data:v,scale:H,canEditLayer:!1,style:{padding:p},outlineEnabled:a}),j.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Stage,{className:c("WAWebMediaEditorPreviewCropRotate.scss").cropperContainer,width:Math.round(J*H),height:Math.round(g*H),scaleX:H,scaleY:H,children:j.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Layer,{rotation:u,offsetX:K,offsetY:b,x:L,y:M,children:j.jsxs(d("WAWebMediaEditorUtilsReactKonvaCore").Group,{x:I,y:I,children:[j.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Rect,{x:0,y:0,width:D,height:E,fill:"black",opacity:.6}),j.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Rect,{ref:x,fill:"red",x:A,y:e,width:f.current.width,height:f.current.height,scaleX:B,scaleY:C,draggable:!0,dragBoundFunc:P,onTransformEnd:N,onDragEnd:N,globalCompositeOperation:"destination-out"}),j.jsx(d("WAWebMediaEditorUtilsReactKonvaCore").Transformer,{ref:w,anchorStroke:"blue",anchorFill:"white",anchorSize:o,anchorCornerRadius:o/2,borderEnabled:!1,centeredScaling:!1,resizeEnabled:!0,rotateEnabled:!1,ignoreStroke:!0,boundBoxFunc:O,keepRatio:h,enabledAnchors:Q},"transformer")]})},"cropper")})]})}a.displayName=a.name+" [from "+f.id+"]";function q(a,b,c){var d=c%180===0?a:b;c=c%180===0?b:a;return{width:d,height:c}}function r(a,b,d,e,f){switch((f%360+360)%360){case 0:return{x:a,y:b};case 90:return{x:a-d,y:b};case 180:return{y:b-e,x:a-d};case 270:return{x:a,y:b-e};default:throw c("err")("Unsupported angle")}}function s(a,b,d,e,f){switch((f%360+360)%360){case 0:return{x:a,y:b};case 90:return{x:a+d,y:b};case 180:return{y:b+e,x:a+d};case 270:return{x:a,y:b+e};default:throw c("err")("Unsupported angle")}}function t(a,b,d,e,f){var g=Math.max(b,d),h=q(b,d,e),i=(g-h.width)/2;h=(g-h.height)/2;i=new(c("WAWebMediaEditorGeometryPoint"))({x:a.x+i,y:a.y+h});h=new(c("WAWebMediaEditorGeometryPoint"))({x:g/2,y:g/2});i=i.rotate(h,f);h=q(b,d,e+f);b=(g-h.width)/2;d=(g-h.height)/2;return{x:i.x-b,y:i.y-d,width:a.width,height:a.height,rotation:a.rotation}}g["default"]=a}),98);
__d("WAWebMediaEditorToolbarButton.react",["WAWebChevronDownAltIcon","WAWebClassnames","WAWebFlex.react","WAWebUnstyledButton.react","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j,k=j||c("react");b=(h||(h=d("react"))).forwardRef;var l={container:{boxSizing:"x9f619",display:"x78zum5",flexDirection:"x1q0g3np",alignItems:"x6s0dn4",paddingTop:"x1y1aw1k",paddingEnd:"x1sxyh0",paddingBottom:"xwib8y2",paddingStart:"xurb0ha",fontSize:"x6prxxf",lineHeight:"x152skdk",cursor:"x1ypdohk",borderTopStartRadius:"x107yiy2",borderTopEndRadius:"xv8uw2v",borderBottomEndRadius:"x1tfwpuw",borderBottomStartRadius:"x2g32xy",":hover_backgroundColor":"x1ry1tff",":active_backgroundColor":"xyklrzc",$$css:!0},selected:{backgroundColor:"x1786zcw",$$css:!0},disabled:{opacity:"xbyyjgo",":hover_backgroundColor":"x1n5bzlp",":active_backgroundColor":"xyftt0y",$$css:!0},icon:{width:"xvy4d1p",height:"xxk0z11",$$css:!0},rotate:{transform:"x19jd1h0",$$css:!0},body:{flexGrow:"x1iyjqo2",height:"xxk0z11",marginTop:"xdj266r",marginEnd:"xw3qccf",marginBottom:"xat24cr",marginStart:"xsgj6o6",lineHeight:"x1o2sk6j",textAlign:"x2b8uid",$$css:!0}};e=b(function(a,b){var e=a.children,f=a.onClick,g=a.icon,h=a.caret,j=a.disabled;j=j===void 0?!1:j;var m=a.title,n=a.selected;n=n===void 0?!1:n;var o;if(h)switch(h){case"up":o=k.jsx(d("WAWebChevronDownAltIcon").ChevronDownAltIcon,{displayInline:!0,xstyle:l.rotate,width:15,height:15});break;case"down":o=k.jsx(d("WAWebChevronDownAltIcon").ChevronDownAltIcon,{displayInline:!0,width:15,height:15});break;default:break}return k.jsxs("div",{ref:b,role:"button",tabIndex:"-1",onClick:f,className:d("WAWebClassnames").classnamesConvertMeToStylexPlease((i||(i=c("stylex")))(l.container,j&&l.disabled,!j&&n&&l.selected),a.className),title:m,children:[g&&k.jsx(d("WAWebFlex.react").FlexRow,{align:"center",justify:"center",xstyle:l.icon,children:g}),e&&k.jsx("span",{className:"x1iyjqo2 xxk0z11 xdj266r xw3qccf xat24cr xsgj6o6 x1o2sk6j x2b8uid",children:e}),o&&k.jsx("span",{children:o})]})});var m={button:{borderTop:"xtavm8z",borderEnd:"xt30c5d",borderBottom:"xj9ywhc",borderStart:"x1pftnkn",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",":hover_borderTopColor":"xkfedft",":hover_borderEndColor":"x1b5t6y",":hover_borderBottomColor":"x16irdbc",":hover_borderStartColor":"x1s9ftvl",$$css:!0},iconContainer:{width:"x23j0i4",height:"xd7y6wv",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",backgroundColor:"x189ddfa",$$css:!0},selected:{borderTopColor:"x9pt0gb",borderEndColor:"xganwq3",borderBottomColor:"x1xcsyc0",borderStartColor:"x1en31xc",$$css:!0}};function a(a){var b=a.onClick,e=a.children;a=a.selected;a=a===void 0?!1:a;return k.jsx(c("WAWebUnstyledButton.react"),{xstyle:[m.button,a&&m.selected],onClick:b,children:k.jsx(d("WAWebFlex.react").FlexRow,{justify:"center",align:"center",xstyle:m.iconContainer,children:e})})}a.displayName=a.name+" [from "+f.id+"]";g.ToolbarButton=e;g.ToolbarRoundButton=a}),98);
__d("WAWebMediaEditorToolbarAlignment.react",["WAWebAlignCenterAltIcon","WAWebAlignLeftAltIcon","WAWebAlignRightAltIcon","WAWebMediaEditorEnumsFonts","WAWebMediaEditorToolbarButton.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react"),j={icon:{color:"x1luubj0",transform:"x4zgh4k",$$css:!0}};function k(a){var b=a.alignment;a=babelHelpers.objectWithoutPropertiesLoose(a,["alignment"]);switch(b){case d("WAWebMediaEditorEnumsFonts").TextAlignment.LEFT:return i.jsx(d("WAWebAlignLeftAltIcon").AlignLeftAltIcon,babelHelpers["extends"]({},a));case d("WAWebMediaEditorEnumsFonts").TextAlignment.RIGHT:return i.jsx(d("WAWebAlignRightAltIcon").AlignRightAltIcon,babelHelpers["extends"]({},a));case d("WAWebMediaEditorEnumsFonts").TextAlignment.CENTER:return i.jsx(d("WAWebAlignCenterAltIcon").AlignCenterAltIcon,babelHelpers["extends"]({},a))}}k.displayName=k.name+" [from "+f.id+"]";var l=Array.from(d("WAWebMediaEditorEnumsFonts").TextAlignment.members());function a(a){var b=a.activeAlignment,c=a.onSelect;a=function(a){a=l.indexOf(b);a=(a=l[a+1])!=null?a:l[0];c(a)};return i.jsx(d("WAWebMediaEditorToolbarButton.react").ToolbarRoundButton,{onClick:a,children:i.jsx(k,{xstyle:j.icon,alignment:b})})}a.displayName=a.name+" [from "+f.id+"]";g.AlignmentToolbar=a}),98);
__d("WAWebMediaEditorToolbarColor.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={container:"_ak06",colorChipsContainer:"_ak07"};b=a;g["default"]=b}),98);
__d("WAWebMediaEditorToolbarColorChip.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={colorButton:"_ak09",primaryColorChip:"_ak0d",primaryColorChipMedium:"_ak0f",secondaryColorChip:"_ak0g",hover:"_ak0b",active:"_ak0c",selected:"_ak0a",colorChipWithBorder:"_ak0e"};b=a;g["default"]=b}),98);
__d("WAWebMediaEditorToolbarColorChip.react",["WAWebClassnames","WAWebMediaEditorToolbarColorChip.scss","react"],(function(a,b,c,d,e,f,g){var h,i,j=i||c("react"),k=(h||(h=d("react"))).useState;function a(a){var b=a.primaryColor,e=a.secondaryColor,f=a.onSelect,g=a.selected,h=a.withBorder,i=k(!1),l=i[0],m=i[1];i=k(!1);var n=i[0],o=i[1];i=function(a){m(!0)};var p=function(a){m(!1)},q=function(a){o(!0)},r=function(a){o(!1)};return j.jsx("div",{onClick:f,onMouseEnter:i,onMouseLeave:p,onMouseDown:q,onMouseUp:r,className:d("WAWebClassnames").classnamesConvertMeToStylexPlease((f={},f[(i=c("WAWebMediaEditorToolbarColorChip.scss")).selected]=g,f[i.hover]=l,f[i.active]=n,f[i.colorButton]=!0,f)),style:{backgroundColor:n&&!g?b.withAlpha(.2).toRgbaString():"transparent"},children:j.jsx("div",{className:d("WAWebClassnames").classnamesConvertMeToStylexPlease((p={},p[c("WAWebMediaEditorToolbarColorChip.scss").colorChipWithBorder]=h&&b.isWhite(),p[c("WAWebMediaEditorToolbarColorChip.scss").primaryColorChipMedium]=a.theme==="medium",p[c("WAWebMediaEditorToolbarColorChip.scss").primaryColorChip]=!0,p)),style:{backgroundColor:b.toRgbaString()},children:e&&g&&j.jsx("div",{className:c("WAWebMediaEditorToolbarColorChip.scss").secondaryColorChip,style:{backgroundColor:e.toRgbaString()}})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebMediaEditorToolbarColorPickerConsts",["WAWebMediaEditorUtilsColor"],(function(a,b,c,d,e,f,g){a=334;b=203;c=b*.74;e=b-c;f=20;d=new(d("WAWebMediaEditorUtilsColor").Color)(210,252,86);var h=900;g.CONTAINER_WIDTH=a;g.CONTAINER_HEIGHT=b;g.CANVAS_HEIGHT=c;g.INPUT_HEIGHT=e;g.CURSOR_SIZE=f;g.DEFAULT_COLOR=d;g.THROTTLE_WAIT_TIME=h}),98);
__d("WAWebMediaEditorToolbarColorPickerInput.react",["WAWebCopyPasteSelectable.react","WAWebKeyboardHotKeys.react","WAWebMediaEditorToolbarColorChip.react","WAWebMediaEditorToolbarColorPickerConsts","WAWebMediaEditorUtilsColor","react"],(function(a,b,c,d,e,f,g){var h,i;b=i||d("react");var j=h||(h=c("react")),k=b.useRef,l=b.useState;function a(a){var b=a.color,e=a.onColorPickerClose,f=a.onChangeColor;a=k(null);var g=l(b.toHex()),h=g[0],i=g[1];g=function(a){a=a.target.value;i(a);if(!a||!d("WAWebMediaEditorUtilsColor").isValidHex(a))return;a=d("WAWebMediaEditorUtilsColor").Color.fromHex(a);f(a)};return j.jsxs("div",{className:"x6s0dn4 x9f619 x78zum5 x1nhvcw1 x7ywyr2 xexx8yu x1sxyh0 x18d9i69 xurb0ha",style:{width:d("WAWebMediaEditorToolbarColorPickerConsts").CONTAINER_WIDTH,height:d("WAWebMediaEditorToolbarColorPickerConsts").INPUT_HEIGHT},children:[j.jsx(c("WAWebMediaEditorToolbarColorChip.react"),{withBorder:!0,primaryColor:b,selected:!1,theme:"medium"}),j.jsx(d("WAWebKeyboardHotKeys.react").HotKeys,{handlers:{enter:e},children:j.jsx(d("WAWebCopyPasteSelectable.react").SelectableDiv,{selectable:!0,children:j.jsx("input",{type:"text",ref:a,className:"xjbqb8w x76ihet xwmqs3e x112ta8 xxxdfa6 xzwifym x6prxxf x1fc57z9 x1a2a7pz x889kno x1sxyh0 x1a8lsjc xurb0ha",value:h,onChange:g})})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebMediaEditorUtilsGetCursorPositionFromColor",["WAWebMediaEditorToolbarColorPickerConsts"],(function(a,b,c,d,e,f,g){function a(a){var b;a=a.toHsl();var c=(b=d("WAWebMediaEditorToolbarColorPickerConsts")).CONTAINER_WIDTH*a.hue-b.CURSOR_SIZE/2;a=b.CANVAS_HEIGHT*(1-a.lightness)-b.CURSOR_SIZE/2;return{x:c,y:a}}g.getPositionFromColor=a}),98);
__d("WAWebMediaEditorToolbarColorPickerPanel.react",["WAWebMediaEditorToolbarColorPickerConsts","WAWebMediaEditorUtilsColor","WAWebMediaEditorUtilsGetCursorPositionFromColor","react","useWAWebThrottledCallback"],(function(a,b,c,d,e,f,g){var h,i;b=i||d("react");var j=h||(h=c("react")),k=b.useEffect,l=b.useRef,m=b.useState;function a(a){var b=a.color,e=a.onChangeSelectedColor,f=a.onChangeCanvasColor,g=l(null);a=m(!1);var h=a[0],i=a[1];k(function(){var a=g.current;if(!a)return;var b=a.getContext("2d"),c=b.createLinearGradient(0,0,a.width,0);c.addColorStop(0,"#ff0000");c.addColorStop(1/6,"#ffff00");c.addColorStop(1/6*2,"#00ff00");c.addColorStop(1/6*3,"#00ffff");c.addColorStop(1/6*4,"#0000ff");c.addColorStop(1/6*5,"#ff00ff");c.addColorStop(1,"#ff0000");b.fillStyle=c;b.fillRect(0,0,a.width,a.height);c=b.createLinearGradient(0,0,0,a.height);c.addColorStop(0,"rgba(255, 255, 255, 1)");c.addColorStop(.5,"rgba(255, 255, 255, 0)");c.addColorStop(1,"rgba(255, 255, 255, 0)");b.fillStyle=c;b.fillRect(0,0,a.width,a.height);c=b.createLinearGradient(0,0,0,a.height);c.addColorStop(0,"rgba(0, 0, 0, 0)");c.addColorStop(.5,"rgba(0, 0, 0, 0)");c.addColorStop(1,"rgba(0, 0, 0, 1)");b.fillStyle=c;b.fillRect(0,0,a.width,a.height)},[]);a=d("WAWebMediaEditorUtilsGetCursorPositionFromColor").getPositionFromColor(b);var n=function(a){var b=g.current;if(!b)return{x:0,y:0};b=b.getBoundingClientRect();var c=a.clientX-b.left;a=a.clientY-b.top;c>b.width&&(c=b.width-.1);c<0&&(c=0);a>b.height&&(a=b.height);a<0&&(a=.1);c-=d("WAWebMediaEditorToolbarColorPickerConsts").CURSOR_SIZE/2;a-=d("WAWebMediaEditorToolbarColorPickerConsts").CURSOR_SIZE/2;return{x:c,y:a}},o=function(a){var b=g.current;if(!b)return new(d("WAWebMediaEditorUtilsColor").Color)(0,0,0);var c=a.x+d("WAWebMediaEditorToolbarColorPickerConsts").CURSOR_SIZE/2;a=a.y+d("WAWebMediaEditorToolbarColorPickerConsts").CURSOR_SIZE/2;b=b.getContext("2d");b=b.getImageData(c,a,1,1);c=b.data;return new(d("WAWebMediaEditorUtilsColor").Color)(c[0],c[1],c[2])},p=c("useWAWebThrottledCallback")(e,(e=d("WAWebMediaEditorToolbarColorPickerConsts")).THROTTLE_WAIT_TIME),q=function(a,b){b!=null&&i(b);b=n(a);a=b.x;b=b.y;a=o({x:a,y:b});p(a);f(a)},r=function(a){q(a,!0)},s=function(a){if(!h)return;a.stopPropagation();a.preventDefault();q(a)},t=function(a){q(a,!1)};return j.jsxs(j.Fragment,{children:[j.jsx("canvas",{width:e.CONTAINER_WIDTH,height:e.CANVAS_HEIGHT,className:"x8u2fvd x1ht7hnu x9f619 xexx8yu x4uap5 x18d9i69 xkhd6sd x1n2onr6",ref:g,onMouseDown:r,onMouseMove:s,onMouseUp:t}),j.jsx("div",{className:"x12cipg9 x1l7pj32 x2eqjsk x2oabco x15wlbvn x5m3s2n x68a9ox xtwgpwe x1l8gmyy x9f619 xt0e3qv x47corl x10l6tqk",style:{width:e.CURSOR_SIZE,height:e.CURSOR_SIZE,left:a.x,top:a.y,backgroundColor:b.toRgbaString()}})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebMediaEditorToolbarColorPicker.react",["WAWebMediaEditorToolbarColorPickerConsts","WAWebMediaEditorToolbarColorPickerInput.react","WAWebMediaEditorToolbarColorPickerPanel.react","react"],(function(a,b,c,d,e,f,g){var h,i,j=i||c("react"),k=(h||(h=d("react"))).useState;function a(a){var b=a.selectedColor,e=a.onColorSelect;b=k((b=b)!=null?b:d("WAWebMediaEditorToolbarColorPickerConsts").DEFAULT_COLOR);var f=b[0],g=b[1],h=function(a){g(a)},i=function(a){e(a)};b=function(a){h(a),i(a)};return j.jsxs("div",{className:"x1n2onr6",style:{width:d("WAWebMediaEditorToolbarColorPickerConsts").CONTAINER_WIDTH,height:d("WAWebMediaEditorToolbarColorPickerConsts").CONTAINER_HEIGHT},children:[j.jsx(c("WAWebMediaEditorToolbarColorPickerPanel.react"),{color:f,onChangeCanvasColor:h,onChangeSelectedColor:i}),j.jsx(c("WAWebMediaEditorToolbarColorPickerInput.react"),{color:f,onChangeColor:b,onColorPickerClose:a.onColorPickerClose})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebMediaEditorToolbarColor.react",["WAWebDropdown.react","WAWebFlex.react","WAWebL10N","WAWebMediaEditorToolbarButton.react","WAWebMediaEditorToolbarColor.scss","WAWebMediaEditorToolbarColorChip.react","WAWebMediaEditorToolbarColorPicker.react","WAWebUimUie.react","WAWebUimUieMenu.react","react"],(function(a,b,c,d,e,f,g){var h,i;b=i||d("react");var j=h||(h=c("react"));e=b.forwardRef;var k=b.useImperativeHandle,l=b.useState;function a(a,b){var e=a.colors,f=a.onColorSelect,g=a.selectedColor;a=l(null);var h=a[0],i=a[1],m=function(){i(null)};a=function(a){a.preventDefault();a.stopPropagation();a={menu:j.jsx(c("WAWebMediaEditorToolbarColorPicker.react"),{onColorSelect:f,selectedColor:g,onColorPickerClose:m}),dirX:c("WAWebL10N").isRTL()?d("WAWebDropdown.react").DirX.RIGHT:d("WAWebDropdown.react").DirX.LEFT,dirY:d("WAWebDropdown.react").DirY.BOTTOM,type:d("WAWebDropdown.react").MenuType.ColorPicker,anchor:a.target};i(a)};var n=function(){return Boolean(h)};k(b,function(){return{isPanelVisible:n}});b=e.map(function(a){var b=a.primaryColor;a.secondaryColor;return j.jsx(c("WAWebMediaEditorToolbarColorChip.react"),{primaryColor:b,onSelect:function(){return f(b)},selected:Boolean(g&&g.equals(b))},b.toString())});e=null;h&&(e=j.jsx(d("WAWebUimUie.react").UIE,{displayName:"ColorPicker",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:m,children:j.jsx(c("WAWebUimUieMenu.react"),{contextMenu:h})}));return j.jsxs("div",{className:c("WAWebMediaEditorToolbarColor.scss").container,children:[j.jsx(d("WAWebFlex.react").FlexRow,{className:c("WAWebMediaEditorToolbarColor.scss").colorChipsContainer,children:b}),j.jsx(d("WAWebMediaEditorToolbarButton.react").ToolbarButton,{onClick:a,caret:h?"down":"up"}),e]})}a.displayName=a.name+" [from "+f.id+"]";b=e(a);g["default"]=b}),98);
__d("WAWebMediaEditorToolbarFontDropdown.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={item:"_aj_7",selected:"_aj_8",sansSerif:"_aj_9",serif:"_aj_a",noricanRegular:"_aj_b",bryndanWrite:"_aj_c",oswaldHeavy:"_aj_d",alignmentContainer:"_aj_e",alignmentIcon:"_aj_f",alignmentIconSelected:"_aj_g"};b=a;g["default"]=b}),98);
__d("WAWebMediaEditorToolbarFontDropdown.react",["WAWebAlignCenterIcon","WAWebAlignLeftIcon","WAWebAlignRightIcon","WAWebCheckmarkIcon","WAWebClassnames","WAWebDropdownItem.react","WAWebFlex.react","WAWebFlexItem.react","WAWebFontLoader","WAWebMediaEditorEnumsFonts","WAWebMediaEditorToolbarFontDropdown.scss","react"],(function(a,b,c,d,e,f,g){var h,i,j=i||c("react"),k=(h||(h=d("react"))).useEffect,l=[{alignment:d("WAWebMediaEditorEnumsFonts").TextAlignment.LEFT,icon:d("WAWebAlignLeftIcon").AlignLeftIcon},{alignment:d("WAWebMediaEditorEnumsFonts").TextAlignment.CENTER,icon:d("WAWebAlignCenterIcon").AlignCenterIcon},{alignment:d("WAWebMediaEditorEnumsFonts").TextAlignment.RIGHT,icon:d("WAWebAlignRightIcon").AlignRightIcon}];function m(a){var b=a.font,e=a.isSelectedFont,f=a.onAction,g;e&&(g=j.jsx("span",{className:c("WAWebMediaEditorToolbarFontDropdown.scss").selected,children:j.jsx(d("WAWebCheckmarkIcon").CheckmarkIcon,{displayInline:!0})}));a=d("WAWebMediaEditorEnumsFonts").getFontTranslation(b);var h;switch(b){case d("WAWebMediaEditorEnumsFonts").FontType.SANS_SERIF:h=c("WAWebMediaEditorToolbarFontDropdown.scss").sansSerif;break;case d("WAWebMediaEditorEnumsFonts").FontType.SERIF:h=c("WAWebMediaEditorToolbarFontDropdown.scss").serif;break;case d("WAWebMediaEditorEnumsFonts").FontType.NORICAN_REGULAR:h=c("WAWebMediaEditorToolbarFontDropdown.scss").noricanRegular;break;case d("WAWebMediaEditorEnumsFonts").FontType.BRYNDAN_WRITE:h=c("WAWebMediaEditorToolbarFontDropdown.scss").bryndanWrite;break;case d("WAWebMediaEditorEnumsFonts").FontType.OSWALD_HEAVY:h=c("WAWebMediaEditorToolbarFontDropdown.scss").oswaldHeavy;break}return j.jsx(d("WAWebDropdownItem.react").DropdownItem,{action:function(a){return f(a,b)},children:j.jsxs("div",{role:"button",className:c("WAWebMediaEditorToolbarFontDropdown.scss").item,style:d("WAWebMediaEditorEnumsFonts").getFontStyle(b),children:[j.jsx("span",{className:h,children:a}),g]})})}m.displayName=m.name+" [from "+f.id+"]";function n(a){var b=a.onAction,e=a.selectedAlignment;return j.jsx(d("WAWebFlex.react").FlexRow,{className:c("WAWebMediaEditorToolbarFontDropdown.scss").alignmentContainer,justify:"around",align:"center",children:l.map(function(a){var f=a.alignment;a=a.icon;return j.jsx(c("WAWebFlexItem.react"),{children:j.jsx(d("WAWebDropdownItem.react").DropdownItem,{action:function(a){return b(a,f)},children:j.jsx(a,{className_DONOTUSE:d("WAWebClassnames").classnamesConvertMeToStylexPlease((a={},a[c("WAWebMediaEditorToolbarFontDropdown.scss").alignmentIconSelected]=e,a[c("WAWebMediaEditorToolbarFontDropdown.scss").alignmentIcon]=!0,a))})})},f)})})}n.displayName=n.name+" [from "+f.id+"]";function a(a){var b=a.onFontSelect,c=a.onAlignmentSelect,e=a.selectedFont,f=a.selectedAlignment,g=a.showAlignmentOptions;k(function(){d("WAWebFontLoader").FontLoader.loadAllFonts()},[]);var h=function(a,c){a.stopPropagation(),b(c)},i=function(a,b){a.stopPropagation(),c(b)};return j.jsxs("div",{children:[a.fonts.map(function(a){return j.jsx(m,{font:a,isSelectedFont:e===a,onAction:h},a)}),g&&j.jsx(n,{selectedAlignment:f,onAction:i},"alignment")]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebMediaEditorToolbarFont.react",["WAWebFlex.react","WAWebMediaEditorEnumsFonts","WAWebMediaEditorToolbarButton.react","WAWebMediaEditorToolbarFontDropdown.react","WAWebUISpacing","WAWebUimUie.react","WAWebUimUieMenu.react","WAWebVelocityTransitionGroup","react","stylex"],(function(a,b,c,d,e,f,g){var h,i,j;b=j||d("react");var k=h||(h=c("react"));e=b.forwardRef;var l=b.useImperativeHandle,m=b.useRef,n=b.useState,o={container:{position:"x1n2onr6",flexShrink:"x2lah0s",$$css:!0},icon:{width:"xw4jnvo",height:"x1qx5ct2",fontSize:"x1nxh6w3",color:"x1r3oa16",textAlign:"x2b8uid",backgroundColor:"x189ddfa",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",$$css:!0},iconOnly:{color:"x1luubj0",fontSize:"x6prxxf",$$css:!0}};function a(a,b){var e=a.selectedFont,f=a.fonts,g=a.onFontSelect,h=a.onAlignmentSelect,j=a.selectedAlignment,p=a.showImprovedToolbar,q=m(null);a=n(null);var r=a[0],s=a[1];a=function(a){if(r)return;if(!q.current)return;a=k.jsx(c("WAWebMediaEditorToolbarFontDropdown.react"),{fonts:f,selectedFont:e,selectedAlignment:j,showAlignmentOptions:!p,onFontSelect:g,onAlignmentSelect:h});s({menu:a,anchor:q.current})};var t=function(){s(null)},u=function(){return Boolean(r)};l(b,function(){return{isMenuVisible:u}});b=Boolean(r);var v;r&&(v=k.jsx(d("WAWebUimUie.react").UIE,{displayName:"MediaEditorFontDropdown",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:t,children:k.jsx(c("WAWebUimUieMenu.react"),{contextMenu:r})}));if(p)t=k.jsx(d("WAWebMediaEditorToolbarButton.react").ToolbarRoundButton,{onClick:a,selected:b,children:k.jsx(d("WAWebFlex.react").FlexRow,{xstyle:[o.icon,o.iconOnly],style:babelHelpers["extends"]({},d("WAWebMediaEditorEnumsFonts").getFontStyle(e)),justify:"center",align:"center",children:"Aa"})});else{var w=k.jsx(d("WAWebFlex.react").FlexRow,{xstyle:o.icon,style:babelHelpers["extends"]({},d("WAWebMediaEditorEnumsFonts").getFontStyle(e)),justify:"center",align:"center",children:k.jsx("div",{"aria-hidden":"true",children:"A"})});t=k.jsx(d("WAWebMediaEditorToolbarButton.react").ToolbarButton,{onClick:a,icon:w,selected:b,caret:b?"down":"up",children:k.jsx("span",{className:(i||(i=c("stylex")))(d("WAWebUISpacing").uiPadding.end5),children:d("WAWebMediaEditorEnumsFonts").getFontTranslation(e)})})}return k.jsxs("div",{ref:q,className:"x1n2onr6 x2lah0s",children:[t,k.jsx(c("WAWebVelocityTransitionGroup"),{transitionName:"dropdown",children:v})]})}a.displayName=a.name+" [from "+f.id+"]";b=e(a);g.Font=b}),98);
__d("WAWebMediaEditorToolbarTextBackground.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={cirle:"_ajtz",circleFilled:"_ajto",unchecked:"_ajtp",checked:"_ajtq"};b=a;g["default"]=b}),98);
__d("WAWebMediaEditorToolbarTextBackground.react",["fbt","WAWebCheckmarkIcon","WAWebClassnames","WAWebMediaEditorToolbarButton.react","WAWebMediaEditorToolbarTextBackground.scss","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(a){var b,e=a.checked;a=a.onBackgroundToggle;b=j.jsx("div",{className:d("WAWebClassnames").classnamesConvertMeToStylexPlease((b={},b[c("WAWebMediaEditorToolbarTextBackground.scss").circleFilled]=e,b[c("WAWebMediaEditorToolbarTextBackground.scss").cirle]=!0,b)),children:e?j.jsx("div",{className:c("WAWebMediaEditorToolbarTextBackground.scss").checked,children:j.jsx(d("WAWebCheckmarkIcon").CheckmarkIcon,{})}):j.jsx("div",{className:c("WAWebMediaEditorToolbarTextBackground.scss").unchecked})});return j.jsx(d("WAWebMediaEditorToolbarButton.react").ToolbarButton,{icon:b,onClick:a,children:h._("__JHASH__vMN8zKuPBKn__JHASH__")})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebMediaEditorTextToolbar.react",["fbt","WAWebABProps","WAWebDeleteIcon","WAWebMediaEditorEnumsColors","WAWebMediaEditorEnumsFonts","WAWebMediaEditorToolbarAlignment.react","WAWebMediaEditorToolbarButton.react","WAWebMediaEditorToolbarColor.react","WAWebMediaEditorToolbarFont.react","WAWebMediaEditorToolbarTextBackground.react","react"],(function(a,b,c,d,e,f,g,h){var i,j;b=j||d("react");var k=i||(i=c("react"));e=b.forwardRef;var l=b.useImperativeHandle,m=b.useRef;function n(){return d("WAWebABProps").getABPropConfigValue("web_improved_text_tool_enabled")}function a(a,b){var e=m(null),f=m(null);l(b,function(){return{isColorPanelVisible:function(){var a;return(a=(a=e.current)==null?void 0:a.isPanelVisible())!=null?a:!1},isFontMenuVisible:function(){var a;return(a=(a=f.current)==null?void 0:a.isMenuVisible())!=null?a:!1}}});b=d("WAWebMediaEditorEnumsColors").getAllColors().map(function(a){a=d("WAWebMediaEditorEnumsColors").getColorValue(a);var b=d("WAWebMediaEditorEnumsColors").getColorValue(a.isLight()?d("WAWebMediaEditorEnumsColors").ColorType.BLACK:d("WAWebMediaEditorEnumsColors").ColorType.WHITE);return{primaryColor:a,secondaryColor:b}});return k.jsxs(k.Fragment,{children:[k.jsx(c("WAWebMediaEditorToolbarColor.react"),{ref:e,colors:b,onColorSelect:a.onTextColorSelect,selectedColor:a.textLayer.textColor}),n()&&k.jsx(d("WAWebMediaEditorToolbarAlignment.react").AlignmentToolbar,{activeAlignment:a.textLayer.alignment,onSelect:a.onAlignmentSelect}),k.jsx(d("WAWebMediaEditorToolbarFont.react").Font,{ref:f,fonts:d("WAWebMediaEditorEnumsFonts").getAllFonts(),selectedFont:a.textLayer.font,selectedAlignment:a.textLayer.alignment,onFontSelect:a.onFontSelect,onAlignmentSelect:a.onAlignmentSelect,showImprovedToolbar:n()}),k.jsx(c("WAWebMediaEditorToolbarTextBackground.react"),{checked:a.textLayer.textBackground,onBackgroundToggle:a.onTextBackgroundToggle}),k.jsx(d("WAWebMediaEditorToolbarButton.react").ToolbarButton,{icon:k.jsx(d("WAWebDeleteIcon").DeleteIcon,{displayInline:!0}),title:h._("__JHASH__pN4ewkKYOF9__JHASH__"),onClick:a.onDeleteLayer})]})}f=e(a);g.TextToolbar=f}),98);
__d("WAWebMediaEditorToolbarBlur.react",["fbt","WANullthrows","WAWebCheckmarkMediumIcon","WAWebDropdown.react","WAWebDropdownItem.react","WAWebFlex.react","WAWebMediaEditorBlurPixelateIcon","WAWebMediaEditorBlurSmoothIcon","WAWebMediaEditorLayersBlur","WAWebMediaEditorToolbarButton.react","WAWebSlider.react","WAWebUimUie.react","WAWebUimUieMenu.react","react"],(function(a,b,c,d,e,f,g,h){var i,j;b=j||d("react");var k=i||(i=c("react"));e=b.forwardRef;var l=b.useImperativeHandle,m=b.useRef,n=b.useState,o=10,p=100;b=50;var q={blurModeBtn:{paddingTop:"xyinxu5",paddingEnd:"x1ou2tus",paddingBottom:"x1g2khh7",paddingStart:"xpkgp8e",paddingLeft:null,paddingRight:null,":hover_backgroundColor":"x1ry1tff",$$css:!0},blurModeBtnDivider:{width:"x1g8rjiy",paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",marginTop:"xdj266r",marginEnd:"x11i5rnm",marginBottom:"xat24cr",marginStart:"x1mh8g0r",$$css:!0},blurModeIconContainer:{marginEnd:"x1h5jrl4",marginLeft:null,marginRight:null,$$css:!0},blurModeIcon:{width:"xvy4d1p",height:"xxk0z11",$$css:!0},checkmarkIcon:{width:"x1kky2od",height:"xlup9mm",$$css:!0},slider:{paddingStart:"xbbxn1n",paddingLeft:null,paddingRight:null,paddingEnd:"xe53cfu",$$css:!0}};function a(a,b){var e=a.blurMode,f=a.blurRadius,g=a.onBlurModeChange,i=a.onBlurRadiusChange;a=n(null);var j=a[0],r=a[1],s=m(null),t=function(a,b){a.preventDefault(),g(b)};a=function(a,b){i(a,b)};var u=function(){r(null)},v=function(a){a.preventDefault();a=Array.from(d("WAWebMediaEditorLayersBlur").BlurMode.members()).map(function(a){var b=a===d("WAWebMediaEditorLayersBlur").BlurMode.Smooth?d("WAWebMediaEditorBlurSmoothIcon").MediaEditorBlurSmoothIcon:d("WAWebMediaEditorBlurPixelateIcon").MediaEditorBlurPixelateIcon;return k.jsx(d("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:function(b){return t(b,a)},children:k.jsxs(d("WAWebFlex.react").FlexRow,{align:"center",className:"xyinxu5 x1ou2tus x1g2khh7 xpkgp8e x1ry1tff",children:[k.jsx(b,{xstyle:q.blurModeIconContainer,iconXstyle:q.blurModeIcon}),a===e&&k.jsx(d("WAWebCheckmarkMediumIcon").CheckmarkMediumIcon,{iconXstyle:q.checkmarkIcon})]})},a)});a={menu:a,dirX:d("WAWebDropdown.react").DirX.CENTER,dirY:d("WAWebDropdown.react").DirY.TOP,offsetY:-5,anchor:c("WANullthrows")(s.current)};r(a)},w=function(){return Boolean(j)};l(b,function(){return{isPanelVisible:w}});b=e===d("WAWebMediaEditorLayersBlur").BlurMode.Smooth?d("WAWebMediaEditorBlurSmoothIcon").MediaEditorBlurSmoothIcon:d("WAWebMediaEditorBlurPixelateIcon").MediaEditorBlurPixelateIcon;return k.jsxs(d("WAWebFlex.react").FlexRow,{align:"center",children:[k.jsx(d("WAWebMediaEditorToolbarButton.react").ToolbarButton,{ref:s,onClick:v,caret:j?"down":"up",icon:k.jsx(b,{iconXstyle:q.blurModeIcon,displayInline:!0}),title:h._("__JHASH__k9X6k4yniYw__JHASH__"),children:k.jsx("div",{className:"x1g8rjiy xexx8yu x4uap5 x18d9i69 xkhd6sd xdj266r x11i5rnm xat24cr x1mh8g0r"})}),k.jsx("div",{className:"xbbxn1n xe53cfu",children:k.jsx(c("WAWebSlider.react"),{min:o,max:p,value:f,onChange:a,displayValue:!0})}),j&&k.jsx(d("WAWebUimUie.react").UIE,{displayName:"BlurModePicker",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:u,children:k.jsx(c("WAWebUimUieMenu.react"),{contextMenu:j})})]})}a.displayName=a.name+" [from "+f.id+"]";f=e(a);g.BLUR_MIN_RADIUS=o;g.BLUR_MAX_RADIUS=p;g.BLUR_DEFAULT_RADIUS=b;g.BLUR_DEFAULT_MODE=d("WAWebMediaEditorLayersBlur").BlurMode.Pixelate;g.BlurToolbar=f}),98);
__d("WAWebMediaEditorToolbarCropRotate.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={container:"_ajx9",rotateLeftButton:"_ajxa"};b=a;g["default"]=b}),98);
__d("WAWebMediaEditorToolbarCropRotate",["fbt","WAWebFlex.react","WAWebMediaEditorRotateLeftIcon","WAWebMediaEditorRotateRightIcon","WAWebMediaEditorToolbarButton.react","WAWebMediaEditorToolbarCropRotate.scss","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(a){var b=a.canReset,e=a.onReset,f=a.onRotateCanvas;return j.jsxs(d("WAWebFlex.react").FlexRow,{className:c("WAWebMediaEditorToolbarCropRotate.scss").container,children:[j.jsx(d("WAWebMediaEditorToolbarButton.react").ToolbarButton,{className:c("WAWebMediaEditorToolbarCropRotate.scss").rotateLeftButton,icon:j.jsx(d("WAWebMediaEditorRotateLeftIcon").MediaEditorRotateLeftIcon,{displayInline:!0}),title:h._("__JHASH__7aXXBY-yMWe__JHASH__"),onClick:function(){return f(-90)}}),j.jsx(d("WAWebMediaEditorToolbarButton.react").ToolbarButton,{icon:j.jsx(d("WAWebMediaEditorRotateRightIcon").MediaEditorRotateRightIcon,{displayInline:!0}),title:h._("__JHASH__JOJYjplF6PI__JHASH__"),onClick:function(){return f(90)}}),j.jsx(d("WAWebMediaEditorToolbarButton.react").ToolbarButton,{onClick:e,disabled:!b,children:h._("__JHASH__pr7hZn7Eo8X__JHASH__")})]})}a.displayName=a.name+" [from "+f.id+"]";g.CropRotateToolbar=a}),98);
__d("WAWebMediaEditorToolbarMain",["fbt","WAWebAttachMediaModel","WAWebConfirmPopup.react","WAWebDropdown.react","WAWebEmojiPanel.react","WAWebHDPhotoMediaEditorDropdown","WAWebIcHdActiveIcon","WAWebIcHdSettingsIcon","WAWebMediaEditorBlurPixelateIcon","WAWebMediaEditorCropRotateIcon","WAWebMediaEditorDrawingIcon","WAWebMediaEditorEmojiIcon","WAWebMediaEditorLayersBlur","WAWebMediaEditorLayersImage","WAWebMediaEditorLayersText","WAWebMediaEditorRedoIcon","WAWebMediaEditorStickerIcon","WAWebMediaEditorTextIcon","WAWebMediaEditorUndoIcon","WAWebMediaGatingUtils","WAWebMenuBar.react","WAWebMiscGatingUtils","WAWebModalManager","WAWebScissorsIcon","WAWebStickerPanel.react","WAWebUimUie.react","WAWebUimUieMenu.react","react"],(function(a,b,c,d,e,f,g,h){var i,j;b=j||d("react");var k=i||(i=c("react")),l=b.useRef,m=b.useState,n={hdIcon:{opacity:"xyd83as",$$css:!0}};function a(a){var b=a.canRedo,e=a.canUndo,f=a.hdEligible,g=a.inCropRotateMode,i=a.inOutlineMode,j=a.inPaintMode,o=a.inTextEditingMode,p=a.metadataByQuality,q=a.onBlurSelect,r=a.onChangeQuality,s=a.onCropRotateSelect,t=a.onEmojiSelect,u=a.onOutlineSelect,v=a.onPaintSelect,w=a.onRedo,x=a.onStickerSelect,y=a.onTextSelect,z=a.onToggleEmojiPanel,A=a.onToggleStickerPanel,B=a.onUndo,C=a.selectedLayer,D=a.selectedQuality;a=a.showOutline;var E=m(),F=E[0],G=E[1];E=m();var H=E[0],I=E[1],J=l({inPaintMode:j,onEmojiSelect:t,onStickerSelect:x,onPaintSelect:v}),K=function(){g?s():j?v():i&&u()};E=function(a){a.preventDefault(),j||K(),v()};t=function(a){a.preventDefault(),K(),y()};x=function(a){a.preventDefault(),g||K(),s()};var L=function(a){a.preventDefault(),i||K(),u()},M=function(a){a.preventDefault(),K(),q()},N=function(){G(null),z(!1)},O=function(a){a.preventDefault();a.stopPropagation();K();var b=function(a){J.current.inPaintMode&&J.current.onPaintSelect(),J.current.onEmojiSelect(a),N()};b=k.jsx(d("WAWebEmojiPanel.react").EmojiPanel,{onEmoji:b,onFocusNext:N,onFocusPrev:N});G({menu:b,dirY:d("WAWebDropdown.react").DirY.TOP,type:d("WAWebDropdown.react").MenuType.EmojiPicker,anchor:a.target});z(!0)},P=function(){I(null),A(!1)},Q=function(a){a.preventDefault();a.stopPropagation();K();var b=function(a){J.current.inPaintMode&&J.current.onPaintSelect(),J.current.onStickerSelect(a),P()};b=k.jsx(c("WAWebStickerPanel.react"),{onSticker:b,onFocusNext:P,onFocusPrev:P});b&&(I({menu:b,dirY:d("WAWebDropdown.react").DirY.TOP,type:d("WAWebDropdown.react").MenuType.StickerPicker,anchor:a.target}),A(!0))},R;d("WAWebMediaGatingUtils").isSendHQPhotoEnabled()&&(f?R=k.jsx(d("WAWebMenuBar.react").MenuBarItem,{icon:D===d("WAWebAttachMediaModel").MediaQuality.HD?k.jsx(d("WAWebIcHdActiveIcon").IcHdActiveIcon,{}):k.jsx(d("WAWebIcHdSettingsIcon").IcHdSettingsIcon,{}),testid:void 0,title:h._("__JHASH__vPuzJrsg7Nh__JHASH__"),children:k.jsx(c("WAWebHDPhotoMediaEditorDropdown"),{onChangeQuality:r,selectedQuality:D,metadataByQuality:p})},"hd-settings"):R=k.jsx(d("WAWebMenuBar.react").MenuBarItem,{icon:k.jsx(d("WAWebIcHdSettingsIcon").IcHdSettingsIcon,{xstyle:n.hdIcon}),testid:void 0,title:h._("__JHASH__t8zgR08tASA__JHASH__"),onClick:function(){d("WAWebModalManager").ModalManager.open(k.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{title:h._("__JHASH__UezwhbT328H__JHASH__"),onOK:function(){return d("WAWebModalManager").ModalManager.close()},children:h._("__JHASH__t8zgR08tASA__JHASH__")}))}},"hd-settings"));return k.jsxs(d("WAWebMenuBar.react").MenuBar,{theme:"media-editor",children:[a&&k.jsx(d("WAWebMenuBar.react").MenuBarItem,{icon:k.jsx(d("WAWebScissorsIcon").ScissorsIcon,{}),testid:void 0,title:h._("__JHASH__Z4veGIHTzz-__JHASH__"),onClick:L,selected:i},"outline"),k.jsx(d("WAWebMenuBar.react").MenuBarItem,{icon:k.jsx(d("WAWebMediaEditorEmojiIcon").MediaEditorEmojiIcon,{}),testid:void 0,title:h._("__JHASH__tRWC2T0jCP8__JHASH__"),onClick:O,selected:Boolean(F)||C instanceof d("WAWebMediaEditorLayersImage").ImageLayer&&C.isEmoji()},"emoji"),k.jsx(d("WAWebMenuBar.react").MenuBarItem,{icon:k.jsx(d("WAWebMediaEditorStickerIcon").MediaEditorStickerIcon,{}),testid:void 0,title:h._("__JHASH__ec3NBiQP7WR__JHASH__"),onClick:Q,selected:Boolean(H)||C instanceof d("WAWebMediaEditorLayersImage").ImageLayer&&C.isSticker()},"sticker"),k.jsx(d("WAWebMenuBar.react").MenuBarItem,{icon:k.jsx(d("WAWebMediaEditorTextIcon").MediaEditorTextIcon,{}),testid:void 0,title:h._("__JHASH__b4MkB-SELxT__JHASH__"),onClick:t,selected:o||C instanceof d("WAWebMediaEditorLayersText").TextLayer},"text"),k.jsx(d("WAWebMenuBar.react").MenuBarItem,{icon:k.jsx(d("WAWebMediaEditorDrawingIcon").MediaEditorDrawingIcon,{}),testid:void 0,title:h._("__JHASH__KcIVDczmEHO__JHASH__"),onClick:E,selected:j},"paint"),d("WAWebMiscGatingUtils").mediaEditorBlurToolEnabled()&&k.jsx(d("WAWebMenuBar.react").MenuBarItem,{icon:k.jsx(d("WAWebMediaEditorBlurPixelateIcon").MediaEditorBlurPixelateIcon,{}),testid:void 0,title:h._("__JHASH__xTBCtVwXL73__JHASH__"),onClick:M,selected:C instanceof d("WAWebMediaEditorLayersBlur").BlurLayer},"blur"),k.jsx(d("WAWebMenuBar.react").MenuBarItem,{icon:k.jsx(d("WAWebMediaEditorCropRotateIcon").MediaEditorCropRotateIcon,{}),testid:void 0,title:h._("__JHASH__T_8d3z9R6ek__JHASH__"),onClick:x,selected:g},"crop-rotate"),R,k.jsx(d("WAWebMenuBar.react").MenuBarItem,{icon:k.jsx(d("WAWebMediaEditorUndoIcon").MediaEditorUndoIcon,{}),testid:void 0,title:h._("__JHASH__tclzXexf_pN__JHASH__"),disabled:!e,onClick:B},"undo"),k.jsx(d("WAWebMenuBar.react").MenuBarItem,{icon:k.jsx(d("WAWebMediaEditorRedoIcon").MediaEditorRedoIcon,{}),testid:void 0,title:h._("__JHASH__paiBx3FRK2W__JHASH__"),disabled:!b,onClick:w},"redo"),H&&k.jsx(d("WAWebUimUie.react").UIE,{displayName:"StickerPicker",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:P,children:k.jsx(c("WAWebUimUieMenu.react"),{contextMenu:H})}),F&&k.jsx(d("WAWebUimUie.react").UIE,{displayName:"EmojiPicker",escapable:!0,popable:!0,dismissOnWindowResize:!0,requestDismiss:N,children:k.jsx(c("WAWebUimUieMenu.react"),{contextMenu:F})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebMediaEditorToolbarOutline",["fbt","WAWebFlex.react","WAWebMediaEditorToolbarButton.react","WAWebOutlineSmoothIcon","WAWebOutlineStraightIcon","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(a){var b=a.canReset,c=a.onReset,e=a.onSmoothingToggle;a=a.smoothing;return j.jsxs(d("WAWebFlex.react").FlexRow,{children:[j.jsx(d("WAWebMediaEditorToolbarButton.react").ToolbarButton,{className:"xdj266r x1emribx xat24cr x1i64zmx",icon:j.jsx(d("WAWebOutlineSmoothIcon").OutlineSmoothIcon,{displayInline:!0}),title:h._("__JHASH__oQ02dNbeOO6__JHASH__"),selected:a,onClick:function(){return e(!0)}}),j.jsx(d("WAWebMediaEditorToolbarButton.react").ToolbarButton,{className:"xdj266r x1emribx xat24cr x1i64zmx",icon:j.jsx(d("WAWebOutlineStraightIcon").OutlineStraightIcon,{displayInline:!0}),title:h._("__JHASH__D2sn5lA-RKf__JHASH__"),selected:!a,onClick:function(){return e(!1)}}),j.jsx(d("WAWebMediaEditorToolbarButton.react").ToolbarButton,{className:"xdj266r x1emribx xat24cr x1i64zmx",onClick:c,disabled:!b,children:h._("__JHASH__pr7hZn7Eo8X__JHASH__")})]})}a.displayName=a.name+" [from "+f.id+"]";g.OutlineToolbar=a}),98);
__d("WAWebMediaEditorToolbarThickness.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={container:"_ajwp",thicknessButton:"_ajwq",thicknessChip:"_ajwr",selected:"_ajws"};b=a;g["default"]=b}),98);
__d("WAWebMediaEditorToolbarThickness.react",["WAWebClassnames","WAWebMediaEditorEnumsThickness","WAWebMediaEditorToolbarThickness.scss","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function j(a){var b=a.onThicknessSelect,e=a.selectedThickness,f=a.thickness;return i.jsx("div",{onClick:function(){return b(f)},className:d("WAWebClassnames").classnamesConvertMeToStylexPlease((a={},a[c("WAWebMediaEditorToolbarThickness.scss").selected]=e&&e===f,a[c("WAWebMediaEditorToolbarThickness.scss").thicknessButton]=!0,a)),children:i.jsx("div",{className:c("WAWebMediaEditorToolbarThickness.scss").thicknessChip,style:{height:d("WAWebMediaEditorEnumsThickness").getThicknessValue(f),width:d("WAWebMediaEditorEnumsThickness").getThicknessValue(f)}})},d("WAWebMediaEditorEnumsThickness").ThicknessType.getName(f))}j.displayName=j.name+" [from "+f.id+"]";function a(a){var b=a.onThicknessSelect,d=a.selectedThickness;a=a.thicknesses;a=a.map(function(a,c){return i.jsx(j,{thickness:a,onThicknessSelect:b,selectedThickness:d},c)});return i.jsx("div",{className:c("WAWebMediaEditorToolbarThickness.scss").container,children:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebMediaEditorImage.react",["fbt","WAWebAttachMediaModel","WAWebClassnames","WAWebDeleteIcon","WAWebFlex.react","WAWebMediaEditorCanvas.react","WAWebMediaEditorCaptionInput.react","WAWebMediaEditorEnumsColors","WAWebMediaEditorEnumsThickness","WAWebMediaEditorGeometryPoint","WAWebMediaEditorGeometrySize","WAWebMediaEditorImage.scss","WAWebMediaEditorLayersBlur","WAWebMediaEditorLayersImage","WAWebMediaEditorLayersText","WAWebMediaEditorPreviewCropRotate.react","WAWebMediaEditorTextToolbar.react","WAWebMediaEditorToolbarBlur.react","WAWebMediaEditorToolbarButton.react","WAWebMediaEditorToolbarColor.react","WAWebMediaEditorToolbarCropRotate","WAWebMediaEditorToolbarMain","WAWebMediaEditorToolbarOutline","WAWebMediaEditorToolbarThickness.react","WAWebMediaEditorUtilsSize","WAWebMsgType","WAWebPonyfillsIdleCallback","WAWebStateUtils","WAWebURLUtils","WAWebUnstyledButton.react","WAWebXIcon","err","react","useWAWebDebouncedCallback","useWAWebForceUpdate","useWAWebListener","useWAWebModelValues"],(function(a,b,c,d,e,f,g,h){var i,j;a=j||d("react");var k=i||(i=c("react"));b=a.forwardRef;var aa=a.useEffect,ba=a.useImperativeHandle,l=a.useRef,m=a.useState,n=20,ca=new(c("WAWebMediaEditorGeometrySize"))({width:200,height:200});e=b(function(a,b){var e=a.paintColor,f=a.paintThickness,g=a.outlineSmoothing,i=a.onLayerDelete,j=a.onTextEditingStart,da=a.onTextEditingEnd,o=a.onOutlineDone,p=a.draftTextLayer,q=a.onLayerUnselect,ea=a.onPaintSelect,r=a.onCropRotateCanvas,fa=a.onOutlineSelect,s=a.onClose,t=d("useWAWebModelValues").useModelValues(a.attachMedia,["mediaEditorData","caption","id","quality","hdEligible","metadataByQuality"]),u=d("useWAWebModelValues").useModelValues(a.chat,["isNewsletter"]);u=u.isNewsletter;var v=l(null),w=l(null),x=l(null),y=l(null),z=l(null),A=l(null),B=l(null),C=m(c("WAWebMediaEditorGeometrySize").empty()),D=C[0],ga=C[1];C=m(!1);var E=C[0],ha=C[1];C=m(!1);var F=C[0],ia=C[1];C=m(!1);var G=C[0],ja=C[1];C=m(!1);var H=C[0],ka=C[1];C=m(!1);var la=C[0],ma=C[1];C=function(a){B.current=a.target};var na=function(b){d("WAWebStateUtils").unproxy(a.attachMedia).updateQuality(b)},I=function(){ha(function(a){return!a})},J=function(){return t.mediaEditorData},K=function(){if(!v.current)return;var a=v.current.getBoundingClientRect();a=new(c("WAWebMediaEditorGeometrySize"))({width:a.width-n*2,height:a.height-n*2});ga(a)},L=function(){!F&&J().selectedLayer&&q(),ia(function(a){return!a}),K()},oa=function(){return E},pa=function(){return F},M=function(){return G},N=function(){ja(function(a){return!a})},O=function(){if(oa())I();else if(pa())L();else if(M())o(),N();else if(t.mediaEditorData.selectedLayer&&!p)q();else return!1;return!0},P=function(){var a=B.current;(a===v.current||a===x.current||a===w.current)&&O()};d("useWAWebListener").useListener(window,"mousedown",C);d("useWAWebListener").useListener(window,"click",P);var Q=function(){var a=t.mediaEditorData.selectedLayer;a&&i(a)},R=function(a){a.code==="Backspace"&&!(a.target instanceof HTMLInputElement)&&!(a.target instanceof HTMLDivElement&&a.target.contentEditable==="true")&&!F&&Q()},qa=function(){if(!y.current)throw c("err")("MediaEditor:canvas is not initialized");return y.current.getDataUrl()},ra=function(){var a=qa();return c("WAWebURLUtils").dataURLtoFile(a)},S=function(){if(y.current!=null){var a=y.current.getStage().attrs,b=a.width;a=a.height;if(b!==0&&a!==0){b=ra();a=window.URL.createObjectURL(b);t.updateEditedFile(b);t.updatePreview(a);t.updateFullPreview(a)}}},sa=c("useWAWebDebouncedCallback")(function(){A.current&&(d("WAWebPonyfillsIdleCallback").cancelIdleCallback(A.current),A.current=null),A.current=d("WAWebPonyfillsIdleCallback").requestIdleCallback(S)},1e3),T=function(a){(a==null?void 0:a.immediately)?S():sa()};aa(function(){window.addEventListener("resize",K);window.addEventListener("keydown",R);K();return function(){window.removeEventListener("resize",K),window.removeEventListener("keydown",R),T({immediately:!0})}},[]);var U=c("useWAWebForceUpdate")();C=function(a){U(),j(a)};P=function(a,b){U(),da(a,b)};var V=function(){if(F)L();else if(E)I();else if(G)o(),N();else if(p){var a;(a=y.current)==null?void 0:a.endTextEditing()}else J().selectedLayer&&q()},ta=function(){I(),ea()},ua=function(){L()},W=function(a){r(J().rotation+a,J().cropOrigin,J().cropSize)},X=function(){r(0,new(c("WAWebMediaEditorGeometryPoint"))({x:0,y:0}),J().size)},Y=function(a,b){r(J().rotation,a,b)},va=function(){N(),fa()},wa=function(a){ka(a)},xa=function(a){ma(a)},ya=function(a){a=a.target;return a instanceof HTMLElement&&a.closest("."+c("WAWebMediaEditorImage.scss").footer)&&a!==x.current||((a=z.current)==null?void 0:a.isColorPanelVisible())||((a=z.current)==null?void 0:a.isFontMenuVisible())?!1:!0},za=function(a,b){a===d("WAWebAttachMediaModel").MediaEditorAction.OutlineDone?(O(),N()):a===d("WAWebAttachMediaModel").MediaEditorAction.Outline?(M()&&N(),b===d("WAWebAttachMediaModel").MediaEditorAction.Outline&&N()):a===d("WAWebAttachMediaModel").MediaEditorAction.CropRotateCanvas&&(O(),b===d("WAWebAttachMediaModel").MediaEditorAction.CropRotateCanvas&&L())},Aa=function(a,b){a===d("WAWebAttachMediaModel").MediaEditorAction.OutlineDone?O():a===d("WAWebAttachMediaModel").MediaEditorAction.Outline?M()||N():a===d("WAWebAttachMediaModel").MediaEditorAction.CropRotateCanvas?(O(),L()):b===d("WAWebAttachMediaModel").MediaEditorAction.CropRotateCanvas&&a!==d("WAWebAttachMediaModel").MediaEditorAction.CropRotateCanvas&&O()},Ba=function(){var a=t.mediaEditorData;return d("WAWebMediaEditorUtilsSize").calculateContainScale(a.screenWidth,a.screenHeight,D,ca)},Ca=function(){var a=t.mediaEditorData;return new(c("WAWebMediaEditorGeometrySize"))({width:a.screenWidth,height:a.screenHeight})},Da=function(){var a;return(a=y.current)==null?void 0:a.getBackground()};ba(b,function(){return{updatePreview:T,undoAction:za,redoAction:Aa,getCanvasScale:Ba,getCanvasSize:Ca,resetUIState:O,getBackground:Da}});b=t.mediaEditorData;var Z=a.draftTextLayer||b.selectedLayer,$;if(F)$=k.jsx(d("WAWebMediaEditorToolbarCropRotate").CropRotateToolbar,{canReset:b.isRotated()||b.isCropped(),onRotateCanvas:W,onReset:X});else if(G)$=k.jsx(d("WAWebMediaEditorToolbarOutline").OutlineToolbar,{smoothing:a.outlineSmoothing,onSmoothingToggle:a.onOutlineSmoothingToggle,canReset:b.isOutlined(),onReset:a.onOutlineReset});else if(Z){W=Z instanceof d("WAWebMediaEditorLayersImage").ImageLayer&&Z.isBackground();Z instanceof d("WAWebMediaEditorLayersText").TextLayer?$=k.jsx(d("WAWebMediaEditorTextToolbar.react").TextToolbar,{ref:z,textLayer:Z,onAlignmentSelect:a.onAlignmentSelect,onFontSelect:a.onFontSelect,onTextBackgroundToggle:a.onTextBackgroundToggle,onTextColorSelect:a.onTextColorSelect,onDeleteLayer:Q}):W||($=k.jsxs(k.Fragment,{children:[Z instanceof d("WAWebMediaEditorLayersBlur").BlurLayer?k.jsx(d("WAWebMediaEditorToolbarBlur.react").BlurToolbar,{blurMode:Z.mode,blurRadius:Z.radius,onBlurModeChange:a.onBlurModeChange,onBlurRadiusChange:a.onBlurRadiusChange}):null,k.jsx(d("WAWebMediaEditorToolbarButton.react").ToolbarButton,{icon:k.jsx(d("WAWebDeleteIcon").DeleteIcon,{displayInline:!0}),title:h._("__JHASH__pN4ewkKYOF9__JHASH__"),onClick:Q})]}))}else E&&($=k.jsxs(k.Fragment,{children:[k.jsx(c("WAWebMediaEditorToolbarColor.react"),{colors:d("WAWebMediaEditorEnumsColors").getAllColors().map(function(a){return{primaryColor:d("WAWebMediaEditorEnumsColors").getColorValue(a)}}),onColorSelect:a.onPaintColorSelect,selectedColor:e}),k.jsx(c("WAWebMediaEditorToolbarThickness.react"),{thicknesses:d("WAWebMediaEditorEnumsThickness").getAllThicknesses(),onThicknessSelect:a.onPaintThicknessSelect,selectedThickness:f})]}));X=!$&&!a.draftTextLayer&&!a.sendAsSticker;X=k.jsx(d("WAWebFlex.react").FlexRow,{className:d("WAWebClassnames").classnamesConvertMeToStylexPlease((W={},W[c("WAWebMediaEditorImage.scss").captionInputHidden]=!X,W[c("WAWebMediaEditorImage.scss").captionInputContainer]=!0,W)),justify:"center",children:k.jsx(c("WAWebMediaEditorCaptionInput.react"),{chat:a.chat,caption:t.caption,viewOnce:a.viewOnce,viewOnceDisabled:a.viewOnceDisabled,msgType:d("WAWebMsgType").MSG_TYPE.IMAGE,theme:"image",onToggleViewOnce:a.onToggleViewOnce,onChange:a.onCaptionChange,onEnter:a.onEnter,onFiles:a.onFiles,setCaptionInputRef:function(b){a.setCaptionInputRef(t.id,b)},internLinksEnabled:a.internLinksEnabled,phoneNumbersEnabled:a.phoneNumbersEnabled},t.id)});W=k.jsxs(d("WAWebFlex.react").FlexRow,{justify:"center",align:"center",className:c("WAWebMediaEditorImage.scss").footer,ref:x,children:[$&&k.jsx(d("WAWebFlex.react").FlexRow,{justify:"center",align:"center",className:c("WAWebMediaEditorImage.scss").bottomToolbar,children:$}),X]});X=null;F&&(X=k.jsx(c("WAWebMediaEditorPreviewCropRotate.react"),{data:b,rotation:J().rotation,cropOrigin:J().cropOrigin,cropSize:J().cropSize,onCropChange:Y,containerSize:D,keepRatio:a.sendAsSticker,sendAsSticker:a.sendAsSticker}));Y=F||E||G||H||la||Boolean(a.draftTextLayer)||Boolean(J().selectedLayer);return k.jsxs("div",{className:c("WAWebMediaEditorImage.scss").container,children:[k.jsxs(d("WAWebFlex.react").FlexRow,{className:c("WAWebMediaEditorImage.scss").header,ref:w,children:[s?k.jsx("div",{className:c("WAWebMediaEditorImage.scss").closeButton,children:k.jsx(c("WAWebUnstyledButton.react"),{onClick:s,"aria-label":h._("__JHASH__HkY56KNcTgs__JHASH__"),children:k.jsx(d("WAWebXIcon").XIcon,{})})}):k.jsx("div",{className:c("WAWebMediaEditorImage.scss").closeButtonPlaceholder}),k.jsx(c("WAWebMediaEditorToolbarMain"),{selectedLayer:Z,inPaintMode:E,inCropRotateMode:F,inTextEditingMode:Boolean(a.draftTextLayer),inOutlineMode:G,canUndo:a.canUndo,canRedo:a.canRedo,onPaintSelect:ta,onChangeQuality:na,selectedQuality:t.quality,hdEligible:t.hdEligible&&!u,metadataByQuality:t.metadataByQuality,onCropRotateSelect:ua,onOutlineSelect:va,onTextSelect:a.onTextSelect,onEmojiSelect:a.onEmojiSelect,onStickerSelect:a.onStickerSelect,onToggleEmojiPanel:wa,onToggleStickerPanel:xa,onBlurSelect:a.onBlurSelect,onUndo:a.onUndo,onRedo:a.onRedo,showOutline:a.sendAsSticker}),k.jsx(d("WAWebFlex.react").FlexRow,{className:c("WAWebMediaEditorImage.scss").headerRight,justify:"end",children:Y&&k.jsx(d("WAWebMediaEditorToolbarButton.react").ToolbarButton,{onClick:V,children:h._("__JHASH__-c-jWK0O6-G__JHASH__")})})]}),k.jsxs("div",{ref:v,className:d("WAWebClassnames").classnamesConvertMeToStylexPlease((H={},H[c("WAWebMediaEditorImage.scss").cropRotateContainer]=F,H[c("WAWebMediaEditorImage.scss").canvasContainer]=!0,H)),children:[k.jsx("div",{className:c("WAWebMediaEditorImage.scss").canvas,style:{display:F?"none":"unset"},children:k.jsx(c("WAWebMediaEditorCanvas.react"),{ref:y,data:b,inPaintMode:E,inOutlineMode:G,paintColor:e,paintThickness:f,outlineSmoothing:g,currentlyEditingTextLayer:a.currentlyEditingTextLayer,draftTextLayer:a.draftTextLayer,scale:Ba(),onLayerSelect:a.onLayerSelect,onLayerUnselect:a.onLayerUnselect,onLayerTranslate:a.onLayerTranslate,onLayerTransform:a.onLayerTransform,onTextEditingStart:C,onTextEditingEnd:P,onTextInputOutsideClick:ya,onPaintDrawEnd:a.onPaintDrawEnd,onOutlineDrawEnd:a.onOutlineDrawEnd,onOutlineDone:V,canEditBackground:a.sendAsSticker,outlineEnabled:a.sendAsSticker})}),X]}),W]})});g.ImageBody=e}),98);
__d("WAWebAttachMediaDrawerAttachMediaTypeAudio.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={container:"_ahxd",media:"_ahxe"};b=a;g["default"]=b}),98);
__d("WAWebAttachMediaDrawerAttachMediaTypeAudio.react",["WAWebAttachMediaDrawerAttachMediaTypeAudio.scss","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){var b=a.mimeType;a=a.url;return i.jsx("div",{className:c("WAWebAttachMediaDrawerAttachMediaTypeAudio.scss").container,"data-animate-attach-media":!0,children:i.jsx("div",{className:c("WAWebAttachMediaDrawerAttachMediaTypeAudio.scss").media,children:i.jsx("audio",{controls:!0,type:b,src:a})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebMediaEditorPreview.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={container:"_amlw"};b=a;g["default"]=b}),98);
__d("WAWebMediaEditorPreviewHeader.react",["fbt","WAWebL10N","WAWebSvgComponentBase","WAWebXIcon","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(a){var b=a.filename,e=a.pageCount,f=null;e!=null&&e>0&&(f=h._("__JHASH___XJ7fQTC-Nq__JHASH__",[h._plural(e),h._param("count",c("WAWebL10N").n(e))]));return j.jsxs("div",{className:"x78zum5 x6s0dn4 x1qughib x1gg8mnh x1y1aw1k x1pi30zi xwib8y2 x1swvt13 xm0mufa",children:[j.jsx("button",{"aria-label":h._("__JHASH__7UD0Qr7XRlT__JHASH__"),onClick:a.onClose,className:"x1ypdohk",children:j.jsx(d("WAWebXIcon").XIcon,{"aria-hidden":!0,color:d("WAWebSvgComponentBase").SvgColorProp.SECONDARY})}),j.jsxs("div",{className:"x78zum5 x1iyjqo2 xs83m0k x1r8uery xdt5ytf x6s0dn4",children:[b&&j.jsx("span",{className:"x1f6kntn x1wm35g",children:b}),f!=null&&j.jsx("span",{className:"x1ok221b x1pg5gke x16cd2qt",children:f})]})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebMediaEditorPreviewAudio.react",["WAWebAttachMediaDrawerAttachMediaTypeAudio.react","WAWebMediaEditorPreview.scss","WAWebMediaEditorPreviewHeader.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){var b=a.item;a=a.onClose;var d=b.mimetype;b=b.fullPreview;return i.jsxs("div",{className:c("WAWebMediaEditorPreview.scss").container,children:[i.jsx(c("WAWebMediaEditorPreviewHeader.react"),{onClose:a}),i.jsx(c("WAWebAttachMediaDrawerAttachMediaTypeAudio.react"),{mimeType:d,url:b})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebMediaEditorPreviewFile.react",["fbt","WAWebFlex.react","WAWebL10nFilesize","WAWebMediaEditorCaptionInput.react","WAWebMediaEditorPreview.scss","WAWebMediaEditorPreviewHeader.react","WAWebMiscGatingUtils","WAWebMsgType","WAWebPreviewAudioIcon","WAWebPreviewCompressedIcon","WAWebPreviewDocIcon","WAWebPreviewGenericIcon","WAWebPreviewSheetIcon","WAWebPreviewSlidesIcon","WAWebPreviewTxtIcon","react","useWAWebModelValues"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react"),k={body:{flexGrow:"x1iyjqo2",width:"xh8yej3",$$css:!0},previewContainer:{boxSizing:"x9f619",paddingTop:"x13crsa5",paddingEnd:"xdd2zcy",paddingBottom:"x1rxj1xn",paddingStart:"x12p1mil",color:"x1mkayr0",backgroundColor:"x1q7yeco",borderTopStartRadius:"x1a2cdl4",borderTopEndRadius:"xnhgr82",borderBottomEndRadius:"x1qt0ttw",borderBottomStartRadius:"xgk8upj",$$css:!0},previewIcon:{marginBottom:"xieb3on",$$css:!0},header:{marginTop:"x1anpbxc",marginEnd:"x11i5rnm",marginBottom:"xyorhqc",marginStart:"x1mh8g0r",fontSize:"xngnso2",$$css:!0},metadata:{fontSize:"x1f6kntn",$$css:!0},footer:{position:"x1n2onr6",display:"x78zum5",alignItems:"x6s0dn4",justifyContent:"xl56j7k",minHeight:"xbktkl8",paddingTop:"x1y1aw1k",paddingEnd:"x1pi30zi",paddingBottom:"xwib8y2",paddingStart:"x1swvt13",$$css:!0}};function l(a){switch(a){case"text/plain":return j.jsx(d("WAWebPreviewTxtIcon").PreviewTxtIcon,{});case"text/rtf":case"application/msword":case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return j.jsx(d("WAWebPreviewDocIcon").PreviewDocIcon,{});case"text/csv":case"application/vnd.ms-excel":case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":return j.jsx(d("WAWebPreviewSheetIcon").PreviewSheetIcon,{});case"application/vnd.ms-powerpoint":case"application/vnd.openxmlformats-officedocument.presentationml.presentation":return j.jsx(d("WAWebPreviewSlidesIcon").PreviewSlidesIcon,{});case"audio/aac":case"audio/mp4":case"audio/amr":case"audio/mpeg":case"audio/ogg; codecs=opus":case"audio/wav":return j.jsx(d("WAWebPreviewAudioIcon").PreviewAudioIcon,{});case"application/zip":return j.jsx(d("WAWebPreviewCompressedIcon").PreviewCompressedIcon,{});default:return j.jsx(d("WAWebPreviewGenericIcon").PreviewGenericIcon,{})}}function a(a){var b=a.attachMedia,e=a.chat,f=a.fileExt,g=a.filename,i=a.filesize,m=a.mimeType,n=a.onCaptionChange,o=a.onClose,p=a.onEnter,q=a.onFiles,r=a.onToggleViewOnce,s=a.setCaptionInputRef;a=d("useWAWebModelValues").useModelValues(b,["caption"]);a=a.caption;var t;i=i!=null?d("WAWebL10nFilesize").getL10nFilesize(i):"";m=l(m);d("WAWebMiscGatingUtils").documentWithCaptionsSendEnabled()&&(t=j.jsx("div",{className:"x1n2onr6 x78zum5 x6s0dn4 xl56j7k xbktkl8 x1y1aw1k x1pi30zi xwib8y2 x1swvt13",children:j.jsx(c("WAWebMediaEditorCaptionInput.react"),{chat:e,caption:a,viewOnce:!1,viewOnceDisabled:!0,msgType:d("WAWebMsgType").MSG_TYPE.DOCUMENT,theme:"document",onToggleViewOnce:r,onChange:n,onEnter:p,onFiles:q,setCaptionInputRef:function(a){s(b.id,a)}},b.id)}));return j.jsxs("div",{className:c("WAWebMediaEditorPreview.scss").container,children:[j.jsx(c("WAWebMediaEditorPreviewHeader.react"),{onClose:o,filename:g}),j.jsx(d("WAWebFlex.react").FlexColumn,{xstyle:k.body,align:"center",justify:"center",children:j.jsxs(d("WAWebFlex.react").FlexColumn,{className:"x9f619 x13crsa5 xdd2zcy x1rxj1xn x12p1mil x1mkayr0 x1q7yeco x1a2cdl4 xnhgr82 x1qt0ttw xgk8upj",align:"center",justify:"center",children:[j.jsx("div",{className:"xieb3on",children:m}),j.jsx("div",{className:"x1anpbxc x11i5rnm xyorhqc x1mh8g0r xngnso2",children:h._("__JHASH__vn-VdO2YeU3__JHASH__")}),j.jsxs("div",{className:"x1f6kntn",children:[i,f!=null&&f!==""?" - "+f.toUpperCase():null]})]})}),t]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebAttachMediaDrawerAttachMediaTypeFile.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={container:"_ai1m",media:"_ai1n",document:"_ai1o",text:"_ai1p",icon:"_ai1q"};b=a;g["default"]=b}),98);
__d("WAWebAttachMediaDrawerAttachMediaTypeFile.react",["WAWebAttachMediaDrawerAttachMediaTypeFile.scss","WAWebClassnames","WAWebMimeTypes","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){var b=a.filename;a=a.mimeType;a=d("WAWebClassnames").classnamesConvertMeToStylexPlease(c("WAWebAttachMediaDrawerAttachMediaTypeFile.scss").icon,(a=(a=d("WAWebMimeTypes").DOCUMENT_MIMETYPES[a])==null?void 0:a.icon)!=null?a:"icon-doc-generic");return i.jsx("div",{className:c("WAWebAttachMediaDrawerAttachMediaTypeFile.scss").container,"data-animate-attach-media":!0,children:i.jsx("div",{className:c("WAWebAttachMediaDrawerAttachMediaTypeFile.scss").media,children:i.jsxs("div",{className:c("WAWebAttachMediaDrawerAttachMediaTypeFile.scss").document,children:[i.jsx("div",{className:a}),i.jsx("div",{className:c("WAWebAttachMediaDrawerAttachMediaTypeFile.scss").text,children:b})]})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebAttachMediaDrawerAttachMediaTypePdf.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={container:"_ahbq",preview:"_ahbr",caption:"_ahbs",img:"_ahbt",imgBorder:"_ahbu"};b=a;g["default"]=b}),98);
__d("WAWebAttachMediaDrawerAttachMediaTypePdf.react",["fbt","WAWebAttachMediaDrawerAttachMediaTypeFile.react","WAWebAttachMediaDrawerAttachMediaTypePdf.scss","WAWebClassnames","WAWebL10N","WAWebObjectFit.react","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(a){var b=a.filename,e=a.fullPreview,f=a.fullPreviewSize,g=a.mimeType,i=a.pageCount,k=a.showBorder;k=k===void 0?!1:k;a=a.showPageCount;a=a===void 0?!0:a;if(e&&f&&i!=null&&i>0){var l;i=h._("__JHASH___XJ7fQTC-Nq__JHASH__",[h._plural(i),h._param("count",c("WAWebL10N").n(i))]);return j.jsxs("div",{className:(l=c("WAWebAttachMediaDrawerAttachMediaTypePdf.scss")).container,"data-js-attach-preview":!0,children:[j.jsx("div",{className:l.preview,children:j.jsx(c("WAWebObjectFit.react"),{type:"scaleDown",size:f,children:j.jsx("img",{alt:h._("__JHASH__oQ6YeRrk7BR__JHASH__"),src:e,className:d("WAWebClassnames").classnamesConvertMeToStylexPlease((f={},f[l.imgBorder]=k,f[l.img]=!0,f))})})}),a&&j.jsx("div",{className:c("WAWebAttachMediaDrawerAttachMediaTypePdf.scss").caption,children:i})]})}return j.jsx(c("WAWebAttachMediaDrawerAttachMediaTypeFile.react"),{mimeType:g,filename:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebMediaEditorPreviewPdf.react",["WAWebAttachMediaDrawerAttachMediaTypePdf.react","WAWebFlex.react","WAWebFlexItem.react","WAWebMediaEditorCaptionInput.react","WAWebMediaEditorPreviewFile.react","WAWebMediaEditorPreviewHeader.react","WAWebMiscGatingUtils","WAWebMsgType","react","useWAWebModelValues"],(function(a,b,c,d,e,f,g){var h,i=h||c("react"),j={container:{position:"x1n2onr6",overflowX:"x6ikm8r",overflowY:"x10wlt62",height:"x5yr21d",$$css:!0},containerElements:{width:"xh8yej3",$$css:!0},footer:{position:"x1n2onr6",minHeight:"xbktkl8",paddingTop:"x1y1aw1k",paddingEnd:"x1pi30zi",paddingBottom:"xwib8y2",paddingStart:"x1swvt13",$$css:!0}};function a(a){var b=a.attachMedia,e=a.chat,f=a.item,g=a.onCaptionChange,h=a.onClose,k=a.onEnter,l=a.onFiles,m=a.onToggleViewOnce,n=a.setCaptionInputRef;a=f.mimetype;var o=f.fullPreview,p=f.fullPreviewSize,q=f.documentPageCount,r=f.filename,s=o&&p&&q!=null&&q>0,t=d("useWAWebModelValues").useModelValues(b,["caption"]);t=t.caption;if(!s)return i.jsx(c("WAWebMediaEditorPreviewFile.react"),{mimeType:f.mimetype,filesize:f.filesize,filename:f.filename,fileExt:f.fileExt,onClose:h,attachMedia:f,chat:e,onCaptionChange:g,onEnter:k,setCaptionInputRef:n,onToggleViewOnce:m,onFiles:l});s=d("WAWebMiscGatingUtils").documentWithCaptionsSendEnabled()&&!e.contact.isEnterprise?i.jsx(c("WAWebMediaEditorCaptionInput.react"),{chat:e,caption:t,viewOnce:!1,viewOnceDisabled:!0,msgType:d("WAWebMsgType").MSG_TYPE.DOCUMENT,theme:"document",onToggleViewOnce:m,onChange:g,onEnter:k,onFiles:l,setCaptionInputRef:function(a){n(b.id,a)}},b.id):null;return i.jsxs(d("WAWebFlex.react").FlexColumn,{xstyle:j.container,justify:"all",align:"center",children:[i.jsx(c("WAWebFlexItem.react"),{xstyle:j.containerElements,children:i.jsx(c("WAWebMediaEditorPreviewHeader.react"),{onClose:h,filename:r,pageCount:q})}),i.jsx(c("WAWebAttachMediaDrawerAttachMediaTypePdf.react"),{fullPreview:o,fullPreviewSize:p,pageCount:q,showPageCount:!1,showBorder:!0,mimeType:a,filename:r}),i.jsx(d("WAWebFlex.react").FlexRow,{xstyle:[j.footer,j.containerElements],justify:"center",align:"center",children:s})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebAttachMediaDrawerAttachMediaTypeMedia.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={container:"_ai50",media:"_ai51",img:"_ai52",audio:"_ai53",videoContainer:"_ai54",spinner:"_ai55",video:"_ai56",staticPreview:"_ai57"};b=a;g["default"]=b}),98);
__d("WAWebAttachMediaDrawerAttachMediaTypeMedia.react",["fbt","WAWebAttachMediaDrawerAttachMediaTypeMedia.scss","WAWebClassnames","WAWebMimeTypes","WAWebObjectFit.react","WAWebSpinner.react","WAWebVideo.react","lodash","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react"),k=c("lodash").pickBy(d("WAWebMimeTypes").MIMETYPES,function(a){return(a==null?void 0:a.msgType)==="image"||(a==null?void 0:a.msgType)==="video"});function a(a){var b=a.isGif,e=a.mimeType,f=a.preview,g=a.processing,i=a.size;a=a.url;var l;switch(k[e].msgType){case"image":l=j.jsx("img",{alt:h._("__JHASH__oQ6YeRrk7BR__JHASH__"),src:a,className:c("WAWebAttachMediaDrawerAttachMediaTypeMedia.scss").img});break;case"video":b=b?{loop:!g,autoPlay:!g,muted:!1,controls:!1}:{};var m=g?j.jsx("div",{className:c("WAWebAttachMediaDrawerAttachMediaTypeMedia.scss").spinner,children:j.jsx(d("WAWebSpinner.react").Spinner,{color:"white",size:50,stroke:3})}):null;f=f?j.jsx("img",{alt:h._("__JHASH__oQ6YeRrk7BR__JHASH__"),className:c("WAWebAttachMediaDrawerAttachMediaTypeMedia.scss").staticPreview,src:"data:image/jpeg;base64,"+f}):null;g=g?null:j.jsx(c("WAWebVideo.react"),babelHelpers["extends"]({controls:!0,controlsList:"nodownload nofullscreen",className:c("WAWebAttachMediaDrawerAttachMediaTypeMedia.scss").video},b,{src:a}));l=j.jsxs("div",{className:d("WAWebClassnames").classnamesConvertMeToStylexPlease(c("WAWebAttachMediaDrawerAttachMediaTypeMedia.scss").img,c("WAWebAttachMediaDrawerAttachMediaTypeMedia.scss").videoContainer),children:[m,g,f]});break;case"audio":l=j.jsx("audio",{controls:!0,className:c("WAWebAttachMediaDrawerAttachMediaTypeMedia.scss").audio,type:e,src:a})}return j.jsx("div",{className:c("WAWebAttachMediaDrawerAttachMediaTypeMedia.scss").container,"data-animate-attach-media":!0,children:j.jsx("div",{className:c("WAWebAttachMediaDrawerAttachMediaTypeMedia.scss").media,children:j.jsx(c("WAWebObjectFit.react"),{type:"scaleDown",size:i,children:l})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebMediaEditorPreviewVideo.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={container:"_ak04",footer:"_ak05"};b=a;g["default"]=b}),98);
__d("WAWebMediaEditorPreviewVideo.react",["WAWebAttachMediaDrawerAttachMediaTypeMedia.react","WAWebAttachMediaModel","WAWebMediaEditorCaptionInput.react","WAWebMediaEditorPreviewHeader.react","WAWebMediaEditorPreviewVideo.scss","WAWebMsgType","react","useWAWebModelValues"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){var b=a.attachMedia,e=a.chat,f=a.internLinksEnabled,g=a.onCaptionChange,h=a.onClose,j=a.onEnter,k=a.onFiles,l=a.onToggleViewOnce,m=a.phoneNumbersEnabled,n=a.setCaptionInputRef,o=a.viewOnce;a=a.viewOnceDisabled;var p=d("useWAWebModelValues").useModelValues(b,["caption"]);p=p.caption;return i.jsxs("div",{className:c("WAWebMediaEditorPreviewVideo.scss").container,children:[i.jsx(c("WAWebMediaEditorPreviewHeader.react"),{onClose:h}),i.jsx(c("WAWebAttachMediaDrawerAttachMediaTypeMedia.react"),{mimeType:b.mimetype,url:b.fullPreview,isGif:b.isGif,size:b.fullPreviewSize,processing:b.state===d("WAWebAttachMediaModel").ATTACH_MEDIA_STATE.PROCESSING,preview:b.preview}),i.jsx("div",{className:c("WAWebMediaEditorPreviewVideo.scss").footer,children:i.jsx(c("WAWebMediaEditorCaptionInput.react"),{chat:e,caption:p,viewOnce:o,viewOnceDisabled:a,msgType:d("WAWebMsgType").MSG_TYPE.VIDEO,theme:"video",onToggleViewOnce:l,onChange:g,onEnter:j,onFiles:k,setCaptionInputRef:function(a){n(b.id,a)},internLinksEnabled:f,phoneNumbersEnabled:m},b.id)})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebMediaEditor.react",["fbt","$InternalEnum","Promise","WAFilteredCatch","WALogger","WANullthrows","WAWebABProps","WAWebAddAltIcon","WAWebAttachMediaModel","WAWebClassnames","WAWebCmd","WAWebDataTransfer","WAWebDrawer.react","WAWebDrawerBody.react","WAWebEventFiles","WAWebFileUtils","WAWebFlex.react","WAWebFocusTracer","WAWebKeyboardHotKeys.react","WAWebMediaEditor.scss","WAWebMediaEditorAddIcon","WAWebMediaEditorData","WAWebMediaEditorEnumsColors","WAWebMediaEditorEnumsFonts","WAWebMediaEditorEnumsThickness","WAWebMediaEditorFilmstripDragAndDrop.react","WAWebMediaEditorGeometryPoint","WAWebMediaEditorGeometrySize","WAWebMediaEditorImage.react","WAWebMediaEditorLayersBlur","WAWebMediaEditorLayersImage","WAWebMediaEditorLayersText","WAWebMediaEditorPreviewAudio.react","WAWebMediaEditorPreviewFile.react","WAWebMediaEditorPreviewPdf.react","WAWebMediaEditorPreviewVideo.react","WAWebMediaEditorToolbarBlur.react","WAWebMediaEditorUtilsCreateCanvasAndImage","WAWebMediaGatingUtils","WAWebMimeTypes","WAWebMiscErrors","WAWebMiscGatingUtils","WAWebMsgType","WAWebNewsletterGatingUtils","WAWebRoundWithCount.react","WAWebSendIcon","WAWebSendStatusGatingUtils","WAWebSpinner.react","WAWebStatusPrivacySettingButton.react","WAWebStickerConstants","WAWebStickerSendWamEvent","WAWebSvgButton.react","WAWebTimeSpentLoggingNavigation","WAWebToast.react","WAWebToastManager","WAWebUim","WAWebUserPrefsMeUser","WAWebWamEnumMediaPickerOriginType","WAWebWamEnumStickerMakerSourceType","WAWebWamEnumStickerSendOriginType","WAWebWamEnumThreadType","WAWebWamEnumWebcStickerMakerEventNameType","WAWebWebcMediaEditorSendWamEvent","WAWebWebcStickerMakerEventsWamEvent","asyncToGeneratorRuntime","cr:4943","err","gkx","react","stylex","useWAWebForceUpdate","useWAWebLazyRef","useWAWebListener","useWAWebToggle","useWAWebUnmountSignal"],(function(a,b,c,d,e,f,g,h){var i,j,k,l;function aa(){var a=babelHelpers.taggedTemplateLiteralLoose(["MediaEditor: Updated MediaEditorData"]);aa=function(){return a};return a}e=l||d("react");var m=k||(k=c("react")),n=e.forwardRef,ba=e.useEffect,ca=e.useImperativeHandle,o=e.useRef,p=e.useState,da=200,ea=64,fa=ea*2,ga=128,ha=1.2,ia=d("WAWebMediaEditorLayersText").DEFAULT_FONT_SIZE*3,ja=200,ka=100,q=b("$InternalEnum").Mirrored(["ATTACH","CAPTURE","STATUS"]),la={outerContainerCapture:{width:"xh8yej3",height:"x5yr21d",$$css:!0}};function a(a,e){var f;d("WAWebTimeSpentLoggingNavigation").useTsNavigation(a.chat.isNewsletter&&d("WAWebNewsletterGatingUtils").isNewsletterTSLEnabled()?{surface:"channel-producer-media-editor",extras:{channelWid:a.chat.id,threadType:d("WAWebWamEnumThreadType").THREAD_TYPE.CHANNEL}}:null);var g=a.onClose,k=g===void 0?function(){}:g;g=a.theme;var l=g===void 0?q.ATTACH:g;g=a.sendAsSticker;var n=g===void 0?!1:g,r=a.chat,s=a.mediaCollection;g=a.initCaption;var ma=a.onDropText,na=a.onSendMedia,t=p(function(){return d("WAWebMediaEditorEnumsColors").getColorValue(d("WAWebMediaEditorEnumsColors").ColorType.BLUE)}),oa=t[0],pa=t[1];t=p(n!=null&&n?d("WAWebMediaEditorEnumsThickness").ThicknessType.XLARGE:d("WAWebMediaEditorEnumsThickness").ThicknessType.SMALL);var qa=t[0],u=t[1];t=p(!0);var ra=t[0],sa=t[1];t=p(function(){return d("WAWebMediaEditorEnumsColors").getColorValue(d("WAWebMediaEditorEnumsColors").ColorType.BLACK)});var ta=t[0],ua=t[1];t=p(d("WAWebMediaEditorEnumsFonts").FontType.SANS_SERIF);var va=t[0],wa=t[1];t=p(d("WAWebMediaEditorEnumsFonts").TextAlignment.CENTER);var xa=t[0],ya=t[1];t=p(!0);var za=t[0],Aa=t[1];t=p(!1);var v=t[0],Ba=t[1];t=p(!1);var Ca=t[0],Da=t[1];t=p(!1);var Ea=t[0],Fa=t[1];t=p(null);var w=t[0];t=t[1];var x=p(null),y=x[0];x=x[1];var z=p(!1),A=z[0],Ga=z[1];z=p(null);var B=z[0],C=z[1];z=p(null);var D=z[0],E=z[1];z=c("useWAWebToggle")(!1);var F=z[0],G=z[1];z=p((z=n)!=null?z:!1);var H=z[0],Ha=z[1],I=o(),J=o(),K=o(),L=o();z=o(g==null?void 0:g.text);var M=o(),N=o(d("WAWebMediaEditorToolbarBlur.react").BLUR_DEFAULT_MODE),O=o(d("WAWebMediaEditorToolbarBlur.react").BLUR_DEFAULT_RADIUS),Ia=c("useWAWebLazyRef")(function(){return new Map()});g=function(a,b){Ia.current.set(a,b)};var Ja=c("useWAWebLazyRef")(function(){return new Map()}),P=c("useWAWebLazyRef")(function(){return new Map()}),Q=function(a,b){P.current.set(a,b)},Ka=c("useWAWebForceUpdate")(),La=c("useWAWebUnmountSignal")();s.isStickerMaker=H;d("useWAWebListener").useListener(s,["add","remove","reset"],Ka);var R=function(){if(!s.canSend())return;var a=s.uiProcessMsgs(r);a=a.errorMsgs;a&&(d("WAWebToastManager").ToastManager.open(m.jsx(d("WAWebToast.react").Toast,{msg:a})),s.getPreviewableMedias().length===0&&k());Ka()};d("useWAWebListener").useListener(s,["active-change","change:state","change:previewable"],R);var Ma=function(){var a;return s.length===1&&((a=s.at(0))==null?void 0:a.type)===d("WAWebMsgType").MSG_TYPE.IMAGE};R=function(){var a=!H&&Ma();Ha(a);u(a?d("WAWebMediaEditorEnumsThickness").ThicknessType.XLARGE:d("WAWebMediaEditorEnumsThickness").ThicknessType.SMALL)};d("useWAWebListener").useListener(d("WAWebCmd").Cmd,"toggle_sticker_maker",R);ba(function(){var a;(a=L.current)==null?void 0:a.focus();return function(){M.current&&self.clearTimeout(M.current)}},[]);ba(function(){s.isStickerMaker=H});var Na=function(){return L.current},Oa=function(a){var b;if((b=I.current)==null?void 0:b.resetUIState())return!1;else if(D){C(null);E(null);return!1}b=a===d("WAWebUim").DismissReason.UIM_INTERACTION;k(b);return!0};ca(e,function(){return{getElement:Na,handleRequestDismiss:Oa}});R=s.getActive();e=z.current;z=A;!z&&!w&&e!=null&&e!==""&&R&&(R.type===d("WAWebMsgType").MSG_TYPE.IMAGE||R.type===d("WAWebMsgType").MSG_TYPE.VIDEO||R.type===d("WAWebMsgType").MSG_TYPE.DOCUMENT&&!r.contact.isEnterprise)&&(R.caption=e,z=!0);e=(e=R==null?void 0:R.canUndoMediaEditorData())!=null?e:!1;f=(f=R==null?void 0:R.canRedoMediaEditorData())!=null?f:!1;R!==y&&(x(R),t(R),Da(e),Fa(f),Ga(z));var S=function(){return w==null?c("WAWebMediaEditorData").create():w.mediaEditorData},Pa=function(){var a;Da((a=w==null?void 0:w.canUndoMediaEditorData())!=null?a:!1);Fa((a=w==null?void 0:w.canRedoMediaEditorData())!=null?a:!1)},T=function(a,b){if(a===S())return;if(w){w.updateMediaEditorData(a,{undoable:(a=b==null?void 0:b.undoable)!=null?a:!1,lastAction:(a=b==null?void 0:b.lastAction)!=null?a:null});Pa()}if(b==null?void 0:b.updatePreview){(a=I.current)==null?void 0:a.updatePreview()}d("WALogger").LOG(aa())},Qa=function(){var a;return(a=I.current)==null?void 0:a.getBackground()},Ra=function(a){a===void 0&&(a=!0);if(w&&w.canUndoMediaEditorData()){var b,c=w.lastMediaEditorAction;w.undoMediaEditorData(a);a=w.lastMediaEditorAction;Pa();(b=I.current)==null?void 0:b.updatePreview();(b=I.current)==null?void 0:b.undoAction(c,a)}},Sa=function(){if(w&&w.canRedoMediaEditorData()){var a,b=w.lastMediaEditorAction;w.redoMediaEditorData();var c=w.lastMediaEditorAction;Pa();(a=I.current)==null?void 0:a.updatePreview();(a=I.current)==null?void 0:a.redoAction(c,b)}},Ta=function(a,b,d,e){var f=c("WANullthrows")(I.current).getCanvasScale(),g=b.width*f;f=b.height*f;d=d/g;g=e/f;e=Math.min(d,g);f=S().addImageLayerToCenter({type:a,image:b,editable:!0,scale:e});T(f,{updatePreview:!0,undoable:!0})},Ua=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{a=(yield d("WAWebMediaEditorUtilsCreateCanvasAndImage").createImageFromEmoji(a));if(!a)return;var b=H?fa:ea;Ta(d("WAWebMediaEditorLayersImage").ImageLayerType.Emoji,a,b,b);H&&new(d("WAWebWebcStickerMakerEventsWamEvent").WebcStickerMakerEventsWamEvent)({stickerMakerEventName:d("WAWebWamEnumWebcStickerMakerEventNameType").WEBC_STICKER_MAKER_EVENT_NAME_TYPE.EMOJI_ADDED}).commit()}catch(a){d("WAWebToastManager").ToastManager.open(m.jsx(d("WAWebToast.react").Toast,{msg:h._("__JHASH__vffiwzVw18V__JHASH__")}))}});return function(b){return a.apply(this,arguments)}}(),Va=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){try{a=(yield d("WAWebMediaEditorUtilsCreateCanvasAndImage").createImageFromSticker(a));if(!a)throw c("err")("Create image from sticker failed");Ta(d("WAWebMediaEditorLayersImage").ImageLayerType.Sticker,a,ga,ga);H&&new(d("WAWebWebcStickerMakerEventsWamEvent").WebcStickerMakerEventsWamEvent)({stickerMakerEventName:d("WAWebWamEnumWebcStickerMakerEventNameType").WEBC_STICKER_MAKER_EVENT_NAME_TYPE.STICKER_ADDED}).commit()}catch(a){d("WAWebToastManager").ToastManager.open(m.jsx(d("WAWebToast.react").Toast,{msg:h._("__JHASH__vffiwzVw18V__JHASH__")}))}});return function(b){return a.apply(this,arguments)}}(),Wa=function(){var a=S().clearSelectedLayer();T(a)},Xa=function(){var a=S().clearSelectedLayer();T(a)},Ya=function(){var a=Qa(),b=S();if(!a||b.outlineLayer.isEmpty())return;var e=b.cropCenter,f=a.width,g=a.height;e=new(c("WAWebMediaEditorGeometryPoint"))({x:e.x-f/2,y:e.y-g/2});var h=-b.rotation;f=Math.max(f,g);g=b.cropSize.dimension;var i=d("WAWebStickerConstants").STICKER_DIMENSION-d("WAWebStickerConstants").STICKER_PADDING*2;g=g*(i/d("WAWebStickerConstants").STICKER_DIMENSION);i=g/f;g=b.updateBackground(a,e,h,i).clearOutlinePaths();T(g,{undoable:!0,updatePreview:!0,lastAction:d("WAWebAttachMediaModel").MediaEditorAction.OutlineDone});H&&new(d("WAWebWebcStickerMakerEventsWamEvent").WebcStickerMakerEventsWamEvent)({stickerMakerEventName:d("WAWebWamEnumWebcStickerMakerEventNameType").WEBC_STICKER_MAKER_EVENT_NAME_TYPE.IMAGE_OUTLINED}).commit()},Za=function(){var a=S().clearOutlinePaths();T(a,{undoable:!0,updatePreview:!0})},$a=function(a,b,c){a=S().setRotation(a).setCrop(b,c);T(a,{undoable:!0,updatePreview:!0,lastAction:d("WAWebAttachMediaModel").MediaEditorAction.CropRotateCanvas});H&&new(d("WAWebWebcStickerMakerEventsWamEvent").WebcStickerMakerEventsWamEvent)({stickerMakerEventName:d("WAWebWamEnumWebcStickerMakerEventNameType").WEBC_STICKER_MAKER_EVENT_NAME_TYPE.IMAGE_CROPPED}).commit()},ab=function(a,b,d,e){var f=c("WANullthrows")(I.current).getCanvasScale(),g=c("WANullthrows")(I.current).getCanvasSize(),h=Math.min(g.width,ja/f);g=Math.min(g.height,ka/f);f=S().addBlurLayerToCenter({image:a,size:new(c("WAWebMediaEditorGeometrySize"))({width:h,height:g}),mode:b,radius:d,backgroundFrame:e});T(f,{updatePreview:!0,undoable:!0})},bb=function(a){var b=S();b=b.selectedLayer;if(b instanceof d("WAWebMediaEditorLayersBlur").BlurLayer){b=S().setBlurMode(b,a);T(b,{updatePreview:!0,undoable:!0});N.current=a}},cb=function(a,b){b===void 0&&(b=!1);var c=S();c=c.selectedLayer;if(c instanceof d("WAWebMediaEditorLayersBlur").BlurLayer){c=S().setBlurRadius(c,a);T(c,{updatePreview:!0,undoable:b});O.current=a}},db=function(){var a=S().selectedLayer;if(a instanceof d("WAWebMediaEditorLayersBlur").BlurLayer&&!a.confirmed)Ra(!1);else{a=S().clearSelectedLayer();T(a);ab(c("WANullthrows")((a=S().background)==null?void 0:a.image),N.current,O.current,c("WANullthrows")((a=S().background)==null?void 0:a.frame))}},eb=function(a){pa(a)},fb=function(a){u(a)},gb=function(a){sa(a)},hb=function(){T(S().clearSelectedLayer())},ib=function(){if(B)return;hb();var a=c("WANullthrows")(I.current).getCanvasScale();a=ha/a;if(H){var b=S();b=b.cropSize.dimension;b=ia*b/d("WAWebStickerConstants").STICKER_DIMENSION;a=b/d("WAWebMediaEditorLayersText").DEFAULT_FONT_SIZE}b={origin:S().cropCenter,text:"",textColor:ta,textBackground:za,alignment:xa,font:va,scale:a};a=S().addTextLayer(b);b=c("WANullthrows")(a.lastTextLayer);E(b);C(null)},jb=function(a){wa(a);var b=S();b=b.selectedLayer;if(D)E(D.setFont(a));else if(b&&b instanceof d("WAWebMediaEditorLayersText").TextLayer){b=S().setFont(b,a);T(b,{updatePreview:!0,undoable:!0})}},kb=function(a){ya(a);var b=S();b=b.selectedLayer;if(D)E(D.setAlignment(a));else if(b&&b instanceof d("WAWebMediaEditorLayersText").TextLayer){b=S().setAlignment(b,a);T(b,{updatePreview:!0,undoable:!0})}},lb=function(a){ua(a);var b=S();b=b.selectedLayer;if(D)E(D.setTextColor(a));else if(b&&b instanceof d("WAWebMediaEditorLayersText").TextLayer){b=S().setTextColor(b,a);T(b,{updatePreview:!0,undoable:!0})}},mb=function(){var a=!za;Aa(a);var b=S();b=b.selectedLayer;if(D)E(D.setTextBackground(a));else if(b&&b instanceof d("WAWebMediaEditorLayersText").TextLayer){b=S().setTextBackground(b,a);T(b,{updatePreview:!0,undoable:!0})}},nb=function(a){E(a),C(a)},ob=function(a,b){if(!b)B&&T(S().deleteLayer(B),{updatePreview:!0,undoable:Boolean(a.text)});else{a=S();b=c("WANullthrows")(D).setText(b);!B?(a=a.addTextLayer(b),H&&new(d("WAWebWebcStickerMakerEventsWamEvent").WebcStickerMakerEventsWamEvent)({stickerMakerEventName:d("WAWebWamEnumWebcStickerMakerEventNameType").WEBC_STICKER_MAKER_EVENT_NAME_TYPE.TEXT_ADDED}).commit()):a=a.updateLayer(c("WANullthrows")(B),b);T(a,{updatePreview:!0,undoable:!0})}self.setTimeout(function(){E(null),C(null)},0);(b=L.current)==null?void 0:b.focus()},pb=function(a){T(S().addPaintPath(a),{undoable:!0,updatePreview:!0})},qb=function(a){T(S().addOutlinePath(a),{undoable:!0,updatePreview:!0,lastAction:d("WAWebAttachMediaModel").MediaEditorAction.Outline})},rb=function(a){if(!a.editable)return;var b=S().setSelectedLayer(a);a instanceof d("WAWebMediaEditorLayersBlur").BlurLayer&&(a.confirmed||(b=b.updateLayer(a,a.setConfirmed())),N.current=a.mode,O.current=a.radius);T(b);a instanceof d("WAWebMediaEditorLayersText").TextLayer&&(ua(a.textColor),Aa(a.textBackground),wa(a.font))},sb=function(a,b){var c=a instanceof d("WAWebMediaEditorLayersImage").ImageLayer&&a.isBackground();c?T(S().translateBackground(b),{updatePreview:!0,undoable:!0}):T(S().translateLayer(a,b),{updatePreview:!0,undoable:!0})},tb=function(a,b,c,e){var f=a instanceof d("WAWebMediaEditorLayersImage").ImageLayer&&a.isBackground();f?T(S().transformBackground(b,c),{updatePreview:!0,undoable:!0}):T(S().transformLayer(a,b,c,e),{updatePreview:!0,undoable:!0})},ub=function(a){a=S().deleteLayer(a);T(a,{updatePreview:!0,undoable:!0})},vb=function(b){d("WAWebEventFiles").getFiles(b).then(function(c){if(La.aborted)return;var e;b.shiftKey&&b.altKey&&c.length===1&&(Ha(!0),u(d("WAWebMediaEditorEnumsThickness").ThicknessType.XLARGE),e=!0);return s.processAttachments(c.map(function(a){return{file:a,stickerMaker:e}}),d("WAWebWamEnumMediaPickerOriginType").MEDIA_PICKER_ORIGIN_TYPE.CHAT_PHOTO_LIBRARY,a.chat)})["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebMiscErrors").MediaDragDropError,function(a){s.length||ma(a.src)})),b.target.value&&(b.target.value="")};y=function(a){if(F||H)return;vb(a)};x=function(a,b){if(F||H)return;Ba(a);!a&&!b&&!s.length&&k()};var U=function(a){if(!w)return;var b=s.indexOf(w);w.updateCaption(a);b===0&&a===""&&A&&Ga(!1);b=P.current.get(w.id);b&&Ja.current.set(w.id,b.editorContent())},V=function(b){b=b.getFiles().filter(function(a){a=d("WAWebFileUtils").typeFromMimetype(a.type);return a==="image"||a==="video"}).map(function(a){return{file:a}});s.processAttachments(b,d("WAWebWamEnumMediaPickerOriginType").MEDIA_PICKER_ORIGIN_TYPE.PASTE,a.chat)};t=function(a){a.preventDefault();a.stopPropagation();a=new(c("WAWebDataTransfer"))(a.clipboardData);a.hasFiles()&&V(a)};R=function(){if(J.current){var a=J.current;a.click()}};var wb=function(a){if(H){var b={stickerSendOrigin:d("WAWebWamEnumStickerSendOriginType").STICKER_SEND_ORIGIN_TYPE.STICKER_MAKER,stickerIsAnimated:!1,stickerIsFirstParty:!1,stickerIsFromStickerMaker:!0,stickerMakerSourceType:d("WAWebWamEnumStickerMakerSourceType").STICKER_MAKER_SOURCE_TYPE.WEB_STICKER_MAKER};d("WAWebABProps").getABPropConfigValue("gimmick_phase_two_logging_enabled")&&(b=babelHelpers["extends"]({},b,{stickerIsLottie:!1}));new(d("WAWebStickerSendWamEvent").StickerSendWamEvent)(b).commit();new(d("WAWebWebcStickerMakerEventsWamEvent").WebcStickerMakerEventsWamEvent)({stickerMakerEventName:d("WAWebWamEnumWebcStickerMakerEventNameType").WEBC_STICKER_MAKER_EVENT_NAME_TYPE.SEND_STICKER}).commit();return}var c=0,e=0,f=0,g=0,h=0,i=0,j=0;a.forEach(function(a){var b=a.mediaEditorData;a.type===d("WAWebMsgType").MSG_TYPE.IMAGE&&(c++,b.hasEdits()&&e++,b.paintLayer.paths.length>0&&f++,b.layers.some(function(a){return a instanceof d("WAWebMediaEditorLayersBlur").BlurLayer})&&j++);b.layers.forEach(function(a){a instanceof d("WAWebMediaEditorLayersImage").ImageLayer?(a.isEmoji()&&g++,a.isSticker()&&h++):a instanceof d("WAWebMediaEditorLayersText").TextLayer&&i++})});new(d("WAWebWebcMediaEditorSendWamEvent").WebcMediaEditorSendWamEvent)({imageCount:c,editedImageCount:e,paintedImageCount:f,blurImageCount:j,emojiLayerCount:g,stickerLayerCount:h,textLayerCount:i}).commit()},xb=function(){var a,b=r.contact.isEnterprise;return s.length===1&&((a=s.at(0))==null?void 0:a.isViewableOnce())===!0&&!b&&!d("WAWebUserPrefsMeUser").isMeAccount(r.contact.id)&&!n},W=function(a){a==null?void 0:a.preventDefault();a==null?void 0:a.stopPropagation();if(!s.canSend())return;var c=s.getPreviewableMedias();if(c.length===0){k();return}if((w==null?void 0:w.mediaEditorData.hasEdits())||H){(a=I.current)==null?void 0:a.updatePreview({immediately:!0})}var d=[];c.forEach(function(a){var b=a.editedFile;if(b&&(a.mediaEditorData.hasEdits()||H)){a=s.replace(a.id,{file:b,asSticker:H});d.push(a)}});(i||(i=b("Promise"))).all(d).then(function(){var a=s.getPreviewableMedias();if(a.length===0)return;a=a.map(function(a){var b;b=(b=a.caption)==null?void 0:b.trim();var c=[],d=[],e=Ja.current.get(a.id);if(e){var f=e.text;e=e.data;f.length&&(b=f.trim(),c=e.mentionedJidList||[],d=e.groupMentions||[])}a.caption=(f=b)!=null?f:void 0;return{media:a,mentionedJidList:c,groupMentions:d}});na(a,{initCaptionUsed:A,isViewOnce:xb()&&F});wb(c)})};e=function(a){if(!w)return;if(a.repeat)return;if(a.shiftKey)return;if(D)return;var b=P.current.get(w.id);if(b==null?void 0:b.isFocused())return;b=S();b=b.selectedLayer;if(b instanceof d("WAWebMediaEditorLayersText").TextLayer){a.preventDefault();a.stopPropagation();nb(b);return}if((a=I.current)==null?void 0:a.resetUIState())return;W()};var yb=function(){if(!w)return;var a=Ia.current.get(w.id);a&&a.scrollIntoView()},zb=function(){var a=s.setPrevAsActive();if(!a)return;yb()},Ab=function(){var a=s.setNextAsActive();if(!a)return;yb()},Bb=function(a,b){if(!w||b.repeat||D)return;var c=w&&!w.caption,d=P.current.get(w.id),e=!1;d&&(e=!c&&d.isFocused()&&(!d.isCursorAtStart()||a!=="left")&&(!d.isCursorAtEnd()||a!=="right"));e||(b.preventDefault(),b.stopPropagation(),a==="left"?zb():Ab())};f=function(a){s.setActive(a)};z=function(a,b){b.stopPropagation(),b.preventDefault(),s.remove(a),s.getValidMedias().length===0?M.current=self.setTimeout(function(){k()},da):K.current&&c("WAWebFocusTracer").focus(K.current)};var Cb=function(b){var a=null;switch(b.type){case d("WAWebMsgType").MSG_TYPE.STICKER:case d("WAWebMsgType").MSG_TYPE.IMAGE:a=m.jsx(d("WAWebMediaEditorImage.react").ImageBody,{ref:I,attachMedia:b,chat:r,onCaptionChange:U,onClose:l===q.CAPTURE?null:k,onEnter:W,setCaptionInputRef:Q,paintColor:oa,paintThickness:qa,outlineSmoothing:ra,canUndo:Ca,canRedo:Ea,currentlyEditingTextLayer:B,draftTextLayer:D,viewOnce:F,viewOnceDisabled:!xb(),sendAsSticker:H,internLinksEnabled:l!==q.STATUS,phoneNumbersEnabled:l!==q.STATUS,onPaintSelect:Wa,onOutlineSelect:Xa,onOutlineDone:Ya,onOutlineReset:Za,onTextSelect:ib,onTextBackgroundToggle:mb,onEmojiSelect:Ua,onStickerSelect:Va,onLayerSelect:rb,onLayerUnselect:hb,onLayerDelete:ub,onLayerTranslate:sb,onLayerTransform:tb,onTextEditingStart:nb,onTextEditingEnd:ob,onTextColorSelect:lb,onFontSelect:jb,onAlignmentSelect:kb,onPaintColorSelect:eb,onPaintThicknessSelect:fb,onOutlineSmoothingToggle:gb,onCropRotateCanvas:$a,onBlurModeChange:bb,onBlurRadiusChange:cb,onBlurSelect:db,onUndo:Ra,onRedo:Sa,onPaintDrawEnd:pb,onOutlineDrawEnd:qb,onToggleViewOnce:G,onFiles:V},b.mediaEditorData.id);break;case d("WAWebMsgType").MSG_TYPE.VIDEO:a=m.jsx(c("WAWebMediaEditorPreviewVideo.react"),{attachMedia:b,chat:r,viewOnce:F,viewOnceDisabled:!xb(),setCaptionInputRef:Q,internLinksEnabled:l!==q.STATUS,phoneNumbersEnabled:l!==q.STATUS,onCaptionChange:U,onClose:k,onEnter:W,onToggleViewOnce:G,onFiles:V},b.id);break;case d("WAWebMsgType").MSG_TYPE.AUDIO:a=m.jsx(c("WAWebMediaEditorPreviewAudio.react"),{item:b,onClose:k},b.id);break;default:d("WAWebMimeTypes").previewType(b.mimetype)==="pdf"?a=m.jsx(c("WAWebMediaEditorPreviewPdf.react"),{item:b,onClose:k,attachMedia:b,chat:r,setCaptionInputRef:Q,onCaptionChange:U,onEnter:W,onToggleViewOnce:G,onFiles:V},b.id):a=m.jsx(c("WAWebMediaEditorPreviewFile.react"),{mimeType:b.mimetype,filesize:b.filesize,filename:b.filename,fileExt:b.fileExt,onClose:k,attachMedia:b,chat:r,setCaptionInputRef:Q,onCaptionChange:U,onEnter:W,onToggleViewOnce:G,onFiles:V},b.id)}return a},X,Y=s.getPreviewableMedias(),Z=d("WAWebMediaGatingUtils").getMaxNumberSelectableMedia(Y.length,r.id);Y.length>Z&&(Y=Y.slice(0,Z));!s.canSend()?X=m.jsx("div",{className:c("WAWebMediaEditor.scss").spinner,children:m.jsx(d("WAWebSpinner.react").Spinner,{color:"highlight"},"processing")}):w&&(X=Cb(w));Cb=v?m.jsx("div",{className:c("WAWebMediaEditor.scss").dropOverlay,children:m.jsx("div",{className:c("WAWebMediaEditor.scss").dropOverlayOutline,children:h._("__JHASH__YvuX_e-PLiv__JHASH__")})},"container"):null;v={enter:e,left:function(a){return Bb("left",a)},right:function(a){return Bb("right",a)}};e=d("WAWebMimeTypes").DOC_MIMES==="*"?"*":[d("WAWebMimeTypes").IMAGE_MIMES].join();var Db;if(X!=null){var Eb,Fb;Y.length>0&&(d("WAWebSendStatusGatingUtils").isStatusPostingEnabled()&&l===q.STATUS&&(Fb=m.jsx(c("WAWebStatusPrivacySettingButton.react"),{})),Eb=m.jsx("div",{className:c("WAWebMediaEditor.scss").sendButton,tabIndex:"-1",ref:K,onKeyPress:function(a){return a.preventDefault()},children:m.jsx(c("WAWebRoundWithCount.react"),{ariaLabel:h._("__JHASH__wfbL3tCQf1O__JHASH__"),large:!0,icon:m.jsx(d("WAWebSendIcon").SendIcon,{directional:!0}),count:Y.length===1?null:Y.length,onClick:W,disabled:!s.canSend()})}));if(l===q.CAPTURE)Db=m.jsx("div",{className:c("WAWebMediaEditor.scss").captureFooter,children:Eb});else{var $;Z=!F&&!H&&Y.length<Z;var Gb=c("gkx")("26254")?d("WAWebAddAltIcon").AddAltIcon:d("WAWebMediaEditorAddIcon").MediaEditorAddIcon;$=H?null:m.jsx(c("WAWebSvgButton.react"),{className_DONOTUSE:d("WAWebClassnames").classnamesConvertMeToStylexPlease(($={},$[c("WAWebMediaEditor.scss").addMediaButtonDisabled]=!Z,$[c("WAWebMediaEditor.scss").addMediaButton]=!0,$)),disabled:!Z,Icon:Gb,title:h._("__JHASH__JJkgptBPeyP__JHASH__"),onClick:R,"aria-label":h._("__JHASH__JJkgptBPeyP__JHASH__")},"media-more");var Hb;Y.length>0&&(Hb=m.jsxs(d("WAWebFlex.react").FlexRow,{className:c("WAWebMediaEditor.scss").filmstripContainer,justify:"center",align:"start",children:[m.jsx(c("WAWebMediaEditorFilmstripDragAndDrop.react"),{className:c("WAWebMediaEditor.scss").thumbs,mediaCollection:s,onClick:f,onClose:z,onElementRef:g}),$]}));Db=m.jsxs("div",{className:c("WAWebMediaEditor.scss").footer,children:[Fb,Hb,Eb]})}}Gb=d("WAWebClassnames").classnamesConvertMeToStylexPlease((Z={},Z[c("WAWebMediaEditor.scss").previewOnly]=(w==null?void 0:w.type)!==d("WAWebMsgType").MSG_TYPE.IMAGE,Z[c("WAWebMediaEditor.scss").documentPreview]=d("WAWebMiscGatingUtils").documentWithCaptionsSendEnabled()&&(w==null?void 0:w.type)===d("WAWebMsgType").MSG_TYPE.DOCUMENT,Z[c("WAWebMediaEditor.scss").container]=!0,Z));R=m.jsxs(d("WAWebFlex.react").FlexColumn,{className:Gb,align:"stretch",children:[Cb,X,Db,m.jsx("input",{ref:J,type:"file",accept:e,style:{display:"none"},onChange:vb,multiple:!0})]});l===q.ATTACH&&(R=m.jsx(c("WAWebDrawer.react"),{theme:"media",onDrop:y,onDragChange:x,children:m.jsx(c("WAWebDrawerBody.react"),{tabIndex:"-1",overflow:"hidden",onPaste:t,children:R})},"attach-image-modal"));Y=(j||(j=c("stylex")))((l===q.CAPTURE||q.STATUS)&&la.outerContainerCapture);return m.jsx(d("WAWebKeyboardHotKeys.react").HotKeys,{className:Y,handlers:v,ref:L,children:R})}a.displayName=a.name+" [from "+f.id+"]";e=n(a);g.MediaTheme=q;g.MediaEditor=e}),98);
__d("WAWebAttachMediaFlow.react",["WAWebApiPrepareCtwaContextSend","WAWebAttachMediaModel","WAWebAttachMenuGatingUtils","WAWebBizBotTosUtils","WAWebCmd","WAWebComposeBoxActions","WAWebDrawerManager","WAWebFlowComponent.react","WAWebMediaEditor.react","WAWebPrepareMessageSendingAction","WAWebUA","WAWebUim","asyncToGeneratorRuntime","lodash","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var c,e;for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];return(c=e=a.call.apply(a,[this].concat(g))||this,e.$AttachMediaFlow2=function(a){e.$AttachMediaFlow1=a},e.$AttachMediaFlow3=function(a){a===void 0&&(a=!0),a&&e.$AttachMediaFlow5(),e.props.onComplete==null?void 0:e.props.onComplete(!1),e.props.onCancel==null?void 0:e.props.onCancel(),e.props.mediaCollection.mediaPickerStatsLogger.logCancel(),e.end()},e.$AttachMediaFlow4=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b===void 0&&(b={});var c=e.props.chat;yield d("WAWebBizBotTosUtils").maybeShowBizBot1pTos(c);b=b;var f=b.initCaptionUsed,g=b.isViewOnce;d("WAWebCmd").Cmd.once("ui_idle",function(){a.forEach(function(a,b){var f=a.media,h={};b===0&&(h.quotedMsg=c.composeQuotedMsg,c.composeQuotedMsg=null);h.type=f.type;h.isViewOnce=g;h.mentionedJidList=a.mentionedJidList;h.groupMentions=a.groupMentions;h.caption=f.caption;h.addEvenWhilePreparing=f.previewable&&f.state===d("WAWebAttachMediaModel").ATTACH_MEDIA_STATE.PROCESSING;if((b=e.props.initCaption)==null?void 0:b.ctwaContextLinkData){a=e.props.initCaption;b=a.ctwaContextLinkData;a=a.ctwaContext;h.ctwaContext=d("WAWebApiPrepareCtwaContextSend").prepareCtwaContextSend(b,a)}f.sendToChat(c,h)}),e.$AttachMediaFlow5()});e.props.onComplete==null?void 0:e.props.onComplete(!0,{initCaptionUsed:f});e.props.onSend==null?void 0:e.props.onSend();e.props.mediaCollection.mediaPickerStatsLogger.logSend({isViewOnce:!!g});d("WAWebAttachMenuGatingUtils").areExpressionPanelsEnabled()&&d("WAWebCmd").Cmd.closeExpressionPanels();e.end()});return function(b,c){return a.apply(this,arguments)}}(),e.setText=function(a){a!=null&&d("WAWebCmd").Cmd.once("ui_idle",function(){d("WAWebComposeBoxActions").ComposeBoxActions.paste(e.props.chat,a)}),e.end()},e.$AttachMediaFlow5=function(){e.props.chat&&e.props.chat.setAttachMediaContents(null)},e.handleRequestDismiss=function(b){var c;if(!((c=e.$AttachMediaFlow1)==null?void 0:c.handleRequestDismiss(b)))return;b===d("WAWebUim").DismissReason.UIM_INTERACTION&&e.$AttachMediaFlow3(!1);a.prototype.handleRequestDismiss.call(babelHelpers.assertThisInitialized(e))},c)||babelHelpers.assertThisInitialized(e)}var f=e.prototype;f.componentDidMount=function(){d("WAWebCmd").Cmd.closeContextMenu(),d("WAWebCmd").Cmd.closeTooltip(),d("WAWebDrawerManager").DrawerManager.closeDrawerRight(),this.push(i.jsx(d("WAWebMediaEditor.react").MediaEditor,{theme:d("WAWebMediaEditor.react").MediaTheme.ATTACH,ref:this.$AttachMediaFlow2,chat:this.props.chat,onClose:this.$AttachMediaFlow3,initCaption:this.props.initCaption,onSendMedia:c("lodash").once(this.$AttachMediaFlow4),mediaCollection:this.props.mediaCollection,onDropText:c("lodash").once(this.setText),sendAsSticker:this.props.sendAsSticker})),void d("WAWebPrepareMessageSendingAction").prepareChatForMessageSending(this.props.chat)};f.componentWillUnmount=function(){var a=this;d("WAWebUA").UA.isGecko?c("lodash").defer(function(){return d("WAWebComposeBoxActions").ComposeBoxActions.focus(a.props.chat)}):d("WAWebComposeBoxActions").ComposeBoxActions.focus(this.props.chat)};return e}(c("WAWebFlowComponent.react"));g["default"]=a}),98);
__d("WAWebVcardConfirmModal.react",["fbt","WAWebChatFlowTypes","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerHeader.react","WAWebEmojiText.react","WAWebFrontendVcardUtils","WAWebKeyboardHotKeys.react","WAWebModal.react","WAWebRound.react","WAWebSendIcon","WAWebVcardModalDetails.react","WAWebVcardParsingUtils","react"],(function(a,b,c,d,e,f,g,h){var i,j,k=j||c("react");b=(i||(i=d("react"))).forwardRef;function l(a){a=a.contact;a=d("WAWebVcardParsingUtils").parseVcard(a.vcard);return!a?null:k.jsx("div",{className:"x1n2onr6 xyorhqc x150wa6m x1bnvlk4",children:k.jsx(c("WAWebVcardModalDetails.react"),{parsedVcard:a,thumbnail:d("WAWebVcardParsingUtils").vcardThumbnail(a)})})}l.displayName=l.name+" [from "+f.id+"]";function a(a,b){var e=a.contactList,f=a.onSend,g=a.onBack;a=a.chat;var i;if(a.kind!=null)switch(a.kind){case d("WAWebChatFlowTypes").ChatKindType.Chat:i=h._("__JHASH__b19P9ZWJTdc__JHASH__",[h._plural(e.length,"count"),h._param("chat",a.title())]);break;case d("WAWebChatFlowTypes").ChatKindType.Group:i=h._("__JHASH__ymsAh415LSe__JHASH__",[h._plural(e.length,"count"),h._param("chat",a.title())]);break;case d("WAWebChatFlowTypes").ChatKindType.Broadcast:i=h._("__JHASH__T2YHOBspucK__JHASH__",[h._plural(e.length,"count"),h._param("chat",a.title())]);break;case d("WAWebChatFlowTypes").ChatKindType.Community:case d("WAWebChatFlowTypes").ChatKindType.Newsletter:break}a=i?k.jsx(d("WAWebEmojiText.react").EmojiText,{text:i,direction:"auto",titlify:!0,ellipsify:!0}):null;return k.jsx(d("WAWebModal.react").Modal,{ref:b,type:d("WAWebModal.react").ModalTheme.Box,children:k.jsxs(c("WAWebDrawer.react"),{children:[k.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{type:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.POPUP,onBack:g,children:a}),k.jsx(c("WAWebDrawerBody.react"),{children:k.jsx(d("WAWebKeyboardHotKeys.react").HotKeys,{children:k.jsx("div",{className:"x889kno",children:e.map(function(a,b){return k.jsx(l,{contact:d("WAWebFrontendVcardUtils").vcardFromContactModel(a)},b.toString())})})})}),k.jsx("div",{className:"x1n2onr6 xa1v5g2 x1x0gksc x11doyns",children:k.jsx("div",{className:"x10l6tqk x1a87ojn x3h4tne",children:k.jsx(d("WAWebRound.react").Round,{large:!0,onClick:f,children:k.jsx(d("WAWebSendIcon").SendIcon,{directional:!0})})})})]})})}a.displayName=a.name+" [from "+f.id+"]";e=b(a);g["default"]=e}),98);
__d("WAWebAttachVcardsFlow.react",["fbt","$InternalEnum","WAWebBizBotTosUtils","WAWebLidContactsGatingUtils","WAWebSelectModal.react","WAWebSendContactsAction","WAWebServerPropsModel","WAWebVcardConfirmModal.react","asyncToGeneratorRuntime","react","useWAWebFlow"],(function(a,b,c,d,e,f,g,h){var i,j,k=j||c("react"),l=(i||(i=d("react"))).useRef,m=b("$InternalEnum").Mirrored(["Select","Confirm"]);function a(a){var e=d("useWAWebFlow").useFlow(m.Select),f=e[0],g=e[1],i=l([]);if(g.step==null)return null;var j;switch(g.step){case m.Select:e=function(a){g.push(m.Confirm),i.current=a};var n=function(){return i.current},o=d("WAWebServerPropsModel").ServerProps.maxParticipants;j=k.jsx(d("WAWebSelectModal.react").SelectModal,{title:h._("__JHASH__0FKlgfRZkxG__JHASH__"),onCancel:function(){a.onCancel(),g.pop()},onConfirm:e,getInitialItems:n,listType:d("WAWebSelectModal.react").ListType.ContactSelectModal,maxItems:o,includeLidContacts:d("WAWebLidContactsGatingUtils").isLidVcardSharingEnabled(),allowBlockedContacts:!0});break;case m.Confirm:var p=function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var e;g.end();var f=a.chat;yield d("WAWebBizBotTosUtils").maybeShowBizBot1pTos(f);var h=f.composeQuotedMsg;f.composeQuotedMsg=null;e=((e=f.getComposeContents())==null?void 0:e.ctwaContext)||void 0;void c("WAWebSendContactsAction")(b,f,h,e);a.onContactsSent()});return function(a){return e.apply(this,arguments)}}();j=k.jsx(c("WAWebVcardConfirmModal.react"),{contactList:i.current,onSend:function(){return void p(i.current)},onBack:function(){g.pop()},chat:a.chat});break}return k.jsx(f,{flow:g,children:j})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebContactMsgInfoDrawer.react",["fbt","WAQplTypes","WAWebAgentCollection","WAWebBizAgentAction","WAWebBizGatingUtils","WAWebChatContactMsgInfoCell.react","WAWebChatPreferenceCollection","WAWebDisplayType","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerHeader.react","WAWebDrawerSection.react","WAWebEphemeralFbtKic","WAWebFrontendMsgGetters","WAWebKeepInChatIcon","WAWebLabelsInfoDrawerLabelWell.react","WAWebMessagePosition","WAWebMsgCollection","WAWebMsgGetters","WAWebMsgInfoCollection","WAWebMsgPreview.react","WAWebMsgType","WAWebMultiDeviceIcon","WAWebQplQuickPerformanceLoggerMarkerIds","WAWebQplQuickPerformanceLoggerModule","WAWebSpinner.react","WAWebStatusDblcheckIcon","WAWebStatusPttIcon","WAWebStatusVideoIcon","WAWebToast.react","WAWebToastManager","WAWebUiActionWamEvent","WAWebUseIsFeatureEnabled","WAWebViewOnceViewedIcon","WAWebWamEnumUiActionType","WAWebWamGroupMetadataMetricUtils_WORKER_INCOMPATIBLE","WAWebWamPrivateStatsUtils","WAWebWrapper.react","react","useWAWebForceUpdate","useWAWebLazyRef","useWAWebListener","useWAWebMsgValues","useWAWebUIM","useWAWebUnmountSignal"],(function(a,b,c,d,e,f,g,h){var i,j;b=j||d("react");var k=i||(i=c("react"));e=b.forwardRef;var l=b.useEffect,m=b.useRef,n=b.useState,o={icon:{display:"x1rg5ohu",width:"x1xp8n7a",marginEnd:"x1emribx",marginLeft:null,marginRight:null,color:"xq22nx5",textAlign:"x2b8uid",verticalAlign:"xmziwt1",$$css:!0},svg:{width:"x1xp8n7a",height:"xmix8c7",$$css:!0},statusBlue:{color:"xy5zui7",$$css:!0},ack:{color:"x1q15gih",$$css:!0},spinner:{display:"x78zum5",alignItems:"x6s0dn4",justifyContent:"xl56j7k",minHeight:"xvv2zd5",$$css:!0},body:{flexShrink:"x2lah0s",paddingTop:"x889kno",paddingBottom:"x1w3bhph",$$css:!0}};function a(a,b){var e,f=a.msg;e=d("useWAWebMsgValues").useMsgValues(a.msg.id,[(e=d("WAWebMsgGetters")).getId,e.getStar,e.getType,e.getIsGif,e.getIsViewOnce,e.getLabels,e.getNumTimesForwarded,e.getIsFrequentlyForwarded,e.getAgendId,e.getT,e.getIsMdHistoryMsg,e.getKicSender,e.getKicTimestampMs,e.getIsKept,d("WAWebFrontendMsgGetters").getAsRevoked,e.getLatestEditMsgKey]);var g=e[0];e[1];var i=e[2];e[3];var j=e[4],p=e[5];e[6];e[7];var q=e[8],r=e[9],s=e[10],t=e[11],u=e[12],v=e[13],w=e[14];e=e[15];var x=d("WAWebFrontendMsgGetters").getChat(f),y=c("useWAWebUIM")(),z=c("useWAWebUnmountSignal")(),A=m(null),B=m(null),C=x==null?void 0:x.id,D=c("useWAWebLazyRef")(function(){return new(d("WAWebUiActionWamEvent").UiActionWamEvent)({uiActionType:d("WAWebWamEnumUiActionType").UI_ACTION_TYPE.MSG_INFO_OPEN,uiActionPreloaded:!0,isLid:C.isLid()})}),E=n(void 0),F=E[0],G=E[1];E=n(!1);var H=E[0],I=E[1];E=c("useWAWebForceUpdate")();d("useWAWebListener").useListener(F==null?void 0:F.played,["add","remove"],E);d("useWAWebListener").useListener(F==null?void 0:F.read,["add","remove"],E);d("useWAWebListener").useListener(F==null?void 0:F.delivery,["add","remove"],E);w&&(y==null?void 0:y.requestDismiss());d("useWAWebListener").useListener(d("WAWebMsgCollection").MsgCollection,"remove",function(a){a.id.equals(g)&&(y==null?void 0:y.requestDismiss())});d("useWAWebListener").useListener(f,"change:latestEditMsgKey",function(){return y==null?void 0:y.requestDismiss()});var J=c("WAWebUseIsFeatureEnabled")("MD_EXTENSION");l(function(){var a;d("WAWebQplQuickPerformanceLoggerModule").QPL.markerStart(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_MESSAGE_INFO_VIEW,{annotations:{bool:{is_premium_subscriber:J}}});d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_MESSAGE_INFO_VIEW,"datasource_start");d("WAWebMsgInfoCollection").MsgInfoCollection.find(g).then(function(a){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerPoint(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_MESSAGE_INFO_VIEW,"datasource_end");if(z.aborted){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_MESSAGE_INFO_VIEW,d("WAQplTypes").QuickLogActionType.CANCEL);return}G(a);d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_MESSAGE_INFO_VIEW,d("WAQplTypes").QuickLogActionType.SUCCESS)})["catch"](function(){d("WAWebQplQuickPerformanceLoggerModule").QPL.markerEnd(d("WAWebQplQuickPerformanceLoggerMarkerIds").QuickLogMarkerId.WHATSAPP_MESSAGE_INFO_VIEW,d("WAQplTypes").QuickLogActionType.FAIL),I(!0),d("WAWebToastManager").ToastManager.open(k.jsx(d("WAWebToast.react").Toast,{msg:h._("__JHASH__7Oc8AbKOOJ2__JHASH__"),id:d("WAWebToast.react").genId("msg_info_failed")}))});a=(a=A.current)==null?void 0:a.getContainer();i===d("WAWebMsgType").MSG_TYPE.IMAGE&&a&&(a.scrollTop=a.scrollHeight)},[e]);l(function(){var a=D.current;a&&(Object.assign(a,d("WAWebWamGroupMetadataMetricUtils_WORKER_INCOMPATIBLE").getGroupCountMetricsFromChatWid(x==null?void 0:x.id)),a.markUiActionT(),a.commit(),D.current=void 0);d("WAWebWamPrivateStatsUtils").logUiActionShadowPrivateStatsTestEvents();d("WAWebBizAgentAction").logMessageInfo(q)},[]);E=function(a,b){b===void 0&&(b=!1);return a===g&&(b?!0:(a=B.current)==null?void 0:a.getMsgComponentRef())};w=function(){y==null?void 0:y.requestDismiss()};var K,L;if(F){e=[];if(v&&t!=null&&u!=null){v=u/1e3;u=d("WAWebEphemeralFbtKic").getKeptByString(t);t=k.jsx("span",{className:"x1rg5ohu x1xp8n7a x1emribx xq22nx5 x2b8uid xmziwt1",children:k.jsx(d("WAWebKeepInChatIcon").KeepInChatIcon,{iconXstyle:o.svg})});e.push(k.jsx(c("WAWebChatContactMsgInfoCell.react"),{title:u,t:v,icon:t},"keep-in-chat"))}if(!s){u=d("WAWebMsgGetters").getIsAckPlayable(f);if(u||j){L=u?h._("__JHASH__Qa0i-ERxDlE__JHASH__"):h._("__JHASH__SN5hR4eRqbJ__JHASH__");v=F.played.head();t=v==null?void 0:v.t;s=k.jsx(d("WAWebViewOnceViewedIcon").ViewOnceViewedIcon,{xstyle:o.statusBlue,iconXstyle:o.svg});u&&!j&&(f.type===d("WAWebMsgType").MSG_TYPE.PTT?s=k.jsx(d("WAWebStatusPttIcon").StatusPttIcon,{xstyle:o.statusBlue,iconXstyle:o.svg}):f.type===d("WAWebMsgType").MSG_TYPE.PTV&&(s=k.jsx(d("WAWebStatusVideoIcon").StatusVideoIcon,{xstyle:o.statusBlue,iconXstyle:o.svg})));v=k.jsx("span",{className:"x1rg5ohu x1xp8n7a x1emribx xq22nx5 x2b8uid xmziwt1",children:s});e.push(k.jsx(c("WAWebChatContactMsgInfoCell.react"),{title:u&&!j?h._("__JHASH__itnUQY2nXDN__JHASH__"):h._("__JHASH__BfYDsML-wCA__JHASH__"),t:t,icon:v},"played"))}s=F.read.head();u=s==null?void 0:s.t;j=k.jsx("span",{className:"x1rg5ohu x1xp8n7a x1emribx xq22nx5 x2b8uid xmziwt1",children:k.jsx(d("WAWebStatusDblcheckIcon").StatusDblcheckIcon,{xstyle:o.ack,iconXstyle:o.svg})});L=(t=L)!=null?t:h._("__JHASH__y_zHyTRLHKF__JHASH__");e.push(k.jsx(c("WAWebChatContactMsgInfoCell.react"),{title:L,t:u,icon:j},"read"));v=F.delivery.head();s=v==null?void 0:v.t;t=k.jsx("span",{className:"x1rg5ohu x1xp8n7a x1emribx xq22nx5 x2b8uid xmziwt1",children:k.jsx(d("WAWebStatusDblcheckIcon").StatusDblcheckIcon,{iconXstyle:o.svg})});e.push(k.jsx(c("WAWebChatContactMsgInfoCell.react"),{title:h._("__JHASH__9NgBBEkLENG__JHASH__"),t:s,icon:t},"delivery"))}if(J&&d("WAWebBizGatingUtils").isMultiDeviceMessageAttributionEnabled()&&q!=null){v=(j=(u=d("WAWebAgentCollection").AgentCollection.get(q))==null?void 0:u.name)!=null?j:"";s=r;e.push(k.jsx(c("WAWebChatContactMsgInfoCell.react"),{title:v,t:s,icon:k.jsx("span",{className:"x1rg5ohu x1xp8n7a x1emribx xq22nx5 x2b8uid xmziwt1",children:k.jsx(d("WAWebMultiDeviceIcon").MultiDeviceIcon,{iconXstyle:o.svg})})},"agent"))}K=k.jsx(c("WAWebDrawerSection.react"),{theme:"padding",children:e})}var M;!F&&!H&&(M=k.jsx("div",{className:"x78zum5 x6s0dn4 xl56j7k xvv2zd5",children:k.jsx(d("WAWebSpinner.react").Spinner,{size:50,stroke:4})},"spinner"));t=null;p&&p.length>0&&d("WAWebBizGatingUtils").canDisplayLabel()&&(t=k.jsx(c("WAWebDrawerSection.react"),{theme:"padding",children:k.jsx(c("WAWebLabelsInfoDrawerLabelWell.react"),{labels:p})}));return k.jsxs(c("WAWebDrawer.react"),{ref:b,theme:"striped",children:[k.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:h._("__JHASH__6ZxqC6H3okB__JHASH__"),type:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.SMALL,rtlFixIfOnDarwin:!0,focusBackOrCancel:!0,onCancel:w}),k.jsx(c("WAWebMsgPreview.react"),{ref:A,chatPreference:c("WAWebChatPreferenceCollection").assertGet("defaultPreference"),children:k.jsx(d("WAWebWrapper.react").Wrapper,{msg:f,ref:B,displayType:d("WAWebDisplayType").DISPLAY_TYPE.MSG_INFO,isMsgVisible:E,position:d("WAWebMessagePosition").MsgPosition.END,onProductClick:a.onProductClick})}),k.jsxs(c("WAWebDrawerBody.react"),{children:[t,k.jsxs("div",{className:"x2lah0s x889kno x1w3bhph",children:[M,K]})]})]},"message-info-modal")}a.displayName=a.name+" [from "+f.id+"]";b=e(a);g["default"]=b}),98);
__d("WAWebContactMsgInfoFlow.react",["$InternalEnum","WANullthrows","WAWebContactMsgInfoDrawer.react","WAWebFrontendMsgGetters","WAWebProductDetailsFlowLoadable","react","useWAWebFlow"],(function(a,b,c,d,e,f,g){var h,i,j=i||c("react"),k=(h||(h=d("react"))).useState,l=b("$InternalEnum").Mirrored(["MessageInfo","ProductDetails"]);function a(a){var b=d("useWAWebFlow").useFlow(l.MessageInfo,{transitions:d("useWAWebFlow").FlowTransitions.DrawerRight}),e=b[0],f=b[1];b=k();var g=b[0],h=b[1];if(f.step==null)return null;var i;switch(f.step){case l.MessageInfo:b=function(a){h(a),f.push(l.ProductDetails)};i=j.jsx(c("WAWebContactMsgInfoDrawer.react"),{msg:a.msg,onProductClick:b});break;case l.ProductDetails:i=j.jsx(d("WAWebProductDetailsFlowLoadable").ProductDetailsFlowLoadable,{refreshCarousel:!0,chat:d("WAWebFrontendMsgGetters").getChat(a.msg),product:c("WANullthrows")(g),onEnd:function(){return f.pop()}});break}return j.jsx(e,{flow:f,children:i})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebCaptureDrawer.react",["fbt","WAFilteredCatch","WALogger","WANullthrows","WAShiftTimer","WAWebAttachMediaCollection","WAWebBizBotTosUtils","WAWebCameraIcon","WAWebCanvasUtils","WAWebDataUrlToBlob","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerHeader.react","WAWebFileUtils","WAWebGuidePopup.react","WAWebMediaCapture","WAWebMediaEditor.react","WAWebMediaOpaqueData","WAWebMiscErrors","WAWebModalManager","WAWebObjectFit.react","WAWebReturnIcon","WAWebRound.react","WAWebSpinner.react","WAWebVelocityTransitionGroup","WAWebVideo.react","WAWebWamEnumMediaPickerOriginType","WAWebWamMediaPickerStatsLogger","asyncToGeneratorRuntime","react","stylex","useWAWebLazyRef","useWAWebStableCallback","useWAWebUnmountSignal"],(function(a,b,c,d,e,f,g,h){var i,j,k;function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["captureDrawer:render Unhandled video capture state ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed!"]);n=function(){return a};return a}function o(){var a=babelHelpers.taggedTemplateLiteralLoose(["CaptureDrawer:onCapture can not get 2d context"]);o=function(){return a};return a}e=k||d("react");var p=i||(i=c("react")),q=e.forwardRef,r=e.useEffect,s=e.useImperativeHandle,t=e.useRef,u=e.useState,v={video:{width:"xh8yej3",height:"x5yr21d",opacity:"x1hc1fzr",transitionProperty:"x19991ni",transitionDuration:"x1d8287x",transitionTimingFunction:"x1j7uda5",transform:"xpk2tj9",transformOrigin:"x1bndym7",$$css:!0},videoInactive:{opacity:"xg01cxk",$$css:!0},btn:{position:"x10l6tqk",top:"x2rgi",start:"xtzzx4i",left:null,right:null,marginStart:"xd8oflk",marginLeft:null,marginRight:null,opacity:"xg01cxk",$$css:!0},image:{position:"x10l6tqk",width:"xh8yej3",height:"x5yr21d",animationName:"xqcmdr3",animationDuration:"xxkxylk",$$css:!0},retakeBtn:{display:"x78zum5",alignItems:"x6s0dn4",cursor:"x1ypdohk",$$css:!0},retakeIcon:{flexShrink:"x2lah0s",marginEnd:"x1w0mnb",marginLeft:null,marginRight:null,color:"x7o08j2",$$css:!0},footer:{position:"x1n2onr6",zIndex:"xhtitgo",boxSizing:"x9f619",display:"x78zum5",alignItems:"x6s0dn4",justifyContent:"xl56j7k",minHeight:"x5sx7kw",paddingTop:"xexx8yu",paddingEnd:"xc73u3c",paddingBottom:"x10b6aqq",paddingStart:"x5ib6vp",backgroundColor:"x1m8r95a",$$css:!0},container:{position:"x1n2onr6",display:"x78zum5",flexGrow:"x1iyjqo2",alignItems:"x6s0dn4",justifyContent:"xl56j7k",width:"xh8yej3",$$css:!0},body:{position:"x10l6tqk",top:"x13vifvy",start:"x17qophe",left:null,right:null,display:"x78zum5",flexDirection:"xdt5ytf",alignItems:"x6s0dn4",width:"xh8yej3",height:"x5yr21d",$$css:!0},videoContainer:{zIndex:"xhtitgo",width:"xh8yej3",height:"x5yr21d",$$css:!0},webcamContainer:{width:"xh8yej3",height:"x5yr21d",$$css:!0}},w="CAPTURE_MEDIA",x={ANIMATING:"ANIMATING",LOADING:"LOADING",RECORDING:"RECORDING",SENDING:"SENDING"},y=function(a){if(a.current==null)return;window.URL.revokeObjectURL(a.current);a.current=null};function a(a,e){var f=a.chat,g=a.disposeStream,i=a.onCaptured,k=a.onBack,q=a.onSend,z=h._("__JHASH__oIv2srgU-uj__JHASH__"),A=t(null),B=t(null),C=t(null),D=t(null),E=u(void 0),F=E[0],G=E[1];E=u(void 0);var H=E[0],I=E[1];E=u(x.ANIMATING);var J=E[0],K=E[1];E=u(void 0);var L=E[0],M=E[1],N=c("useWAWebStableCallback")(function(a,b){if(!a){J===x.ANIMATING&&K(x.LOADING);return}B.current==null?void 0:B.current();B.current=b;K(x.LOADING);M(a);d("WAWebMediaCapture").isSrcObjectInVideoElement()||(a?(y(C),C.current=window.URL.createObjectURL(a)):y(C))}),O=c("useWAWebLazyRef")(function(){return new(d("WAShiftTimer").ShiftTimer)(function(a){var b=a.stream;a=a.disposeStream;N(b,a)})}),P=c("useWAWebLazyRef")(function(){return new(d("WAShiftTimer").ShiftTimer)(function(a){var b=a.stream;a=a.disposeStream;b&&a&&(B.current==null?void 0:B.current());d("WAWebMediaCapture").isSrcObjectInVideoElement()||y(C)})}),Q=function(){f&&f.setAttachMediaContents(null)},R=c("useWAWebUnmountSignal")();r(function(){O.current.onOrBefore(300,{stream:a.stream,disposeStream:a.disposeStream});return function(){O.current.cancel(),y(C),g==null?void 0:g(),A.current&&A.current.logCancel(),Q()}},[]);var S=function(a,b){O.current.forceRunNow({stream:a,disposeStream:b})};s(e,function(){return{loadNewStreamTimerUpdate:S,loadNewStream:N}});E=function(){var a;a=(a=D.current)==null?void 0:a.underlyingVideo();if(!a)return;var b=document.createElement("canvas");b.height=a.videoHeight;b.width=a.videoWidth;var e=b.getContext("2d");if(!e){d("WALogger").WARN(o());return}e.translate(b.width,0);e.scale(-1,1);e.drawImage(a,0,0,a.videoWidth,a.videoHeight);if(i)void d("WAWebCanvasUtils").canvasToBlob(b).then(function(a){if(R.aborted)return;i(a)});else{P.current.onOrBefore(500,{stream:L,disposeStream:g});e=new(d("WAWebWamMediaPickerStatsLogger").MediaPickerStatsLogger)();e.logAdd(w,"image",d("WAWebWamEnumMediaPickerOriginType").MEDIA_PICKER_ORIGIN_TYPE.MENU_CAMERA_CAPTURE);e.chatRecipients=(f==null?void 0:f.groupMetadata)?f.groupMetadata.participants.length:1;A.current=e;a=b.toDataURL("image/jpeg");e=d("WAWebDataUrlToBlob").dataURLtoBlob(a);if(f){f.attachMediaContents||f.setAttachMediaContents(new(c("WAWebAttachMediaCollection"))({chatParticipantCount:f.getParticipantCount()}));b=c("WANullthrows")(f.attachMediaContents);b.processAttachments([{file:d("WAWebFileUtils").createFile([e],"",{type:"image/jpeg"})}],void 0,f)}G(a);K(x.SENDING);M(void 0)}};e=function(a){K(x.RECORDING),I({width:a.videoWidth,height:a.videoHeight})};var T=function(){K(x.LOADING);Q();var a=d("WAWebMediaCapture").start("camera"),b=a.asyncStream;a=a.disposeStream;B.current=a;b.then(function(a){a&&(d("WAWebMediaCapture").isSrcObjectInVideoElement()||(C.current=window.URL.createObjectURL(a)),M(a))})["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebMiscErrors").GetUserMedia.NotAllowedError,function(){k(),d("WAWebModalManager").ModalManager.open(p.jsx(d("WAWebGuidePopup.react").GuidePopup,{messaging:d("WAWebGuidePopup.react").Messaging.CAMERA_FAIL,type:d("WAWebGuidePopup.react").GuidePopupType.GUIDE_UNBLOCK}))}))["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebMiscErrors").GetUserMedia.GetUserMediaError,function(){k(),d("WAWebModalManager").ModalManager.open(p.jsx(d("WAWebGuidePopup.react").GuidePopup,{messaging:d("WAWebGuidePopup.react").Messaging.CAMERA_MISSING,type:d("WAWebGuidePopup.react").GuidePopupType.GUIDE_NONE}))}))},U=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){f&&(yield d("WAWebBizBotTosUtils").maybeShowBizBot1pTos(f));b=(b==null?void 0:b.isViewOnce)===!0;if(!q)d("WALogger").ERROR(n()).sendLogs("capture-drawer-no-onSend");else if(a.length===0)d("WALogger").ERROR(m()).sendLogs("capture-drawer-no-img");else{a=c("WANullthrows")(a[0]);var e=a.media,g=a.mentionedJidList;a=a.groupMentions;var h=e.file;if(h instanceof Blob){q({getImg:c("WAWebMediaOpaqueData").createFromData(h,h.type),caption:(h=e.caption)!=null?h:void 0,isViewOnce:!!b,mentionedJidList:g,groupMentions:a});(e=A.current)==null?void 0:e.logSend({isViewOnce:!!b})}Q()}});return function(b,c){return a.apply(this,arguments)}}(),V,W,X,Y,Z=a.theme==="capture-cover"?"cover":"contain";switch(J){case x.ANIMATING:case x.LOADING:Y=p.jsx(d("WAWebSpinner.react").Spinner,{stroke:4,size:50});if(J===x.ANIMATING)break;case x.RECORDING:var $=(j||(j=c("stylex")))(v.video,L&&J===x.LOADING&&v.videoInactive);e=L?p.jsx(c("WAWebVideo.react"),{autoPlay:!0,ref:D,onPlay:e,src:C.current!=null?C.current:void 0,srcObject:C.current!=null?void 0:L}):null;X=L?p.jsx("div",{className:"xh8yej3 x5yr21d",children:p.jsx(c("WAWebObjectFit.react"),{type:Z,size:H,children:p.jsx("div",{className:$,"data-animage-capture-webcam":!0,children:e})})},"webcam"):null;V=J===x.RECORDING?p.jsx("div",{className:"x10l6tqk x2rgi xtzzx4i xd8oflk xg01cxk",children:p.jsx(d("WAWebRound.react").Round,{large:!0,label:z,onClick:E,children:p.jsx(d("WAWebCameraIcon").CameraIcon,{})})},"btn-capture"):null;break;case x.SENDING:X=p.jsx(c("WAWebObjectFit.react"),{type:Z,size:H,children:p.jsx("img",{alt:"",className:"x10l6tqk xh8yej3 x5yr21d xqcmdr3 xxkxylk","data-animate-capture-snapshot":!0,src:F})});if(f){$=c("WANullthrows")(f.attachMediaContents);X=p.jsx(d("WAWebMediaEditor.react").MediaEditor,{theme:d("WAWebMediaEditor.react").MediaTheme.CAPTURE,chat:f,initCaption:null,mediaCollection:$,onDropText:function(){},onSendMedia:U})}W=p.jsxs("div",{className:"x78zum5 x6s0dn4 x1ypdohk",onClick:T,children:[p.jsx("div",{className:"x2lah0s x1w0mnb x7o08j2",children:p.jsx(d("WAWebReturnIcon").ReturnIcon,{})}),h._("__JHASH__gzo29kra-Qa__JHASH__")]});break;default:d("WALogger").LOG(l(),J)}e=p.jsx("div",{className:"x1n2onr6 xhtitgo x9f619 x78zum5 x6s0dn4 xl56j7k x5sx7kw xexx8yu xc73u3c x10b6aqq x5ib6vp x1m8r95a",children:p.jsx(c("WAWebVelocityTransitionGroup"),{transitionName:"pop_delay",children:V})});return p.jsxs(c("WAWebDrawer.react"),{theme:a.theme,tsNavigationData:{surface:"camera"},children:[p.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:z,type:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.OFFSET,focusBackOrCancel:!0,onCancel:a.onBack,children:W}),p.jsxs(c("WAWebDrawerBody.react"),{overflow:"hidden",children:[p.jsxs("div",{className:"x1n2onr6 x78zum5 x1iyjqo2 x6s0dn4 xl56j7k xh8yej3",children:[Y,p.jsx("div",{className:"x10l6tqk x13vifvy x17qophe x78zum5 xdt5ytf x6s0dn4 xh8yej3 x5yr21d",children:p.jsx(c("WAWebVelocityTransitionGroup"),{transitionName:"capture",className:"xhtitgo xh8yej3 x5yr21d",children:X})})]}),e]})]},"attach-capture-modal")}a.displayName=a.name+" [from "+f.id+"]";e=q(a);g["default"]=e}),98);
__d("WAWebEditCaptureFlow.react",["fbt","$InternalEnum","WAFilteredCatch","WANullthrows","WAWebCaptureDrawer.react","WAWebEditImageDrawer.react","WAWebGuidePopup.react","WAWebMediaCapture","WAWebMiscErrors","WAWebModal.react","WAWebModalManager","react","useWAWebFlow"],(function(a,b,c,d,e,f,g,h){var i,j;e=j||d("react");var k=i||(i=c("react")),l=e.useEffect,m=e.useRef,n=e.useState,o=b("$InternalEnum").Mirrored(["Capture","Guide","EditImage"]);function a(a){var b=n(null),e=b[0],f=b[1],g=m(null),i=m();b=d("useWAWebFlow").useFlow(o.Capture);var j=b[0],p=b[1],q=function(){i.current==null?void 0:i.current();var a=d("WAWebMediaCapture").start("camera",function(){return p.push(o.Guide,"modal")},5e3),b=a.asyncStream,c=a.disposeStream;i.current=c;b.then(function(a){g.current||p.pop("modal"),a&&g.current&&g.current.loadNewStream(a,c)})["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebMiscErrors").GetUserMedia.NotAllowedError,function(){p.end(),d("WAWebModalManager").ModalManager.open(k.jsx(d("WAWebGuidePopup.react").GuidePopup,{messaging:d("WAWebGuidePopup.react").Messaging.CAMERA_FAIL,type:d("WAWebGuidePopup.react").GuidePopupType.GUIDE_UNBLOCK}))}))["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebMiscErrors").GetUserMedia.GetUserMediaError,function(){p.end(),d("WAWebModalManager").ModalManager.open(k.jsx(d("WAWebGuidePopup.react").GuidePopup,{messaging:d("WAWebGuidePopup.react").Messaging.CAMERA_MISSING,type:d("WAWebGuidePopup.react").GuidePopupType.GUIDE_NONE}))}))};l(function(){q();return function(){i.current==null?void 0:i.current()}},[]);if(p.step==null)return null;var r;switch(p.step){case o.Capture:b=function(a){f(a),p.push(o.EditImage,"flow-transition-box-size-drawer-push")};r=k.jsx(d("WAWebModal.react").Modal,{type:a.modalTheme||d("WAWebModal.react").ModalTheme.Box,ariaLabel:h._("__JHASH__oIv2srgU-uj__JHASH__"),testid:void 0,children:k.jsx(c("WAWebCaptureDrawer.react"),{ref:g,stream:void 0,disposeStream:void 0,caption:!1,theme:"capture-cover",onBack:function(){return p.end()},onSend:null,onCaptured:b,chat:void 0})});break;case o.Guide:r=k.jsx(d("WAWebGuidePopup.react").GuidePopup,{messaging:d("WAWebGuidePopup.react").Messaging.CAMERA,type:d("WAWebGuidePopup.react").GuidePopupType.GUIDE_ALLOW,onConfirm:function(){return p.pop("modal")}});break;case o.EditImage:b=function(){p.pop("flow-transition-box-size-drawer-pop"),q()};var s=function(b,c){a.onFinished(b,c),p.end()};r=k.jsx(d("WAWebModal.react").Modal,{type:a.modalTheme||d("WAWebModal.react").ModalTheme.Box,children:k.jsx(d("WAWebEditImageDrawer.react").EditImageDrawer,{onRetake:b,retryText:d("WAWebEditImageDrawer.react").RETRY_OPTIONS.RETAKE,onFinished:s,onCancel:function(){return p.end()},img:c("WANullthrows")(e),cropShape:a.editCropShape})})}return k.jsx(j,{flow:p,children:r})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebGroupMsgInfoSections",["$InternalEnum"],(function(a,b,c,d,e,f){a=b("$InternalEnum").Mirrored(["DELIVERED_FOOTER","DELIVERED_HEADER","FORWARD_COUNT","PLAYED_FOOTER","PLAYED_HEADER","READ_FOOTER","READ_HEADER","SEEN_FOOTER","SEEN_HEADER","VIEWED_FOOTER","VIEWED_HEADER","AGENT_HEADER","KEEP_IN_CHAT_HEADER"]);f.Sections=a}),66);
__d("useWAWebMsgInfoValues",["WAWebMsgInfoCollection","useWAWebCollectionValues"],(function(a,b,c,d,e,f,g){function a(a,b){return d("useWAWebCollectionValues").useCollectionValues(d("WAWebMsgInfoCollection").MsgInfoCollection,a,b)}g.useMsgInfoValues=a}),98);
__d("WAWebGroupMsgInfoSectionFooter.react",["fbt","WALogger","WAWebGroupMsgInfoSections","WAWebMsgInfoGetters","WAWebText.react","react","useWAWebMsgInfoValues"],(function(a,b,c,d,e,f,g,h){var i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Invalid SECTION for group message info section footer"]);j=function(){return a};return a}var k=i||c("react");function a(a){var b=a.msgInfo;a=a.section;b=d("useWAWebMsgInfoValues").useMsgInfoValues(b.id,[d("WAWebMsgInfoGetters").getPlayedRemaining,d("WAWebMsgInfoGetters").getReadRemaining,d("WAWebMsgInfoGetters").getDeliveryRemaining]);var c=b[0],e=b[1];b=b[2];var f,g;switch(a){case d("WAWebGroupMsgInfoSections").Sections.PLAYED_FOOTER:case d("WAWebGroupMsgInfoSections").Sections.VIEWED_FOOTER:f=c;g=c;break;case d("WAWebGroupMsgInfoSections").Sections.READ_FOOTER:case d("WAWebGroupMsgInfoSections").Sections.SEEN_FOOTER:f=e;g=e;break;case d("WAWebGroupMsgInfoSections").Sections.DELIVERED_FOOTER:f=b;g=b;break;default:d("WALogger").ERROR(j());return null}if(f==null||f===0)return null;a=h._("__JHASH__CbgEK68DWQW__JHASH__",[h._plural(g,"count")]);return k.jsx("div",{"data-testid":void 0,className:"x1yrsyyn x6x52a7 x1g2khh7 xxpdul3 x150wa6m x1bnvlk4",children:k.jsx(d("WAWebText.react").TextSpan,{theme:"muted",children:a})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebGroupMsgInfoDrawer.react",["fbt","WALogger","WANullthrows","WAWebAgentCollection","WAWebBizAgentAction","WAWebBizGatingUtils","WAWebChatAgentMsgInfoCell.react","WAWebChatGroupMsgInfoCell.react","WAWebChatKeptByMsgInfoCell.react","WAWebChatPreferenceCollection","WAWebContactCollection","WAWebDisplayType","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerHeader.react","WAWebDrawerSection.react","WAWebElevatedPushNamesFlag","WAWebFlatList.react","WAWebFlatListController","WAWebFrontendMsgGetters","WAWebGroupMetadataCollection","WAWebGroupMsgInfoSectionFooter.react","WAWebGroupMsgInfoSections","WAWebKeepInChatIcon","WAWebLabelsInfoDrawerLabelWell.react","WAWebMessagePosition","WAWebMsgCollection","WAWebMsgGetters","WAWebMsgInfoCollection","WAWebMsgPreview.react","WAWebMsgType","WAWebMultiDeviceIcon","WAWebRow.react","WAWebSpinner.react","WAWebStatusDblcheckIcon","WAWebStatusPttIcon","WAWebStatusVideoIcon","WAWebText.react","WAWebToast.react","WAWebToastManager","WAWebUiActionWamEvent","WAWebUseIsFeatureEnabled","WAWebUserPrefsMeUser","WAWebViewOnceViewedIcon","WAWebWamAddressingModeUtils","WAWebWamEnumUiActionType","WAWebWamGroupMetricUtils","WAWebWamPrivateStatsUtils","WAWebWrapper.react","react","useWAWebForceUpdate","useWAWebLazyRef","useWAWebListener","useWAWebMsgValues","useWAWebUIM","useWAWebUnmountSignal"],(function(a,b,c,d,e,f,g,h){var i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["Invalid SECTION for group message info section header"]);k=function(){return a};return a}b=j||d("react");var l=i||(i=c("react"));e=b.forwardRef;var m=b.useEffect,n=b.useRef,o=b.useState,p={svg:{width:"x1xp8n7a",height:"xmix8c7",$$css:!0},statusBlue:{color:"xy5zui7",$$css:!0},ack:{color:"x1q15gih",$$css:!0},titleIcon:{display:"x1rg5ohu",width:"x1xp8n7a",height:"x1qx5ct2",color:"xq22nx5",textAlign:"x2b8uid",verticalAlign:"x16dsc37",$$css:!0},title:{paddingTop:"xyinxu5",paddingEnd:"x6x52a7",paddingBottom:"x1l90r2v",paddingStart:"xxpdul3",backgroundColor:"x150wa6m",$$css:!0},spinner:{display:"x78zum5",alignItems:"x6s0dn4",justifyContent:"xl56j7k",minHeight:"xvv2zd5",$$css:!0},list:{paddingTop:"x889kno",paddingBottom:"x1t4gjm",$$css:!0}},q=50,r=50,s=d("WAWebFlatList.react").DEFAULT_ITEM_HEIGHT+10,t=d("WAWebFlatList.react").FlatListFactory();function u(a){var b=a.participant;a=a.elevatedPushNamesEnabled;return l.jsx(c("WAWebChatGroupMsgInfoCell.react"),{msgInfoParticipant:b,contact:b.contact,elevatedPushNamesEnabled:a,theme:"drawer-list"})}u.displayName=u.name+" [from "+f.id+"]";function v(a){var b=a.msg;a=a.agentName;return l.jsx(c("WAWebChatAgentMsgInfoCell.react"),{msg:b,agentName:a,theme:"drawer-list"})}v.displayName=v.name+" [from "+f.id+"]";function w(a){return d("WAWebContactCollection").ContactCollection.assertGet(a)}function x(a){a=a.msg;var b=d("WAWebMsgGetters").getKicSender(a);if(b!=null){b=w(b);return l.jsx(c("WAWebChatKeptByMsgInfoCell.react"),{kicTimestampMs:a.kicTimestampMs,contact:b,theme:"drawer-list"})}}function y(a){var b=a.section;a=a.msg;var e,f;switch(b){case d("WAWebGroupMsgInfoSections").Sections.PLAYED_HEADER:f=a.type===d("WAWebMsgType").MSG_TYPE.PTV?l.jsx(d("WAWebStatusVideoIcon").StatusVideoIcon,{xstyle:p.statusBlue,iconXstyle:p.svg}):l.jsx(d("WAWebStatusPttIcon").StatusPttIcon,{xstyle:p.statusBlue,iconXstyle:p.svg});e=h._("__JHASH__AP0qxXOIn-5__JHASH__");break;case d("WAWebGroupMsgInfoSections").Sections.READ_HEADER:f=l.jsx(d("WAWebStatusDblcheckIcon").StatusDblcheckIcon,{xstyle:p.ack,iconXstyle:p.svg});e=h._("__JHASH__xJiKcZN6tI2__JHASH__");break;case d("WAWebGroupMsgInfoSections").Sections.SEEN_HEADER:f=l.jsx(d("WAWebStatusDblcheckIcon").StatusDblcheckIcon,{xstyle:p.ack,iconXstyle:p.svg});e=a.isViewOnce?h._("__JHASH__oOoKvSHPyyX__JHASH__"):h._("__JHASH__ycel2ZWWS7x__JHASH__");break;case d("WAWebGroupMsgInfoSections").Sections.DELIVERED_HEADER:f=l.jsx(d("WAWebStatusDblcheckIcon").StatusDblcheckIcon,{iconXstyle:p.svg});e=h._("__JHASH__P9P0UHc43lP__JHASH__");break;case d("WAWebGroupMsgInfoSections").Sections.VIEWED_HEADER:f=l.jsx(d("WAWebViewOnceViewedIcon").ViewOnceViewedIcon,{xstyle:p.statusBlue,iconXstyle:p.svg});e=h._("__JHASH__SZQ1d0VCh5d__JHASH__");break;case d("WAWebGroupMsgInfoSections").Sections.AGENT_HEADER:f=l.jsx(d("WAWebMultiDeviceIcon").MultiDeviceIcon,{iconXstyle:p.svg});e=h._("__JHASH__X4PWOvced5F__JHASH__");break;case d("WAWebGroupMsgInfoSections").Sections.KEEP_IN_CHAT_HEADER:f=l.jsx(d("WAWebKeepInChatIcon").KeepInChatIcon,{iconXstyle:p.svg});e=h._("__JHASH__x50cpi-6y_F__JHASH__");break;default:d("WALogger").ERROR(k());return null}f=l.jsx("div",{className:"x1rg5ohu x1xp8n7a x1qx5ct2 xq22nx5 x2b8uid x16dsc37",children:f});return l.jsx("div",{"data-testid":void 0,className:"xyinxu5 x6x52a7 x1l90r2v xxpdul3 x150wa6m",children:l.jsx(c("WAWebRow.react"),{side:f,ellipsify:!0,children:l.jsx(d("WAWebText.react").TextSpan,{theme:"sectionTitle",children:e})})})}y.displayName=y.name+" [from "+f.id+"]";function z(a){var b=a.data,e=a.msg;a=a.msgInfo;if(b.kind==="contact-row")return l.jsx(u,{participant:b.participant,elevatedPushNamesEnabled:d("WAWebElevatedPushNamesFlag").elevatedPushNamesM2Enabled(d("WAWebFrontendMsgGetters").getChat(e))});if(b.kind==="agent-row")return l.jsx(v,{msg:e,agentName:b.agentName});if(b.kind==="kept-by-row")return l.jsx(x,{msg:e});switch(b.type){case d("WAWebGroupMsgInfoSections").Sections.PLAYED_HEADER:case d("WAWebGroupMsgInfoSections").Sections.READ_HEADER:case d("WAWebGroupMsgInfoSections").Sections.SEEN_HEADER:case d("WAWebGroupMsgInfoSections").Sections.DELIVERED_HEADER:case d("WAWebGroupMsgInfoSections").Sections.VIEWED_HEADER:case d("WAWebGroupMsgInfoSections").Sections.AGENT_HEADER:case d("WAWebGroupMsgInfoSections").Sections.KEEP_IN_CHAT_HEADER:return l.jsx(y,{msg:e,section:b.type});default:return l.jsx(c("WAWebGroupMsgInfoSectionFooter.react"),{section:b.type,msgInfo:c("WANullthrows")(a)})}}function a(a,b){var e,f=a.msg;e=d("useWAWebMsgValues").useMsgValues(a.msg.id,[(e=d("WAWebMsgGetters")).getId,e.getStar,e.getType,e.getIsGif,e.getIsViewOnce,e.getLabels,e.getNumTimesForwarded,e.getIsFrequentlyForwarded,e.getAgendId,e.getKicSender,e.getKicTimestampMs,e.getIsKept,d("WAWebFrontendMsgGetters").getAsRevoked,e.getLatestEditMsgKey]);var g=e[0];e[1];var i=e[2];e[3];var j=e[4],k=e[5];e[6];e[7];var p=e[8],u=e[9];e[10];var v=e[11],w=e[12];e[13];var x=d("WAWebFrontendMsgGetters").getChat(f),y=c("useWAWebUnmountSignal")(),A=c("useWAWebUIM")(),B=c("useWAWebLazyRef")(function(){return new(d("WAWebUiActionWamEvent").UiActionWamEvent)({uiActionType:d("WAWebWamEnumUiActionType").UI_ACTION_TYPE.MSG_INFO_OPEN,uiActionPreloaded:!0})});e=c("useWAWebLazyRef")(function(){return new(c("WAWebFlatListController"))()});var C=n(null),D=n(null),E=o(void 0),F=E[0],G=E[1];E=o(!1);var H=E[0],I=E[1];m(function(){var a;d("WAWebMsgInfoCollection").MsgInfoCollection.find(g).then(function(a){if(y.aborted)return;G(a)})["catch"](function(){I(!0),d("WAWebToastManager").ToastManager.open(l.jsx(d("WAWebToast.react").Toast,{msg:h._("__JHASH__7Oc8AbKOOJ2__JHASH__"),id:d("WAWebToast.react").genId("msg_info_failed")}))});a=(a=C.current)==null?void 0:a.getContainer();i===d("WAWebMsgType").MSG_TYPE.IMAGE&&a&&(a.scrollTop=a.scrollHeight)},[]);m(function(){var a=B.current;if(a){var b=c("WAWebGroupMetadataCollection").get(x.id),e=b==null?void 0:b.cachedDeviceSizeBucket;e!=null&&(a.sizeBucket=e);b!=null&&Object.assign(a,d("WAWebWamGroupMetricUtils").getGroupCountMetricsFromGroupMetadata(b),d("WAWebWamAddressingModeUtils").getAddressingModeMetricsFromGroupMetadata(b));a.markUiActionT();a.commit();B.current=void 0}d("WAWebWamPrivateStatsUtils").logUiActionShadowPrivateStatsTestEvents();d("WAWebBizAgentAction").logMessageInfo(p)},[]);var J=c("WAWebUseIsFeatureEnabled")("MD_EXTENSION");E=function(a,b){b===void 0&&(b=!1);return a===g&&(b?!0:(a=D.current)==null?void 0:a.getMsgComponentRef())};var K=function(){A==null?void 0:A.requestDismiss()},L=function(){var a=[];F&&v&&u!=null&&(a.push({kind:"section",type:d("WAWebGroupMsgInfoSections").Sections.KEEP_IN_CHAT_HEADER,itemKey:d("WAWebGroupMsgInfoSections").Sections.KEEP_IN_CHAT_HEADER,height:r}),a.push({kind:"kept-by-row",itemKey:"kept-by-"+u.user,height:s}));if(J&&d("WAWebBizGatingUtils").isMultiDeviceMessageAttributionEnabled()&&p!=null){var b;b=(b=(b=d("WAWebAgentCollection").AgentCollection.get(p))==null?void 0:b.name)!=null?b:"";a.push({kind:"section",type:d("WAWebGroupMsgInfoSections").Sections.AGENT_HEADER,itemKey:d("WAWebGroupMsgInfoSections").Sections.AGENT_HEADER,height:r});a.push({kind:"agent-row",agentName:b,itemKey:"agent-"+b.toString(),height:s})}b=d("WAWebMsgGetters").getIsAckPlayable(f);var c=b||j;if(F&&c){var e=b&&!j?d("WAWebGroupMsgInfoSections").Sections.PLAYED_HEADER:d("WAWebGroupMsgInfoSections").Sections.VIEWED_HEADER;a.push({kind:"section",type:e,itemKey:e,height:r});a.push.apply(a,F.played.map(function(a){return{participant:a,kind:"contact-row",itemKey:a.id.toString(),height:d("WAWebFlatList.react").DEFAULT_ITEM_HEIGHT}}));F.playedRemaining>0&&(e=b&&!j?d("WAWebGroupMsgInfoSections").Sections.PLAYED_FOOTER:d("WAWebGroupMsgInfoSections").Sections.VIEWED_FOOTER,a.push({kind:"section",type:e,itemKey:e,height:q}))}F&&(F.read.length>0||F.playedRemaining>0)&&(a.push({kind:"section",type:c?d("WAWebGroupMsgInfoSections").Sections.SEEN_HEADER:d("WAWebGroupMsgInfoSections").Sections.READ_HEADER,itemKey:d("WAWebGroupMsgInfoSections").Sections.READ_HEADER,height:r}),a.push.apply(a,F.read.map(function(a){var b;return((b=f.invokedBotWid)==null?void 0:b.isBot())&&d("WAWebUserPrefsMeUser").isMeAccount(a.id)?null:{participant:a,kind:"contact-row",itemKey:a.id.toString(),height:d("WAWebFlatList.react").DEFAULT_ITEM_HEIGHT}}).filter(Boolean)),F.readRemaining>0&&a.push({kind:"section",type:d("WAWebGroupMsgInfoSections").Sections.READ_FOOTER,itemKey:c?d("WAWebGroupMsgInfoSections").Sections.SEEN_FOOTER:d("WAWebGroupMsgInfoSections").Sections.READ_FOOTER,height:q}));F&&(F.delivery.length>0||F.deliveryRemaining>0)&&(a.push({kind:"section",type:d("WAWebGroupMsgInfoSections").Sections.DELIVERED_HEADER,itemKey:d("WAWebGroupMsgInfoSections").Sections.DELIVERED_HEADER,height:r}),a.push.apply(a,F.delivery.map(function(a){var b;return((b=f.invokedBotWid)==null?void 0:b.isBot())&&d("WAWebUserPrefsMeUser").isMeAccount(a.id)?null:{participant:a,kind:"contact-row",itemKey:a.id.toString(),height:d("WAWebFlatList.react").DEFAULT_ITEM_HEIGHT}}).filter(Boolean)),F.deliveryRemaining>0&&a.push({kind:"section",type:d("WAWebGroupMsgInfoSections").Sections.DELIVERED_FOOTER,itemKey:d("WAWebGroupMsgInfoSections").Sections.DELIVERED_FOOTER,height:q}));return a},M=c("useWAWebForceUpdate")();d("useWAWebListener").useListener(F==null?void 0:F.played,["add","remove"],M);d("useWAWebListener").useListener(F==null?void 0:F.read,["add","remove"],M);d("useWAWebListener").useListener(F==null?void 0:F.delivery,["add","remove"],M);w&&(A==null?void 0:A.requestDismiss());d("useWAWebListener").useListener(d("WAWebMsgCollection").MsgCollection,"remove",function(a){a.id.equals(g)&&(A==null?void 0:A.requestDismiss())});d("useWAWebListener").useListener(f,"change:latestEditMsgKey",function(){return A==null?void 0:A.requestDismiss()});var N;!F&&!H&&(N=l.jsx("div",{className:"x78zum5 x6s0dn4 xl56j7k xvv2zd5",children:l.jsx(d("WAWebSpinner.react").Spinner,{size:50,stroke:4})}));M=L();w=M.length?l.jsx(t,{flatListController:e.current,direction:"vertical",forceConsistentRenderCount:!1,data:M,renderItem:function(a){return l.jsx(z,{data:a,msg:f,msgInfo:F})}}):null;H=null;k&&k.length>0&&d("WAWebBizGatingUtils").canDisplayLabel()&&(H=l.jsx(c("WAWebDrawerSection.react"),{theme:"padding",children:l.jsx(c("WAWebLabelsInfoDrawerLabelWell.react"),{labels:k})}));return l.jsxs(c("WAWebDrawer.react"),{ref:b,theme:"striped",children:[l.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:h._("__JHASH__6ZxqC6H3okB__JHASH__"),type:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.SMALL,rtlFixIfOnDarwin:!0,onCancel:K,focusBackOrCancel:!0}),l.jsx(c("WAWebMsgPreview.react"),{ref:C,chatPreference:c("WAWebChatPreferenceCollection").assertGet("defaultPreference"),children:l.jsx(d("WAWebWrapper.react").Wrapper,{msg:f,ref:D,displayType:d("WAWebDisplayType").DISPLAY_TYPE.MSG_INFO,isMsgVisible:E,position:d("WAWebMessagePosition").MsgPosition.END,onProductClick:a.onProductClick})}),l.jsxs(c("WAWebDrawerBody.react"),{flatListControllers:[e.current],children:[H,N,l.jsx("div",{className:"x889kno x1t4gjm",children:w})]})]})}a.displayName=a.name+" [from "+f.id+"]";b=e(a);g["default"]=b}),98);
__d("WAWebGroupMsgInfoFlow.react",["$InternalEnum","WANullthrows","WAWebFrontendMsgGetters","WAWebGroupMsgInfoDrawer.react","WAWebProductDetailsFlowLoadable","react","useWAWebFlow"],(function(a,b,c,d,e,f,g){var h,i,j=i||c("react"),k=(h||(h=d("react"))).useState,l=b("$InternalEnum").Mirrored(["GroupMessageInfo","ProductDetails"]);function a(a){var b=d("useWAWebFlow").useFlow(l.GroupMessageInfo,{transitions:d("useWAWebFlow").FlowTransitions.DrawerRight}),e=b[0],f=b[1];b=k();var g=b[0],h=b[1];if(f.step==null)return null;var i;switch(f.step){case l.GroupMessageInfo:b=function(a){h(a),f.push(l.ProductDetails)};i=j.jsx(c("WAWebGroupMsgInfoDrawer.react"),{msg:a.msg,onProductClick:b});break;case l.ProductDetails:i=j.jsx(d("WAWebProductDetailsFlowLoadable").ProductDetailsFlowLoadable,{refreshCarousel:!0,chat:d("WAWebFrontendMsgGetters").getChat(a.msg),product:c("WANullthrows")(g),onEnd:function(){return f.pop()}});break}return j.jsx(e,{flow:f,children:i})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebGroupsV4InviteAddComment.react",["fbt","WAWebChatInviteWithCommentModal.react","react"],(function(a,b,c,d,e,f,g,h){var i,j,k=j||c("react");b=(i||(i=d("react"))).forwardRef;function a(a,b){return k.jsx(c("WAWebChatInviteWithCommentModal.react"),{ref:b,onClose:a.onClose,onSend:a.onSend,wid:a.gid,invitees:a.participants.map(function(a){return a.contact}),chatName:a.subject,initialInviteComment:h._("__JHASH__-DY4gyzswGw__JHASH__"),chatNameSubtitle:h._("__JHASH__-MKYnzTW4lu__JHASH__")})}a.displayName=a.name+" [from "+f.id+"]";e=b(a);g["default"]=e}),98);
__d("WAWebGroupsV4InviteFlow.react",["fbt","Promise","WAWebChatSendMessages","WAWebConfirmPopup.react","WAWebFbtIntlList","WAWebFindChatAction","WAWebFlowComponent.react","WAWebFrontendContactGetters","WAWebGroupMetadataCollection","WAWebGroupsV4InviteAddComment.react","WAWebModalManager","WAWebName.react","WAWebSendMsgResultAction","WAWebToast.react","WAWebToastManager","asyncToGeneratorRuntime","react"],(function(a,b,c,d,e,f,g,h){var i,j,k=j||c("react");a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var e,f;for(var g=arguments.length,j=new Array(g),l=0;l<g;l++)j[l]=arguments[l];return(e=f=a.call.apply(a,[this].concat(j))||this,f.$GroupsV4InviteFlow5=function(a,e){a===void 0&&(a=""),d("WAWebModalManager").ModalManager.close(),(i||(i=b("Promise"))).all(f.props.participantNeedInvite.map(function(){var g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var g=b.contact,h=b.invite_code;b=b.invite_code_exp;var i=(yield d("WAWebFindChatAction").findChat(g.id,"groupsV4InviteFlow")),j=f.props.groupGid.toString(),k=c("WAWebGroupMetadataCollection").assertGet(j);i=(yield d("WAWebChatSendMessages").sendGroupInviteMessage(i,j,f.props.subject,h||"",b,a,e));if(i.messageSendResult===d("WAWebSendMsgResultAction").SendMsgResult.OK){k.pendingParticipants.add({id:g.id});return!0}return!1});return function(a){return g.apply(this,arguments)}}())).then(function(a){a=a.filter(Boolean).length;d("WAWebToastManager").ToastManager.open(k.jsx(d("WAWebToast.react").Toast,{msg:h._("__JHASH__0Mvm1RLqxeY__JHASH__",[h._plural(a,"num")])}))})},f.$GroupsV4InviteFlow2=function(a){f.push(k.jsx(c("WAWebGroupsV4InviteAddComment.react"),{participants:a,gid:f.props.groupGid,subject:f.props.subject,groupDesc:f.props.groupDesc,onClose:f.$GroupsV4InviteFlow3,onSend:f.$GroupsV4InviteFlow5}))},f.$GroupsV4InviteFlow3=function(){f.pop()},e)||babelHelpers.assertThisInitialized(f)}var f=e.prototype;f.componentDidMount=function(){var a=this.props.participantNeedInvite,b=this.$GroupsV4InviteFlow1(a.map(function(a){return a.contact}),!0);b=h._("__JHASH__zVAsJAGQlxg__JHASH__",[h._plural(a.length),h._param("member",b)]);this.push(k.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{onOK:this.$GroupsV4InviteFlow2.bind(this,a),okText:h._("__JHASH__9lHmApGpjly__JHASH__"),onCancel:this.$GroupsV4InviteFlow3,cancelText:h._("__JHASH__JomY4EcHzcJ__JHASH__"),children:b}))};f.$GroupsV4InviteFlow4=function(a,b){b===void 0&&(b=!1);return b?d("WAWebFrontendContactGetters").getFormattedUser(a):k.jsx(d("WAWebName.react").Name,{contact:a})};f.$GroupsV4InviteFlow1=function(a,b){var d=this;b===void 0&&(b=!1);if(!Array.isArray(a))return this.$GroupsV4InviteFlow4(a,b);a=a.map(function(a){return d.$GroupsV4InviteFlow4(a,b)});return c("WAWebFbtIntlList")(a,c("WAWebFbtIntlList").CONJUNCTIONS.AND,c("WAWebFbtIntlList").DELIMITERS.COMMA)};return e}(c("WAWebFlowComponent.react"));a.defaultProps={removeTopDrawer:!0,pushTransition:"none",popTransition:"none",displayName:"GroupsV4InviteFlow"};g["default"]=a}),98);
__d("WAWebNewChatDrawer.scss",["cx"],(function(a,b,c,d,e,f,g,h){a={defaultGroupIcon:"_alyn"};b=a;g["default"]=b}),98);
__d("WAWebNewChatDrawer.react",["fbt","WALogger","WAWebABProps","WAWebApiContact","WAWebCellBorder.react","WAWebChatContactList.react","WAWebChatListSearch.react","WAWebCmd","WAWebCommunityGatingUtils","WAWebCommunityGroupIcon","WAWebComposeBoxActions","WAWebContactCollection","WAWebContactGetters","WAWebContactManagementGating","WAWebContactlessChatUtils","WAWebDefaultGroupIcon","WAWebDefaultUserIcon","WAWebDrawer.react","WAWebDrawerBody.react","WAWebDrawerButton.react","WAWebDrawerHeader.react","WAWebDrawerManager","WAWebEmptyState.react","WAWebFbtCommon","WAWebFindChatAction","WAWebFlatListController","WAWebFocusIndicator","WAWebL10N","WAWebLidContactsGatingUtils","WAWebNewChatDrawer.scss","WAWebNewChatMetricUtils","WAWebPhoneNumberSearch","WAWebQueryExistsJob","WAWebRoundShape.react","WAWebTopMenuRedesignGatingUtils","WAWebUnknownContactSection.react","WAWebUserPrefsMeUser","WAWebUsernameGatingUtils","WAWebWDSGatingUtils","WAWebWamEnumWebContactListStartNewChatType","asyncToGeneratorRuntime","react","useWAWebDebouncedCallback","useWAWebForceUpdate","useWAWebListener","useWAWebStableCallback","useWAWebUnknownContact"],(function(a,b,c,d,e,f,g,h){var i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["queryUsernameExists failed with error:",""]);k=function(){return a};return a}e=j||d("react");var l=i||(i=c("react")),m=e.forwardRef,n=e.useCallback,o=e.useMemo,p=e.useRef,q=e.useState,r={newChatButton:{paddingBottom:"x1j85h84",height:"xy3bg4n",$$css:!0}},s=3;function t(a){var b=a.image,e=a.onClick;a=a.primary;var f=h._("__JHASH__vDb1gwdkYRB__JHASH__",[h._param("item-title",a.toString())]);return l.jsxs(l.Fragment,{children:[l.jsx(d("WAWebDrawerButton.react").DrawerButtonSimple,{icon:b,onClick:e,ariaLabel:f,xstyle:r.newChatButton,children:a}),l.jsx(c("WAWebCellBorder.react"),{})]})}t.displayName=t.name+" [from "+f.id+"]";function a(a,e){var f=a.title,g=a.onBack,i=a.onClick,j=a.onNewGroup,m=a.onNewCommunity;a=a.onNewContact;var r=q(""),u=r[0],v=r[1];r=q(null);var w=r[0],x=r[1];r=p();var y=p(),z=p(),A=Boolean(u),B=o(function(){return d("WAWebContactCollection").ContactCollection.frequentContacts("message")},[d("WAWebContactCollection").ContactCollection.length]),C=o(function(){return A?[]:B},[A,B]),D=w!=null?d("WAWebContactCollection").ContactCollection.get(w):null;w=q(function(){return new(c("WAWebFlatListController"))()});w=w[0];var E=d("WAWebLidContactsGatingUtils").isLidContactOneOnOneChatEnabled(),F=d("WAWebABProps").getABPropConfigValue("web_chat_with_unknown_contacts"),G=d("WAWebUsernameGatingUtils").usernameContactlessChatEnabled(),H=h._("__JHASH__UGA_7UxgMl-__JHASH__"),I=c("useWAWebForceUpdate")();d("useWAWebListener").useListener(d("WAWebContactCollection").ContactCollection,"change:name",I);F&&(G?H=h._("__JHASH__BTGY4QjdqEI__JHASH__"):H=c("WAWebFbtCommon")("Search name or number"));var J=n(function(b){d("WAWebContactCollection").ContactCollection.ensureSorted();b=typeof b==="string"?b:u;if(!b)return d("WAWebContactCollection").ContactCollection.getFilteredContacts({showMe:!!b,includeLidContacts:E});var a=d("WAWebContactCollection").ContactCollection.getFilteredContacts({showMe:!!b,includeLidContacts:E}).concat(d("WAWebContactCollection").ContactCollection.filter(function(a){return a.name&&!d("WAWebContactGetters").getIsMe(a)&&!d("WAWebContactGetters").getIsPSA(a)&&!d("WAWebContactGetters").getIsWAContact(a)&&!d("WAWebContactGetters").getIsNewsletter(a)})),e=c("WAWebL10N").accentFold(b),f=d("WAWebPhoneNumberSearch").numberSearch(e);return a.filter(function(a){return a.searchMatch(e,f)})},[u,E]),K=J();I=c("useWAWebUnknownContact")({phoneNumber:u,shouldStartSearch:K.length===0&&F});var L=I.unknownContactInfo,M=I.loading,N=I.error;I=I.onRetry;var O=c("useWAWebDebouncedCallback")(function(a){return v(a)},100),P=n(function(a){z.current=a,G&&a.length>=s&&d("WAWebQueryExistsJob").queryUsernameExists(a).then(function(b){if(z.current===a){x((b=b==null?void 0:b.wid)!=null?b:null);O(a)}})["catch"](function(b){z.current===a&&(x(null),O(a)),d("WALogger").ERROR(k(),b).devConsole(b)}),z.current=a,O(a)},[G,O]),Q=n(function(a,b,d){c("WAWebFocusIndicator").shouldIndicateFocus(),i(a,b,void 0,d)},[i]),R=c("useWAWebStableCallback")(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a.preventDefault();a.stopPropagation();d("WAWebDrawerManager").DrawerManager.closeDrawerLeft();a=(a=L==null?void 0:L.chat)!=null?a:yield d("WAWebFindChatAction").findChat(b,"newChatFlow");b=d("WAWebCmd").Cmd.openChatFromUnread(a);if(!b)return;d("WAWebNewChatMetricUtils").logInitiatedContactlessChat(a);d("WAWebNewChatMetricUtils").logContactListStartNewChatAction({chatType:d("WAWebWamEnumWebContactListStartNewChatType").WEB_CONTACT_LIST_START_NEW_CHAT_TYPE.CONTACTLESS,isSearchResult:!0});d("WAWebComposeBoxActions").ComposeBoxActions.focus(a)});return function(b,c){return a.apply(this,arguments)}}()),S=n(function(a){a.preventDefault();a.stopPropagation();var b=C[0];if(b){Q(a,b);return}if(D){Q(a,D,"username_contactless_search");return}if(!A){b=d("WAWebContactCollection").ContactCollection.assertGet(d("WAWebUserPrefsMeUser").getMeUser());Q(a,b);return}b=J(z.current)[0];if(b){Q(a,b);return}(L==null?void 0:L.wid)&&void R(a,L.wid)},[C,D,A,J,L==null?void 0:L.wid,Q,R]),T=[];if(!u){var U=l.jsx(c("WAWebRoundShape.react"),{children:l.jsx(d("WAWebDefaultGroupIcon").DefaultGroupIcon,{height:36,width:36,directional:!0,className_DONOTUSE:c("WAWebNewChatDrawer.scss").defaultGroupIcon})});T.push({image:U,id:h._("__JHASH__6EroHqWSWmZ__JHASH__"),onClick:j});if(d("WAWebContactManagementGating").contactManagementEnabled()){U=l.jsx(c("WAWebRoundShape.react"),{children:l.jsx(d("WAWebDefaultUserIcon").DefaultUserIcon,{height:36,width:36,directional:!0,className_DONOTUSE:c("WAWebNewChatDrawer.scss").defaultGroupIcon})});j=h._("__JHASH__cCuBUCEosFk__JHASH__");T.push({image:U,id:j,onClick:a})}if(d("WAWebCommunityGatingUtils").communitiesEnabled()&&d("WAWebCommunityGatingUtils").communitiesCreationEnabled()){U=l.jsx(c("WAWebRoundShape.react"),{children:l.jsx(d("WAWebCommunityGroupIcon").CommunityGroupIcon,{directional:!0})});T.push({image:U,id:h._("__JHASH__KIkd5AW9_IK__JHASH__"),onClick:m})}}j=function(a){if(a!=null){var b=d("WAWebApiContact").getPhoneNumber(a.id);b=b!=null?d("WAWebContactCollection").ContactCollection.get(b):null;if((b==null||!K.includes(b))&&!K.includes(a))return[a]}return};a=j(D);K.length===0&&!D?u?M?U=l.jsx(d("WAWebEmptyState.react").SearchingNonContact,{}):N?U=d("WAWebEmptyState.react").SearchingNonContactError(d("WAWebContactlessChatUtils").getErrorStr(N),I):L?U=l.jsx(c("WAWebUnknownContactSection.react"),{contactInfo:L,onUnknownContactClick:R}):U=l.jsx(d("WAWebEmptyState.react").SearchWithKeyword,{keyword:u}):U=l.jsx(d("WAWebEmptyState.react").SearchWithoutKeyword,{}):U=l.jsx(c("WAWebChatContactList.react"),{ref:y,contacts:K,flatListController:w,frequentContacts:C,usernameContacts:a,onClick:i,showMe:!A,showBot:!A,showPersonGroupDivisionHeader:!0});return l.jsxs(c("WAWebDrawer.react"),{ref:e,testid:void 0,children:[l.jsx(d("WAWebDrawerHeader.react").DrawerHeader,{title:f,type:d("WAWebTopMenuRedesignGatingUtils").topMenuRedesignEnabled()?d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.SMALL:d("WAWebDrawerHeader.react").DRAWER_HEADER_TYPE.LARGE,onBack:g}),l.jsx(d("WAWebChatListSearch.react").ListSearch,{ref:r,onSearch:P,onEnter:S,placeholder:H,type:d("WAWebChatListSearch.react").ListSearchType.NEW_CHAT_CONTACT_SEARCH,loading:M,showPlaceholderUntilType:F,focusOnMount:!0}),l.jsxs(c("WAWebDrawerBody.react"),{flatListControllers:[w],backgroundColor:d("WAWebWDSGatingUtils").materialRefreshEnabled()?"default":null,children:[T.map(function(a,b){var c=a.image,d=a.id;a=a.onClick;return l.jsx(t,{image:c,primary:d,onClick:a},b)}),U]})]},"contact-modal")}a.displayName=a.name+" [from "+f.id+"]";e=m(a);g["default"]=e}),98);
__d("WAWebNewChatFlow.react",["fbt","$InternalEnum","WAWebCmd","WAWebCommunityCreationFlowMetricUtils","WAWebComposeBoxActions","WAWebContactCollection","WAWebContactEditModalUtils","WAWebContactGetters","WAWebFindChatAction","WAWebMessageYourselfMetricUtils","WAWebNewChatDrawer.react","WAWebNewChatMetricUtils","WAWebNewCommunityInfoDrawer.react","WAWebNewGroupFlowLoadable","WAWebWamEnumCommunityCreationCurrentScreenType","WAWebWamEnumCommunityCreationEntrypointType","WAWebWamEnumWebContactListStartNewChatType","asyncToGeneratorRuntime","react","useWAWebFlow","useWAWebListener"],(function(a,b,c,d,e,f,g,h){var i,j,k=j||c("react");e=(i||(i=d("react"))).forwardRef;var l=b("$InternalEnum").Mirrored(["NewChatDrawer","NewCommunityFlow","NewGroupFlow"]);function a(a,e){a=a.onEnd;d("WAWebContactCollection").ContactCollection.ensureSorted();a=d("useWAWebFlow").useFlow(l.NewChatDrawer,{transitions:d("useWAWebFlow").FlowTransitions.DrawerLeft,onEnd:a});var f=a[0],g=a[1];a=function(){g.end()};d("useWAWebListener").useListener(d("WAWebCmd").Cmd,"end_flow",a);a=function(a,b,c,e){c===void 0&&(c=!1);a={};b.isEnterprise&&b.privacyMode!=null&&(a.nextPrivacyMode=b.privacyMode);void d("WAWebFindChatAction").findChat(b.id,(e=e)!=null?e:"newChatFlow",a).then(function(a){d("WAWebCmd").Cmd.openChatFromUnread(a).then(function(e){if(!e)return;e=a.isGroup?d("WAWebWamEnumWebContactListStartNewChatType").WEB_CONTACT_LIST_START_NEW_CHAT_TYPE.GROUP:d("WAWebWamEnumWebContactListStartNewChatType").WEB_CONTACT_LIST_START_NEW_CHAT_TYPE.CONTACT;d("WAWebNewChatMetricUtils").logContactListStartNewChatAction({chatType:e,isSearchResult:a.isGroup||c});d("WAWebContactGetters").getIsMe(b)&&d("WAWebMessageYourselfMetricUtils").UiMessageYourselfNewChatAction.logMessageYourselfOpenedEvent(a,c);d("WAWebComposeBoxActions").ComposeBoxActions.focus(a)})});g.end()};var i=function(a){g.push(l.NewGroupFlow)},j=function(a){g.push(l.NewCommunityFlow),d("WAWebCommunityCreationFlowMetricUtils").UiCommunityCreationAction.startSession(d("WAWebWamEnumCommunityCreationEntrypointType").COMMUNITY_CREATION_ENTRYPOINT_TYPE.CHATS_TAB),d("WAWebCommunityCreationFlowMetricUtils").UiCommunityCreationAction.enter(d("WAWebWamEnumCommunityCreationCurrentScreenType").COMMUNITY_CREATION_CURRENT_SCREEN_TYPE.CHATS_TAB)},m=function(a){d("WAWebContactEditModalUtils").showNewContactModal()};if(g.step==null)return null;var n=null;switch(g.step){case l.NewChatDrawer:n=k.jsx(c("WAWebNewChatDrawer.react"),{title:h._("__JHASH__G__8-ng2r4N__JHASH__"),onBack:function(){return g.end()},onClick:a,onNewGroup:i,onNewCommunity:j,onNewContact:m});break;case l.NewGroupFlow:n=k.jsx(d("WAWebNewGroupFlowLoadable").NewGroupFlowLoadable,{onCreateGroup:function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){yield a,g.end()});return function(b){return a.apply(this,arguments)}}(),onEnd:g.pop});break;case l.NewCommunityFlow:n=k.jsx(c("WAWebNewCommunityInfoDrawer.react"),{onBack:g.pop});break}return k.jsx(f,{ref:e,flow:g,children:n})}a.displayName=a.name+" [from "+f.id+"]";f=e(a);g["default"]=f}),98);
__d("WAWebSendGroupInviteFlow.react",["fbt","WANullthrows","WAWebGroupType","WAWebSendTextFlow.react","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(a){var b;a=a.chat;b=c("WANullthrows")((b=a.groupMetadata)==null?void 0:b.groupInviteLink);a=((a=a.groupMetadata)==null?void 0:a.groupType)===d("WAWebGroupType").GroupType.COMMUNITY;a=a?h._("__JHASH__JrlCg9TMHkl__JHASH__").toString()+" "+b:h._("__JHASH__2oCqXm_Ze0x__JHASH__").toString()+" "+b;return j.jsx(c("WAWebSendTextFlow.react"),{title:h._("__JHASH__LenP8XNVLj1__JHASH__"),text:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebCommunityAdminPromotionNotificationFlow.react",["$InternalEnum","WALogger","WAWebChatCollection","WAWebCommunityAdminPromotionNotificationPopup.react","WAWebCommunityAdminSelfDemotePopup.react","WAWebCommunityLogEvents","WAWebCommunityPromoteDemotePopups.react","WAWebModalManager","WAWebModifyParticipantsGroupAction","WAWebNux","WAWebUserPrefsMeUser","WAWebWamEnumCadminDemoteOriginType","WAWebWamEnumCadminDemoteResultType","react","useWAWebFlow","useWAWebNux"],(function(a,b,c,d,e,f,g){var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["Error sending demote community participants iq"]);i=function(){return a};return a}var j=h||c("react"),k=b("$InternalEnum").Mirrored(["PromotionNotification","Demote"]);function a(a){var b=a.communityMetadata;a=d("WAWebNux").getCommunityAdminPromotionNuxKey(b.id.toString());a=c("useWAWebNux")(a);var e=a[2];a=d("useWAWebFlow").useFlow(k.PromotionNotification);var f=a[0],g=a[1];if(g.step==null)return null;var h;switch(g.step){case k.PromotionNotification:a=function(){g.push(k.Demote)};var l=function(){e(),g.end()};h=j.jsx(c("WAWebCommunityAdminPromotionNotificationPopup.react"),{onDemote:a,onContinue:l});break;case k.Demote:var m=d("WAWebUserPrefsMeUser").isMeAccount(b.owner),n=function(a){d("WAWebCommunityLogEvents").logCadminDemoteEvent(d("WAWebWamEnumCadminDemoteOriginType").CADMIN_DEMOTE_ORIGIN_TYPE.PROMOTION_NOTIFICATION,a,b.participants.getAdmins().length===1||m)},o=function(a){a===void 0&&(a=!1),n(a?d("WAWebWamEnumCadminDemoteResultType").CADMIN_DEMOTE_RESULT_TYPE.RETRY_CANCEL:d("WAWebWamEnumCadminDemoteResultType").CADMIN_DEMOTE_RESULT_TYPE.CANCEL),d("WAWebModalManager").ModalManager.close()};a=function a(c){c===void 0&&(c=!1);e();var f=b.participants.getMeParticipant(),h=d("WAWebChatCollection").ChatCollection.get(b.id);f&&h&&(f.contact.pendingAction++,d("WAWebModifyParticipantsGroupAction").demoteCommunityParticipants(h,[f]).then(function(){n(c?d("WAWebWamEnumCadminDemoteResultType").CADMIN_DEMOTE_RESULT_TYPE.RETRY_SUCCESS:d("WAWebWamEnumCadminDemoteResultType").CADMIN_DEMOTE_RESULT_TYPE.SUCCESS)})["catch"](function(b){d("WALogger").WARN(i()).verbose().devConsole(b).sendLogs("community-admin-self-demote-failed"),n(c?d("WAWebWamEnumCadminDemoteResultType").CADMIN_DEMOTE_RESULT_TYPE.RETRY_FAILURE:d("WAWebWamEnumCadminDemoteResultType").CADMIN_DEMOTE_RESULT_TYPE.FAILURE),d("WAWebModalManager").ModalManager.open(j.jsx(d("WAWebCommunityPromoteDemotePopups.react").CommunityAdminDemoteErrorPopup,{onParticipantDemote:function(){return a(!0)},onCancel:function(){return o(!0)},isMe:!0}))})["finally"](function(){f.contact.pendingAction--}));c?d("WAWebModalManager").ModalManager.close():g.end()};l=function(){n(d("WAWebWamEnumCadminDemoteResultType").CADMIN_DEMOTE_RESULT_TYPE.FAILURE),g.pop()};h=j.jsx(c("WAWebCommunityAdminSelfDemotePopup.react"),{onDemote:a,onCancel:o,onFailure:l,isCommunityOwner:m});break}return j.jsx(f,{flow:g,children:h})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebManageCommunityGroupsFlow.react",["$InternalEnum","WAWebABProps","WAWebChatCollection","WAWebChatCommunityUtils","WAWebCmd","WAWebCommunityExistingGroupsDrawer.react","WAWebCommunityGatingUtils","WAWebCommunityHomeGroupsManager.react","WAWebCommunitySettingsDrawer.react","WAWebComposeBoxActions","WAWebCreateSubgroupSuggestionAction","WAWebDrawerManager","WAWebFindChatAction","WAWebLinkSubgroupsAction","WAWebNewGroupFlow.react","WAWebNewGroupFlowLoadable","WAWebNewSubgroupSuggestionDrawer.react","WAWebUiActionWamEvent","WAWebUserPrefsMeUser","WAWebWamEnumUiActionType","WAWebWamPrivateStatsUtils","asyncToGeneratorRuntime","react","useWAWebCallbackOnce","useWAWebCommunitySubgroups","useWAWebFlow","useWAWebUnmountSignal"],(function(a,b,c,d,e,f,g){var h,i,j=i||c("react");e=(h||(h=d("react"))).forwardRef;var k=b("$InternalEnum").Mirrored(["GROUPS_MANAGER","NEW_GROUP","EXISTING_GROUP","COMMUNITY_SETTINGS"]);function a(a,e){var f=a.parentGroupMetadata,g=a.fromInfo;g=g===void 0?!1:g;var h=a.onBack;a=c("useWAWebCommunitySubgroups")(f);var i=a.joinedSubgroups,l=a.unjoinedSubgroups;a=a.subgroupCount;var m=d("WAWebChatCommunityUtils").isSubgroupSuggestionCreation(f.id),n=c("useWAWebUnmountSignal")(),o=c("useWAWebCallbackOnce")(function(){h?h():d("WAWebDrawerManager").DrawerManager.closeDrawerRight()}),p=d("useWAWebFlow").useFlow(k.GROUPS_MANAGER,{transitions:d("useWAWebFlow").FlowTransitions.DrawerLeft,onEnd:o}),q=p[0],r=p[1];function s(a){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){a=(yield a);r.pop();a!=null&&!n.aborted&&d("WAWebFindChatAction").findChat(a,"communityGroupsFlow").then(function(a){d("WAWebCmd").Cmd.openChatBottom(a).then(function(b){b&&d("WAWebComposeBoxActions").ComposeBoxActions.focus(a)})})});return t.apply(this,arguments)}function u(a){return v.apply(this,arguments)}function v(){v=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=new Set([].concat(l,i));a=a.filter(function(a){return!b.has(a.id)}).map(function(a){return a.id});if(a.length)if(!f.participants.iAmAdmin())yield d("WAWebCreateSubgroupSuggestionAction").createExistingGroupsSubgroupSuggestionsAction(f.id,a,r.pop,o);else{var e=new(d("WAWebUiActionWamEvent").UiActionWamEvent)({uiActionType:d("WAWebWamEnumUiActionType").UI_ACTION_TYPE.COMMUNITY_LINK,uiActionPreloaded:!1});yield c("WAWebLinkSubgroupsAction")(f.id,a).then(function(){e.markUiActionT(),e.commit(),d("WAWebWamPrivateStatsUtils").logUiActionShadowPrivateStatsTestEvents()});r.pop()}});return v.apply(this,arguments)}if(r.step==null)return null;var w;switch(r.step){case k.GROUPS_MANAGER:w=j.jsx(d("WAWebCommunityHomeGroupsManager.react").CommunityHomeGroupsManager,{joinedSubgroups:i,unjoinedSubgroups:l,currentSubgroupCount:a,fromInfo:g,onBack:o,onNewGroupFlow:function(){return r.push(k.NEW_GROUP)},onExistingGroupFlow:function(){return r.push(k.EXISTING_GROUP)},onCommunitySettingsClick:function(){return r.push(k.COMMUNITY_SETTINGS)},parentId:f.id});break;case k.NEW_GROUP:p=f.participants.iAmAdmin();if(m)w=j.jsx(c("WAWebNewSubgroupSuggestionDrawer.react"),{parentGroup:f.id,onBack:function(){return r.pop()},onEnd:o});else{m=d("WAWebCommunityGatingUtils").communityShortGroupCreationEnabled();w=j.jsx(d("WAWebNewGroupFlowLoadable").NewGroupFlowLoadable,{onCreateGroup:s,onEnd:function(){return r.pop()},parentGroupWid:f.id,initialStep:p&&!m?d("WAWebNewGroupFlow.react").NewGroupFlowStep.ADD_PARTICIPANTS_DRAWER:d("WAWebNewGroupFlow.react").NewGroupFlowStep.SET_GROUP_INFO_DRAWER,shortenedCreationFlow:m})}break;case k.EXISTING_GROUP:s=d("WAWebChatCollection").ChatCollection.get(f.id);m=d("WAWebABProps").getABPropConfigValue("parent_group_no_disclaimer")&&(s==null?void 0:(p=s.groupMetadata)==null?void 0:p.isParentGroupClosed)===!0;p=s==null?void 0:s.formattedTitle;s=s==null?void 0:(s=s.groupMetadata)==null?void 0:s.getSubgroupSuggestions().reduce(function(a,b){d("WAWebUserPrefsMeUser").isMeAccount(b.owner)&&a.push(b.groupId);return a},[]);w=j.jsx(c("WAWebCommunityExistingGroupsDrawer.react"),{onBack:function(){return r.pop()},fromInfo:g,onSubmit:u,onCreateNewGroup:function(){return r.push(k.NEW_GROUP)},currentSubgroupCount:a,communityName:p,isParentGroupClosed:m,isCommunityAdmin:f.participants.iAmAdmin(),groupsSuggestedByMeToCommunity:s});break;case k.COMMUNITY_SETTINGS:g=d("WAWebChatCollection").ChatCollection.assertGet(f.id);w=j.jsx(c("WAWebCommunitySettingsDrawer.react"),{chat:g,onBack:function(){return r.pop()}});break}return j.jsx(q,{flow:r,ref:e,children:w})}a.displayName=a.name+" [from "+f.id+"]";f=e(a);g["default"]=f}),98);
__d("WAWebStatusV3ListPanel.react",["WAWebStatusV3List.react","WAWebStatusV3ListHeader.react","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){a=a.onOpenStatus;return i.jsxs("div",{className:"x10l6tqk x13vifvy x17qophe x78zum5 xdt5ytf x5yr21d x160y1p1 x1yewgqm xshg5ix x1wejiyj xtbbw2h x15i9xf3",children:[i.jsx(d("WAWebStatusV3ListHeader.react").StatusV3ListHeader,{onOpenStatus:a}),i.jsx(d("WAWebStatusV3List.react").StatusV3List,{onOpenStatus:a})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebStatusV3OutStatusPanel.react",["fbt","WAFilteredCatch","WALogger","WAWebBackendErrors","WAWebClock","WAWebDetailImage.react","WAWebMsgGetters","WAWebMsgInfoCollection","WAWebStatusV3PlaceholderIcon","WAWebStatusV3SeenCount.react","WAWebStatusV3Thumbnail.react","WAWebWamEnumStatusRowSection","react","useWAWebForceUpdate","useWAWebListener","useWAWebUnmountSignal"],(function(a,b,c,d,e,f,g,h){var i,j;function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["error while loading all out status: ",""]);k=function(){return a};return a}b=j||d("react");var l=i||(i=c("react")),m=b.useEffect,n=b.useState;function a(a){var b=a.onOpenStatus;a=a.status;a=l.jsx(o,{statusV3:a,onOpenStatus:b});return l.jsx("div",{className:"x10l6tqk x13vifvy x78zum5 xdt5ytf x6s0dn4 xl56j7k x5yr21d x1n5apq5 xxojkh6 x5byjui x8yky9h x1s21l0m xfmyhe5 xug1qy9 xtdeawk",children:a})}a.displayName=a.name+" [from "+f.id+"]";function o(a){var b=a.statusV3,e=c("useWAWebForceUpdate")();m(function(){b==null?void 0:b.loadMore(b.totalCount)["catch"](function(a){d("WALogger").WARN(k(),String(a))})},[]);d("useWAWebListener").useListener(b,"change:msgsChanged",e);var f=a.statusV3;if(f&&f.msgs.length>0){e=f.msgs.map(function(b){return l.jsx(p,{msg:b,status:f,onOpenStatus:a.onOpenStatus},b.id.toString())});return l.jsxs("div",{className:"x78zum5 xdt5ytf xmz0i5r","data-testid":void 0,children:[l.jsx("div",{className:"x1coevs8 x14ler8 xngnso2 xk50ysn x2b8uid",children:h._("__JHASH__XPMWtCFjn51__JHASH__")}),l.jsx("div",{className:"x9f619 x78zum5 x1q0g3np x1a02dak xl56j7k x1ap80js xexx8yu x13omvei x1rxj1xn x1m6arcz x1odjw0f",children:e})]})}return l.jsxs("div",{className:"x78zum5 xdt5ytf xmz0i5r",children:[l.jsx("div",{className:"x78zum5 x1q0g3np xl56j7k x14ler8 x5q6gb4 x47corl",children:l.jsx(d("WAWebStatusV3PlaceholderIcon").StatusV3PlaceholderIcon,{})}),l.jsx("div",{"data-testid":void 0,className:"xzl6hoh x88nbbm x2b8uid",children:h._("__JHASH__3iLtSO4jR3x__JHASH__")})]})}o.displayName=o.name+" [from "+f.id+"]";function p(a){var b=a.msg,e=a.status,f=c("useWAWebUnmountSignal")(),g=n(null),i=g[0],j=g[1];g=n(null);var k=g[0],o=g[1];m(function(){d("WAWebMsgInfoCollection").MsgInfoCollection.find(b.id).then(function(a){if(f.aborted)return;o(a);j(a.read.length)})["catch"](d("WAFilteredCatch").filteredCatch(d("WAWebBackendErrors").EphemeralDrop,function(){}))},[]);d("useWAWebListener").useListener(k==null?void 0:k.read,["add","remove"],function(){j(k==null?void 0:k.read.length)});g=l.jsx(d("WAWebDetailImage.react").DetailImage,{id:d("WAWebMsgGetters").getSender(b),theme:"status_v3",size:80});return l.jsxs("div",{className:"x78zum5 xdt5ytf x6s0dn4 xmo9yow x1hq5gj4 x17adc0v","data-testid":void 0,children:[l.jsx(c("WAWebStatusV3Thumbnail.react"),{tabIndex:0,ariaLabel:h._("__JHASH__XPMWtCFjn51__JHASH__"),id:e.id,msg:b,onClick:function(){return a.onOpenStatus(e,b,0,d("WAWebWamEnumStatusRowSection").STATUS_ROW_SECTION.MY_STATUS)},contact:e.contact,role:"button",theme:"status-panel",thumbnailPlaceholder:g}),l.jsx("div",{className:"xcxhlts xu06os2",children:l.jsx(c("WAWebStatusV3SeenCount.react"),{seenCount:i})}),l.jsx("div",{className:"x1nxh6w3 x88nbbm",children:d("WAWebClock").Clock.relativeDateAndTimeStr(b.t)})]})}p.displayName=p.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebStatusV3Main.react",["fbt","WAWebCmd","WAWebFocusTracer","WAWebL10N","WAWebStatusV3Collection","WAWebStatusV3ListPanel.react","WAWebStatusV3OutStatusPanel.react","WAWebSvgButton.react","WAWebTimeSpentLoggingNavigation","WAWebUserPrefsGeneral","WAWebXViewerIcon","gkx","react","useWAWebListener"],(function(a,b,c,d,e,f,g,h){var i,j;b=j||d("react");var k=i||(i=c("react"));e=b.forwardRef;var l=b.useEffect,m=b.useRef,n=b.useState,o={modalBackground:{position:"x10l6tqk",zIndex:"x1oyvh86",boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",width:"xh8yej3",height:"x5yr21d",backgroundColor:"x66m237",$$css:!0},mainWrapper:{position:"x1n2onr6",zIndex:"x1vjfegm",display:"x78zum5",flexDirection:"xdt5ytf",width:"xh8yej3",height:"x5yr21d",color:"x1fpc5dy","@media screen and (min-width: 1441px)_top":"xf32nbf","@media screen and (min-width: 1441px)_width":"xvlrot","@media screen and (min-width: 1441px)_height":"x1s14duo","@media screen and (min-width: 1441px)_marginEnd":"xuhd2h0","@media screen and (min-width: 1441px)_marginLeft":null,"@media screen and (min-width: 1441px)_marginRight":null,"@media screen and (min-width: 1441px)_marginStart":"x1klu90g",$$css:!0},v3x:{position:"x10l6tqk",top:"xoyzfg9",end:"x4p3wbt",left:null,right:null,zIndex:"xhtitgo",color:"x1fpc5dy",$$css:!0},v3xMac:{end:"x12nc10h",left:null,right:null,$$css:!0}};function a(a,b){var e=a.onOpenStatus,f=a.sessionId,g=a.closeStatusViewer,i=m(null),j=n(function(){return d("WAWebStatusV3Collection").StatusV3Collection.getMyStatus()}),p=j[0],q=j[1];l(function(){d("WAWebUserPrefsGeneral").setLastStatusUsage(),f!=null&&d("WAWebStatusV3Collection").StatusV3Collection.logMetrics({type:"session",sessionId:f}),d("WAWebCmd").Cmd.onStatusViewerOpen(),i.current&&c("WAWebFocusTracer").focus(i.current)},[]);j=function(){q(d("WAWebStatusV3Collection").StatusV3Collection.getMyStatus())};d("useWAWebListener").useListener(d("WAWebStatusV3Collection").StatusV3Collection,["add","remove"],j);d("useWAWebListener").useListener(d("WAWebCmd").Cmd,["dismiss_status_v3_viewer"],function(){g(!0)});d("WAWebTimeSpentLoggingNavigation").useTsNavigation({surface:"status-v3"});return k.jsx("div",{ref:b,className:"x10l6tqk x1oyvh86 x9f619 x78zum5 xdt5ytf xh8yej3 x5yr21d x66m237","data-animate-status-v3-modal-background":!0,"data-testid":void 0,children:k.jsxs("div",{ref:i,tabIndex:-1,className:"x1n2onr6 x1vjfegm x78zum5 xdt5ytf xh8yej3 x5yr21d x1fpc5dy xf32nbf xvlrot x1s14duo xuhd2h0 x1klu90g",children:[k.jsx(c("WAWebStatusV3ListPanel.react"),{onOpenStatus:e}),k.jsx(c("WAWebStatusV3OutStatusPanel.react"),{status:p,onOpenStatus:e}),k.jsx(c("WAWebSvgButton.react"),{"aria-label":h._("__JHASH__K6IIFmBgzOZ__JHASH__"),xstyle:[o.v3x,c("gkx")("26265")&&c("WAWebL10N").isRTL()&&o.v3xMac],Icon:d("WAWebXViewerIcon").XViewerIcon,onClick:function(){return a.closeStatusViewer(!0)}})]})})}a.displayName=a.name+" [from "+f.id+"]";b=e(a);g["default"]=b}),98);
__d("WAWebStatusV3Flow.react",["invariant","$InternalEnum","WAWebCmd","WAWebStatusV3Main.react","WAWebStatusV3Viewer.react","react","useWAWebFlow","useWAWebLazyRef","useWAWebListener"],(function(a,b,c,d,e,f,g,h){var i,j,k=j||c("react"),l=(i||(i=d("react"))).useState,m=b("$InternalEnum").Mirrored(["StatusV3Main","StatusV3Viewer"]);function a(){var a=d("useWAWebFlow").useFlow(m.StatusV3Main),b=a[0],e=a[1];a=l(null);var f=a[0],g=a[1];a=l(null);var i=a[0],j=a[1];a=l(void 0);var n=a[0],o=a[1];a=l(void 0);var p=a[0],q=a[1];a=c("useWAWebLazyRef")(function(){return Math.round(Math.random()*1e9)});var r=function(a){a?e.end():e.pop()},s=function(a,b,c,d){g(a),j(b),o(c),q(d),e.push(m.StatusV3Viewer,"none")};d("useWAWebListener").useListener(d("WAWebCmd").Cmd,"close_status_viewer",function(){r(!0)});if(e.step==null)return null;var t=null;switch(e.step){case m.StatusV3Main:t=k.jsx(c("WAWebStatusV3Main.react"),{onOpenStatus:s,closeStatusViewer:r,sessionId:a.current});break;case m.StatusV3Viewer:f!=null||h(0,62962);t=k.jsx(c("WAWebStatusV3Viewer.react"),{initialStatusV3:f,initialStatusMsg:i,closeStatusViewer:r,sessionId:a.current,rowIdx:n,rowSection:p,continuousPlay:!0});break}return k.jsx(b,{flow:e,children:t})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebCaptureMediaDrawer.react",["WAWebCaptureDrawer.react","WAWebMedia","react"],(function(a,b,c,d,e,f,g){var h,i=h||c("react");function a(a){var b=function(b){var c,e=b.getImg,f=b.caption,g=b.isViewOnce;b=b.mentionedJidList;var h=a.chat,i=h.composeQuotedMsg;h.composeQuotedMsg=null;c=((c=h.getComposeContents())==null?void 0:c.ctwaContext)||void 0;d("WAWebMedia").prepRawMedia(e,{}).sendToChat(h,{caption:f,mentionedJidList:b,quotedMsg:i,ctwaContext:c,isViewOnce:g});a.onCaptureSent();a.onClose()};return i.jsx(c("WAWebCaptureDrawer.react"),{onBack:function(){a.onClose(),a.onCancel()},chat:a.chat,caption:!0,theme:"capture-contain",onSend:b,stream:a.stream,disposeStream:a.disposeStream})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebSendMsgMultiModal.react",["fbt","Promise","WATimeUtils","WAWebBlockContactAction","WAWebCmd","WAWebComposeBoxActions","WAWebModalManager","WAWebSelectModal.react","WAWebSendTextMsgChatAction","WAWebServerPropConstants","asyncToGeneratorRuntime","react"],(function(a,b,c,d,e,f,g,h){var i,j,k=j||c("react");function a(a){var c=function(c){var e=a.msgText;if(c.length===1){var f,g=c[0];g.isUser&&g.contact.isContactBlocked?f=d("WAWebBlockContactAction").unblockContact(g.contact):f=(i||(i=b("Promise"))).resolve(!0);f.then(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){if(e){g.urlText=a.urlText;if(g.active){d("WAWebComposeBoxActions").ComposeBoxActions.paste(g,e);return}g.setComposeContents({text:e,timestamp:d("WATimeUtils").unixTime()})}b=(yield d("WAWebCmd").Cmd.openChatFromUnread(g));b&&d("WAWebComposeBoxActions").ComposeBoxActions.focus(g)});return function(a){return c.apply(this,arguments)}}())}else(i||(i=b("Promise"))).all(c.map(function(f){var c;f.isUser&&f.contact.isContactBlocked?c=d("WAWebBlockContactAction").unblockContact(f.contact):c=(i||(i=b("Promise"))).resolve(!0);c.then(function(b){f.urlText=a.urlText,d("WAWebSendTextMsgChatAction").sendTextMsgToChat(f,e)})})),d("WAWebCmd").Cmd.openChatFromUnread(c[0]);d("WAWebModalManager").ModalManager.close()};return k.jsx(d("WAWebSelectModal.react").SelectModal,{onConfirm:c,maxItems:d("WAWebServerPropConstants").MULTICAST_LIMIT_GLOBAL,title:h._("__JHASH__Pz11_y6jv6u__JHASH__"),listType:d("WAWebSelectModal.react").ListType.ChatSelectModal})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebUnstarAllPopup.react",["fbt","WAWebChatCollection","WAWebConfirmPopup.react","WAWebEmojiText.react","WAWebModalManager","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react"),k=function(){d("WAWebModalManager").ModalManager.close()};function a(a){var b=a.chat,c=a.msgs;a=function(){b&&b.pendingAction++,d("WAWebChatCollection").ChatCollection.unstarAllMessages(c,b)["finally"](function(){b&&b.pendingAction--}),d("WAWebModalManager").ModalManager.close()};return j.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{onOK:a,okText:h._("__JHASH__9lzxpfjhJ2m__JHASH__"),onCancel:k,children:j.jsx("div",{children:j.jsx(d("WAWebEmojiText.react").EmojiText,{text:h._("__JHASH__QDsbV0gAqF3__JHASH__")})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebStarredHeaderDropdown.react",["fbt","WAWebDropdown.react","WAWebDropdownItem.react","WAWebModalManager","WAWebUnstarAllPopup.react","react"],(function(a,b,c,d,e,f,g,h){var i,j,k=j||c("react");b=(i||(i=d("react"))).forwardRef;function a(a,b){var e=a.msgs,f=a.chat;a=function(){d("WAWebModalManager").ModalManager.open(k.jsx(c("WAWebUnstarAllPopup.react"),{msgs:e,chat:f}))};return k.jsx(d("WAWebDropdown.react").Dropdown,{ref:b,type:d("WAWebDropdown.react").MenuType.DropdownMenu,flipOnRTL:!0,dirX:d("WAWebDropdown.react").DirX.LEFT,children:k.jsx(d("WAWebDropdownItem.react").DropdownItem,{testid:void 0,action:a,disabled:e.length===0,children:h._("__JHASH__SVp7zZnwcuu__JHASH__")})},"StarredDrawerHeader")}a.displayName=a.name+" [from "+f.id+"]";e=b(a);g["default"]=e}),98);
__d("WAWebStarredDrawerV2.react",["fbt","WAWebDisplayType","WAWebEmptyState.react","WAWebHistorySyncComponents.react","WAWebMenuBar.react","WAWebMenuIcon","WAWebMsgDrawer.react","WAWebStarredHeaderDropdown.react","react"],(function(a,b,c,d,e,f,g,h){var i,j,k=j||c("react");b=(i||(i=d("react"))).forwardRef;function a(a,b){var e=a.starredMsgs,f=a.onClose,g=a.chat;a=a.headerType;var i=h._("__JHASH__uSSuzpxR3c8__JHASH__"),j=k.jsx(d("WAWebEmptyState.react").StarredMsgs,{}),l=g!=null?k.jsx(d("WAWebHistorySyncComponents.react").HistorySyncChatStarredMsgsPlaceholderText,{}):k.jsx(d("WAWebHistorySyncComponents.react").HistorySyncStarredMsgsPlaceholderText,{}),m=k.jsx(d("WAWebMenuBar.react").MenuBarItem,{testid:void 0,icon:k.jsx(d("WAWebMenuIcon").MenuIcon,{}),title:h._("__JHASH__vnnO4cNTiS8__JHASH__"),children:k.jsx(c("WAWebStarredHeaderDropdown.react"),{chat:g,msgs:e.toArray()})});return k.jsx(c("WAWebMsgDrawer.react"),{ref:b,msgCollection:e,onClose:f,chat:g,title:i,emptyListText:j,footerText:l,headerMenu:m,headerType:a,displayType:d("WAWebDisplayType").DISPLAY_TYPE.STARRED_MSGS})}a.displayName=a.name+" [from "+f.id+"]";e=b(a);g["default"]=e}),98);
__d("WAWebForwardMediaWithCaptionPopupNux.react",["fbt","WAWebConfirmPopup.react","WAWebFlex.react","WAWebModal.react","WAWebText.react","WAWebUISpacing","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react"),k={featureDescriptionParagraph:{textAlign:"x2b8uid",$$css:!0}};function a(a){var b=a.onOk;a=function(){b()};var c=h._("__JHASH__aaBehuw1wrd__JHASH__");return j.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{okText:h._("__JHASH__FXvfKHgkfR4__JHASH__"),onOK:a,type:d("WAWebModal.react").ModalTheme.ForwardMediaWithCaption,children:j.jsx(d("WAWebFlex.react").FlexRow,{align:"center",justify:"center",children:j.jsx(d("WAWebText.react").TextParagraph,{xstyle:[k.featureDescriptionParagraph,d("WAWebUISpacing").uiMargin.top16,d("WAWebUISpacing").uiMargin.bottom32],children:c})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebForwardMediaWithCaptionPreview",["fbt","WAWebChatMsgSymbol.react","WAWebChatPreferenceCollection","WAWebClickable.react","WAWebClock","WAWebEmojiSuggestions.react","WAWebEmojiText.react","WAWebFlex.react","WAWebFlexItem.react","WAWebFormatConfiguration","WAWebFormatMsgText","WAWebForwardMediaWithCaptionsGatingUtils","WAWebFrontendMsgGetters","WAWebImgPlaceholderIcon","WAWebL10N","WAWebMediaThumbnail.react","WAWebMediaUrlProvider","WAWebMsgType","WAWebRichTextInput.react","WAWebRichTextInputGatingUtils","WAWebSuggestionsPanelContainer.react","WAWebUISpacing","WAWebUnstyledButton.react","WAWebVideoPlaceholderIcon","WAWebWamEnumWebcRmrReasonCode","WAWebXIcon","react","stylex","useWAWebModelValues"],(function(a,b,c,d,e,f,g,h){var i,j,k,l=k||c("react"),m=(i||(i=d("react"))).useState,n={wrapper:{position:"x1n2onr6",height:"xcbkimw",width:"x3p9ev8",backgroundColor:"xtl5do8",$$css:!0},textContainer:{position:"x1n2onr6",height:"x5yr21d",width:"xh8yej3",$$css:!0},container:{position:"x1n2onr6",height:"x5yr21d",width:"x86nts4",backgroundColor:"x9qxke2",$$css:!0},captionPreviewContainer:{display:"x78zum5",overflowX:"x6ikm8r",overflowY:"x10wlt62",borderTopStartRadius:"x1lcm9me",borderTopEndRadius:"x1yr5g0i",borderBottomEndRadius:"xrt01vj",borderBottomStartRadius:"x10y3i5r",$$css:!0},composerContainer:{cursor:"x1ed109x",opacity:"xg01cxk",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",$$css:!0},composerWrapper:{display:"x78zum5",$$css:!0},composerInput:{height:"x1plxi8p",alignItems:"x6s0dn4",$$css:!0},composerFont:{fontSize:"x4xgy31",$$css:!0},inputSuggestionsContainer:{position:"x1n2onr6",width:"xh8yej3",$$css:!0},mediaThumbContainer:{minWidth:"xculje8",height:"x5yr21d",$$css:!0},placeholderContainer:{display:"x78zum5",alignItems:"x6s0dn4",justifyContent:"xl56j7k",width:"xh8yej3",height:"x5yr21d",$$css:!0},placeholderIcon:{width:"xh8yej3",height:"x5yr21d",$$css:!0},thumbContainer:{width:"x46vnbo",height:"x11daxxc",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",borderTop:"xvlwlgo",borderEnd:"x1olsrc1",borderBottom:"x11h1kwt",borderStart:"x1w4fa4c",$$css:!0},thumb:{overflowX:"x6ikm8r",overflowY:"x10wlt62",backgroundRepeat:"xiy17q3",backgroundPosition:"x1xsqp64",backgroundSize:"x18d0r48",$$css:!0},colorBar:{flexShrink:"x2lah0s",width:"x51ohtg",backgroundColor:"x1rr48d",$$css:!0},quotedCaption:{flexGrow:"x1iyjqo2",width:"xh8yej3",overflowX:"x6ikm8r",overflowY:"x10wlt62",fontSize:"x1f6kntn",fontWeight:"xo1l8bm",position:"x1n2onr6",color:"xyvbeiw",$$css:!0},xButton:{position:"x1n2onr6",top:"xfr5jun",end:"x1923su1",left:null,right:null,$$css:!0},xDimensions:{height:"x1qx5ct2",width:"xw4jnvo",$$css:!0},xIconColor:{color:"x1szdls9",$$css:!0},captionTextContainer:{width:"xh8yej3",$$css:!0},captionText:{lineHeight:"x1evy7pa",display:"x104kibb",overflowX:"x6ikm8r",overflowY:"x10wlt62",textOverflow:"xlyipyv","-webkit-line-clamp":"x1h7i4cw","-webkit-box-orient":"x1ua5tub",$$css:!0},captionTextSpacing:{whiteSpace:"xti2ec1",$$css:!0},mediaTypeText:{fontWeight:"xk50ysn",$$css:!0},captionPreviewContainerAnimate:{animationName:"xvma63k",animationDuration:"xw8ag78",animationTimingFunction:"x1wg5k15",animationFillMode:"x10e4vud",backfaceVisibility:"xlp1x4z",$$css:!0},mediaThumbContainerAnimate:{animationName:"x10o8r73",animationDuration:"x4afe7t",animationDelay:"x1k0bccz",animationTimingFunction:"x1wg5k15",animationFillMode:"x10e4vud",backfaceVisibility:"xlp1x4z",willChange:"xg6rdjq",$$css:!0},composerContainerAnimate:{animationName:"x127lhb5",animationDuration:"x4afe7t",animationDelay:"x1k0bccz",animationTimingFunction:"x1wg5k15",animationFillMode:"x10e4vud",backfaceVisibility:"xlp1x4z",$$css:!0},mediaThumbContainerAnimateRTL:{animationName:"x1ncc8v3",animationDuration:"x4afe7t",animationDelay:"x1k0bccz",animationTimingFunction:"x1wg5k15",animationFillMode:"x10e4vud",backfaceVisibility:"xlp1x4z",willChange:"xg6rdjq",$$css:!0}};function a(a){var b=a.displayCaptionText,e=a.msg,f=a.onAppendMessage,g=a.onRemoveCaptionSelect;a=d("useWAWebModelValues").useModelValues(c("WAWebChatPreferenceCollection").getDefault(),["spellcheck","transformTextEmoji","enterIsSend"]);var i=function(a){a.stopPropagation(),a.preventDefault(),g()},k=function(){var b=null,a=null;switch(e.type){case d("WAWebMsgType").MSG_TYPE.IMAGE:b=h._("__JHASH__q6dTFCv-wOB__JHASH__");break;case d("WAWebMsgType").MSG_TYPE.VIDEO:e.isGif?b=h._("__JHASH__BdIbb2QU_eH__JHASH__"):(b=h._("__JHASH__n0ymn3rOVmB__JHASH__"),a=d("WAWebClock").Clock.durationStr(Number(e.duration))+" ")}b=l.jsxs("span",{className:"xk50ysn",children:[" ",b," "]});return[a,b]},o=function(a){f(a.text)},p=l.jsx(c("WAWebChatMsgSymbol.react"),{msg:e.unsafe()},"msg-symbol");k=k();var q=k[0];k=k[1];var r=c("WAWebFormatMsgText")(e.unsafe(),{stripFormatting:!1}),s=d("WAWebFormatConfiguration").QuotedMention({mentions:e.mentionMap(),groupMentions:e.groupMentionMap()});p=l.jsxs(d("WAWebFlex.react").FlexColumn,{className:(j||(j=c("stylex")))([n.quotedCaption,d("WAWebUISpacing").uiPadding.all8]),align:"start",justify:"center",children:[l.jsxs(c("WAWebFlexItem.react"),{children:[p,q,k]}),l.jsx(c("WAWebFlexItem.react"),{xstyle:[d("WAWebUISpacing").uiMargin.vert5,n.captionTextContainer],children:l.jsx(d("WAWebEmojiText.react").EmojiText,{xstyle:n.captionTextSpacing,className:"x1evy7pa x104kibb x6ikm8r x10wlt62 xlyipyv x1h7i4cw x1ua5tub",direction:d("WAWebFrontendMsgGetters").getDir(e),text:r,formatters:s,ellipsify:!0,testid:void 0},"status")})]});q=h._("__JHASH__1qEqAhdy8GK__JHASH__");k=b?l.jsxs(c("WAWebFlexItem.react"),{grow:1,xstyle:[n.container,n.captionPreviewContainer,!b&&n.captionPreviewContainerAnimate],children:[l.jsx("span",{className:"x2lah0s x51ohtg x1rr48d"}),p,l.jsx(c("WAWebUnstyledButton.react"),{xstyle:[n.xButton,n.xDimensions],onClick:i,title:q,"aria-label":q,testid:void 0,children:l.jsx(d("WAWebXIcon").XIcon,{xstyle:n.xDimensions,iconXstyle:n.xIconColor,height:20,width:20})})]}):null;r=m();var t=r[0];s=r[1];p=t==null?void 0:t.editor;i=p&&l.jsx("div",{className:"x1n2onr6 xh8yej3",children:l.jsx(d("WAWebEmojiSuggestions.react").EmojiSuggestions,{kind:d("WAWebSuggestionsPanelContainer.react").SuggestionsPanelKind.ComposeBox,editor:p})});q=h._("__JHASH__RXsFvYB02SV__JHASH__");r=function(){t==null?void 0:t.focus()};p=d("WAWebForwardMediaWithCaptionsGatingUtils").isAppendMessageWhenForwardingMediaWithCaptionEnabled()&&!b?l.jsx(d("WAWebClickable.react").Clickable,{onClick:r,children:l.jsx(c("WAWebFlexItem.react"),{grow:1,xstyle:[n.container,n.composerContainer,n.composerContainerAnimate],children:l.jsx("div",{className:(j||(j=c("stylex")))(d("WAWebUISpacing").uiPadding.all12,n.composerWrapper),children:l.jsx(d("WAWebRichTextInput.react").RichTextInput,{ref:s,xstyle:n.composerInput,textXstyle:n.composerFont,multiline:!0,textFormatEnabled:!0,readOnly:!1,placeholder:q,title:q,maxVisibleLines:3,onChange:o,testid:void 0,bulletPointsEnabled:d("WAWebRichTextInputGatingUtils").expandedTextFormattingPreviewEnabled(),numberedListEnabled:d("WAWebRichTextInputGatingUtils").expandedTextFormattingPreviewEnabled(),inlineCodeEnabled:d("WAWebRichTextInputGatingUtils").expandedTextFormattingPreviewEnabled(),blockQuoteEnabled:d("WAWebRichTextInputGatingUtils").expandedTextFormattingPreviewEnabled(),spellCheck:d("WAWebRichTextInputGatingUtils").improvedMessageComposerEnabled()?a.spellcheck:!0,transformTextEmoji:d("WAWebRichTextInputGatingUtils").improvedMessageComposerEnabled()?a.transformTextEmoji:!0,enterIsNewLine:d("WAWebRichTextInputGatingUtils").improvedMessageComposerEnabled()?!a.enterIsSend:!1})})})}):null;r=e.type===d("WAWebMsgType").MSG_TYPE.IMAGE?d("WAWebImgPlaceholderIcon").ImgPlaceholderIcon:d("WAWebVideoPlaceholderIcon").VideoPlaceholderIcon;var u=l.jsx("div",{className:"x78zum5 x6s0dn4 xl56j7k xh8yej3 x5yr21d",children:l.jsx(r,{iconXstyle:n.placeholderIcon})},"default");s=e.type===d("WAWebMsgType").MSG_TYPE.IMAGE?l.jsx(c("WAWebMediaUrlProvider"),{mediaData:e.mediaData,placeholderRenderer:function(){return u},downloadMedia:function(){return e.downloadMedia({downloadEvenIfExpensive:!1,rmrReason:d("WAWebWamEnumWebcRmrReasonCode").WEBC_RMR_REASON_CODE.OTHER,isUserInitiated:!1})},renderProgressively:!1,children:function(a){return l.jsx("div",{className:(j||(j=c("stylex")))([n.thumbContainer,n.thumb,d("WAWebUISpacing").uiMargin.end8]),style:{backgroundImage:"url("+a+")"}})}}):l.jsx(c("WAWebMediaThumbnail.react"),{msg:e,thumbnailPlaceholder:u,childClassName:(j||(j=c("stylex")))(n.thumbContainer,n.thumb,d("WAWebUISpacing").uiMargin.end8)});q=null;!d("WAWebForwardMediaWithCaptionsGatingUtils").isAppendMessageWhenForwardingMediaWithCaptionEnabled()&&!b&&(q=c("WAWebL10N").isRTL()?n.mediaThumbContainerAnimateRTL:n.mediaThumbContainerAnimate);o=l.jsx(c("WAWebFlexItem.react"),{grow:0,xstyle:[n.mediaThumbContainer,q],children:s});return l.jsxs(l.Fragment,{children:[l.jsx(d("WAWebFlex.react").FlexRow,{children:i}),l.jsx("div",{className:j([n.wrapper,d("WAWebUISpacing").uiPadding.all8]),children:l.jsxs(d("WAWebFlex.react").FlexRow,{xstyle:n.textContainer,align:"center",justify:"start",children:[o,k,p]})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebChatForwardMessage",["Promise","WATimeUtils","WAWebAck","WAWebChatEphemerality","WAWebConstantsDeprecated","WAWebContactBlockedErrorAction","WAWebContactGetters","WAWebCryptoRandomMediaKey","WAWebFrontendMsgGetters","WAWebGetNewsletterContextForForwardedMsg","WAWebMedia","WAWebMediaGetUploadOriginForChat","WAWebMediaOpaqueData","WAWebMediaUploadMmsThumbnail","WAWebMmsMediaTypes","WAWebMsgGetters","WAWebMsgKey","WAWebMsgModelFromData","WAWebMsgType","WAWebNewsletterSendMsgAction","WAWebSendMsgChatAction","WAWebUserPrefsMeUser","WAWebValidateMediaKeyTimestamp","WAWebWid","WAWebWidFactory","asyncToGeneratorRuntime","lodash"],(function(a,b,c,d,e,f,g){var h;function i(a){return Boolean(d("WAWebFrontendMsgGetters").getAsMms(a)&&!a.ctwaContext)}function j(a,b,c,d,e){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,j){g===void 0&&(g=!1);j===void 0&&(j=!1);if(i(e))return d("WAWebMedia").forwardMediaMsg(e,a,g,j);j=p(e,a);var k=d("WAWebUserPrefsMeUser").getMaybeMeUser(),m=void 0;f.isGroup()&&(m=d("WAWebWidFactory").toUserWid(k));m=new(c("WAWebMsgKey"))({from:k,to:f,id:yield c("WAWebMsgKey").newId(),participant:m,selfDir:"out"});j=Object.assign(j,{id:m,from:k,t:d("WATimeUtils").unixTime(),to:f,ack:d("WAWebAck").ACK.CLOCK,participant:void 0,local:!0,self:"out",isNewMsg:!0,star:!1,isForwarded:d("WAWebMsgGetters").getShouldDisplayAsForwarded(e),forwardedFromWeb:!0,forwardingScore:e.getForwardingScoreWhenForwarded(),multicast:g});if(c("WAWebWid").isNewsletter(a.id))return d("WAWebNewsletterSendMsgAction").forwardNewsletterMessage(a,j);m=(yield l(j));d("WAWebSendMsgChatAction").addAndSendMsgToChat(a,m);return(h||(h=b("Promise"))).resolve()});return k.apply(this,arguments)}function l(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("WAWebFrontendMsgGetters").getAsUrl(d("WAWebMsgModelFromData").msgModelFromMsgData(a));if(b==null)return a;var e=b.thumbnailHQ,f=b.mediaKeyTimestamp;if(e==null)return a;if(f!=null&&c("WAWebValidateMediaKeyTimestamp")(f))return a;try{f=(yield c("WAWebMediaUploadMmsThumbnail")({thumbnail:yield c("WAWebMediaOpaqueData").createFromBase64Jpeg(e),mediaType:d("WAWebMmsMediaTypes").MEDIA_TYPES.THUMBNAIL_LINK,mediaKeyInfo:c("WAWebCryptoRandomMediaKey")(),uploadOrigin:c("WAWebMediaGetUploadOriginForChat")(d("WAWebFrontendMsgGetters").getChat(b.unsafe())),forwardedFromWeb:!0,timeout:c("WAWebConstantsDeprecated").MMS_THUMBNAIL_UPLOAD_TIMEOUT,isViewOnce:!1}));e=f.filehash;b=f.mediaEntry;return(b==null?void 0:b.getMediaKey())==null?n(a):babelHelpers["extends"]({},a,{thumbnailDirectPath:b==null?void 0:b.directPath,thumbnailSha256:e,thumbnailEncSha256:(f=b==null?void 0:b.getEncfilehash())!=null?f:void 0,mediaKey:b==null?void 0:b.getMediaKey(),mediaKeyTimestamp:b==null?void 0:b.getMediaKeyTimestamp()})}catch(b){return n(a)}});return m.apply(this,arguments)}function n(a){return babelHelpers["extends"]({},a,{thumbnailHQ:void 0,thumbnailDirectPath:void 0,thumbnailSha256:void 0,thumbnailEncSha256:void 0,mediaKey:void 0,mediaKeyTimestamp:void 0,thumbnailHeight:void 0,thumbnailWidth:void 0})}function a(a,b,c,d){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){e===void 0&&(e=!1);f===void 0&&(f=!1);var g=a.id,h=a.contact;if(d("WAWebContactGetters").getIsUser(h)&&h.isContactBlocked)throw new(c("WAWebContactBlockedErrorAction"))("Forwarded to contact is blocked",h);h=[];for(b of b){var k=f||d("WAWebMsgGetters").getHasOriginatedFromNewsletter(b);try{yield j(a,b,g,e,k)}catch(a){i(b)&&h.push(b)}}return h});return o.apply(this,arguments)}function p(a,b){var e=["buttons","caption","broadcast","ephemeralDuration","ephemeralSettingTimestamp","ephemeralStartTimestamp","ephemeralOutOfSync","disappearingModeInitiatedByMe","disappearingModeTrigger","dynamicReplyButtons","replyButtons","isMdHistoryMsg","bizPrivacyStatus","kicState","kicKey","kicTimestampMs","kicNotified","rcat","latestEditMsgKey","latestEditSenderTimestampMs","invokedBotWid","botMessageSecret","botEditType","botFeedbackKind","botFeedbackText","botTargetSenderJid","bizBotType","botPersonaId","botRespOrInvocationRevokeBotWid","botResponseTargetId","botPluginType","botPluginReferenceIndex","botPluginSearchProvider","botPluginSearchUrl","botEditTargetId","lastBotEditBodyLength","botPluginMaybeParent","rowId","serverId","viewCount","messageSecret"],f=a.isDynamicReplyButtonsMsg===!0&&a.type===d("WAWebMsgType").MSG_TYPE.CHAT;f||(e=["footer"].concat(e));((f=a.quotedMsg)==null?void 0:f.type)!==d("WAWebMsgType").MSG_TYPE.PRODUCT&&(e=["quotedMsg","quotedParticipant","quotedRemoteJid","quotedStanzaID"].concat(e));f=c("lodash").omit(a.toJSON(),e);a.ctwaContext&&(f.body=a.ctwaContext.sourceUrl,f.type=d("WAWebMsgType").MSG_TYPE.CHAT,f.mediaObject=void 0);f.forwardedNewsletterMessageInfo=d("WAWebGetNewsletterContextForForwardedMsg").getNewsletterContextForForwardedMsg(a);d("WAWebChatEphemerality").isEphemeralSettingOn(b)&&(f.ephemeralDuration=d("WAWebChatEphemerality").getEphemeralSetting(b));e=d("WAWebChatEphemerality").getEphemeralSettingTimestamp(b);e!=null&&(f.ephemeralSettingTimestamp=e);e=d("WAWebChatEphemerality").getDisappearingModeInitiator(b);e!=null&&(f.disappearingModeInitiator=e);e=d("WAWebChatEphemerality").getDisappearingModeTrigger(b);e!=null&&(f.disappearingModeTrigger=e);e=d("WAWebChatEphemerality").getDisappearingModeInitiatedByMe(b);e!=null&&(f.disappearingModeInitiatedByMe=e);!(((e=a.id.remote)==null?void 0:e.isBot())||((e=a.mentionedJidList)==null?void 0:e.find(function(a){return a.isBot()}))!=null)&&b.isCAGAdmin()&&Object.assign(f,{messageSecret:self.crypto.getRandomValues(new Uint8Array(32))});return f}g.forwardMessages=a;g.getForwardedMessageFields=p}),98);
__d("WAWebForwardMessagesToChat",["Promise","WAPromiseProps","WAWebBlockContactAction","WAWebChatForwardMessage","WAWebFormatForwardErrorChatAction","WAWebForwardErrorChatAction","WAWebLogNewsletterMessageForward","WAWebMsgActionCapability","WAWebMsgCollection","WAWebMsgGetters","WAWebNewsletterGatingUtils","WAWebWamChatPSALogger","asyncToGeneratorRuntime","lodash"],(function(a,b,c,d,e,f,g){var h;function a(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){f===void 0&&(f=!1);var g=(h||(h=b("Promise"))).all(a.map(function(a){d("WAWebMsgGetters").getIsPSA(a)&&d("WAWebWamChatPSALogger").logChatPSAForward(a);d("WAWebNewsletterGatingUtils").isNewsletterMessageForwardLoggingEnabled()&&d("WAWebMsgGetters").getHasOriginatedFromNewsletter(a)&&d("WAWebLogNewsletterMessageForward").logNewsletterMessagForward(a,e);return d("WAPromiseProps").promiseProps({message:a,canForward:d("WAWebMsgActionCapability").canForwardMsg(a)&&(d("WAWebMsgCollection").MsgCollection.get(a.id)!=null||d("WAWebMsgGetters").getIsEphemeral(a))})}));a=(yield h.all(e.filter(function(a){return a.canSend}).map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.isUser&&a.contact.isContactBlocked?d("WAWebBlockContactAction").unblockContact(a.contact):(h||(h=b("Promise"))).resolve(!0);e=(yield (h||(h=b("Promise"))).all([g,e]));e=e[0];var i=c("lodash").map(c("lodash").filter(e,{canForward:!0}),"message");e=c("lodash").map(c("lodash").filter(e,{canForward:!1}),"message");return d("WAPromiseProps").promiseProps({chat:a,undelivered:d("WAWebChatForwardMessage").forwardMessages(a,i,!0,f),msgsThatCanBeforwarded:i,msgsThatCannotBeForwarded:e})});return function(b){return a.apply(this,arguments)}}())));a=c("lodash").compact(a.map(function(a){var b=a.chat,d=a.undelivered,e=a.msgsThatCanBeforwarded;a=a.msgsThatCannotBeForwarded;var f=null;(d.length||a.length)&&(f=c("WAWebFormatForwardErrorChatAction")({chat:b,undelivered:d,canForward:e,cannotForward:a}));return f!=null&&f!==""?{chat:b,reason:f}:null}));if(a.length)throw new(c("WAWebForwardErrorChatAction"))(a);else return!0});return i.apply(this,arguments)}g.forwardMessagesToChats=a}),98);
__d("WAWebFrequentlyForwardedWarning.react",["fbt","WAWebCellFrame.react","WAWebExternalLink.react","WAWebFaqUrl","WAWebHighlyForwardedIcon","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||c("react");function a(a){var b=a.frequentlyForwardedCount;a=a.totalCount;b=j.jsxs("span",{children:[b===1&&a===1?h._("__JHASH__u9y9vWwQqR-__JHASH__"):h._("__JHASH__MJ9CvlrZLhO__JHASH__")," ",j.jsx(d("WAWebExternalLink.react").ExternalLink,{href:d("WAWebFaqUrl").getFrequentlyForwardedFaqUrl(),children:h._("__JHASH__RR1bpeluTQm__JHASH__")})]});return j.jsxs("div",{className:"x78zum5 x150wa6m x1w7fho5",children:[j.jsx("div",{className:"x78zum5 x6s0dn4 xpdqn1h xmupa6y x1wm35g",children:j.jsx(d("WAWebHighlyForwardedIcon").HighlyForwardedIcon,{width:24,height:24})}),j.jsx(c("WAWebCellFrame.react"),{theme:"plain",primary:b,idle:!0})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAWebNewsletterForwardConfirmationModal",["fbt","WAWebConfirmPopup.react","WAWebFbtCommon","WAWebModalManager","react"],(function(a,b,c,d,e,f,g,h){var i,j=i||(i=d("react"));b=i;var k=b.useCallback,l=b.useState;function m(){d("WAWebModalManager").ModalManager.close()}function a(a){var b=a.forwardToChat,e=a.handleConfirm;a=l(!1);var f=a[0],g=a[1];a=k(function(){g(!0),e()["finally"](function(){g(!1)})},[e]);return j.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{okSpinner:f,okDisabled:f,cancelDisabled:f,onOK:a,okText:n.okText(),title:n.title(b.name),onCancel:m,cancelText:c("WAWebFbtCommon")("Cancel"),children:n.body()})}a.displayName=a.name+" [from "+f.id+"]";var n={title:function(a){return h._("__JHASH__8S0ET8aZ3DY__JHASH__",[h._param("channel-name",a)])},body:function(){return h._("__JHASH__8dr3e4DjJO2__JHASH__")},okText:function(){return h._("__JHASH__uEoTTP4tATP__JHASH__")}};g.NewsletterForwardConfirmationModal=a}),98);
__d("WAWebForwardMessageModal",["fbt","Promise","WAFilteredCatch","WALogger","WAWebChatModel","WAWebCmd","WAWebConfirmPopup.react","WAWebConstantsDeprecated","WAWebContactGetters","WAWebFbtCommon","WAWebForwardErrorChatAction","WAWebForwardMediaWithCaptionPopupNux.react","WAWebForwardMediaWithCaptionPreview","WAWebForwardMediaWithCaptionsGatingUtils","WAWebForwardMessagesToChat","WAWebFrequentlyForwardedWarning.react","WAWebFrontendMsgGetters","WAWebMessageYourselfMetricUtils","WAWebModalManager","WAWebMsgGetters","WAWebMsgModelUtils","WAWebNewsletterForwardConfirmationModal","WAWebNewsletterFutureProofUtils","WAWebNewsletterGatingUtils","WAWebNewsletterSendMsgAction","WAWebNux","WAWebSelectModal.react","WAWebSendTextMsgChatAction","WAWebServerPropConstants","asyncToGeneratorRuntime","react","stylex","useWAWebNux"],(function(a,b,c,d,e,f,g,h){var i,j,k,l;function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[FMC][handleForwardConfirmed] failed to append message with forwarded media"]);m=function(){return a};return a}var n=l||c("react"),o=(j||(j=d("react"))).useState,p={forwardMediaWithCaptionPreview:{zIndex:"x11uqc5h",height:"xv32h1t",width:"xh8yej3",backgroundColor:"xtl5do8",boxSizing:"x9f619",boxShadow:"xpx74rz",$$css:!0}},q=1;function a(a){var e=a.msgs,f=a.onForward,g=a.onClose,h=e[0];a=d("WAWebFrontendMsgGetters").getChat(h);var i=h.type!=="video"&&h.type!=="image"?"message":h.type,j=e.some(d("WAWebMsgGetters").getIsFrequentlyForwarded),k=e.some(function(a){return a.isForwarded}),l=e.filter(function(a){return!d("WAWebMsgGetters").getIsFrequentlyForwarded(a)&&a.getForwardingScoreWhenForwarded()===c("WAWebConstantsDeprecated").FREQUENTLY_FORWARDED_SENTINEL});l=l.length?n.jsx(c("WAWebFrequentlyForwardedWarning.react"),{frequentlyForwardedCount:l.length,totalCount:e.length}):void 0;var m=j?q:d("WAWebServerPropConstants").MULTICAST_LIMIT_GLOBAL,p=d("WAWebMsgModelUtils").getMediaMsgWithCaptionForForwarding(e),y=o(!!p),z=y[0],A=y[1];y=c("useWAWebNux")(d("WAWebNux").NUX.FORWARD_MEDIA_WITH_CAPTION);var B=y[0],C=y[1];y=o(!1);var D=y[0],E=y[1];y=function(){A(!1)};var F=o(null),G=F[0],H=F[1];F=function(a){H(a)};function I(a,b){b===void 0&&(b=!1);var c=a.find(function(a){return a.isNewsletter});return c!=null?d("WAWebModalManager").ModalManager.open(n.jsx(d("WAWebNewsletterForwardConfirmationModal").NewsletterForwardConfirmationModal,{forwardToChat:c,handleConfirm:function(){return J(a,b)}})):J(a,b)}function J(a,b){return K.apply(this,arguments)}function K(){K=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b===void 0&&(b=!1);if(z&&B&&!a.some(v)){E(!0);return}var h=a[0],i=d("WAWebForwardMessagesToChat").forwardMessagesToChats(e,a,z)["catch"](d("WAFilteredCatch").filteredCatch(c("WAWebForwardErrorChatAction"),function(a){return u(a.reasons)}))["finally"](function(){return t(G,a)});h.isNewsletter&&(yield i);g();f==null?void 0:f(e);return d("WAWebCmd").Cmd.openChatFromUnread(a[0]).then(function(c){c&&d("WAWebContactGetters").getIsMe(a[0].contact)&&d("WAWebMessageYourselfMetricUtils").UiMessageYourselfSearchAction.logMessageYourselfOpenedEvent(a[0],b)})});return K.apply(this,arguments)}i={msgType:i,hasFrequentlyForwarded:j,hasForwarded:k,onConfirm:I,maxItems:m,excludeChat:a,isDisabled:function(a){return w(a,h)},customItemSecondaryText:x,excludeBroadcast:!0,title:s.title(e.length,h),includeNewsletters:d("WAWebNewsletterGatingUtils").isNewsletterForwardToNewsletterEnabled(),listType:d("WAWebSelectModal.react").ListType.ChatSelectModal,customHeader:l,ephemeralIcon:"chat-list",hasDirtyAppendMsgComposeBox:G!=null&&G!=="",previewComponent:n.jsx(r,{includeCaption:z,handleAppendMessage:F,handleRemoveCaption:y,msgs:e,mediaMsgWithCaption:p})};return n.jsxs(n.Fragment,{children:[n.jsx(d("WAWebSelectModal.react").SelectModal,babelHelpers["extends"]({},i,{tsNavigationData:a.isNewsletter&&d("WAWebNewsletterGatingUtils").isNewsletterTSLEnabled()?{surface:"channel-forward",extras:{channelWid:a.id}}:void 0})),D&&n.jsx(c("WAWebForwardMediaWithCaptionPopupNux.react"),{onOk:function(){C(),E(!1)}})]})}a.displayName=a.name+" [from "+f.id+"]";function r(a){var b=a.msgs,e=a.mediaMsgWithCaption,f=a.includeCaption,g=a.handleRemoveCaption;a=a.handleAppendMessage;var h=b.length===1&&d("WAWebMsgGetters").getIsMedia(b[0])&&!b[0].caption;b=b[0];if(d("WAWebFrontendMsgGetters").getChat(b).isNewsletter)return null;if(e)return n.jsx("div",{className:(k||(k=c("stylex")))([p.forwardMediaWithCaptionPreview]),children:n.jsx(c("WAWebForwardMediaWithCaptionPreview"),{msg:e,displayCaptionText:f,onRemoveCaptionSelect:g,onAppendMessage:a})});return h&&d("WAWebForwardMediaWithCaptionsGatingUtils").isAppendMessageWhenForwardingMediaWithoutCaptionEnabled()?n.jsx("div",{className:(k||(k=c("stylex")))([p.forwardMediaWithCaptionPreview]),children:n.jsx(c("WAWebForwardMediaWithCaptionPreview"),{msg:b,displayCaptionText:f,onRemoveCaptionSelect:g,onAppendMessage:a})}):null}var s={title:function(a,b){return d("WAWebMsgGetters").getIsNewsletterMsg(b)?h._("__JHASH__3SJFCQq0qE-__JHASH__",[h._plural(a)]):h._("__JHASH__IIflRvLsiRu__JHASH__",[h._plural(a)])}};function t(a,c){if(a==null||a==="")return;c=c.map(function(b){return b.isNewsletter?d("WAWebNewsletterSendMsgAction").sendNewsletterTextMsg(b,a,{}):d("WAWebSendTextMsgChatAction").sendTextMsgToChat(b,a)});return(i||(i=b("Promise"))).all(c)["catch"](function(a){d("WALogger").DEV(m()).devConsole({error:a})})}function u(a){a=a.map(function(a){var b=a.chat;a=a.reason;return n.jsxs("p",{children:[b.formattedTitle," : ",a]},b.id.toString())});d("WAWebModalManager").ModalManager.open(n.jsx(d("WAWebConfirmPopup.react").ConfirmPopup,{onOK:function(){return d("WAWebModalManager").ModalManager.close()},okText:c("WAWebFbtCommon")("OK"),children:a}),void 0)}function v(a){return a instanceof d("WAWebChatModel").Chat&&a.isNewsletter}function w(a,b){return!v(a)?!1:!d("WAWebNewsletterFutureProofUtils").isMsgTypeSupported(b.type)}function x(a,b){if(!b||!v(a))return;return h._("__JHASH__DX3LyTu06T-__JHASH__")}g["default"]=a}),98);